[ {
  "component" : "Menus",
  "summary" : "[e10s] \"Bookmark this Frame\" in remote browser fails, causes NS_ERROR_XPC_CANT_PASS_CPOW_TO_NATIVE error and unsafe CPOW usage warnings",
  "reporter" : "moz-ian@perix.co.uk",
  "assigned" : "moz-ian@perix.co.uk",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with a frame on it in an e10s window\n2) Right-click in the frame, and choose \"This Frame\" > \"Bookmark This Frame\"\n\nThis causes some \"unsafe CPOW usage\" warnings in the Browser Console, and an \"NS_ERROR_XPC_CANT_PASS_CPOW_TO_NATIVE: It's illegal to pass a CPOW to native code arg 0 [nsINavBookmarksService.getBookmarkIdsForURI]\" error, which means it fails.\n\nIn browser/base/content/nsContextMenu.js:\n\n  addBookmarkForFrame: function CM_addBookmarkForFrame() {\n    var doc = this.target.ownerDocument; <-- Causes CPOW warning\n    var uri = doc.documentURIObject; <-- Causes CPOW warning\n    urlSecurityCheck(this.linkURL, this.principal);\n\n\nin toolkit/components/places/PlacesUtils.jsm\n\n  getMostRecentBookmarkForURI:\n  function PU_getMostRecentBookmarkForURI(aURI) {\n    var bmkIds = this.bookmarks.getBookmarkIdsForURI(aURI); <-- Causes NS_ERROR_XPC_CANT_PASS_CPOW_TO_NATIVE error\n    for (var i = 0; i < bmkIds.length; i++) {",
  "comments" : [ {
    "text" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with a frame on it in an e10s window\n2) Right-click in the frame, and choose \"This Frame\" > \"Bookmark This Frame\"\n\nThis causes some \"unsafe CPOW usage\" warnings in the Browser Console, and an \"NS_ERROR_XPC_CANT_PASS_CPOW_TO_NATIVE: It's illegal to pass a CPOW to native code arg 0 [nsINavBookmarksService.getBookmarkIdsForURI]\" error, which means it fails.\n\nIn browser/base/content/nsContextMenu.js:\n\n  addBookmarkForFrame: function CM_addBookmarkForFrame() {\n    var doc = this.target.ownerDocument; <-- Causes CPOW warning\n    var uri = doc.documentURIObject; <-- Causes CPOW warning\n    urlSecurityCheck(this.linkURL, this.principal);\n\n\nin toolkit/components/places/PlacesUtils.jsm\n\n  getMostRecentBookmarkForURI:\n  function PU_getMostRecentBookmarkForURI(aURI) {\n    var bmkIds = this.bookmarks.getBookmarkIdsForURI(aURI); <-- Causes NS_ERROR_XPC_CANT_PASS_CPOW_TO_NATIVE error\n    for (var i = 0; i < bmkIds.length; i++) {",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-23T12:05:33Z"
  }, {
    "text" : "Created attachment 8567881\nMake \"Bookmark This Frame\" use messages so it doesn't cause an NS_ERROR_XPC_CANT_PASS_CPOW_TO_NATIVE\n\nRelies on the work in bug 1133577\n\nDoesn't currently fix the first CPOW from \"this.target.ownerDocument\", since I'm not sure of the best way to do so.  Pass the ownerDocument up in gContextMenuContentData? Will that not be too heavyweight?  This is also an issue for bug 1134424 (Save Image/Audio/Video).  Both places need the actual document to pass on to other code elsewhere.\n\nExposes a bunch more \"unsafe CPOW usage\" warnings in PlacesUIUtils.getDescriptionFromDocument(), which I feel should be left for another bug, or at least done later once this is working again.\n\nalso fixes a CPOW that wasn't hit before:\n\nin browser/base/content/nsContextMenu.js\n\n  addBookmarkForFrame: function CM_addBookmarkForFrame() {\n    var doc = this.target.ownerDocument;\n    var uri = doc.documentURIObject;\n\n    var itemId = PlacesUtils.getMostRecentBookmarkForURI(uri);\n    if (itemId == -1) {\n      var title = doc.title; <- Causes CPOW warning\n      var description = PlacesUIUtils.getDescriptionFromDocument(doc);",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-23T12:37:03Z"
  }, {
    "text" : "Created attachment 8571681\nMake \"Bookmark This Frame\" use messages so it doesn't cause an NS_ERROR_XPC_CANT_PASS_CPOW_TO_NATIVE\n\nUpdated for latest bug 1133577 patch",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-03-03T00:51:11Z"
  }, {
    "text" : "Hey Ian - did this fall through the cracks? Did this patch need review?",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-05-05T21:05:35Z"
  }, {
    "text" : "(In reply to Mike Conley (:mconley) - Needinfo me! from comment #3)\n> Hey Ian - did this fall through the cracks? Did this patch need review?\n\nNo, I was just posting a work-in-progress for safe-keeping (especially since I junked my dev VM and made a new one in the interim).\n\nShould have a final patch soonish though, this and the related Bug 1141350 are at the top of my to-do list.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-05-05T21:41:02Z"
  }, {
    "text" : "Created attachment 8603052\nMozReview Request: bz://1135619/Kwan\n\n/r/8387 - Bug 1135619 - Make \"Bookmark This Frame\" fetch the document title and description via message so it is safe in e10s\n\nPull down this commit:\n\nhg pull -r d6970c40dff090662669c01c306e4085f81e7762 https://reviewboard-hg.mozilla.org/gecko/",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-05-07T22:46:48Z"
  }, {
    "text" : "Comment on attachment 8571681\nMake \"Bookmark This Frame\" use messages so it doesn't cause an NS_ERROR_XPC_CANT_PASS_CPOW_TO_NATIVE\n\nAs an FYI, actually saving the bookmark currently isn't possible as the save button never activates due to bug 951651, but will be fixed by bug 1161882.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-05-07T22:50:03Z"
  }, {
    "text" : "Comment on attachment 8603052\nMozReview Request: bz://1135619/Kwan\n\nhttps://reviewboard.mozilla.org/r/8385/#review7145\n\nLooks great!",
    "authour" : "gkrizsanits@mozilla.com",
    "created" : "2015-05-11T10:01:48Z"
  }, {
    "text" : "Try:\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=3162e2bd3047\ngreen with one intermittent bug 961215",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-05-11T14:07:17Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/606be3189b85",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-05-11T19:35:56Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/606be3189b85",
    "authour" : "cbook@mozilla.com",
    "created" : "2015-05-12T12:31:04Z"
  }, {
    "text" : "Comment on attachment 8603052\nMozReview Request: bz://1135619/Kwan",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-06-10T15:35:34Z"
  }, {
    "text" : "Created attachment 8619558\nMozReview Request: Bug 1135619 - Make \"Bookmark This Frame\" fetch the document title and description via message so it is safe in e10s",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-06-10T15:35:34Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-23T12:37:03Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-05-12T12:31:04Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "cbook@mozilla.com",
      "date" : "2015-05-12T12:31:04Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-23T12:37:03Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "moz-ian@perix.co.uk"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-23T12:37:14Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1133577"
    }, {
      "name" : "blassey.bugs@lassey.us",
      "date" : "2015-02-24T21:18:52Z",
      "what" : "cf_tracking_e10s",
      "removed" : "?",
      "added" : "m8+"
    }, {
      "name" : "blassey.bugs@lassey.us",
      "date" : "2015-02-24T21:19:21Z",
      "what" : "cf_tracking_e10s",
      "removed" : "m8+",
      "added" : "m7+"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-03T00:51:11Z",
      "what" : "attachments.isobsolete:8567881",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-09T23:47:49Z",
      "what" : "see_also",
      "removed" : "",
      "added" : "https://bugzilla.mozilla.org/show_bug.cgi?id=1141350"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-05-05T21:05:35Z",
      "what" : "cc",
      "removed" : "",
      "added" : "moz-ian@perix.co.uk"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-05-07T22:46:48Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gkrizsanits@mozilla.com"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-05-07T22:50:03Z",
      "what" : "attachments.isobsolete:8571681",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-05-11T14:07:17Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-05-11T19:35:56Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-05-11T19:35:56Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-05-12T12:31:04Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 41"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-05-12T12:31:04Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-05-12T12:31:04Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-05-12 05:31:04"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-05-12T12:31:04Z",
      "what" : "cf_status_firefox41",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-06-10T15:35:34Z",
      "what" : "attachments.isobsolete:8603052",
      "removed" : "0",
      "added" : "1"
    } ],
    "flagEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-23T12:37:03Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567881,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-03T00:51:11Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8567881,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-05-05T21:05:35Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-05-05T21:41:02Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(moz-ian@perix.co.uk)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-05-07T22:46:48Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8603052,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gkrizsanits@mozilla.com",
      "date" : "2015-05-11T10:01:48Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gkrizsanits@mozilla.com)",
      "added" : "",
      "attachmentId" : 8603052,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-06-10T15:35:34Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8619558,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135619,
  "cclist" : [ "blassey.bugs@lassey.us", "gkrizsanits@mozilla.com", "mconley@mozilla.com", "moz-ian@perix.co.uk" ]
}, {
  "component" : "General",
  "summary" : "The focusring for the controls in reader mode doesn't match the visible borders of the buttons",
  "reporter" : "andrei.vaida@softvision.ro",
  "assigned" : "jaws@mozilla.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "P4",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Created attachment 8567817\nscreenshot from Windows 8.1 (x86)\n\nReproducible on:\nNightly 38.0a1 (2015-02-22)\n\nAffected platforms:\nWindows 8.1 (x86), Ubuntu 14.04 (x64)\n\nSteps to reproduce:\n1. Launch Firefox with a clean profile.\n2. Enable Reader Mode from about:config by setting 'reader.parse-on-load.enabled' to true. Restart the browser.\n3. Open an article from the web - (e.g.) http://www.bbc.com/news/world-australia-31579804\n4. Enter Reader Mode by clicking the associated button from the Location Bar.\n5. Click any of the buttons available in the sidebar.\n\nExpected result:\nClicking the page styling button [Aa] for example, brings up the styling options pane without any UI issues. \n\nActual result:\nOnce clicked, a selection rectangle is placed on the button in question.\n\nNotes:\n- Happens only on Windows and Linux, Mac *is not* affected.",
  "comments" : [ {
    "text" : "Created attachment 8567817\nscreenshot from Windows 8.1 (x86)\n\nReproducible on:\nNightly 38.0a1 (2015-02-22)\n\nAffected platforms:\nWindows 8.1 (x86), Ubuntu 14.04 (x64)\n\nSteps to reproduce:\n1. Launch Firefox with a clean profile.\n2. Enable Reader Mode from about:config by setting 'reader.parse-on-load.enabled' to true. Restart the browser.\n3. Open an article from the web - (e.g.) http://www.bbc.com/news/world-australia-31579804\n4. Enter Reader Mode by clicking the associated button from the Location Bar.\n5. Click any of the buttons available in the sidebar.\n\nExpected result:\nClicking the page styling button [Aa] for example, brings up the styling options pane without any UI issues. \n\nActual result:\nOnce clicked, a selection rectangle is placed on the button in question.\n\nNotes:\n- Happens only on Windows and Linux, Mac *is not* affected.",
    "authour" : "andrei.vaida@softvision.ro",
    "created" : "2015-02-23T09:01:33Z"
  }, {
    "text" : "Created attachment 8567818\nscreenshot from Ubuntu 14.04 (x64)",
    "authour" : "andrei.vaida@softvision.ro",
    "created" : "2015-02-23T09:02:09Z"
  }, {
    "text" : "P4 as polish, but we handle this inconsistently. NI mmaslaney to see if UX want to prioritize this higher.",
    "authour" : "dolske@mozilla.com",
    "created" : "2015-03-05T00:58:47Z"
  }, {
    "text" : "Created attachment 8581677\nPatch",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-03-23T15:44:51Z"
  }, {
    "text" : "Comment on attachment 8581677\nPatch\n\nI was surprised by this patch as I expected something that would make the focus ring invisible when the focus is from the click and the user hasn't used keyboard navigation, but Jared explained to me on IRC that this patch fixes the sizing of the highlight and that after this it doesn't look bad anymore. I'll buy that, but I would like if the bug title/commit message could be tweaked a bit so that there's no possible confusion about what to expect from this patch.",
    "authour" : "florian@queze.net",
    "created" : "2015-03-23T22:25:16Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/cd9dda8f4cc1",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-03-23T22:56:21Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/d852fc6b7059",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-03-23T22:57:10Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/d852fc6b7059",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-03-24T16:32:31Z"
  }, {
    "text" : "It was my understanding that this patch should fix only the focus-ring placed on the main buttons from Reader View's controls bar. \n\nThe focus-rings now have the same size as the buttons themselves, but the other buttons from - say, \"Type controls\" [Aa], are still showing the same issue: http://i.imgur.com/hqAT0fd.png. Jared, are we planning to fix this in a separate bug?",
    "authour" : "andrei.vaida@softvision.ro",
    "created" : "2015-04-03T07:24:25Z"
  }, {
    "text" : "(In reply to Andrei Vaida, QA [:avaida] from comment #8)\n> The focus-rings now have the same size as the buttons themselves, but the\n> other buttons from - say, \"Type controls\" [Aa], are still showing the same\n> issue: http://i.imgur.com/hqAT0fd.png. Jared, are we planning to fix this in\n> a separate bug?\n\nThis issue seems to be isolated to Linux (Ubuntu 14.04 x64). I'm marking this fix as verified on Aurora 39.0a2 (2015-04-02), since Mac OS X 10.9.5 and Windows 7 (x64) are no longer affected, but I'll leave the ni? in place until we decide if the Linux-issue requires a separate bug or not.",
    "authour" : "andrei.vaida@softvision.ro",
    "created" : "2015-04-03T12:09:19Z"
  }, {
    "text" : "Yeah, we can file a separate issue for the focus rings in the popup on Linux. Thanks for verifying!",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-03T16:44:31Z"
  }, {
    "text" : "Comment on attachment 8581677\nPatch\n\nApproval Request Comment\n[Feature/regressing bug #]: reader view\n[User impact if declined]: focus ring for reader view controls doesn't look right\n[Describe test coverage new/current, TreeHerder]: landed on nightly\n[Risks and why]: low-risk, small CSS change\n[String/UUID change made/needed]: none",
    "authour" : "margaret.leibovic@gmail.com",
    "created" : "2015-04-03T19:11:08Z"
  }, {
    "text" : "Comment on attachment 8581677\nPatch\n\n39 (aurora currently) already has this fix.",
    "authour" : "sledru@mozilla.com",
    "created" : "2015-04-04T16:07:36Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-beta/rev/fd67405ba1de",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-06T15:23:18Z"
  }, {
    "text" : "Verified fixed on Beta 38.0b2-build1 (20150406174117) as well, using Windows 7 (x64), Ubuntu 14.04 (x64) and Mac OS X 10.9.5.\n\nPlease note that Ubuntu 14.04 (x64) is currently affected by Bug 1151415.",
    "authour" : "andrei.vaida@softvision.ro",
    "created" : "2015-04-07T11:57:14Z"
  }, {
    "text" : "Mistakenly filed against Firefox 38 and should be instead 38 Branch. Sorry for the spam. dkl",
    "authour" : "dkl@mozilla.com",
    "created" : "2015-04-13T22:48:00Z"
  } ],
  "status" : "VERIFIED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-23T15:45:15Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:32:31Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-04-03T12:09:19Z",
      "what" : "status",
      "removed" : "RESOLVED",
      "added" : "",
      "type" : "VERIFIED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:32:31Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-02-25T14:40:33Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1120735"
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-03-05T00:58:47Z",
      "what" : "priority",
      "removed" : "--",
      "added" : "P4"
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-03-05T00:58:47Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmaslaney@mozilla.com"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-17T04:45:08Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmucci@mozilla.com"
    }, {
      "name" : "florian@queze.net",
      "date" : "2015-03-17T21:27:07Z",
      "what" : "cc",
      "removed" : "",
      "added" : "florian@queze.net"
    }, {
      "name" : "florian@queze.net",
      "date" : "2015-03-20T19:04:25Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-23T15:45:15Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-23T15:52:39Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "2"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-23T15:52:39Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "39.2 - 23 Mar"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-23T15:54:28Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1132074"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-23T22:38:26Z",
      "what" : "summary",
      "removed" : "Clicking a button from the controls sidebar places a selection rectangle on it",
      "added" : "The focusring for the controls in reader mode doesn't match the visible borders of the buttons"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-24T15:27:42Z",
      "what" : "cf_fx_iteration",
      "removed" : "39.2 - 23 Mar",
      "added" : "39.3 - 30 Mar"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:32:31Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:32:31Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-24 09:32:31"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:32:31Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-03-25T10:34:13Z",
      "what" : "cc",
      "removed" : "",
      "added" : "florin.mezei@softvisioninc.eu"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-03-25T10:34:13Z",
      "what" : "qa_contact",
      "removed" : "",
      "added" : "andrei.vaida@softvision.ro"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-04-03T12:09:19Z",
      "what" : "cf_status_firefox39",
      "removed" : "fixed",
      "added" : "verified"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-04-06T12:16:20Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1151415"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-06T15:23:18Z",
      "what" : "cf_status_firefox38",
      "removed" : "affected",
      "added" : "fixed"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-04-07T11:57:14Z",
      "what" : "cf_status_firefox38",
      "removed" : "fixed",
      "added" : "verified"
    }, {
      "name" : "dkl@mozilla.com",
      "date" : "2015-04-13T22:48:00Z",
      "what" : "version",
      "removed" : "Firefox 38",
      "added" : "38 Branch"
    } ],
    "flagEvents" : [ {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-02-23T09:01:33Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "QE_VERIFY",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-03-05T00:58:47Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-23T15:44:51Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8581677,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-23T15:45:15Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(mmaslaney@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-23T15:52:39Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "BACKLOG",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "florian@queze.net",
      "date" : "2015-03-23T22:25:16Z",
      "what" : "flagtypes.name",
      "removed" : "review?(florian@queze.net)",
      "added" : "",
      "attachmentId" : 8581677,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-04-03T07:24:25Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-03T16:44:31Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "margaret.leibovic@gmail.com",
      "date" : "2015-04-03T19:11:08Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8581677,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      }, {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "sledru@mozilla.com",
      "date" : "2015-04-04T16:07:36Z",
      "what" : "flagtypes.name",
      "removed" : "approval-mozilla-aurora?, approval-mozilla-beta?",
      "added" : "",
      "attachmentId" : 8581677,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "DENIED"
      }, {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135589,
  "cclist" : [ "florian@queze.net", "florin.mezei@softvisioninc.eu", "jaws@mozilla.com", "mmaslaney@mozilla.com", "mmucci@mozilla.com" ]
}, {
  "component" : "Build Config",
  "summary" : "Firefox 64-bit fails to link using VS 2015: \"fallible.obj : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value 'MT_StaticRelease' in nsBrowserApp.obj\"",
  "reporter" : "xavier114fch@gmail.com",
  "assigned" : "nobody@mozilla.org",
  "created" : null,
  "operatingSystem" : "Windows NT",
  "hardware" : "x86_64",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "User Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:38.0) Gecko/20100101 Firefox/38.0\nBuild ID: 20150222030206\n\nSteps to reproduce:\n\nBuild 64-bit Firefox from trunk using VS 2015 CTP5. I have applied the patches from Bug 1119072 (Part 7 and the NOT for checkin one) and Bug 1119776 (Part 8) in order to make it compile.\n\n\nActual results:\n\nfirefox.exe could not be linked and out came this error:\n\n 1:22.35 nsBrowserApp.obj\n 1:23.20 nsBrowserApp.cpp\n 1:23.21 firefox.exe\n 1:23.33 Executing: link -NOLOGO -OUT:firefox.exe -PDB:firefox.pdb -ENTRY:wmainC\nRTStartup -SUBSYSTEM:WINDOWS,6.01 -STACK:2097152 -LARGEADDRESSAWARE -NXCOMPAT -D\nYNAMICBASE /HEAP:0x40000 -DELAYLOAD:mozglue.dll @h:\\mozilla-inbound\\obj\\browser\\\napp\\tmposlr_y.list module.res ../../xpcom/glue/standalone/staticruntime/xpcomglu\ne_staticruntime.lib ../../mozglue/build/mozglue.lib kernel32.lib user32.lib gdi3\n2.lib winmm.lib wsock32.lib advapi32.lib secur32.lib netapi32.lib delayimp.lib\n 1:23.33 h:\\mozilla-inbound\\obj\\browser\\app\\tmposlr_y.list:\n 1:23.33     nsBrowserApp.obj\n 1:23.33     ..\\..\\memory\\fallible\\fallible.obj\n 1:23.33\n 1:23.33 fallible.obj : error LNK2038: mismatch detected for 'RuntimeLibrary': v\nalue 'MD_DynamicRelease' doesn't match value 'MT_StaticRelease' in nsBrowserApp.\nobj\n 1:23.33\n 1:23.33 firefox.exe : fatal error LNK1319: 1 mismatches detected\n 1:23.33\n 1:23.34 h:/mozilla-inbound/config/rules.mk:658: recipe for target 'firefox.exe'\n failed\n 1:23.34 mozmake.EXE[5]: *** [firefox.exe] Error 1319\n 1:23.34 h:/mozilla-inbound/config/recurse.mk:74: recipe for target 'browser/app\n/target' failed\n 1:23.34 mozmake.EXE[4]: *** [browser/app/target] Error 2\n\n\nExpected results:\n\nIt should have built successfully.",
  "comments" : [ {
    "text" : "User Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:38.0) Gecko/20100101 Firefox/38.0\nBuild ID: 20150222030206\n\nSteps to reproduce:\n\nBuild 64-bit Firefox from trunk using VS 2015 CTP5. I have applied the patches from Bug 1119072 (Part 7 and the NOT for checkin one) and Bug 1119776 (Part 8) in order to make it compile.\n\n\nActual results:\n\nfirefox.exe could not be linked and out came this error:\n\n 1:22.35 nsBrowserApp.obj\n 1:23.20 nsBrowserApp.cpp\n 1:23.21 firefox.exe\n 1:23.33 Executing: link -NOLOGO -OUT:firefox.exe -PDB:firefox.pdb -ENTRY:wmainC\nRTStartup -SUBSYSTEM:WINDOWS,6.01 -STACK:2097152 -LARGEADDRESSAWARE -NXCOMPAT -D\nYNAMICBASE /HEAP:0x40000 -DELAYLOAD:mozglue.dll @h:\\mozilla-inbound\\obj\\browser\\\napp\\tmposlr_y.list module.res ../../xpcom/glue/standalone/staticruntime/xpcomglu\ne_staticruntime.lib ../../mozglue/build/mozglue.lib kernel32.lib user32.lib gdi3\n2.lib winmm.lib wsock32.lib advapi32.lib secur32.lib netapi32.lib delayimp.lib\n 1:23.33 h:\\mozilla-inbound\\obj\\browser\\app\\tmposlr_y.list:\n 1:23.33     nsBrowserApp.obj\n 1:23.33     ..\\..\\memory\\fallible\\fallible.obj\n 1:23.33\n 1:23.33 fallible.obj : error LNK2038: mismatch detected for 'RuntimeLibrary': v\nalue 'MD_DynamicRelease' doesn't match value 'MT_StaticRelease' in nsBrowserApp.\nobj\n 1:23.33\n 1:23.33 firefox.exe : fatal error LNK1319: 1 mismatches detected\n 1:23.33\n 1:23.34 h:/mozilla-inbound/config/rules.mk:658: recipe for target 'firefox.exe'\n failed\n 1:23.34 mozmake.EXE[5]: *** [firefox.exe] Error 1319\n 1:23.34 h:/mozilla-inbound/config/recurse.mk:74: recipe for target 'browser/app\n/target' failed\n 1:23.34 mozmake.EXE[4]: *** [browser/app/target] Error 2\n\n\nExpected results:\n\nIt should have built successfully.",
    "authour" : "xavier114fch@gmail.com",
    "created" : "2015-02-23T08:36:06Z"
  }, {
    "text" : "This looks like a regression in MSVC 2015, which should be reported to Microsoft so that they can fix it.\n\nSpecifically, compiling this source:\n\n   struct fallible_t { };\n   const fallible_t fallible = {};\n\ndoesn't lead to a .obj containing the /FAILIFMISMATCH:RuntimeLibrary=<something> linker flag in VS 2013 and earlier, while, according to your error message, it does with 2015.",
    "authour" : "mh+mozilla@glandium.org",
    "created" : "2015-02-24T09:42:38Z"
  }, {
    "text" : "Note, this is something we /can/ workaround on our end, but I'd rather not have to.",
    "authour" : "mh+mozilla@glandium.org",
    "created" : "2015-02-24T09:43:09Z"
  }, {
    "text" : "The VS2013 fallible.obj is small (2K), as you'd expect.\n\nThe VS2015 fallible.obj has a ton more stuff (18K). I'm just looking with a hex editor so I don't really understand the content, but I do see lots of \"std::\" names. I bet one of those is triggering the FAILIFMISMATCH, not the compiler change per se.\n\nMaybe it's related to the attachment 8546588 in our patch queues?",
    "authour" : "dmajor@mozilla.com",
    "created" : "2015-05-12T20:08:35Z"
  }, {
    "text" : "(In reply to David Major [:dmajor] from comment #3)\n> Maybe it's related to the attachment 8546588 in\n> our patch queues?\n\nSee comment 1: this happens without including a single header.",
    "authour" : "mh+mozilla@glandium.org",
    "created" : "2015-05-12T21:27:43Z"
  }, {
    "text" : "OK. I didn't think you had tried it yourself. It sounded like you were guessing based on the bug reporter's data.",
    "authour" : "dmajor@mozilla.com",
    "created" : "2015-05-12T21:36:18Z"
  }, {
    "text" : "Looking back, I didn't, but fallible.cpp only includes fallible.h, which includes nothing else... but we force include mozilla-config.h everywhere... that could be the root cause.",
    "authour" : "mh+mozilla@glandium.org",
    "created" : "2015-05-12T22:22:53Z"
  }, {
    "text" : "The extra content comes from |#include <string>| in Char16.h. Prior to VS2015, MSVC got to avoid most of this code. If I send VS2015 down the old VS2013 codepath, the pre-processed file becomes much, much smaller. (Though, it doesn't compile, of course)",
    "authour" : "dmajor@mozilla.com",
    "created" : "2015-05-13T19:27:02Z"
  }, {
    "text" : "Created attachment 8606446\nDefine ELFHACK_BUILD\n\nGlandium told me to try this. It works. I'm not sure if he meant it as a real fix or a local workaround.",
    "authour" : "dmajor@mozilla.com",
    "created" : "2015-05-15T19:35:49Z"
  }, {
    "text" : "Patch applied and I've got this using VS 2015 RC:\n\n 2:41.02 cd builtins; h:/mozilla-build/mozmake/mozmake.EXE libs\n 2:41.64 LINK : fatal error LNK1104: cannot open file 'mozglue.lib'\n 2:41.64 ../../../coreconf/rules.mk:285: recipe for target 'h:/mozilla-inbound/obj/security/nss/lib/ckfw/builtins/nssckbi.dll' failed\n 2:41.64 mozmake.EXE[7]: *** [h:/mozilla-inbound/obj/security/nss/lib/ckfw/builtins/nssckbi.dll] Error 1104\n 2:41.66 ../../coreconf/rules.mk:77: recipe for target 'libs' failed\n 2:41.66 mozmake.EXE[6]: *** [libs] Error 2\n 2:41.66 Makefile:468: recipe for target 'libs-nss/lib/ckfw' failed\n 2:41.66 mozmake.EXE[5]: *** [libs-nss/lib/ckfw] Error 2\n 2:41.66 h:/mozilla-inbound/config/recurse.mk:70: recipe for target 'config/external/nss/target' failed\n 2:41.66 mozmake.EXE[4]: *** [config/external/nss/target] Error 2\n 2:41.66 h:/mozilla-inbound/config/recurse.mk:32: recipe for target 'compile' failed\n 2:41.66 mozmake.EXE[3]: *** [compile] Error 2\n 2:41.66 h:/mozilla-inbound/config/rules.mk:538: recipe for target 'default' failed\n 2:41.66 mozmake.EXE[2]: *** [default] Error 2\n 2:41.66 h:/mozilla-inbound/client.mk:400: recipe for target 'realbuild' failed\n 2:41.66 mozmake.EXE[1]: *** [realbuild] Error 2\n 2:41.66 client.mk:171: recipe for target 'build' failed\n 2:41.66 mozmake.EXE: *** [build] Error 2\n 2:41.67 0 compiler warnings present.",
    "authour" : "xavier114fch@gmail.com",
    "created" : "2015-05-16T04:53:24Z"
  }, {
    "text" : "(In reply to Xavier Fung from comment #9)\n> Patch applied and I've got this using VS 2015 RC:\n>  2:41.64 LINK : fatal error LNK1104: cannot open file 'mozglue.lib'\nYes, I filed bug 1165442 for that.",
    "authour" : "dmajor@mozilla.com",
    "created" : "2015-05-18T13:24:01Z"
  }, {
    "text" : "Comment on attachment 8606446\nDefine ELFHACK_BUILD\n\nReview of attachment 8606446:\n-----------------------------------------------------------------\n\n::: memory/fallible/moz.build\n@@ +31,5 @@\n> +\n> +    if CONFIG['_MSC_VER'] >= '1900':\n> +        # This further prevents the CRT name from getting into the .obj file,\n> +        # by avoiding pulling in a bunch of string code that uses the CRT.\n> +        DEFINES['ELFHACK_BUILD'] = True\n\nELFHACK_BUILD is, like its name suggests, something indicating that elfhack is being built. Which is obviously not the case here :)\nI'd suggest replacing ELFHACK_BUILD with something like DONT_INCLUDE_CHAR16_H. Or, in fact, just defining mozilla_Char16_h (and doing that both here and for elfhack, and remove the ELFHACK_BUILD reference in mozilla-config.h.in.",
    "authour" : "mh+mozilla@glandium.org",
    "created" : "2015-05-20T23:19:53Z"
  }, {
    "text" : "Ha - I knew you'd call that out :)",
    "authour" : "dmajor@mozilla.com",
    "created" : "2015-05-20T23:24:18Z"
  }, {
    "text" : "Created attachment 8608716\nDefine mozilla_Char16_h",
    "authour" : "dmajor@mozilla.com",
    "created" : "2015-05-21T14:00:52Z"
  }, {
    "text" : "Comment on attachment 8608716\nDefine mozilla_Char16_h\n\nReview of attachment 8608716:\n-----------------------------------------------------------------\n\n::: build/unix/elfhack/inject/moz.build\n@@ +17,5 @@\n>      \"%s.c\" % cpu,\n>  ]\n>  \n> +# Prevent Char16.h because this build happens during the export tier\n> +DEFINES['mozilla_Char16_h'] = 0\n\nI /think/ a bystander might think 0 would be better replaced with False, which would have the opposite effect as the wanted one. In fact, /I/ wondered that. So I think True would be a better value here and other places.\n\nNow, that comment got me wondering if that was still true... and it sure isn't. In fact elfhack builds fine with Char16.h included. So let's say this: keep your memory/fallible/moz.build change (with True instead of 0), and I'll file a separate bug to remove the ELFHACK_BUILD thing entirely.",
    "authour" : "mh+mozilla@glandium.org",
    "created" : "2015-05-22T01:35:06Z"
  }, {
    "text" : "Even better!",
    "authour" : "dmajor@mozilla.com",
    "created" : "2015-05-22T14:16:19Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/mozilla-inbound/rev/00c2e00e3c37",
    "authour" : "pulsebot@bots.tld",
    "created" : "2015-05-22T14:53:56Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/00c2e00e3c37",
    "authour" : "philringnalda@gmail.com",
    "created" : "2015-05-23T20:36:00Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "dmajor@mozilla.com",
      "date" : "2015-05-13T03:05:03Z",
      "what" : "status",
      "removed" : "UNCONFIRMED",
      "added" : "",
      "type" : "NEW"
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-05-23T20:36:00Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-05-23T20:36:00Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "xavier114fch@gmail.com",
      "date" : "2015-02-23T08:37:47Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1119082"
    }, {
      "name" : "xavier114fch@gmail.com",
      "date" : "2015-02-24T05:33:29Z",
      "what" : "component",
      "removed" : "Untriaged",
      "added" : "Build Config"
    }, {
      "name" : "mh+mozilla@glandium.org",
      "date" : "2015-02-24T09:42:38Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mh+mozilla@glandium.org"
    }, {
      "name" : "dmajor@mozilla.com",
      "date" : "2015-03-03T02:04:08Z",
      "what" : "cc",
      "removed" : "",
      "added" : "dmajor@bugmail.cc"
    }, {
      "name" : "dmajor@mozilla.com",
      "date" : "2015-05-13T03:05:03Z",
      "what" : "is_confirmed",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "dmajor@mozilla.com",
      "date" : "2015-05-13T19:27:02Z",
      "what" : "see_also",
      "removed" : "",
      "added" : "https://bugzilla.mozilla.org/show_bug.cgi?id=1119075"
    }, {
      "name" : "jwalden+bmo@mit.edu",
      "date" : "2015-05-13T23:42:24Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jwalden+bmo@mit.edu"
    }, {
      "name" : "dmajor@mozilla.com",
      "date" : "2015-05-21T14:00:52Z",
      "what" : "attachments.isobsolete:8606446",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-05-23T20:36:00Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 41"
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-05-23T20:36:00Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-05-23 13:36:00"
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-05-23T20:36:00Z",
      "what" : "cf_status_firefox41",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "cpeterson@mozilla.com",
      "date" : "2016-07-30T06:57:17Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1290645"
    } ],
    "flagEvents" : [ {
      "name" : "dmajor@mozilla.com",
      "date" : "2015-05-18T20:45:45Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8606446,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mh+mozilla@glandium.org",
      "date" : "2015-05-20T23:19:53Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mh+mozilla@glandium.org)",
      "added" : "",
      "attachmentId" : 8606446,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "dmajor@mozilla.com",
      "date" : "2015-05-21T14:00:52Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8608716,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mh+mozilla@glandium.org",
      "date" : "2015-05-22T01:35:06Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mh+mozilla@glandium.org)",
      "added" : "",
      "attachmentId" : 8608716,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135583,
  "cclist" : [ "dmajor@mozilla.com", "jwalden+bmo@mit.edu", "mh+mozilla@glandium.org" ]
}, {
  "component" : "Preferences",
  "summary" : "InContent Prefs - Don't allow text selection of categories",
  "reporter" : "staneck@gmail.com",
  "assigned" : "gioyik@gmail.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "User Agent: Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2305.3 Safari/537.36\n\nSteps to reproduce:\n\nCan you make it so that selecting a menu item does not cause a typing indicator[1] to appear? I also think it would feeld more \"native\" if you cannot select the text of the menu item.[2]\n\n[1]: http://i.imgur.com/J2SRH1p.png\n[2]: http://i.imgur.com/pJYXEg1.png",
  "comments" : [ {
    "text" : "User Agent: Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2305.3 Safari/537.36\n\nSteps to reproduce:\n\nCan you make it so that selecting a menu item does not cause a typing indicator[1] to appear? I also think it would feeld more \"native\" if you cannot select the text of the menu item.[2]\n\n[1]: http://i.imgur.com/J2SRH1p.png\n[2]: http://i.imgur.com/pJYXEg1.png",
    "authour" : "staneck@gmail.com",
    "created" : "2015-02-22T14:58:29Z"
  }, {
    "text" : "I actually just noticed that it does the typing indicator for all button elements, too. See http://i.imgur.com/s0bRCv2.gif",
    "authour" : "staneck@gmail.com",
    "created" : "2015-02-22T15:12:38Z"
  }, {
    "text" : "(In reply to Stanzilla from comment #1)\n> I actually just noticed that it does the typing indicator for all button\n> elements, too. See http://i.imgur.com/s0bRCv2.gif\n\nThis focus ring only appears when you start using the keyboard to navigate the UI, once you've done so, the focus ring reappears when you click. You get the same behavior in some parts of Windows. That focus ring is for accessibility too, so I suspect we'll ever remove that. \n\nI agree we should remove text selection from the category labels though (it is also consistent with the add-on manager). Let's use this bug for that.",
    "authour" : "ntim.bugs@gmail.com",
    "created" : "2015-02-22T18:19:52Z"
  }, {
    "text" : "To fix this bug :\n- Add -moz-user-select: none; to :\nhttp://mxr.mozilla.org/mozilla-central/source/toolkit/themes/shared/in-content/common.inc.css#545",
    "authour" : "ntim.bugs@gmail.com",
    "created" : "2015-02-22T18:22:01Z"
  }, {
    "text" : "(In reply to Tim Nguyen [:ntim] from comment #2)\n> (In reply to Stanzilla from comment #1)\n> > I actually just noticed that it does the typing indicator for all button\n> > elements, too. See http://i.imgur.com/s0bRCv2.gif\n> \n> This focus ring only appears when you start using the keyboard to navigate\n> the UI, once you've done so, the focus ring reappears when you click. You\n> get the same behavior in some parts of Windows. That focus ring is for\n> accessibility too, so I suspect we'll ever remove that. \nOh wait, I see you meant the text typing indicator (the gif didn't run for me at first).\nFor some reason, I can't seem to reproduce this.",
    "authour" : "ntim.bugs@gmail.com",
    "created" : "2015-02-22T22:15:04Z"
  }, {
    "text" : "Created attachment 8567718\n1135508.patch",
    "authour" : "gioyik@gmail.com",
    "created" : "2015-02-22T22:51:23Z"
  }, {
    "text" : "Comment on attachment 8567718\n1135508.patch\n\nThanks for the patch !\n\nThe patch looks good, but there seems to be some unrelated changes in it.\nBtw, can you ask :jaws for the next review ? My review is worth nothing :)",
    "authour" : "ntim.bugs@gmail.com",
    "created" : "2015-02-22T22:57:05Z"
  }, {
    "text" : "Hi Tim,\n\nYou are right the patches get mixed, sorry for that. I am going to attach a new one fixed.\n\nThank you",
    "authour" : "gioyik@gmail.com",
    "created" : "2015-02-22T23:13:18Z"
  }, {
    "text" : "Created attachment 8567722\n1135508.patch\n\nPatch fixed!",
    "authour" : "gioyik@gmail.com",
    "created" : "2015-02-22T23:14:20Z"
  }, {
    "text" : "We should probably apply this to category headers too, but the rest of the UI (like the checkboxes, radio buttons, etc. should remain selectable).",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-02-23T19:15:57Z"
  }, {
    "text" : "Those headers?:\n\nhttp://mxr.mozilla.org/mozilla-central/source/toolkit/themes/shared/in-content/common.inc.css#560\nhttp://mxr.mozilla.org/mozilla-central/source/toolkit/themes/shared/in-content/common.inc.css#567",
    "authour" : "gioyik@gmail.com",
    "created" : "2015-02-23T19:23:16Z"
  }, {
    "text" : "(In reply to Giovanny Gongora [:gioyik] from comment #10)\n\nJust http://mxr.mozilla.org/mozilla-central/source/toolkit/themes/shared/in-content/common.inc.css#567",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-02-23T19:55:08Z"
  }, {
    "text" : "Created attachment 8568394\n1135508.patch\n\nPatch v2",
    "authour" : "gioyik@gmail.com",
    "created" : "2015-02-24T06:32:28Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/32c84f014b3b",
    "authour" : "cbook@mozilla.com",
    "created" : "2015-02-25T08:30:25Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/32c84f014b3b",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-02-26T01:43:26Z"
  }, {
    "text" : "(In reply to Tim Nguyen [:ntim] from comment #2)\n> (In reply to Stanzilla from comment #1)\n> > I actually just noticed that it does the typing indicator for all button\n> > elements, too. See http://i.imgur.com/s0bRCv2.gif\n> \n> This focus ring only appears when you start using the keyboard to navigate\n> the UI, once you've done so, the focus ring reappears when you click. You\n> get the same behavior in some parts of Windows. That focus ring is for\n> accessibility too, so I suspect we'll ever remove that. \n> \n> I agree we should remove text selection from the category labels though (it\n> is also consistent with the add-on manager). Let's use this bug for that.\n\nI uploaded the gif in a better resolution: https://dl.dropboxusercontent.com/s/5xaudrhnbdutb6o/2015-02-22_17-20-03.mp4?dl=0\n\nI didn't use the keyboard for anything, I just clicked the button and the typing indicator appeared and started blinking as if you could write something into the button. That is not accessability thing.",
    "authour" : "staneck@gmail.com",
    "created" : "2015-02-26T14:22:28Z"
  }, {
    "text" : "Maybe you inadvertently turned on Caret browsing? Press F7 to disable it.",
    "authour" : "henry.fai.hang.chan@gmail.com",
    "created" : "2015-02-26T14:42:59Z"
  }, {
    "text" : "(In reply to henryfhchan from comment #16)\n> Maybe you inadvertently turned on Caret browsing? Press F7 to disable it.\n\nStanzilla, I think that might be the issue on your side. I've been able to reproduce this only with Caret Browsing Enabled.",
    "authour" : "ntim.bugs@gmail.com",
    "created" : "2015-02-26T16:33:15Z"
  }, {
    "text" : "(In reply to henryfhchan from comment #16)\n> Maybe you inadvertently turned on Caret browsing? Press F7 to disable it.\n\nYes, and you may want to see bug 993361 which is about the Caret being placed in the wrong position on XUL documents (such as the one in your video).",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-02-26T17:04:19Z"
  }, {
    "text" : "Oh. Indeed. I never heard the term Caret browsing before and I probably toggled it by accident. There is no indicator in the UI if it is currently enabled, right? Anyway, this bug can be closed.",
    "authour" : "staneck@gmail.com",
    "created" : "2015-02-26T23:18:29Z"
  }, {
    "text" : "*** Bug 1020285 has been marked as a duplicate of this bug. ***",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-03-18T18:16:49Z"
  }, {
    "text" : "Comment on attachment 8568394\n1135508.patch\n\nApproval Request Comment\n[Feature/regressing bug #]: new feature, in-content prefs (icp)\n[User impact if declined]: users will be able to highlight category names in the prefs in 38 but not in 39. we want to uplift all icp patches to firefox 38 so that the first release of the feature is solid.\n[Describe test coverage new/current, TreeHerder]: landed on mozilla-central for some time now.\n[Risks and why]: none expected.\n[String/UUID change made/needed]: none.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-03-24T13:12:27Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-aurora/rev/e8f8a378c098",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-03-24T17:03:32Z"
  }, {
    "text" : "Verified fixed on Windows 7 64bit, Ubuntu 13.10 32bit and Mac OSX 10.9.5 using Firefox 38 Beta 6 (buildID: 20150420134330) and latest Aurora 39.0a2 (buildID: 20150424004008).",
    "authour" : "camelia.badau@softvision.ro",
    "created" : "2015-04-24T13:55:51Z"
  } ],
  "status" : "VERIFIED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-22T18:19:52Z",
      "what" : "status",
      "removed" : "UNCONFIRMED",
      "added" : "",
      "type" : "NEW"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-22T22:55:26Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-26T01:43:26Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    }, {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-26T14:22:28Z",
      "what" : "status",
      "removed" : "RESOLVED",
      "added" : "",
      "type" : "REOPENED"
    }, {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-26T23:18:29Z",
      "what" : "status",
      "removed" : "REOPENED",
      "added" : "",
      "type" : "RESOLVED"
    }, {
      "name" : "camelia.badau@softvision.ro",
      "date" : "2015-04-24T13:55:51Z",
      "what" : "status",
      "removed" : "RESOLVED",
      "added" : "",
      "type" : "VERIFIED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-26T01:43:26Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    }, {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-26T14:22:28Z",
      "what" : "resolution",
      "removed" : "FIXED",
      "added" : "",
      "type" : "UNKNOWN"
    }, {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-26T23:18:29Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "WORKSFORME"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-26T23:30:08Z",
      "what" : "resolution",
      "removed" : "WORKSFORME",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-22T15:00:22Z",
      "what" : "cc",
      "removed" : "",
      "added" : "staneck@gmail.com"
    }, {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-22T15:00:22Z",
      "what" : "component",
      "removed" : "Untriaged",
      "added" : "Preferences"
    }, {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-22T15:00:22Z",
      "what" : "platform",
      "removed" : "x86",
      "added" : "All"
    }, {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-22T15:00:22Z",
      "what" : "version",
      "removed" : "Trunk",
      "added" : "unspecified"
    }, {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-22T15:00:22Z",
      "what" : "see_also",
      "removed" : "",
      "added" : "https://bugzilla.mozilla.org/show_bug.cgi?id=1014208"
    }, {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-22T15:00:22Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1014208"
    }, {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-22T15:00:22Z",
      "what" : "op_sys",
      "removed" : "Windows 8.1",
      "added" : "All"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-22T18:19:52Z",
      "what" : "cc",
      "removed" : "",
      "added" : "ntim007@yahoo.it"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-22T18:19:52Z",
      "what" : "is_confirmed",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-22T18:19:52Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[lang=css][good first bug]"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-22T18:19:52Z",
      "what" : "bug_mentor",
      "removed" : "",
      "added" : "ntim007@yahoo.it"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-22T22:13:09Z",
      "what" : "summary",
      "removed" : "[chameleon] alter menu items style",
      "added" : "InContent Prefs - Don't allow text selection of categories"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-22T22:55:26Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "gioyik@gmail.com"
    }, {
      "name" : "gioyik@gmail.com",
      "date" : "2015-02-22T23:14:20Z",
      "what" : "attachments.isobsolete:8567718",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "gioyik@gmail.com",
      "date" : "2015-02-22T23:14:20Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "gioyik@gmail.com",
      "date" : "2015-02-24T06:32:28Z",
      "what" : "attachments.isobsolete:8567722",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-24T20:26:47Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-25T08:30:25Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-25T08:30:25Z",
      "what" : "whiteboard",
      "removed" : "[lang=css][good first bug]",
      "added" : "[lang=css][good first bug][fixed-in-fx-team]"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-26T01:43:26Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-26T01:43:26Z",
      "what" : "whiteboard",
      "removed" : "[lang=css][good first bug][fixed-in-fx-team]",
      "added" : "[lang=css][good first bug]"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-26T01:43:26Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-25 17:43:26"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-26T01:43:26Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "henry.fai.hang.chan@gmail.com",
      "date" : "2015-02-26T14:42:59Z",
      "what" : "cc",
      "removed" : "",
      "added" : "henry.fai.hang.chan@gmail.com"
    }, {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-26T23:18:29Z",
      "what" : "cf_last_resolved",
      "removed" : "2015-02-25 17:43:26",
      "added" : "2015-02-26 15:18:29"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-18T18:16:49Z",
      "what" : "cc",
      "removed" : "",
      "added" : "camelia.badau@softvision.ro"
    }, {
      "name" : "sledru@mozilla.com",
      "date" : "2015-03-24T13:22:00Z",
      "what" : "cc",
      "removed" : "",
      "added" : "sledru@mozilla.com"
    }, {
      "name" : "sledru@mozilla.com",
      "date" : "2015-03-24T13:22:00Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "affected"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T17:03:32Z",
      "what" : "cf_status_firefox38",
      "removed" : "affected",
      "added" : "fixed"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-04-24T06:51:07Z",
      "what" : "cc",
      "removed" : "",
      "added" : "florin.mezei@softvisioninc.eu"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-04-24T06:51:07Z",
      "what" : "qa_contact",
      "removed" : "",
      "added" : "camelia.badau@softvision.ro"
    }, {
      "name" : "camelia.badau@softvision.ro",
      "date" : "2015-04-24T13:55:51Z",
      "what" : "cf_status_firefox38",
      "removed" : "fixed",
      "added" : "verified"
    }, {
      "name" : "camelia.badau@softvision.ro",
      "date" : "2015-04-24T13:55:51Z",
      "what" : "cf_status_firefox39",
      "removed" : "fixed",
      "added" : "verified"
    } ],
    "flagEvents" : [ {
      "name" : "gioyik@gmail.com",
      "date" : "2015-02-22T22:51:23Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567718,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-22T22:57:58Z",
      "what" : "flagtypes.name",
      "removed" : "review?(ntim007@yahoo.it)",
      "added" : "",
      "attachmentId" : 8567718,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gioyik@gmail.com",
      "date" : "2015-02-22T23:14:20Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567722,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-23T19:16:15Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : 8567722,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "gioyik@gmail.com",
      "date" : "2015-02-23T19:23:16Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-23T19:55:08Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gioyik@gmail.com",
      "date" : "2015-02-24T06:32:28Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8568394,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-24T20:26:18Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : 8568394,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-26T16:33:15Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "staneck@gmail.com",
      "date" : "2015-02-26T23:18:29Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(staneck@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-24T13:12:27Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8568394,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "sledru@mozilla.com",
      "date" : "2015-03-24T13:22:27Z",
      "what" : "flagtypes.name",
      "removed" : "approval-mozilla-aurora?",
      "added" : "",
      "attachmentId" : 8568394,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135508,
  "cclist" : [ "camelia.badau@softvision.ro", "florin.mezei@softvisioninc.eu", "henry.fai.hang.chan@gmail.com", "jaws@mozilla.com", "ntim.bugs@gmail.com", "sledru@mozilla.com", "staneck@gmail.com" ]
}, {
  "component" : "Session Restore",
  "summary" : "Remove browser.__SS_restore_data as it is unused",
  "reporter" : "ttaubert@mozilla.com",
  "assigned" : "ttaubert@mozilla.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Stumbled upon the \"__SS_restore_data\" property we are still setting and removing although it's unused now that all that happens in the content process. Let's get rid of that \\o/",
  "comments" : [ {
    "text" : "Stumbled upon the \"__SS_restore_data\" property we are still setting and removing although it's unused now that all that happens in the content process. Let's get rid of that \\o/",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-02-22T12:38:59Z"
  }, {
    "text" : "Created attachment 8567628\n0001-Bug-1135498-Get-rid-of-the-unused-browser.__SS_resto.patch",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-02-22T12:41:09Z"
  }, {
    "text" : "Created attachment 8567629\n0001-Bug-1135498-Get-rid-of-the-unused-browser.__SS_resto.patch, v2\n\nThought it was worth fixing up the comment describing restoreTabContent() as that's horribly outdated.",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-02-22T12:49:38Z"
  }, {
    "text" : "Comment on attachment 8567629\n0001-Bug-1135498-Get-rid-of-the-unused-browser.__SS_resto.patch, v2\n\nReview of attachment 8567629:\n-----------------------------------------------------------------\n\nWow ya that comment was stale.",
    "authour" : "smacleod@mozilla.com",
    "created" : "2015-02-25T18:22:47Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/0f3823760e96",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-02-25T22:33:02Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/0f3823760e96",
    "authour" : "cbook@mozilla.com",
    "created" : "2015-02-26T11:05:20Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-02-22T12:39:46Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:05:20Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:05:20Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-02-22T12:39:46Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmucci@mozilla.com"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-02-22T12:39:46Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "1"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-02-22T12:39:46Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "38.3 - 23 Feb"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-02-22T12:39:46Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "ttaubert@mozilla.com"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-02-22T12:41:09Z",
      "what" : "cc",
      "removed" : "",
      "added" : "smacleod@mozilla.com"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-02-22T12:49:38Z",
      "what" : "attachments.isobsolete:8567628",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-24T16:46:33Z",
      "what" : "cf_fx_iteration",
      "removed" : "38.3 - 23 Feb",
      "added" : "39.1 - 9 Mar"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:05:20Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:05:20Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-26 03:05:20"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:05:20Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-02-22T12:39:46Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "BACKLOG",
        "state" : "GRANTED"
      }, {
        "status" : "QE_VERIFY",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-02-22T12:41:09Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567628,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-02-22T12:49:38Z",
      "what" : "flagtypes.name",
      "removed" : "review?(smacleod@mozilla.com)",
      "added" : "",
      "attachmentId" : 8567628,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-02-22T12:49:38Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567629,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "smacleod@mozilla.com",
      "date" : "2015-02-25T18:22:47Z",
      "what" : "flagtypes.name",
      "removed" : "review?(smacleod@mozilla.com)",
      "added" : "",
      "attachmentId" : 8567629,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135498,
  "cclist" : [ "mmucci@mozilla.com", "smacleod@mozilla.com", "ttaubert@mozilla.com" ]
}, {
  "component" : "Developer Tools: Debugger",
  "summary" : "debugger should explain the exception when conditional breakpoint throws",
  "reporter" : "daizhuoxian@gmail.com",
  "assigned" : "daizhuoxian@gmail.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "this is a following up bug of bug983469. We should add some UI changes to notify the user of conditional breakpoints throwing errors.",
  "comments" : [ {
    "text" : "this is a following up bug of bug983469. We should add some UI changes to notify the user of conditional breakpoints throwing errors.",
    "authour" : "daizhuoxian@gmail.com",
    "created" : "2015-02-22T05:23:09Z"
  }, {
    "text" : "Created attachment 8573692\nadd UI for breakpoint condition throwing",
    "authour" : "daizhuoxian@gmail.com",
    "created" : "2015-03-06T03:42:16Z"
  }, {
    "text" : "Comment on attachment 8573692\nadd UI for breakpoint condition throwing\n\nHere's a WIP patch.\n\nAs there's no response from bug762979, I couldn't add this UI change to the new breakpoint mockup. In this patch, I just display the message thrown to the breakpoint item view.\n\nAnyway, it's a start. When we are done with the UI changes and behaviours, I will write some tests.",
    "authour" : "daizhuoxian@gmail.com",
    "created" : "2015-03-06T03:46:41Z"
  }, {
    "text" : "Comment on attachment 8573692\nadd UI for breakpoint condition throwing\n\nReview of attachment 8573692:\n-----------------------------------------------------------------\n\nGood start!\n\nNeeds test(s), of course.\n\n::: browser/themes/shared/devtools/debugger.inc.css\n@@ +46,5 @@\n>  }\n>  \n> +.dbg-breakpoint-condition-thrown-message {\n> +  display: none;\n> +  color: #CC1B1B;\n\nI think we should be using css variables from our theme. ni? bgrins for more info and references.\n\n::: toolkit/devtools/server/actors/script.js\n@@ +4722,5 @@\n>     *\n>     * @param aFrame Debugger.Frame\n>     *        The frame to evaluate the condition in\n> +   * @returns Object\n> +   *          In form of { result: boolean|undefined, message}\n\nWould be good to document the difference between `result == false` and `result == undefined`, because that isn't clear to me from reading these docs.\n\n@@ +4792,5 @@\n> +          reason.message = message;\n> +        }\n> +        reason.actors = [ this.actorID ];\n> +      }\n> +      else return undefined;\n\nStyle nit: devtools js always uses braces and new lines for if/else clauses.",
    "authour" : "nfitzgerald@mozilla.com",
    "created" : "2015-03-09T21:09:29Z"
  }, {
    "text" : ":bgrins, can you give us some info about the devtools theme css variables and what we should be using here?",
    "authour" : "nfitzgerald@mozilla.com",
    "created" : "2015-03-09T21:10:15Z"
  }, {
    "text" : "(In reply to Nick Fitzgerald [:fitzgen] from comment #3)\n> > +.dbg-breakpoint-condition-thrown-message {\n> > +  display: none;\n> > +  color: #CC1B1B;\n> \n> I think we should be using css variables from our theme. ni? bgrins for more\n> info and references.\n\nYep, you can convert this to a CSS variable.  Here are the relevant text color variables for light-theme [0] and dark-theme [1].  Here's an example similar to what you are doing [2].  You can do something like this (note that I haven't checked to make sure that this color works in your case, please check in both light and dark themes to make sure it looks good and try the other options if not):\n\n  color: var(--theme-body-color-alt)\n\n[0]: https://dxr.mozilla.org/mozilla-central/source/browser/themes/shared/devtools/light-theme.css#22\n[1]: https://dxr.mozilla.org/mozilla-central/source/browser/themes/shared/devtools/dark-theme.css#22.\n[2]: https://dxr.mozilla.org/mozilla-central/source/browser/themes/shared/devtools/toolbars.inc.css#61",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-03-09T21:25:32Z"
  }, {
    "text" : "Created attachment 8579157\nbug1135435\n\nSorry for the delay on uploading this patch.... too busy during the last several weeks...",
    "authour" : "daizhuoxian@gmail.com",
    "created" : "2015-03-18T06:39:07Z"
  }, {
    "text" : "Comment on attachment 8579157\nbug1135435\n\nReview of attachment 8579157:\n-----------------------------------------------------------------\n\nThis looks great!\n\nA few comments below.\n\nCan you also send a PR to update the remote debugging protocol documentation to reflect this change? https://github.com/jimblandy/DebuggerDocs\n\nThanks!\n\n::: browser/devtools/debugger/debugger-panes.js\n@@ +455,5 @@\n> +   */\n> +  showBreakpointConditionThrownMessage: function(aLocation, aMessage = \"\") {\n> +    let breakpointItem = this.getBreakpoint(aLocation);\n> +    if (!breakpointItem) {\n> +      return promise.reject(new Error(\"No breakpoint found.\"));\n\nSince we don't otherwise return any value, I don't think that returning a rejected promise is the right thing to do here.\n\nIf this code should always be able to access the breakpoint, then we should do this:\n\n  DevToolsUtils.dbg_assert(!!breakpointItem,\n                           \"sowBreakpointConditionThrownMessage: Should always get a breakpoint\");\n\nHowever, that is not quite our situation: it is possible that the user deleted the BP on the frontend at the same time as the server hit the pause, and therefore before the \"paused\" message reached the frontend and before the \"remove breakpoint\" message reached the server and prevented the BP from getting hit.\n\nI think the best thing we can do here (unfortunately) is this:\n\n  if (!breakpointItem) {\n    return;\n  }\n\n@@ +706,5 @@\n>     *         An object containing the breakpoint container, checkbox,\n>     *         line number and line text nodes.\n>     */\n>    _createBreakpointView: function(aOptions) {\n> +    let { location, disabled, text, message } = aOptions;\n\nPlease document the \"message\" option in the doc comment above, like the other options are.\n\n::: browser/devtools/debugger/test/browser.ini\n@@ +139,5 @@\n>  [browser_dbg_breakpoints-break-on-last-line-of-script-on-reload.js]\n>  skip-if = e10s # Bug 1093535\n>  [browser_dbg_breakpoints-button-01.js]\n>  [browser_dbg_breakpoints-button-02.js]\n> +skip-if = e10s && debug\n\nIs this supposed to be for the new test? If so, it should be below the new test, not above it.\n\nAdditionally, I think you forgot to include the new test in this patch.\n\n::: toolkit/devtools/server/actors/script.js\n@@ +4724,5 @@\n>     * @param aFrame Debugger.Frame\n>     *        The frame to evaluate the condition in\n> +   * @returns Object\n> +   *          - result: boolean|undefined\n> +   *            Indicating whether condition evaluates to true or not.\n\nNit: \"True when the conditional breakpoint should trigger a pause, false otherwise.\"\n\nCallers of this function just want to know whether to pause or not -- we can paper over the cause of the pause a bit and simultaneously simplify the code a little.\n\n@@ +4797,5 @@\n> +          reason.message = message;\n> +        }\n> +        reason.actors = [ this.actorID ];\n> +      }\n> +      else {\n\nStyle nit: Brace and if on same line.",
    "authour" : "nfitzgerald@mozilla.com",
    "created" : "2015-03-18T20:49:50Z"
  }, {
    "text" : "Created attachment 8579742\nadd UI for breakpoint condition throwing",
    "authour" : "daizhuoxian@gmail.com",
    "created" : "2015-03-19T01:35:12Z"
  }, {
    "text" : "Comment on attachment 8579742\nadd UI for breakpoint condition throwing\n\nUpdated. I will send a PR to the docs once the patch is good enough XD",
    "authour" : "daizhuoxian@gmail.com",
    "created" : "2015-03-19T01:40:37Z"
  }, {
    "text" : "Comment on attachment 8579742\nadd UI for breakpoint condition throwing\n\nReview of attachment 8579742:\n-----------------------------------------------------------------\n\nLooks great, thanks!\n\nTry push: https://treeherder.mozilla.org/#/jobs?repo=try&revision=33cc8d5b6485",
    "authour" : "nfitzgerald@mozilla.com",
    "created" : "2015-03-19T02:50:32Z"
  }, {
    "text" : "Also, I suggest you fill out the forms needed to become a level 1 commiter, that way you can push to try yourself in the future: https://www.mozilla.org/en-US/about/governance/policies/commit/",
    "authour" : "nfitzgerald@mozilla.com",
    "created" : "2015-03-19T02:52:11Z"
  }, {
    "text" : "Created attachment 8580523\ntry: -b do -p all -u reftest,reftest-e10s,reftest-no-accel,crashtest,crashtest-e10s,xpcshell,jsreftest,marionette,marionette-e10s,mozmill,cppunit,jittests,jittest-1,jittest-2,mochitests,web-platform-tests -t none",
    "authour" : "daizhuoxian@gmail.com",
    "created" : "2015-03-20T05:43:47Z"
  }, {
    "text" : "Created attachment 8580526\nadd UI for breakpoint condition throws",
    "authour" : "daizhuoxian@gmail.com",
    "created" : "2015-03-20T05:48:25Z"
  }, {
    "text" : "Comment on attachment 8580526\nadd UI for breakpoint condition throws\n\nmodified a unit test on breakpoint condition.\n\ntry push: https://treeherder.mozilla.org/#/jobs?repo=try&revision=71b0e3e03168",
    "authour" : "daizhuoxian@gmail.com",
    "created" : "2015-03-20T05:49:52Z"
  }, {
    "text" : "Comment on attachment 8580526\nadd UI for breakpoint condition throws\n\nReview of attachment 8580526:\n-----------------------------------------------------------------\n\nGreat!",
    "authour" : "nfitzgerald@mozilla.com",
    "created" : "2015-03-20T22:35:31Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/698791e62f58",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-03-24T14:19:55Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/698791e62f58",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-03-25T01:15:54Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "nfitzgerald@mozilla.com",
      "date" : "2015-03-02T23:13:06Z",
      "what" : "status",
      "removed" : "UNCONFIRMED",
      "added" : "",
      "type" : "NEW"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-25T01:15:54Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-25T01:15:54Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "nfitzgerald@mozilla.com",
      "date" : "2015-03-02T23:13:06Z",
      "what" : "cc",
      "removed" : "",
      "added" : "nfitzgerald@mozilla.com"
    }, {
      "name" : "nfitzgerald@mozilla.com",
      "date" : "2015-03-02T23:13:06Z",
      "what" : "is_confirmed",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "nfitzgerald@mozilla.com",
      "date" : "2015-03-09T21:10:15Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bgrinstead@mozilla.com"
    }, {
      "name" : "daizhuoxian@gmail.com",
      "date" : "2015-03-18T06:39:07Z",
      "what" : "attachments.isobsolete:8573692",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "daizhuoxian@gmail.com",
      "date" : "2015-03-19T01:35:15Z",
      "what" : "attachments.isobsolete:8579157",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "daizhuoxian@gmail.com",
      "date" : "2015-03-20T05:43:50Z",
      "what" : "attachments.isobsolete:8579742",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "daizhuoxian@gmail.com",
      "date" : "2015-03-20T05:48:30Z",
      "what" : "attachments.isobsolete:8580523",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "nfitzgerald@mozilla.com",
      "date" : "2015-03-20T22:35:39Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T14:19:55Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T14:19:55Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "daizhuoxian@gmail.com"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T14:19:55Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-25T01:15:54Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-25T01:15:54Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-25T01:15:54Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-24 18:15:54"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-25T01:15:54Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "sebastianzartner@gmail.com",
      "date" : "2016-12-23T12:47:59Z",
      "what" : "see_also",
      "removed" : "",
      "added" : "https://bugzilla.mozilla.org/show_bug.cgi?id=1325595"
    } ],
    "flagEvents" : [ {
      "name" : "daizhuoxian@gmail.com",
      "date" : "2015-03-06T03:46:41Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8573692,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "nfitzgerald@mozilla.com",
      "date" : "2015-03-09T21:09:29Z",
      "what" : "flagtypes.name",
      "removed" : "review?(nfitzgerald@mozilla.com)",
      "added" : "",
      "attachmentId" : 8573692,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "nfitzgerald@mozilla.com",
      "date" : "2015-03-09T21:10:15Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-03-09T21:25:32Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(bgrinstead@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "daizhuoxian@gmail.com",
      "date" : "2015-03-18T06:39:07Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8579157,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "nfitzgerald@mozilla.com",
      "date" : "2015-03-18T20:49:50Z",
      "what" : "flagtypes.name",
      "removed" : "review?(nfitzgerald@mozilla.com)",
      "added" : "",
      "attachmentId" : 8579157,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "daizhuoxian@gmail.com",
      "date" : "2015-03-19T01:40:37Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8579742,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "nfitzgerald@mozilla.com",
      "date" : "2015-03-19T02:50:32Z",
      "what" : "flagtypes.name",
      "removed" : "review?(nfitzgerald@mozilla.com)",
      "added" : "",
      "attachmentId" : 8579742,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "daizhuoxian@gmail.com",
      "date" : "2015-03-20T05:49:52Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8580526,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "nfitzgerald@mozilla.com",
      "date" : "2015-03-20T22:35:31Z",
      "what" : "flagtypes.name",
      "removed" : "review?(nfitzgerald@mozilla.com)",
      "added" : "",
      "attachmentId" : 8580526,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T14:19:55Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135435,
  "cclist" : [ "bgrinstead@mozilla.com", "nfitzgerald@mozilla.com" ]
}, {
  "component" : "SocialAPI",
  "summary" : "Social permissions prompt shows the wrong domain name",
  "reporter" : "ekr@rtfm.com",
  "assigned" : "nobody@mozilla.org",
  "created" : null,
  "operatingSystem" : "Mac OS X",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Created attachment 8567566\nScreen Shot 2015-02-21 at 4.40.37 PM.png\n\nIn Aurora (but not Release), the social provider permissions shows the site where you activated the provider, not the site which is being added.\n\nProvisionally marking as security, since showing the wrong name in a permissions dialog seems like it might be concerning.",
  "comments" : [ {
    "text" : "Created attachment 8567566\nScreen Shot 2015-02-21 at 4.40.37 PM.png\n\nIn Aurora (but not Release), the social provider permissions shows the site where you activated the provider, not the site which is being added.\n\nProvisionally marking as security, since showing the wrong name in a permissions dialog seems like it might be concerning.",
    "authour" : "ekr@rtfm.com",
    "created" : "2015-02-22T00:45:26Z"
  }, {
    "text" : "Created attachment 8567567\nScreen Shot 2015-02-21 at 4.41.08 PM.png",
    "authour" : "ekr@rtfm.com",
    "created" : "2015-02-22T00:45:51Z"
  }, {
    "text" : "More on this: when I hosted these on localhost, both versions showed \"localhost\"",
    "authour" : "ekr@rtfm.com",
    "created" : "2015-02-22T00:51:14Z"
  }, {
    "text" : "If I am reading this code correctly, the URL that is displayed in the permission\nis the hosting page unless the URL is our directory page. However, since we\nallow you to access this API over HTTP, then an active network attacker can\ncause this UI to display any domain name he wants, right?",
    "authour" : "ekr@rtfm.com",
    "created" : "2015-02-22T01:32:19Z"
  }, {
    "text" : "The directory showing its own domain is fixed in bug 1134315.\n\nA directory site can indeed make the panel show any domain, but only sites in the social.directories pref are considered directory sites, otherwise it is the origin of the url that is doing the activation.  An attacker would already have to have access to change prefs.",
    "authour" : "mixedpuppy@gmail.com",
    "created" : "2015-02-22T07:16:33Z"
  }, {
    "text" : "Perhaps it would help if I explain the attack.\n\nThe threat model here is a network attacker. I.e., one who can\nredirect traffic to himself.\n\nAn attacker stands up an HTTP site to serve his activation JS.\n\nThe attacker then redirects people's connections to www.provider.com [0]\nto his own site (e.g., by DNS attack or network redirection) and\nserves the JS. At that point, he serves the activation page and\ngets the user to click. Because the URL will be www.provider.com,\nthe domain name in the permissions prompt is the provider, not the\nattacker. What this relies on is that domain names aren't trustable\nover HTTP.\n\nDoes this make sense?\n\n\n[0] This won't work if the provider is doing HSTS, but most sites do\nnot.",
    "authour" : "ekr@rtfm.com",
    "created" : "2015-02-22T16:02:30Z"
  }, {
    "text" : "Created attachment 8567648\nTest case",
    "authour" : "ekr@rtfm.com",
    "created" : "2015-02-22T16:11:25Z"
  }, {
    "text" : "I've just found what I believe is a second issue here. This code seems to only look at the domain name\nand not any part of the path in determining what to show the user. This means that if I can get a piece\nof JS on *any* part of the page, even in a subdirectory, you will allow me to activate the provider with a manifest of my choice but appearing as the domain owner. This is an issue in multitenanted situations.\n\nSee the test case I just uploaded, which claims to be an extension being loaded from\nbug1135421.bugzilla.mozilla.org even though it's actually an attachment.",
    "authour" : "ekr@rtfm.com",
    "created" : "2015-02-22T16:17:40Z"
  }, {
    "text" : "(In reply to Shane Caraveo (:mixedpuppy) from comment #4)\n> The directory showing its own domain is fixed in bug 1134315.\n> \n> A directory site can indeed make the panel show any domain, but only sites\n> in the social.directories pref are considered directory sites, \n\nThis also doesn't seem ideal because it lets anyone who can edit the directory\nadvertise these extensions as any provider they want. Wouldn't it be better\nto remove this exception and require the provider to actually advertise the\nmanifest?\n\n> otherwise it\n> is the origin of the url that is doing the activation.  An attacker would\n> already have to have access to change prefs.",
    "authour" : "ekr@rtfm.com",
    "created" : "2015-02-22T16:25:12Z"
  }, {
    "text" : "Why is it useful to allow the directory site to display any value it wants for the service name?  This seems like more of a masquerading risk than a feature.\n\n(If you're using that feature for \"humanization\" (fb.com -> Facebook), then it would be far better to use EV and present the verified name from the certificate.)\n\nOur philosophy recently with regard to powerful features has been that if there is a persistent grant of permission being made, then the subject of the permission MUST be HTTPS, and the name displayed in the prompt MUST be that of the subject.  That's what we do for getUserMedia, which is less dangerous than this API.",
    "authour" : "rlb@ipv.sx",
    "created" : "2015-02-22T17:00:37Z"
  }, {
    "text" : "It seems",
    "authour" : "ekr@rtfm.com",
    "created" : "2015-02-23T03:32:10Z"
  }, {
    "text" : "Ignore the above comment. Pilot error.",
    "authour" : "ekr@rtfm.com",
    "created" : "2015-02-23T03:38:43Z"
  }, {
    "text" : "A \"Directory Site\" is special -- it's a site that shows up in the social.directories pref, and is currently only our https://activations site. It's our site, accessed securely, so our code trusts it to be telling the truth.\n\nWe don't trust any other site, we just know the site you're on is trying to add something.",
    "authour" : "dveditz@mozilla.com",
    "created" : "2015-02-24T18:35:35Z"
  }, {
    "text" : "(In reply to Daniel Veditz [:dveditz] from comment #12)\n> A \"Directory Site\" is special -- it's a site that shows up in the\n> social.directories pref, and is currently only our https://activations site.\n> It's our site, accessed securely, so our code trusts it to be telling the\n> truth.\n\nI generally think this is unwise, since it allows our admins to impersonate\nother sites. But as noted below this is orthogonal to the real issue.\n\n\n> We don't trust any other site, we just know the site you're on is trying to\n> add something.\n\nBut the fact that it is HTTP means that the attacker might be trying to add\nsomething and pretending to be a legit site.\n\nDan, I think this needs a security rating.",
    "authour" : "ekr@rtfm.com",
    "created" : "2015-02-24T18:44:47Z"
  }, {
    "text" : "There is more than one issue in this bug being discussed as well as a bunch of back and forth explanation.  ISTM a 30min vidyo would be better at moving this forward.  I grabbed 11am thurs and invited commenters only, but others may jump in.",
    "authour" : "mixedpuppy@gmail.com",
    "created" : "2015-02-25T00:52:14Z"
  }, {
    "text" : "I will be there",
    "authour" : "ekr@rtfm.com",
    "created" : "2015-02-25T00:52:53Z"
  }, {
    "text" : "Here's the outcome of the meeting:\n\n- move to https activation only\n- modify the text of activation for directories\n- audit of name vs. uri in any ui in socialapi (specifically error pages)\n- audit frameworker use if on different origin\n\nFor the last item: document.nodePrinciple.origin of the iframe [requesting access to a frameworker] is used to match and get access to the frameworker, I don't see any way for domain A to make domain B use it's frameworker.",
    "authour" : "mixedpuppy@gmail.com",
    "created" : "2015-02-26T19:57:52Z"
  }, {
    "text" : "- move to https activation only\n\nbug 1137900\n\n- audit of name vs. uri in any ui in socialapi (specifically error pages)\n\nProvider names are shown in:\n content context menus\n sidebar button menu (sidebar button in customization palette by default)\n sidebar titlebar\n tooltips on buttons/icons\n error page improvement, bug 1137971\n about:addons (also shows homepage url in ui)\n toolbar buttons in share panel have tooltips which also shows provider origin\n\nActual uri of documents loaded are available in the page info dialog, available via context menu on all iframes",
    "authour" : "mixedpuppy@gmail.com",
    "created" : "2015-02-28T01:51:25Z"
  }, {
    "text" : "Shane, is this tracking anything useful at this point?",
    "authour" : "gavin.sharp@gmail.com",
    "created" : "2015-04-26T20:34:18Z"
  }, {
    "text" : "the remaining bug 1137971 is still open, but this can be closed.",
    "authour" : "mixedpuppy@gmail.com",
    "created" : "2015-04-27T22:15:34Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-04-27T22:15:34Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-04-27T22:15:34Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "ekr@rtfm.com",
      "date" : "2015-02-22T00:46:10Z",
      "what" : "cc",
      "removed" : "",
      "added" : "rlb@ipv.sx"
    }, {
      "name" : "ekr@rtfm.com",
      "date" : "2015-02-22T02:54:02Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mixedpuppy@gmail.com"
    }, {
      "name" : "ekr@rtfm.com",
      "date" : "2015-02-22T04:43:49Z",
      "what" : "cc",
      "removed" : "",
      "added" : "dougt@mozilla.com"
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-02-22T07:16:33Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gavin.sharp@gmail.com"
    }, {
      "name" : "ekr@rtfm.com",
      "date" : "2015-02-23T03:32:10Z",
      "what" : "cc",
      "removed" : "",
      "added" : "martin.thomson@gmail.com"
    }, {
      "name" : "ekr@rtfm.com",
      "date" : "2015-02-23T21:35:40Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmc@mozilla.com"
    }, {
      "name" : "ekr@rtfm.com",
      "date" : "2015-02-24T18:44:47Z",
      "what" : "cc",
      "removed" : "",
      "added" : "dveditz@mozilla.com"
    }, {
      "name" : "dveditz@mozilla.com",
      "date" : "2015-03-03T18:30:36Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "csectype-spoof, sec-low"
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-04-17T18:02:28Z",
      "what" : "cc",
      "removed" : "",
      "added" : "philipp@mozilla.com"
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-04-27T22:15:34Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-04-27 15:15:34"
    }, {
      "name" : "automation@bmo.tld",
      "date" : "2015-09-02T06:59:35Z",
      "what" : "groups",
      "removed" : "core-security",
      "added" : "core-security-release"
    }, {
      "name" : "dveditz@mozilla.com",
      "date" : "2016-07-02T17:39:28Z",
      "what" : "groups",
      "removed" : "core-security-release",
      "added" : ""
    } ],
    "flagEvents" : [ {
      "name" : "ekr@rtfm.com",
      "date" : "2015-02-22T16:02:30Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "ekr@rtfm.com",
      "date" : "2015-02-24T18:44:47Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-02-25T00:52:14Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(mixedpuppy@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "dveditz@mozilla.com",
      "date" : "2015-03-03T18:30:36Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(dveditz@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gavin.sharp@gmail.com",
      "date" : "2015-04-26T20:34:18Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-04-27T22:15:34Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(mixedpuppy@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135421,
  "cclist" : [ "doug.turner@gmail.com", "dveditz@mozilla.com", "gavin.sharp@gmail.com", "martin.thomson@gmail.com", "mixedpuppy@gmail.com", "mmc.bugzilla@gmail.com", "philipp@mozilla.com", "rlb@ipv.sx" ]
}, {
  "component" : "Developer Tools: Canvas Debugger",
  "summary" : "Ensure canvas debugger works when rAF/setTimeout exist, but no canvas or canvas animation",
  "reporter" : "jordan@jsantell.com",
  "assigned" : "jordan@jsantell.com",
  "created" : null,
  "operatingSystem" : "Mac OS X",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "",
  "comments" : [ {
    "text" : "",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-21T20:53:01Z"
  }, {
    "text" : "Created attachment 8568621\n1135403-rafnocanvas.patch\n\nWorks fine (times out), but here's a test to ensure that.",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-24T17:19:39Z"
  }, {
    "text" : "https://treeherder.mozilla.org/#/jobs?repo=try&revision=7e8b499bf9e6",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-25T16:51:43Z"
  }, {
    "text" : "Created attachment 8569272\n1135403-rafnocanvas.patch\n\nrebased",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-25T16:56:02Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/35a84923b632",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-02-25T23:26:33Z"
  }, {
    "text" : "The tests themselves somehow didn't get included when I imported the patch. :\\\nHopefully this fixes things: \nhttps://hg.mozilla.org/integration/fx-team/rev/a606a0c2c2bc",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-02-25T23:43:40Z"
  }, {
    "text" : "Great, looks like it's good; I'll keep an eye on it. Thanks!",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-25T23:46:03Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/35a84923b632\nhttps://hg.mozilla.org/mozilla-central/rev/a606a0c2c2bc",
    "authour" : "cbook@mozilla.com",
    "created" : "2015-02-26T11:03:55Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-24T17:19:39Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:03:55Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:03:55Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-21T20:57:00Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "985488, 978948, 1122766"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-24T17:19:39Z",
      "what" : "cc",
      "removed" : "",
      "added" : "vporof@mozilla.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-24T17:19:39Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "jsantell@mozilla.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-25T16:56:02Z",
      "what" : "attachments.isobsolete:8568621",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-25T19:22:30Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-25T23:26:33Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-25T23:26:33Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-25T23:43:40Z",
      "what" : "cc",
      "removed" : "",
      "added" : "wkocher@mozilla.com"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:03:55Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:03:55Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:03:55Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-26 03:03:55"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:03:55Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-24T17:19:39Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8568621,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "vporof@mozilla.com",
      "date" : "2015-02-24T18:15:11Z",
      "what" : "flagtypes.name",
      "removed" : "review?(vporof@mozilla.com)",
      "added" : "",
      "attachmentId" : 8568621,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-25T16:56:02Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8569272,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135403,
  "cclist" : [ "vporof@mozilla.com", "wkocher@mozilla.com" ]
}, {
  "component" : "Preferences",
  "summary" : "Update inContent prefs default on 38 branch for shipping on release",
  "reporter" : "gijskruitbosch+bugs@gmail.com",
  "assigned" : "gijskruitbosch+bugs@gmail.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "This keeps breaking tests and stuff, and I think at this point we're fairly confident this will ship, so we might as well get that in before uplift so we don't have to get approval and uplift.",
  "comments" : [ {
    "text" : "This keeps breaking tests and stuff, and I think at this point we're fairly confident this will ship, so we might as well get that in before uplift so we don't have to get approval and uplift.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-21T16:18:36Z"
  }, {
    "text" : "Created attachment 8567503\nindicate we intend to ship in-content prefs with 38,",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-21T16:18:42Z"
  }, {
    "text" : "remote:   https://treeherder.mozilla.org/#/jobs?repo=try&revision=6027618c437c",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-21T22:26:00Z"
  }, {
    "text" : "remote:   https://hg.mozilla.org/integration/fx-team/rev/e73203a690fe",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-22T11:06:51Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/e73203a690fe",
    "authour" : "philringnalda@gmail.com",
    "created" : "2015-02-22T18:45:45Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-02-22T18:45:45Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-02-22T18:45:45Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-22T11:06:51Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "1"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-22T11:06:51Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "38.3 - 23 Feb"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-22T11:06:51Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-22T16:26:42Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmucci@mozilla.com"
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-02-22T18:45:45Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 38"
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-02-22T18:45:45Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-02-22T18:45:45Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-22 10:45:45"
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-02-22T18:45:45Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-21T16:18:42Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567503,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-21T21:38:56Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : 8567503,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-22T11:06:51Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "BACKLOG",
        "state" : "GRANTED"
      }, {
        "status" : "TEST_SUITE",
        "state" : "DENIED"
      }, {
        "status" : "QE_VERIFY",
        "state" : "DENIED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135375,
  "cclist" : [ "dolske@mozilla.com", "gavin.sharp@gmail.com", "jaws@mozilla.com", "mmucci@mozilla.com" ]
}, {
  "component" : "Theme",
  "summary" : "Ugly hover and active state on reader mode button",
  "reporter" : "ntim.bugs@gmail.com",
  "assigned" : "jaws@mozilla.com",
  "created" : null,
  "operatingSystem" : "Windows 8.1",
  "hardware" : "All",
  "priority" : "P2",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "I'll get a screenshot when I'll be on my computer.",
  "comments" : [ {
    "text" : "I'll get a screenshot when I'll be on my computer.",
    "authour" : "ntim.bugs@gmail.com",
    "created" : "2015-02-21T10:25:06Z"
  }, {
    "text" : "I was about to file a similar bug as well, for Windows 8 and 8.1. I think it would look best if the styling of the button would match the one of the refresh button.",
    "authour" : "andrei.vaida@softvision.ro",
    "created" : "2015-02-23T10:24:33Z"
  }, {
    "text" : "Created attachment 8567844\nscreenshot from Windows 8.1 (x86)",
    "authour" : "andrei.vaida@softvision.ro",
    "created" : "2015-02-23T10:24:59Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from bug 1131458 comment #9)\n> https://reviewboard.mozilla.org/r/3753/#review3009\n\n> ::: browser/themes/windows/browser.css\n> (Diff revision 2)\n> > +  padding: 0;\n> \n> Windows wants border: 0 none; as well, because otherwise you get ugly\n> win95-style 3d borders. I bet Linux is the same, but I'm rebuilding in my VM\n> right now so I won't know until half an hour. I'll update the bug (please\n> ping me if I forget) when I have a build.\n\nIt looks like the patch was checked in without this. Margaret, do you have time to work on fixing this?",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-23T13:18:57Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #3)\n> (In reply to :Gijs Kruitbosch from bug 1131458 comment #9)\n> > https://reviewboard.mozilla.org/r/3753/#review3009\n> \n> > ::: browser/themes/windows/browser.css\n> > (Diff revision 2)\n> > > +  padding: 0;\n> > \n> > Windows wants border: 0 none; as well, because otherwise you get ugly\n> > win95-style 3d borders. I bet Linux is the same, but I'm rebuilding in my VM\n> > right now so I won't know until half an hour. I'll update the bug (please\n> > ping me if I forget) when I have a build.\n> \n> It looks like the patch was checked in without this. Margaret, do you have\n> time to work on fixing this?\n\nNo, sorry, I don't have time to work on this right now, since I've developed a bit of a backlog of Android bugs... hopefully someone from the desktop team can help me out here.",
    "authour" : "margaret.leibovic@gmail.com",
    "created" : "2015-02-23T19:22:33Z"
  }, {
    "text" : "Created attachment 8568586\nfix hover and active border on reader mode button in location bar,",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-24T16:23:21Z"
  }, {
    "text" : "Comment on attachment 8568586\nfix hover and active border on reader mode button in location bar,\n\nReview of attachment 8568586:\n-----------------------------------------------------------------\n\n::: browser/themes/windows/browser.css\n@@ +1580,5 @@\n>  \n>  #reader-mode-button {\n>    -moz-appearance: none;\n>    padding: 0;\n> +  border: 0 none;\n\nborder-width: 0; is sufficient here. But then we are lacking a hover style on Windows and Linux (I agree that the pre-patch hover is quite ugly).\n\n(In reply to :Gijs Kruitbosch from bug 1131458 comment #9)\n> Windows wants border: 0 none; as well, because otherwise you get ugly\n> win95-style 3d borders. I bet Linux is the same\n\nThis patch is missing a Linux change. Did you find that it wasn't needed?",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-02-25T20:44:12Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #6)\n> Comment on attachment 8568586\n> fix hover and active border on reader mode button in location bar,\n> \n> Review of attachment 8568586:\n> -----------------------------------------------------------------\n> \n> ::: browser/themes/windows/browser.css\n> @@ +1580,5 @@\n> >  \n> >  #reader-mode-button {\n> >    -moz-appearance: none;\n> >    padding: 0;\n> > +  border: 0 none;\n> \n> border-width: 0; is sufficient here. But then we are lacking a hover style\n> on Windows and Linux (I agree that the pre-patch hover is quite ugly).\n\nThere is no hover style on OS X, and also no hover style for e.g. the page-report-button for popups, which is right next to it. Seems OK to me?\n\n> (In reply to :Gijs Kruitbosch from bug 1131458 comment #9)\n> > Windows wants border: 0 none; as well, because otherwise you get ugly\n> > win95-style 3d borders. I bet Linux is the same\n> \n> This patch is missing a Linux change. Did you find that it wasn't needed?\n\nSee bug 1131458 comment 11:\n\n(In reply to :Gijs Kruitbosch from comment #11)\n> On Linux it seems you won't need to remove the border; I don't\n> see any for hover/active states.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-25T22:37:26Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #7)\n> (In reply to Jared Wein [:jaws] (please needinfo? me) from comment #6)\n> > Comment on attachment 8568586\n> > fix hover and active border on reader mode button in location bar,\n> > \n> > Review of attachment 8568586:\n> > -----------------------------------------------------------------\n> > \n> > ::: browser/themes/windows/browser.css\n> > @@ +1580,5 @@\n> > >  \n> > >  #reader-mode-button {\n> > >    -moz-appearance: none;\n> > >    padding: 0;\n> > > +  border: 0 none;\n> > \n> > border-width: 0; is sufficient here. But then we are lacking a hover style\n> > on Windows and Linux (I agree that the pre-patch hover is quite ugly).\n> \n> There is no hover style on OS X, and also no hover style for e.g. the\n> page-report-button for popups, which is right next to it. Seems OK to me?\n\n? This patch is changing behavior on Windows, where we have a hover style for the dropdown button, page-report-button, and the Refresh button. http://screencast.com/t/FelznILpe\n\nWithout firing up my Linux build, I'm pretty sure that we show hover states for these on Linux, so we'll want to add one there.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-02-25T22:45:17Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #8)\n> (In reply to :Gijs Kruitbosch from comment #7)\n> > (In reply to Jared Wein [:jaws] (please needinfo? me) from comment #6)\n> > > Comment on attachment 8568586\n> > > fix hover and active border on reader mode button in location bar,\n> > > \n> > > Review of attachment 8568586:\n> > > -----------------------------------------------------------------\n> > > \n> > > ::: browser/themes/windows/browser.css\n> > > @@ +1580,5 @@\n> > > >  \n> > > >  #reader-mode-button {\n> > > >    -moz-appearance: none;\n> > > >    padding: 0;\n> > > > +  border: 0 none;\n> > > \n> > > border-width: 0; is sufficient here. But then we are lacking a hover style\n> > > on Windows and Linux (I agree that the pre-patch hover is quite ugly).\n> > \n> > There is no hover style on OS X, and also no hover style for e.g. the\n> > page-report-button for popups, which is right next to it. Seems OK to me?\n> \n> ? This patch is changing behavior on Windows, where we have a hover style\n> for the dropdown button, page-report-button, and the Refresh button.\n> http://screencast.com/t/FelznILpe\n\nWe might have hover styles for the dropdown, page report and the refresh button on Windows, but we never did for the reader mode button until the ugly borders slipped in in bug 1131458. I don't think fixing a review nit from that bug should be held up while waiting for an asset to go add a hover effect on Windows/Linux.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-26T08:01:04Z"
  }, {
    "text" : "Created attachment 8569990\nreader-mode.svg\n\nReader Mode Icon in SVG with three states.",
    "authour" : "shorlander@mozilla.com",
    "created" : "2015-02-26T18:03:53Z"
  }, {
    "text" : "*** Bug 1137212 has been marked as a duplicate of this bug. ***",
    "authour" : "ntim.bugs@gmail.com",
    "created" : "2015-03-02T07:38:03Z"
  }, {
    "text" : "Created attachment 8573259\nuse SVG and have a proper hover state for the reader mode button on Windows/Linux,\n\nSo this works, but for some reason there's an extra focus rectangle drawn around the icon on OS X. I can't work out how to get rid of it (tried setting box-shadow to none on the toolbarbutton-icon which seemed not to help). Ideas? (I've also used a transform to move the icon down 1px, ideally shorlander should provide an icon where the path is fixed to be 1 lower than it is right now...)",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-03-05T14:40:40Z"
  }, {
    "text" : "Comment on attachment 8573259\nuse SVG and have a proper hover state for the reader mode button on Windows/Linux,\n\nReview of attachment 8573259:\n-----------------------------------------------------------------\n\n::: browser/themes/osx/browser.css\n@@ +2545,1 @@\n>  #reader-mode-button:focus {\n\nThis could be changed :-moz-focusring, so it only appears with keyboard navigation\n\n::: browser/themes/shared/reader/reader-mode.svg\n@@ +1,3 @@\n> +<?xml version=\"1.0\" encoding=\"utf-8\"?>\n> +<svg version=\"1.1\"\n> +     id=\"icon-readerMode\"\n\nThis id isn't needed\n\n@@ +6,5 @@\n> +     width=\"48\"\n> +     height=\"16\">\n> +  <defs>\n> +    <path id=\"glyphShape-readerMode-book\" d=\"M5.5,4h-2C3.2,4,3,4.2,3,4.5C3,4.8,3.2,5,3.5,5h2 C5.8,5,6,4.8,6,4.5C6,4.2,5.8,4,5.5,4z M5.5,6h-2C3.2,6,3,6.2,3,6.5S3.2,7,3.5,7h2C5.8,7,6,6.8,6,6.5S5.8,6,5.5,6z M5.5,8h-2 C3.2,8,3,8.2,3,8.5C3,8.8,3.2,9,3.5,9h2C5.8,9,6,8.8,6,8.5C6,8.2,5.8,8,5.5,8z M15.4,1c0,0-3.1,0-4.4,0S8.1,1.5,8,3.3 C7.9,1.5,6.3,1,5,1S0.6,1,0.6,1C0.3,1,0,1.3,0,1.7v9.6C0,11.6,0.3,12,0.6,12c0,0,2.6,0,4.4,0c1.6,0,2.8,1,3,2.3 C8.2,13,9.4,12,11,12c1.8,0,4.4,0,4.4,0c0.4,0,0.6-0.4,0.6-0.8V1.7C16,1.3,15.7,1,15.4,1z M14,10L14,10c-0.2,0-1.6,0-3,0 c-1.6,0-2.9,0.8-3,2.2C7.9,10.8,6.6,10,5,10c-1.4,0-2.8,0-3,0v0c0,0,0,0,0,0V3c0,0,2.7,0,3.5,0C6.6,3,8,4.5,8,5.8 C8,4.5,9.4,3,10.5,3C11.3,3,14,3,14,3V10C14,10,14,10,14,10z\" transform=\"translate(0, 1)\"/>\n> +\n\nThis blank line isn't needed (and the next ones too)\n\n@@ +9,5 @@\n> +    <path id=\"glyphShape-readerMode-book\" d=\"M5.5,4h-2C3.2,4,3,4.2,3,4.5C3,4.8,3.2,5,3.5,5h2 C5.8,5,6,4.8,6,4.5C6,4.2,5.8,4,5.5,4z M5.5,6h-2C3.2,6,3,6.2,3,6.5S3.2,7,3.5,7h2C5.8,7,6,6.8,6,6.5S5.8,6,5.5,6z M5.5,8h-2 C3.2,8,3,8.2,3,8.5C3,8.8,3.2,9,3.5,9h2C5.8,9,6,8.8,6,8.5C6,8.2,5.8,8,5.5,8z M15.4,1c0,0-3.1,0-4.4,0S8.1,1.5,8,3.3 C7.9,1.5,6.3,1,5,1S0.6,1,0.6,1C0.3,1,0,1.3,0,1.7v9.6C0,11.6,0.3,12,0.6,12c0,0,2.6,0,4.4,0c1.6,0,2.8,1,3,2.3 C8.2,13,9.4,12,11,12c1.8,0,4.4,0,4.4,0c0.4,0,0.6-0.4,0.6-0.8V1.7C16,1.3,15.7,1,15.4,1z M14,10L14,10c-0.2,0-1.6,0-3,0 c-1.6,0-2.9,0.8-3,2.2C7.9,10.8,6.6,10,5,10c-1.4,0-2.8,0-3,0v0c0,0,0,0,0,0V3c0,0,2.7,0,3.5,0C6.6,3,8,4.5,8,5.8 C8,4.5,9.4,3,10.5,3C11.3,3,14,3,14,3V10C14,10,14,10,14,10z\" transform=\"translate(0, 1)\"/>\n> +\n> +    <linearGradient id=\"gradient-state-default\" x1=\"0%\" y1 =\"0%\" x2 =\"0\" y2 =\"100%\">\n> +        <stop stop-color=\"#989898\" offset = \"0%\"/>\n> +        <stop stop-color=\"#808080\" offset = \"100%\"/>\n\nIt would be cleaner without spaces around \"=\".\n\n@@ +23,5 @@\n> +        <stop stop-color=\"#ff5500\" offset = \"100%\"/>\n> +    </linearGradient>\n> +\n> +    <style type=\"text/css\">\n> +    <![CDATA[\n\nThis line can be removed\n\n@@ +27,5 @@\n> +    <![CDATA[\n> +      .icon-state-default { fill: url(#gradient-state-default); }\n> +      .icon-state-hover   { fill: url(#gradient-state-hover); }\n> +      .icon-state-pressed { fill: url(#gradient-state-pressed); }\n> +    ]]>\n\nSame",
    "authour" : "ntim.bugs@gmail.com",
    "created" : "2015-03-05T15:03:29Z"
  }, {
    "text" : "This could be fixed by addressing bug 1140340 and reverting most of bug 1131458, although it looks like we'll still want to replace the PNG icon with an SVG.",
    "authour" : "dao+bmo@mozilla.com",
    "created" : "2015-03-06T11:01:27Z"
  }, {
    "text" : "(In reply to DÃ£o Gottwald [:dao] from comment #14)\n> This could be fixed by addressing bug 1140340 and reverting most of bug\n> 1131458, although it looks like we'll still want to replace the PNG icon\n> with an SVG.\n\nWhat do you mean by \"reverting most of bug 1131458\", and how would that help?\n\nI don't think we should switch back to an image unless we have a more accessible alternative, and considering we're shipping on 38 and that's string-frozen, that seems like a non-starter.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-03-06T11:13:41Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #15)\n> (In reply to DÃ£o Gottwald [:dao] from comment #14)\n> > This could be fixed by addressing bug 1140340 and reverting most of bug\n> > 1131458, although it looks like we'll still want to replace the PNG icon\n> > with an SVG.\n> \n> What do you mean by \"reverting most of bug 1131458\", and how would that help?\n\nI mean it should be an image, not a toolbar button. This would get rid of the border shown in attachment 8567844. That's what this bug seems to have been filed for.\n\n> I don't think we should switch back to an image unless we have a more\n> accessible alternative, and considering we're shipping on 38 and that's\n> string-frozen, that seems like a non-starter.\n\nThe required strings seem to be there in readerMode.properties (readerMode.enter, readerMode.exit).",
    "authour" : "dao+bmo@mozilla.com",
    "created" : "2015-03-06T11:21:00Z"
  }, {
    "text" : "(In reply to DÃ£o Gottwald [:dao] from comment #16)\n> (In reply to :Gijs Kruitbosch from comment #15)\n> > (In reply to DÃ£o Gottwald [:dao] from comment #14)\n> > > This could be fixed by addressing bug 1140340 and reverting most of bug\n> > > 1131458, although it looks like we'll still want to replace the PNG icon\n> > > with an SVG.\n> > \n> > What do you mean by \"reverting most of bug 1131458\", and how would that help?\n> \n> I mean it should be an image, not a toolbar button. This would get rid of\n> the border shown in attachment 8567844. That's what this bug seems\n> to have been filed for.\n\nSo would adding a single line of CSS, which was a missed review nit to begin with. Use the other bugs to do whatever you like, I think I'm done with the scope-creep here.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-03-06T11:53:05Z"
  }, {
    "text" : "Deprioritized during backlog review.  Removed from IT 39.2 priority backlog and not part of the initial Q2 campaign release.",
    "authour" : "mmucci@mozilla.com",
    "created" : "2015-03-09T22:34:07Z"
  }, {
    "text" : "Stephen, can you still attach the updated SVG, please?",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-03-10T16:42:20Z"
  }, {
    "text" : "Created attachment 8575382\nurlbar-readerMode.svg â€“ 02",
    "authour" : "shorlander@mozilla.com",
    "created" : "2015-03-10T16:59:22Z"
  }, {
    "text" : "Created attachment 8580962\nrebased patch with updated icon and feedback addressed",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-03-20T22:56:41Z"
  }, {
    "text" : "This bug is most likely obsolete. We're gonna go with fixing bug 1140345 and that should probably take care of the issues described here.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-03-20T22:58:17Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #22)\n> This bug is most likely obsolete. We're gonna go with fixing bug 1140345 and\n> that should probably take care of the issues described here.\n\nCan we resolve this, or is there anything left to fix here?",
    "authour" : "florian@queze.net",
    "created" : "2015-03-23T11:32:04Z"
  }, {
    "text" : "Verified fixed on Nightly 39.0a1 (2015-03-23), using Ubuntu 14.04 (x64), Windows 7 (x64) and Mac OS X 10.9.5.",
    "authour" : "andrei.vaida@softvision.ro",
    "created" : "2015-03-24T09:02:38Z"
  } ],
  "status" : "VERIFIED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T21:52:23Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-03-06T11:53:05Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "NEW"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-20T20:09:23Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-20T23:00:50Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "NEW"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-23T18:59:37Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-03-24T09:02:38Z",
      "what" : "status",
      "removed" : "RESOLVED",
      "added" : "",
      "type" : "VERIFIED"
    } ],
    "resolutionEvents" : [ {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-23T18:59:37Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-02-23T10:24:33Z",
      "what" : "cc",
      "removed" : "",
      "added" : "andrei.vaida@softvision.ro"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T13:18:57Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gijskruitbosch+bugs@gmail.com, margaret.leibovic@gmail.com"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-02-23T15:36:47Z",
      "what" : "qa_contact",
      "removed" : "",
      "added" : "andrei.vaida@softvision.ro"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T21:52:23Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "1"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T21:52:23Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "39.1 - 9 Mar"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T21:52:23Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "gijskruitbosch+bugs@gmail.com"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T21:52:23Z",
      "what" : "op_sys",
      "removed" : "Windows 10",
      "added" : "Windows 8.1"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-24T00:07:01Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmucci@mozilla.com"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-24T00:07:01Z",
      "what" : "cf_fx_iteration",
      "removed" : "39.1 - 9 Mar",
      "added" : "38.3 - 23 Feb"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-24T16:23:21Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-24T16:46:19Z",
      "what" : "cf_fx_iteration",
      "removed" : "38.3 - 23 Feb",
      "added" : "39.1 - 9 Mar"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-03-02T07:38:03Z",
      "what" : "cc",
      "removed" : "",
      "added" : "philipp@mozilla.com"
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-03-05T00:50:45Z",
      "what" : "priority",
      "removed" : "--",
      "added" : "P2"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-03-05T14:40:44Z",
      "what" : "attachments.isobsolete:8568586",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "dao+bmo@mozilla.com",
      "date" : "2015-03-06T11:01:27Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "regression"
    }, {
      "name" : "dao+bmo@mozilla.com",
      "date" : "2015-03-06T11:01:27Z",
      "what" : "cc",
      "removed" : "",
      "added" : "dao@mozilla.com"
    }, {
      "name" : "dao+bmo@mozilla.com",
      "date" : "2015-03-06T11:02:33Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "558882"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-03-06T11:53:05Z",
      "what" : "cf_fx_iteration",
      "removed" : "39.1 - 9 Mar",
      "added" : "---"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-03-06T11:53:05Z",
      "what" : "assigned_to",
      "removed" : "gijskruitbosch+bugs@gmail.com",
      "added" : "nobody@mozilla.org"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-09T22:34:07Z",
      "what" : "cc",
      "removed" : "",
      "added" : "clarkbw@mozilla.com, dolske@mozilla.com"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-03-10T16:42:20Z",
      "what" : "cc",
      "removed" : "",
      "added" : "shorlander@mozilla.com"
    }, {
      "name" : "shorlander@mozilla.com",
      "date" : "2015-03-10T16:59:22Z",
      "what" : "attachments.isobsolete:8569990",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "florian@queze.net",
      "date" : "2015-03-17T18:36:53Z",
      "what" : "cc",
      "removed" : "",
      "added" : "florian@queze.net"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-20T20:09:23Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-20T21:53:38Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "39.2 - 23 Mar"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-20T21:57:03Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1132074"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-20T22:56:41Z",
      "what" : "attachments.isobsolete:8573259",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-20T23:00:50Z",
      "what" : "assigned_to",
      "removed" : "jaws@mozilla.com",
      "added" : "nobody@mozilla.org"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-21T03:48:07Z",
      "what" : "cf_fx_iteration",
      "removed" : "39.2 - 23 Mar",
      "added" : "---"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-21T03:48:07Z",
      "what" : "blocks",
      "removed" : "1132074",
      "added" : ""
    }, {
      "name" : "charles.milette@gmail.com",
      "date" : "2015-03-22T14:10:29Z",
      "what" : "cc",
      "removed" : "",
      "added" : "charles.milette@gmail.com"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-23T18:59:37Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "39.2 - 23 Mar"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-23T18:59:37Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-23T18:59:37Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed by bug 1140345]"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-23T18:59:37Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-23 11:59:37"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-23T19:01:41Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1132074"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-03-24T09:02:38Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "verified"
    } ],
    "flagEvents" : [ {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T13:18:57Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-02-23T15:36:47Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "QE_VERIFY",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "margaret.leibovic@gmail.com",
      "date" : "2015-02-23T19:22:33Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(margaret.leibovic@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T21:52:23Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "BACKLOG",
        "state" : "GRANTED"
      }, {
        "status" : "TEST_SUITE",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-24T16:23:21Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8568586,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-25T20:44:12Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : 8568586,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-03-05T14:40:40Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8573259,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-09T03:28:39Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : 8573259,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-03-10T16:42:20Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "shorlander@mozilla.com",
      "date" : "2015-03-10T16:59:22Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(shorlander@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "florian@queze.net",
      "date" : "2015-03-23T11:32:04Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-23T18:59:37Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135351,
  "cclist" : [ "andrei.vaida@softvision.ro", "charles.milette@gmail.com", "clarkbw@mozilla.com", "dao+bmo@mozilla.com", "dolske@mozilla.com", "florian@queze.net", "gijskruitbosch+bugs@gmail.com", "jaws@mozilla.com", "margaret.leibovic@gmail.com", "mmucci@mozilla.com", "philipp@mozilla.com", "shorlander@mozilla.com" ]
}, {
  "component" : "Downloads Panel",
  "summary" : "about:downloads broken",
  "reporter" : "alice0775@yahoo.co.jp",
  "assigned" : "mak77@bonardo.net",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "x86_64",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Build Identifier:\nhttps://hg.mozilla.org/mozilla-central/rev/1b4c5daa7b7a\nMozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101 Firefox/38.0 ID:20150220030202\n\nSteps to reproduce:\n1. Open about:downloads and download something\n\nActual results:\nDownload list is empty\n\nAnd Error console shows following error:\nReferenceError: XPCOMUtils is not defined allDownloadsViewOverlay.js:7:0\n\nReferenceError: DownloadsCommon is not defined allDownloadsViewOverlay.js:510:2\n\nTypeError: DOWNLOAD_VIEW_SUPPORTED_COMMANDS is undefined allDownloadsViewOverlay.js:1402:0\n\nExpected results:\nDownload list should be displayed\n\n\n\nPushlog:\nhttps://hg.mozilla.org/integration/fx-team/pushloghtml?fromchange=1d9dcfdb7c08&tochange=79fcb3f8f12e\n\nRegressed by: Bug 1116176",
  "comments" : [ {
    "text" : "Build Identifier:\nhttps://hg.mozilla.org/mozilla-central/rev/1b4c5daa7b7a\nMozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101 Firefox/38.0 ID:20150220030202\n\nSteps to reproduce:\n1. Open about:downloads and download something\n\nActual results:\nDownload list is empty\n\nAnd Error console shows following error:\nReferenceError: XPCOMUtils is not defined allDownloadsViewOverlay.js:7:0\n\nReferenceError: DownloadsCommon is not defined allDownloadsViewOverlay.js:510:2\n\nTypeError: DOWNLOAD_VIEW_SUPPORTED_COMMANDS is undefined allDownloadsViewOverlay.js:1402:0\n\nExpected results:\nDownload list should be displayed\n\n\n\nPushlog:\nhttps://hg.mozilla.org/integration/fx-team/pushloghtml?fromchange=1d9dcfdb7c08&tochange=79fcb3f8f12e\n\nRegressed by: Bug 1116176",
    "authour" : "alice0775@yahoo.co.jp",
    "created" : "2015-02-21T09:09:55Z"
  }, {
    "text" : "Oops,\nRegressed by: Bug 1129896",
    "authour" : "alice0775@yahoo.co.jp",
    "created" : "2015-02-21T09:50:27Z"
  }, {
    "text" : "https://bugzilla.mozilla.org/show_bug.cgi?id=1135343",
    "authour" : "asmodeusme@yahoo.com",
    "created" : "2015-02-21T14:08:55Z"
  }, {
    "text" : "*** Bug 1135343 has been marked as a duplicate of this bug. ***",
    "authour" : "alice0775@yahoo.co.jp",
    "created" : "2015-02-21T14:20:44Z"
  }, {
    "text" : "The bunch of patches breaks \"All-in-One Sidebar\", \"Download Manager (S3) \", \"Downloads Window\" and about:downloads.",
    "authour" : "alice0775@yahoo.co.jp",
    "created" : "2015-02-21T23:34:12Z"
  }, {
    "text" : "I think the problem is that allDownloadsViewOverlay and downloads.js are using XPCOMUtils without importing it.",
    "authour" : "mak77@bonardo.net",
    "created" : "2015-02-24T17:24:20Z"
  }, {
    "text" : "Created attachment 8569794\npatch v1",
    "authour" : "mak77@bonardo.net",
    "created" : "2015-02-26T11:28:24Z"
  }, {
    "text" : "Created attachment 8569795\npatch v1",
    "authour" : "mak77@bonardo.net",
    "created" : "2015-02-26T11:29:54Z"
  }, {
    "text" : "Comment on attachment 8569795\npatch v1\n\nThanks Marco for the patch, should have gotten to this earlier.\n\nSorry for the delay.",
    "authour" : "paolo.mozmail@amadzone.org",
    "created" : "2015-02-26T16:57:39Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/7b738e0866a6",
    "authour" : "mak77@bonardo.net",
    "created" : "2015-02-26T18:08:30Z"
  }, {
    "text" : "Comment on attachment 8569795\npatch v1\n\nApproval Request Comment\n[Feature/regressing bug #]: Bug 1129896\n[User impact if declined]: List of all downloads for Private Browsing windows is empty\n[Describe test coverage new/current, TreeHerder]: Manual testing\n[Risks and why]: The fix consists in restoring a simple missing module import\n[String/UUID change made/needed]: None",
    "authour" : "paolo.mozmail@amadzone.org",
    "created" : "2015-02-26T20:09:01Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/7b738e0866a6",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-02-27T02:39:40Z"
  }, {
    "text" : "*** Bug 1137466 has been marked as a duplicate of this bug. ***",
    "authour" : "petruta.rasa@softvision.ro",
    "created" : "2015-02-27T12:19:14Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-aurora/rev/d8d04e0bbaa6",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-27T22:31:37Z"
  }, {
    "text" : "Mistakenly filed against Firefox 38 and should be instead 38 Branch. Sorry for the spam. dkl",
    "authour" : "dkl@mozilla.com",
    "created" : "2015-04-13T22:47:59Z"
  } ],
  "status" : "VERIFIED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "mak77@bonardo.net",
      "date" : "2015-02-26T11:28:24Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-27T02:39:40Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    }, {
      "name" : "Virtual@MsgSafe.io",
      "date" : "2015-02-28T12:24:39Z",
      "what" : "status",
      "removed" : "RESOLVED",
      "added" : "",
      "type" : "VERIFIED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-27T02:39:40Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "alice0775@yahoo.co.jp",
      "date" : "2015-02-21T09:50:27Z",
      "what" : "blocks",
      "removed" : "1116176",
      "added" : "1129896"
    }, {
      "name" : "Virtual@MsgSafe.io",
      "date" : "2015-02-21T10:22:34Z",
      "what" : "cc",
      "removed" : "",
      "added" : "BernesB@gmail.com"
    }, {
      "name" : "asmodeusme@yahoo.com",
      "date" : "2015-02-21T14:08:55Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bezaleel360@gmail.com"
    }, {
      "name" : "nissan4321@gmail.com",
      "date" : "2015-02-21T17:00:55Z",
      "what" : "cc",
      "removed" : "",
      "added" : "nissan4321@gmail.com"
    }, {
      "name" : "nayinain@gmail.com",
      "date" : "2015-02-22T14:41:39Z",
      "what" : "cc",
      "removed" : "",
      "added" : "nayinain@gmail.com"
    }, {
      "name" : "gavin.sharp@gmail.com",
      "date" : "2015-02-24T18:07:12Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gavin.sharp@gmail.com"
    }, {
      "name" : "gavin.sharp@gmail.com",
      "date" : "2015-02-24T18:07:12Z",
      "what" : "cf_tracking_firefox38",
      "removed" : "?",
      "added" : "+"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-24T19:06:01Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmucci@mozilla.com"
    }, {
      "name" : "mak77@bonardo.net",
      "date" : "2015-02-26T11:28:24Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "mak77@bonardo.net"
    }, {
      "name" : "mak77@bonardo.net",
      "date" : "2015-02-26T11:29:54Z",
      "what" : "attachments.isobsolete:8569794",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-26T14:31:54Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "39.1 - 9 Mar"
    }, {
      "name" : "mak77@bonardo.net",
      "date" : "2015-02-26T16:18:42Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "1"
    }, {
      "name" : "mak77@bonardo.net",
      "date" : "2015-02-26T18:08:30Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "Virtual@MsgSafe.io",
      "date" : "2015-02-26T19:41:22Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "affected"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-27T02:39:40Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-26 18:39:40"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-27T02:39:40Z",
      "what" : "cf_status_firefox39",
      "removed" : "affected",
      "added" : "fixed"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-02-27T09:19:29Z",
      "what" : "cc",
      "removed" : "",
      "added" : "florin.mezei@softvisioninc.eu"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-02-27T09:19:29Z",
      "what" : "qa_contact",
      "removed" : "",
      "added" : "catalin.varga@softvision.ro"
    }, {
      "name" : "petruta.rasa@softvision.ro",
      "date" : "2015-02-27T12:19:14Z",
      "what" : "cc",
      "removed" : "",
      "added" : "winson.wen1@gmail.com"
    }, {
      "name" : "paolo.mozmail@amadzone.org",
      "date" : "2015-02-27T16:45:35Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-27T22:31:37Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-27T22:31:37Z",
      "what" : "cf_status_firefox38",
      "removed" : "affected",
      "added" : "fixed"
    }, {
      "name" : "Virtual@MsgSafe.io",
      "date" : "2015-02-28T12:24:39Z",
      "what" : "cf_status_firefox38",
      "removed" : "fixed",
      "added" : "verified"
    }, {
      "name" : "Virtual@MsgSafe.io",
      "date" : "2015-02-28T12:24:39Z",
      "what" : "cf_status_firefox39",
      "removed" : "fixed",
      "added" : "verified"
    }, {
      "name" : "dkl@mozilla.com",
      "date" : "2015-04-13T22:47:59Z",
      "what" : "version",
      "removed" : "Firefox 38",
      "added" : "38 Branch"
    } ],
    "flagEvents" : [ {
      "name" : "alice0775@yahoo.co.jp",
      "date" : "2015-02-21T09:09:55Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gavin.sharp@gmail.com",
      "date" : "2015-02-24T18:07:12Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "BACKLOG",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "mak77@bonardo.net",
      "date" : "2015-02-26T11:28:24Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(paolo.mozmail@amadzone.org)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "mak77@bonardo.net",
      "date" : "2015-02-26T11:28:24Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8569794,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mak77@bonardo.net",
      "date" : "2015-02-26T11:29:54Z",
      "what" : "flagtypes.name",
      "removed" : "review?(paolo.mozmail@amadzone.org)",
      "added" : "",
      "attachmentId" : 8569794,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "mak77@bonardo.net",
      "date" : "2015-02-26T11:29:54Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8569795,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-26T14:31:54Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "QE_VERIFY",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mak77@bonardo.net",
      "date" : "2015-02-26T16:18:49Z",
      "what" : "flagtypes.name",
      "removed" : "qe-verify?",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "QE_VERIFY",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "paolo.mozmail@amadzone.org",
      "date" : "2015-02-26T16:57:39Z",
      "what" : "flagtypes.name",
      "removed" : "review?(paolo.mozmail@amadzone.org)",
      "added" : "",
      "attachmentId" : 8569795,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "paolo.mozmail@amadzone.org",
      "date" : "2015-02-26T20:09:01Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8569795,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gavin.sharp@gmail.com",
      "date" : "2015-02-27T02:18:27Z",
      "what" : "flagtypes.name",
      "removed" : "approval-mozilla-aurora?",
      "added" : "",
      "attachmentId" : 8569795,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135348,
  "cclist" : [ "asmodeusme@yahoo.com", "florin.mezei@softvisioninc.eu", "gavin.sharp@gmail.com", "mak77@bonardo.net", "mmucci@mozilla.com", "nayinain@gmail.com", "nissan4321@gmail.com", "paolo.mozmail@amadzone.org", "Virtual@MsgSafe.io", "winson.wen1@gmail.com" ]
}, {
  "component" : "Preferences",
  "summary" : "browser_change_app_handler.js is going to permafail on Windows when Gecko 38 merges to Beta",
  "reporter" : "ryanvm@gmail.com",
  "assigned" : "gijskruitbosch+bugs@gmail.com",
  "created" : null,
  "operatingSystem" : "Windows 8.1",
  "hardware" : "x86_64",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "[Tracking Requested - why for this release]: Test permafail when Gecko 38 merges to Beta.\n\nBecause the fun never ends with this test. This only affects Windows.\n\nhttps://treeherder.mozilla.org/logviewer.html#?job_id=5084886&repo=try\n\n14:55:48 INFO - 1368 INFO TEST-START | browser/components/preferences/in-content/tests/browser_change_app_handler.js\n14:56:15 INFO - 1424472975042 Browser.Experiments.Experiments TRACE Experiments #0::enabled=true, true\n14:56:15 INFO - 1424472975043 Browser.Experiments.Experiments TRACE Experiments #0::Registering instance with Addon Manager.\n14:56:15 INFO - 1424472975044 Browser.Experiments.Experiments TRACE Experiments #0::Registering previous experiment add-on provider.\n14:56:15 INFO - 1424472975044 Browser.Experiments.Experiments TRACE PreviousExperimentProvider #0::startup()\n14:56:15 INFO - 1424472975045 Browser.Experiments.Experiments TRACE Experiments #0::_loadFromCache\n14:56:15 INFO - 1424472975049 Browser.Experiments.Experiments TRACE Experiments #0::_loadTask finished ok\n14:56:15 INFO - 1424472975050 Browser.Experiments.Experiments TRACE Experiments #0::_run\n14:56:15 INFO - 1424472975050 Browser.Experiments.Experiments TRACE Experiments #0::_main iteration\n14:56:15 INFO - 1424472975050 Browser.Experiments.Experiments TRACE Experiments #0::_evaluateExperiments\n14:56:15 INFO - 1424472975052 Browser.Experiments.Experiments TRACE Experiments #0::_main finished, scheduling next run\n15:02:16 INFO - 1369 INFO checking window state\n15:02:16 INFO - 1370 INFO Entering test\n15:02:16 INFO - 1371 INFO TEST-PASS | browser/components/preferences/in-content/tests/browser_change_app_handler.js | Should have at least one known handler\n15:02:16 INFO - 1372 INFO Console message: 1424472975042 Browser.Experiments.Experiments TRACE Experiments #0::enabled=true, true\n15:02:16 INFO - 1373 INFO Console message: 1424472975043 Browser.Experiments.Experiments TRACE Experiments #0::Registering instance with Addon Manager.\n15:02:16 INFO - 1374 INFO Console message: 1424472975044 Browser.Experiments.Experiments TRACE Experiments #0::Registering previous experiment add-on provider.\n15:02:16 INFO - 1375 INFO Console message: 1424472975044 Browser.Experiments.Experiments TRACE PreviousExperimentProvider #0::startup()\n15:02:16 INFO - 1376 INFO Console message: 1424472975045 Browser.Experiments.Experiments TRACE Experiments #0::_loadFromCache\n15:02:16 INFO - 1377 INFO Console message: 1424472975049 Browser.Experiments.Experiments TRACE Experiments #0::_loadTask finished ok\n15:02:16 INFO - 1378 INFO Console message: 1424472975050 Browser.Experiments.Experiments TRACE Experiments #0::_run\n15:02:16 INFO - 1379 INFO Console message: 1424472975050 Browser.Experiments.Experiments TRACE Experiments #0::_main iteration\n15:02:16 INFO - 1380 INFO Console message: 1424472975050 Browser.Experiments.Experiments TRACE Experiments #0::_evaluateExperiments\n15:02:16 INFO - 1381 INFO Console message: 1424472975052 Browser.Experiments.Experiments TRACE Experiments #0::_main finished, scheduling next run\n15:02:16 INFO - 1382 INFO Console message: 1424473006088 Services.HealthReport.HealthReporter WARN Saved state file does not exist.\n15:02:16 INFO - 1383 ERROR TEST-UNEXPECTED-TIMEOUT | browser/components/preferences/in-content/tests/browser_change_app_handler.js | application timed out after 330 seconds with no output on browser/components/preferences/in-content/tests",
  "comments" : [ {
    "text" : "[Tracking Requested - why for this release]: Test permafail when Gecko 38 merges to Beta.\n\nBecause the fun never ends with this test. This only affects Windows.\n\nhttps://treeherder.mozilla.org/logviewer.html#?job_id=5084886&repo=try\n\n14:55:48 INFO - 1368 INFO TEST-START | browser/components/preferences/in-content/tests/browser_change_app_handler.js\n14:56:15 INFO - 1424472975042 Browser.Experiments.Experiments TRACE Experiments #0::enabled=true, true\n14:56:15 INFO - 1424472975043 Browser.Experiments.Experiments TRACE Experiments #0::Registering instance with Addon Manager.\n14:56:15 INFO - 1424472975044 Browser.Experiments.Experiments TRACE Experiments #0::Registering previous experiment add-on provider.\n14:56:15 INFO - 1424472975044 Browser.Experiments.Experiments TRACE PreviousExperimentProvider #0::startup()\n14:56:15 INFO - 1424472975045 Browser.Experiments.Experiments TRACE Experiments #0::_loadFromCache\n14:56:15 INFO - 1424472975049 Browser.Experiments.Experiments TRACE Experiments #0::_loadTask finished ok\n14:56:15 INFO - 1424472975050 Browser.Experiments.Experiments TRACE Experiments #0::_run\n14:56:15 INFO - 1424472975050 Browser.Experiments.Experiments TRACE Experiments #0::_main iteration\n14:56:15 INFO - 1424472975050 Browser.Experiments.Experiments TRACE Experiments #0::_evaluateExperiments\n14:56:15 INFO - 1424472975052 Browser.Experiments.Experiments TRACE Experiments #0::_main finished, scheduling next run\n15:02:16 INFO - 1369 INFO checking window state\n15:02:16 INFO - 1370 INFO Entering test\n15:02:16 INFO - 1371 INFO TEST-PASS | browser/components/preferences/in-content/tests/browser_change_app_handler.js | Should have at least one known handler\n15:02:16 INFO - 1372 INFO Console message: 1424472975042 Browser.Experiments.Experiments TRACE Experiments #0::enabled=true, true\n15:02:16 INFO - 1373 INFO Console message: 1424472975043 Browser.Experiments.Experiments TRACE Experiments #0::Registering instance with Addon Manager.\n15:02:16 INFO - 1374 INFO Console message: 1424472975044 Browser.Experiments.Experiments TRACE Experiments #0::Registering previous experiment add-on provider.\n15:02:16 INFO - 1375 INFO Console message: 1424472975044 Browser.Experiments.Experiments TRACE PreviousExperimentProvider #0::startup()\n15:02:16 INFO - 1376 INFO Console message: 1424472975045 Browser.Experiments.Experiments TRACE Experiments #0::_loadFromCache\n15:02:16 INFO - 1377 INFO Console message: 1424472975049 Browser.Experiments.Experiments TRACE Experiments #0::_loadTask finished ok\n15:02:16 INFO - 1378 INFO Console message: 1424472975050 Browser.Experiments.Experiments TRACE Experiments #0::_run\n15:02:16 INFO - 1379 INFO Console message: 1424472975050 Browser.Experiments.Experiments TRACE Experiments #0::_main iteration\n15:02:16 INFO - 1380 INFO Console message: 1424472975050 Browser.Experiments.Experiments TRACE Experiments #0::_evaluateExperiments\n15:02:16 INFO - 1381 INFO Console message: 1424472975052 Browser.Experiments.Experiments TRACE Experiments #0::_main finished, scheduling next run\n15:02:16 INFO - 1382 INFO Console message: 1424473006088 Services.HealthReport.HealthReporter WARN Saved state file does not exist.\n15:02:16 INFO - 1383 ERROR TEST-UNEXPECTED-TIMEOUT | browser/components/preferences/in-content/tests/browser_change_app_handler.js | application timed out after 330 seconds with no output on browser/components/preferences/in-content/tests",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-21T02:51:05Z"
  }, {
    "text" : "This is just because I assumed that this would ship with 38 where we plan to ship incontent prefs. I should have made that assumption explicit in the test. I'll fix this next iteration.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-21T15:47:17Z"
  }, {
    "text" : "Test fix:\n\nremote:   https://hg.mozilla.org/integration/fx-team/rev/0fd6c4c24dc9",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-21T16:05:15Z"
  }, {
    "text" : "Thanks for the quick fix!",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-21T16:05:55Z"
  }, {
    "text" : "Filed bug 1135375 in order to just toggle the default, so I guess we can close this when it merges (assuming it does in time for uplift).",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-21T16:21:03Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/0fd6c4c24dc9",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-21T21:41:59Z"
  } ],
  "status" : "VERIFIED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-21T15:47:17Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:59Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-22T02:06:31Z",
      "what" : "status",
      "removed" : "RESOLVED",
      "added" : "",
      "type" : "VERIFIED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:59Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-21T03:09:02Z",
      "what" : "blocks",
      "removed" : "1044600",
      "added" : "1111540"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-21T15:47:17Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "1"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-21T15:47:17Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "39.1 - 9 Mar"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-21T15:47:17Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "gijskruitbosch+bugs@gmail.com"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-21T16:05:15Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "leave-open"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-21T16:21:03Z",
      "what" : "keywords",
      "removed" : "leave-open",
      "added" : ""
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-21T16:27:58Z",
      "what" : "cf_fx_iteration",
      "removed" : "39.1 - 9 Mar",
      "added" : "38.3 - 23 Feb"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:59Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 38"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:59Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-21 13:41:59"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:59Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-22T02:06:31Z",
      "what" : "cf_status_firefox38",
      "removed" : "fixed",
      "added" : "verified"
    }, {
      "name" : "lhenry@mozilla.com",
      "date" : "2015-03-12T21:58:52Z",
      "what" : "cf_tracking_firefox38",
      "removed" : "?",
      "added" : "---"
    } ],
    "flagEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T02:51:05Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-21T15:47:17Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:59Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135317,
  "cclist" : [ "gijskruitbosch+bugs@gmail.com", "jaws@mozilla.com", "ryanvm@gmail.com" ]
}, {
  "component" : "General",
  "summary" : "[Polaris][TP][META] Implement UI for v1 Tracking Protection in Firefox",
  "reporter" : "jmoradi@mozilla.com",
  "assigned" : "nobody@mozilla.org",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Tracking Bug for v1 UI to launch Tracking Protection in Firefox.",
  "comments" : [ {
    "text" : "Tracking Bug for v1 UI to launch Tracking Protection in Firefox.",
    "authour" : "jmoradi@mozilla.com",
    "created" : "2015-02-20T22:55:09Z"
  }, {
    "text" : "Shipped in Firefox 42.",
    "authour" : "francois@mozilla.com",
    "created" : "2016-08-02T00:18:09Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "francois@mozilla.com",
      "date" : "2016-08-02T00:18:09Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "francois@mozilla.com",
      "date" : "2016-08-02T00:18:09Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-20T22:55:31Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1135272"
    }, {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-20T23:13:11Z",
      "what" : "depends_on",
      "removed" : "1135272",
      "added" : ""
    }, {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-20T23:15:46Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1135270"
    }, {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-20T23:17:22Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1126264"
    }, {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-20T23:17:48Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1130605"
    }, {
      "name" : "philipp@mozilla.com",
      "date" : "2015-03-03T13:48:59Z",
      "what" : "cc",
      "removed" : "",
      "added" : "philipp@mozilla.com"
    }, {
      "name" : "philipp@mozilla.com",
      "date" : "2015-03-03T13:48:59Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1125402, 1125230, 1125226"
    }, {
      "name" : "gavin.sharp@gmail.com",
      "date" : "2015-03-04T22:57:57Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gavin.sharp@gmail.com"
    }, {
      "name" : "mmc.bugzilla@gmail.com",
      "date" : "2015-03-05T20:08:48Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmc@mozilla.com"
    }, {
      "name" : "mmc.bugzilla@gmail.com",
      "date" : "2015-03-05T20:08:48Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1029886"
    }, {
      "name" : "mmc.bugzilla@gmail.com",
      "date" : "2015-03-05T20:09:57Z",
      "what" : "cc",
      "removed" : "",
      "added" : "francois@mozilla.com, sworkman@mozilla.com"
    }, {
      "name" : "bruant.d@gmail.com",
      "date" : "2015-03-11T08:54:52Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bruant.d@gmail.com"
    }, {
      "name" : "alam@mozilla.com",
      "date" : "2015-03-11T22:04:40Z",
      "what" : "cc",
      "removed" : "",
      "added" : "alam@mozilla.com"
    }, {
      "name" : "edwong@mozilla.com",
      "date" : "2015-03-16T21:21:48Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1143530"
    }, {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-03-20T21:31:19Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1140783, 1140774"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-03-23T09:25:38Z",
      "what" : "cc",
      "removed" : "",
      "added" : "ttaubert@mozilla.com"
    }, {
      "name" : "ehsan@mozilla.com",
      "date" : "2015-03-26T22:06:34Z",
      "what" : "cc",
      "removed" : "",
      "added" : "ehsan@mozilla.com"
    }, {
      "name" : "alfredkayser@gmail.com",
      "date" : "2015-06-04T05:16:40Z",
      "what" : "cc",
      "removed" : "",
      "added" : "alfredkayser@gmail.com"
    }, {
      "name" : "Virtual@MsgSafe.io",
      "date" : "2015-07-10T19:02:51Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bernesb@gmail.com"
    }, {
      "name" : "dkeeler@mozilla.com",
      "date" : "2015-07-15T20:37:52Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1184312"
    }, {
      "name" : "francois@mozilla.com",
      "date" : "2016-08-02T00:18:09Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2016-08-02 00:18:09"
    } ],
    "flagEvents" : [ ]
  },
  "resolution" : "FIXED",
  "id" : 1135274,
  "cclist" : [ "alam@mozilla.com", "alfredkayser@gmail.com", "bruant.d@gmail.com", "ehsan@mozilla.com", "francois@mozilla.com", "gavin.sharp@gmail.com", "mmc.bugzilla@gmail.com", "philipp@mozilla.com", "sjhworkman@gmail.com", "ttaubert@mozilla.com", "Virtual@MsgSafe.io" ]
}, {
  "component" : "General",
  "summary" : "[UX][Polaris] UX spec for v1 Tracking Protection",
  "reporter" : "jmoradi@mozilla.com",
  "assigned" : "agrigas@mozilla.com",
  "created" : null,
  "operatingSystem" : "Mac OS X",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "We need to specify the minimum UX to launch TP v1, so that we can hand off to engineering and start building. \n\nThe design work is largely underway in related work for identity block (bug 1125226), and user education/onboarding (bug 1126264)  \n\nThere is potentially platform work needed if we pursue ambient notification/alert for major blocking and/or a grid overlay (bug 1125308)",
  "comments" : [ {
    "text" : "We need to specify the minimum UX to launch TP v1, so that we can hand off to engineering and start building. \n\nThe design work is largely underway in related work for identity block (bug 1125226), and user education/onboarding (bug 1126264)  \n\nThere is potentially platform work needed if we pursue ambient notification/alert for major blocking and/or a grid overlay (bug 1125308)",
    "authour" : "jmoradi@mozilla.com",
    "created" : "2015-02-20T22:45:28Z"
  }, {
    "text" : "Are there any screenshots or links to the newly proposed tracking protection / mixed content Shield doorhanger?  Thanks!",
    "authour" : "tanvi@mozilla.com",
    "created" : "2015-02-26T19:12:07Z"
  }, {
    "text" : "(In reply to Tanvi Vyas [:tanvi] from comment #1)\n> Are there any screenshots or links to the newly proposed tracking protection\n> / mixed content Shield doorhanger?  Thanks!\n\nthe latest doorhanger work is here: https://bugzilla.mozilla.org/show_bug.cgi?id=1125230\nIt is still in progress but should be finalized end of the current sprint",
    "authour" : "agrigas@mozilla.com",
    "created" : "2015-02-26T19:19:31Z"
  }, {
    "text" : "Final spec for MVP lives here: https://mana.mozilla.org/wiki/display/FIREFOX/Polaris+Tracking+Protection+UX\n\nWill attach an overview deck of the components as well shortly.",
    "authour" : "agrigas@mozilla.com",
    "created" : "2015-03-09T14:10:43Z"
  }, {
    "text" : "Created attachment 8576053\noverview deck of feature",
    "authour" : "agrigas@mozilla.com",
    "created" : "2015-03-11T16:02:53Z"
  }, {
    "text" : "I reviewed and edited the copy for the Onboarding and Activation. Can you remind me what else you wanted me to look at? Thanks.",
    "authour" : "matej@mozilla.com",
    "created" : "2015-03-16T20:24:39Z"
  }, {
    "text" : "(In reply to Matej Novak [:matej] from comment #5)\n> I reviewed and edited the copy for the Onboarding and Activation. Can you\n> remind me what else you wanted me to look at? Thanks.\n\nSure the doorhanger section for tracking protection.",
    "authour" : "agrigas@mozilla.com",
    "created" : "2015-03-16T20:26:41Z"
  }, {
    "text" : "(In reply to agrigas from comment #6)\n> (In reply to Matej Novak [:matej] from comment #5)\n> > I reviewed and edited the copy for the Onboarding and Activation. Can you\n> > remind me what else you wanted me to look at? Thanks.\n> \n> Sure the doorhanger section for tracking protection.\n\nDone. I also added a comment about the visuals.\n\nLet me know if you need anything else.",
    "authour" : "matej@mozilla.com",
    "created" : "2015-03-16T21:28:55Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-24T16:38:18Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "agrigas@mozilla.com",
      "date" : "2015-03-10T13:29:01Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "agrigas@mozilla.com",
      "date" : "2015-03-10T13:29:01Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-20T22:48:45Z",
      "what" : "cc",
      "removed" : "",
      "added" : "agrigas@mozilla.com, mmucci@mozilla.com, philipp@mozilla.com"
    }, {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-20T22:48:45Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-20T22:50:01Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[ux]"
    }, {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-20T23:15:46Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1135274"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-24T16:38:18Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "8"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-24T16:38:18Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "39.1 - 9 Mar"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-24T16:38:18Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "agrigas@mozilla.com"
    }, {
      "name" : "mmc.bugzilla@gmail.com",
      "date" : "2015-02-24T17:22:40Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmc@mozilla.com, tanvi@mozilla.com"
    }, {
      "name" : "agrigas@mozilla.com",
      "date" : "2015-03-02T20:46:25Z",
      "what" : "cc",
      "removed" : "",
      "added" : "matej@mozilla.com"
    }, {
      "name" : "agrigas@mozilla.com",
      "date" : "2015-03-10T13:29:01Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-10 06:29:01"
    }, {
      "name" : "Virtual@MsgSafe.io",
      "date" : "2015-07-10T19:05:24Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bernesb@gmail.com"
    } ],
    "flagEvents" : [ {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-20T22:50:01Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "BACKLOG",
        "state" : "GRANTED"
      }, {
        "status" : "QE_VERIFY",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "matej@mozilla.com",
      "date" : "2015-03-16T20:24:39Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "agrigas@mozilla.com",
      "date" : "2015-03-16T20:26:41Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(agrigas@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135270,
  "cclist" : [ "agrigas@mozilla.com", "matej@mozilla.com", "mmc.bugzilla@gmail.com", "mmucci@mozilla.com", "philipp@mozilla.com", "tanvi@mozilla.com", "Virtual@MsgSafe.io" ]
}, {
  "component" : "Developer Tools: WebIDE",
  "summary" : "Move runtime popup panel to a panel with toggle",
  "reporter" : "jfong@mozilla.com",
  "assigned" : "jfong@mozilla.com",
  "created" : null,
  "operatingSystem" : "Mac OS X",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "",
  "comments" : [ {
    "text" : "",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-02-20T19:40:39Z"
  }, {
    "text" : "Created attachment 8577311\nBug1135191.patch\n\nI ended up making the test_autoconnect_runtime.html pass with some changes that you can see there - just verifying that it is okay for this patch.\n\nAlso I believe I fixed https://bugzilla.mozilla.org/show_bug.cgi?id=1143028 through this patch but also need you to see if that's correct.",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-03-13T17:03:09Z"
  }, {
    "text" : "Try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=5264c09b35b2",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-03-13T17:07:12Z"
  }, {
    "text" : "Comment on attachment 8577311\nBug1135191.patch\n\nReview of attachment 8577311:\n-----------------------------------------------------------------\n\n::: browser/devtools/webide/content/project-listing.js\n@@ +28,5 @@\n>  function onAppManagerUpdate(event, what) {\n>    switch (what) {\n> +    case \"connection\":\n> +    case \"project\":\n> +    case \"project-validated\":\n\nYou need to reconcile these new case entries with the ones at the bottom.  After you reach the first \"break;\" for given case, the rest of the switch is ignored.  Besides, these new lines seem to duplicate functionality for some cases.\n\nThere should only ever be one occurrence of a given case in a single switch statement.\n\n@@ +35,5 @@\n> +      break;\n> +    case \"project-is-not-running\":\n> +    case \"project-is-running\":\n> +    case \"list-tabs-response\":\n> +      projectList.updateCommands();\n\nPlease read what |projectList.updateCommands| does, and decide what events would actually matter.  What state changes can cause the function to behave differently?  Those are the (only!) times it needs to be called.\n\nSince you are breaking up an existing method, you should not assume that all of the same events are correct for the individual pieces.\n\n::: browser/devtools/webide/content/runtime-listing.js\n@@ +29,5 @@\n> +});\n> +\n> +function onAppManagerUpdate(event, what) {\n> +  switch (what) {\n> +    case \"runtimelist\":\n\nLook carefully at this list, especially if the action button are moved back into webide.js.\n\n::: browser/devtools/webide/content/runtime-listing.xhtml\n@@ +11,5 @@\n> +\n> +<html xmlns=\"http://www.w3.org/1999/xhtml\">\n> +  <head>\n> +    <meta charset=\"utf8\"/>\n> +    <link rel=\"stylesheet\" href=\"chrome://webide/skin/project-listing.css\" type=\"text/css\"/>\n\nShouldn't this frame get a separate CSS file?  If there are common parts, make a file for those that they both link to.\n\n::: browser/devtools/webide/content/runtime-panel.js\n@@ +3,5 @@\n> + * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n> +\n> +let RuntimePanel = {\n> +  // TODO: Expand function to save toggle state.\n> +  toggle: function(sidebarsEnabled, triggerPopup) {\n\nThis is a confusing API (same goes for ProjectPanel) because it blends two independent behaviors, and it's keyed only off a boolean.\n\nBoolean params should generally be avoided[1], since they make it much harder to read the call site later and understand what's happening.  Even now, while reviewing this code, I forgot what it means!\n\nAdditionally, the boolean is not even used if sidebars are enabled.\n\nSo, what about:\n\ntoggleSidebar()\nshowPopup()\n\nand then webide.js calls the correct one based on whether sidebars are enabled or not.  I think that would be easier to read.\n\n[1]: http://ariya.ofilabs.com/2011/08/hall-of-api-shame-boolean-trap.html\n\n::: browser/devtools/webide/content/webide.js\n@@ +309,5 @@\n>      let win = document.querySelector(\"window\");\n>      win.classList.add(\"busy\")\n>      win.classList.add(\"busy-undetermined\");\n> +    if (!runtimeList.sidebarsEnabled) {\n> +      runtimeList.updateCommands();\n\nThis covers the non-sidebar case, but the sidebar case also needs to know when WebIDE's busy state changes.  I think right thing is for webide.js to emit an event, which is new behavior, since all messages have only come from app-manager.js so far in the UI.\n\nSo, you then listen for a \"busy\" event in the frame.\n\n@@ +413,1 @@\n>    _actionsToLog: new Set(),\n\nAdd a new section header above here, such as:\n /********** ACTIONS **********/\n\n@@ +961,5 @@\n>      UI.openProject();\n>    },\n>  \n>    showTroubleShooting: function() {\n> +    runtimeList.showTroubleShooting();\n\nThis is a function of the overall UI, they should not be moved to |runtimeList|.\n\n|runtimeList| can tell the main document to do this as needed.\n\n@@ +966,4 @@\n>    },\n>  \n>    showAddons: function() {\n> +    runtimeList.showAddons();\n\nThis is a function of the overall UI, they should not be moved to |runtimeList|.\n\n|runtimeList| can tell the main document to do this as needed.\n\n::: browser/devtools/webide/modules/app-manager.js\n@@ +137,5 @@\n>      this.update(\"connection\");\n>    },\n>  \n>    get connected() {\n> +    return this.connection &&\n\nRevert this, it's not needed with changes from bug 1143028.\n\n@@ +432,5 @@\n>  \n>    isMainProcessDebuggable: function() {\n>      // Fx <37 exposes chrome tab actors on RootActor\n>      // Fx >=37 exposes a dedicated actor via attachProcess request\n> +    return this.connection &&\n\nRevert this, it's not needed with changes from bug 1143028.\n\n::: browser/devtools/webide/modules/project-list.js\n@@ +115,5 @@\n>      }\n>    },\n>  \n>    _buildProjectPanelTabs: function() {\n> +    if (!AppManager.tabStore) {\n\nThis can be removed once we're calling |AM.init|.\n\n@@ +186,5 @@\n> +        doc.querySelector(\"#new-app\").setAttribute(\"disabled\", \"true\");\n> +        doc.querySelector(\"#packaged-app\").setAttribute(\"disabled\", \"true\");\n> +        doc.querySelector(\"#hosted-app\").setAttribute(\"disabled\", \"true\");\n> +      } else {\n> +        parentDoc.querySelector(\"#cmd_newApp\").setAttribute(\"disabled\", \"true\");\n\nIt seems more logical to use |doc| here, since that's always \"the document I am loaded in\".  For the case of no sidebars, doc === parentDoc anyway.  It seems clearer to stick with |doc| everywhere when possible.\n\n::: browser/devtools/webide/modules/runtime-list.js\n@@ +23,5 @@\n> +module.exports = RuntimeList = function(window, parentWindow) {\n> +  EventEmitter.decorate(this);\n> +  this._doc = window.document;\n> +  this._UI = parentWindow.UI;\n> +  this._Cmds = parentWindow.Cmds;\n\nRemove this, it doesn't seem to be used.\n\n@@ +32,5 @@\n> +  if (this._sidebarsEnabled) {\n> +    this._panelNodeEl = \"button\";\n> +  }\n> +\n> +  return this;\n\nYou don't need to return anything from a constructor function since we're calling it with |new|.  Please clean up |ProjectList| too.\n\n@@ +44,5 @@\n> +  get sidebarsEnabled() {\n> +    return this._sidebarsEnabled;\n> +  },\n> +\n> +  updateRuntimeButton: function() {\n\nDoes this belong here?  It's not inside the frame.  The project button is still in webide.js, and I'd think this belongs there too.\n\n@@ +187,5 @@\n> +\n> +    parentDoc.querySelector(\"#cmd_showRuntimePanel\").removeAttribute(\"disabled\");\n> +\n> +    // Action commands\n> +    let playCmd = parentDoc.querySelector(\"#cmd_play\");\n\nWhat is your reasoning for moving the action commands here?\n\nThey aren't moving to a new frame, so I was guessing they'd be left in webide.js (or at least into some module that only it uses and not the new frames).\n\n@@ +228,5 @@\n> +      }\n> +    }\n> +\n> +    // Remove command\n> +    let removeCmdNode = parentDoc.querySelector(\"#cmd_removeProject\");\n\nWhy is this here?\n\n::: browser/devtools/webide/runtime-panel.js\n@@ +1,1 @@\n> +/* This Source Code Form is subject to the terms of the Mozilla Public\n\nThis seems like a half-copied file in the wrong place, seems like it should be removed?\n\n::: browser/devtools/webide/test/test_autoconnect_runtime.html\n@@ +78,5 @@\n> +          deferred = promise.defer();\n> +          win.AppManager.connection.once(\n> +              win.Connection.Events.CONNECTED,\n> +              () => deferred.resolve());\n> +          items[0].click();\n\nThis test change is not correct.  The feature is supposed to connect automatically if your last runtime is still available this time.\n\nSince it's already chosen earlier in the test, we should not need this block in the test.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-17T00:44:25Z"
  }, {
    "text" : "(In reply to J. Ryan Stinnett [:jryans] from comment #3)\n> \n> ::: browser/devtools/webide/content/runtime-listing.xhtml\n> @@ +11,5 @@\n> > +\n> > +<html xmlns=\"http://www.w3.org/1999/xhtml\">\n> > +  <head>\n> > +    <meta charset=\"utf8\"/>\n> > +    <link rel=\"stylesheet\" href=\"chrome://webide/skin/project-listing.css\" type=\"text/css\"/>\n> \n> Shouldn't this frame get a separate CSS file?  If there are common parts,\n> make a file for those that they both link to.\n\nSince there are more common parts than not, I'll just rename the css file to be more generic. Something like panel-listing.css maybe?\n\n> \n> ::: browser/devtools/webide/content/runtime-panel.js\n> @@ +3,5 @@\n> > + * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n> > +\n> > +let RuntimePanel = {\n> > +  // TODO: Expand function to save toggle state.\n> > +  toggle: function(sidebarsEnabled, triggerPopup) {\n> \n> This is a confusing API (same goes for ProjectPanel) because it blends two\n> independent behaviors, and it's keyed only off a boolean.\n> \n> Boolean params should generally be avoided[1], since they make it much\n> harder to read the call site later and understand what's happening.  Even\n> now, while reviewing this code, I forgot what it means!\n> \n> Additionally, the boolean is not even used if sidebars are enabled.\n> \n> So, what about:\n> \n> toggleSidebar()\n> showPopup()\n\nYep, makes sense.\n\n> ::: browser/devtools/webide/modules/runtime-list.js\n> @@ +187,5 @@\n> > +\n> > +    parentDoc.querySelector(\"#cmd_showRuntimePanel\").removeAttribute(\"disabled\");\n> > +\n> > +    // Action commands\n> > +    let playCmd = parentDoc.querySelector(\"#cmd_play\");\n> \n> What is your reasoning for moving the action commands here?\n> \n> They aren't moving to a new frame, so I was guessing they'd be left in\n> webide.js (or at least into some module that only it uses and not the new\n> frames).\n\nOriginally it was just to move the entire function over to the new module but it seems best to just split the original function from webide.js up into smaller pieces (where some are part of the module and some stay in webide.js). \n> \n> ::: browser/devtools/webide/runtime-panel.js\n> @@ +1,1 @@\n> > +/* This Source Code Form is subject to the terms of the Mozilla Public\n> \n> This seems like a half-copied file in the wrong place, seems like it should\n> be removed?\n\nDo you mean the license info?\n\n> \n> ::: browser/devtools/webide/test/test_autoconnect_runtime.html\n> @@ +78,5 @@\n> > +          deferred = promise.defer();\n> > +          win.AppManager.connection.once(\n> > +              win.Connection.Events.CONNECTED,\n> > +              () => deferred.resolve());\n> > +          items[0].click();\n> \n> This test change is not correct.  The feature is supposed to connect\n> automatically if your last runtime is still available this time.\n> \n> Since it's already chosen earlier in the test, we should not need this block\n> in the test.\n\nAh yeah, this is the one that I said I had problems with running the test on. It would stall on the \"runtime-apps-found\" event and the test would eventually time out. I'll see what the fixes based on your feedback will do on resolving it.",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-03-17T15:54:53Z"
  }, {
    "text" : "To follow up, would making two functions for toggle() for the panel be needed if we will subsequently remove the popup portion shortly after this bug?",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-03-17T16:30:26Z"
  }, {
    "text" : "(In reply to Jen Fong-Adwent [:ednapiranha] from comment #5)\n> To follow up, would making two functions for toggle() for the panel be\n> needed if we will subsequently remove the popup portion shortly after this\n> bug?\n\nYes, I think we should still do it because the current version confusing to read.  Even if the code it only around for a short time, I don't want to impair readability.  Plus things always seem to live longer than we expect... :)",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-17T17:11:01Z"
  }, {
    "text" : "(In reply to Jen Fong-Adwent [:ednapiranha] from comment #4)\n> (In reply to J. Ryan Stinnett [:jryans] from comment #3)\n> > \n> > ::: browser/devtools/webide/content/runtime-listing.xhtml\n> > @@ +11,5 @@\n> > > +\n> > > +<html xmlns=\"http://www.w3.org/1999/xhtml\">\n> > > +  <head>\n> > > +    <meta charset=\"utf8\"/>\n> > > +    <link rel=\"stylesheet\" href=\"chrome://webide/skin/project-listing.css\" type=\"text/css\"/>\n> > \n> > Shouldn't this frame get a separate CSS file?  If there are common parts,\n> > make a file for those that they both link to.\n> \n> Since there are more common parts than not, I'll just rename the css file to\n> be more generic. Something like panel-listing.css maybe?\n\nSure, that's fine too.\n\n> > ::: browser/devtools/webide/modules/runtime-list.js\n> > @@ +187,5 @@\n> > > +\n> > > +    parentDoc.querySelector(\"#cmd_showRuntimePanel\").removeAttribute(\"disabled\");\n> > > +\n> > > +    // Action commands\n> > > +    let playCmd = parentDoc.querySelector(\"#cmd_play\");\n> > \n> > What is your reasoning for moving the action commands here?\n> > \n> > They aren't moving to a new frame, so I was guessing they'd be left in\n> > webide.js (or at least into some module that only it uses and not the new\n> > frames).\n> \n> Originally it was just to move the entire function over to the new module\n> but it seems best to just split the original function from webide.js up into\n> smaller pieces (where some are part of the module and some stay in\n> webide.js). \n\nYes, splitting it up seems best.\n\n> > ::: browser/devtools/webide/runtime-panel.js\n> > @@ +1,1 @@\n> > > +/* This Source Code Form is subject to the terms of the Mozilla Public\n> > \n> > This seems like a half-copied file in the wrong place, seems like it should\n> > be removed?\n> \n> Do you mean the license info?\n\nNo, I mean this entire file should be removed.\n\nThere is:\n\n* browser/devtools/webide/runtime-panel.js (this file, with content that still says project panel, that does not appear to used)\n* browser/devtools/webide/content/runtime-panel.js (a different file, it's actually used, please keep it)\n\n> > ::: browser/devtools/webide/test/test_autoconnect_runtime.html\n> > @@ +78,5 @@\n> > > +          deferred = promise.defer();\n> > > +          win.AppManager.connection.once(\n> > > +              win.Connection.Events.CONNECTED,\n> > > +              () => deferred.resolve());\n> > > +          items[0].click();\n> > \n> > This test change is not correct.  The feature is supposed to connect\n> > automatically if your last runtime is still available this time.\n> > \n> > Since it's already chosen earlier in the test, we should not need this block\n> > in the test.\n> \n> Ah yeah, this is the one that I said I had problems with running the test\n> on. It would stall on the \"runtime-apps-found\" event and the test would\n> eventually time out. I'll see what the fixes based on your feedback will do\n> on resolving it.\n\nIf it still fails, I would guess we need to add an event somewhere that add an implicit relationship before.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-17T17:22:14Z"
  }, {
    "text" : "I noticed a follow up fix that's needed after the project list changes:\n\nFor runtime apps, we fetch their icons in the background asynchronously.  We get them pretty fast, but they don't see to get draw into the project list anymore.  That's because there was never an event after this is done, since we'd previously redraw the project list each time the button was clicked.\n\nSo, do something like:\n\n1. Change app-manager.js#onConnectionChanged:\n\nfront.fetchIcons();\n\nto:\n\nfront.fetchIcons().then(() => this.update(\"runtime-app-icons\"))\n\n2. Update the project list for this new event",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-18T18:53:53Z"
  }, {
    "text" : "Created attachment 8580209\nBug1135191.patch\n\nUpdated patch with a note:\n\nfetchIcons doesn't seem to redraw the icons in time after the promise is returned unless I call setTimeout with 1000 ms. Not sure why the delay is necessary.",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-03-19T19:06:44Z"
  }, {
    "text" : "Try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=fa19e4e188ab",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-03-19T19:45:20Z"
  }, {
    "text" : "Comment on attachment 8580209\nBug1135191.patch\n\nReview of attachment 8580209:\n-----------------------------------------------------------------\n\nIssues noticed in non-sidebar mode:\n\n1. The toolbox styles seem wrong when connected to FxOS, since it should take up the whole space below the toolbar, but it no longer does\n2. The runtime app icons are not appearing\n3. If you disconnect from a simulator after choosing a runtime app, the project button becomes disabled and unusable\n4. The device settings icon disappeared (you changed the class I think)\n5. The runtime apps remain shown in the project list after disconnecting from a runtime (even re-opening WebIDE did not clear them)\n6. The action buttons are active when no project is selected\n\nIssues noticed in sidebar mode:\n\n#1 above, though I am not sure what's correct now, given the toolbox placement, see #7.\n#5 above.\n7. I just now noticed the position of the toolbox when using sidebars...  Should it be inside the \"body\" area, so with the sidebars around, or take up the full width as it does now?  I can't decide.\n\n::: browser/devtools/webide/content/runtime-listing.js\n@@ +31,5 @@\n> +  AppManager.off(\"app-manager-update\", onAppManagerUpdate);\n> +});\n> +\n> +window.parent.addEventListener(\"busy\", function onBusyUpdate() {\n> +  window.parent.removeEventListener(\"busy\", onBusyUpdate);\n\nThis should be removed in |unload|, since there can be many |busy| events for the life of the page, not just one.\n\nAnyway, you might change to event-emitter, we'll see.\n\n@@ +36,5 @@\n> +  runtimeList.updateCommands();\n> +}, true);\n> +\n> +window.parent.addEventListener(\"unbusy\", function onUnbusyUpdate() {\n> +  window.parent.removeEventListener(\"unbusy\", onUnbusyUpdate);\n\nSame here.\n\n@@ +45,5 @@\n> +  if (!runtimeList.sidebarsEnabled) {\n> +    return;\n> +  }\n> +\n> +  switch (what) {\n\nThis list might change slightly, see longer discussion in |webide.js|.\n\n::: browser/devtools/webide/content/webide.js\n@@ +12,5 @@\n>  const {devtools} = Cu.import(\"resource://gre/modules/devtools/Loader.jsm\", {});\n>  const {require} = devtools;\n>  const {Services} = Cu.import(\"resource://gre/modules/Services.jsm\");\n>  const {AppProjects} = require(\"devtools/app-manager/app-projects\");\n>  const {Connection} = require(\"devtools/client/connection-manager\");\n\nCheck first, but this appears unused now.\n\n@@ -72,2 @@\n>  \n> -    this.updateCommands();\n\nI think we still want to call this on init, since |UI| still contains commands for action buttons, etc.\n\n@@ +92,5 @@\n>        this.autoSelectProject();\n> +      if (!projectList.sidebarsEnabled) {\n> +        projectList.update();\n> +      }\n> +      if (!runtimeList.sidebarsEnabled) {\n\nWhy is this needed?  It wasn't about runtimes before...\n\n@@ +139,5 @@\n>      window.removeEventListener(\"focus\", this.onfocus, true);\n>      AppManager.off(\"app-manager-update\", this.appManagerUpdate);\n>      AppManager.destroy();\n>      projectList = null;\n> +    runtimeList = null;\n\n|projectList| and |runtimeList| should have destroy methods that are called here which null out the window references and other things that you pass in at |init| time.\n\n@@ +170,5 @@\n>      // when run at the end of `init`. Â¯\\(Â°_o)/Â¯\n>      showDoorhanger({ window, type: \"deveditionpromo\", anchor: document.querySelector(\"#deck\") });\n>    },\n>  \n>    appManagerUpdate: function(event, what, details) {\n\nLooking at this list again, it seems unfortunate that we're duplicate the event handling for sidebar vs. non-sidebar, since it's hard to get right with even one list.\n\nIt would be nice for the |runtime/project-list| *modules* to listen, instead of each of the windows that contain them.  That way, it seems like we'd end up with only one list instead of two, and the modules always get the right events, no matter window loads them.  (Or do the lists differ in some way that I am missing?)  Right now, it's kind of indirect for no particular reason.  Does that seem like too large of a change to ask for?\n\n@@ +218,2 @@\n>          this.updateCommands();\n> +        this.updateRemoveProjectButton();\n\nDo we need this here?  It seems to only check |selectedProject|, so I think it only needs to wait on |project|, like it already does above.\n\n@@ -188,2 @@\n>          this.updateCommands();\n> -        projectList.update();\n\nShould this be preserved so we request the list of remote tabs?  I *think* it's only needed for |list-tabs-response|, not the other two.\n\n@@ +220,5 @@\n>          break;\n>        case \"runtime-details\":\n>          this.updateRuntimeButton();\n>          break;\n>        case \"runtime-changed\":\n\nNit: It would be nice to rename this \"runtime\", since all the other events mean \"X-changed\", but you don't have to do this now.\n\n@@ +236,1 @@\n>          this.updateCommands();\n\nI think it may be safe to remove this:\n\n|UI.updateCommands| changes when the following change:\n\n* project\n* connection\n* project running\n\nbut I don't think it cares about validation.\n\n@@ +236,4 @@\n>          this.updateCommands();\n>          this.updateProjectButton();\n>          this.updateProjectEditorHeader();\n> +        this.updateRemoveProjectButton();\n\nDo we need this here?  It seems to only check |selectedProject|, so I think it only needs to wait on |project|, like it already does above.\n\n@@ +254,1 @@\n>          break;\n\nShouldn't we add the |runtime-apps-icons| case?\n\n@@ +309,5 @@\n>      win.classList.add(\"busy-undetermined\");\n> +    if (!runtimeList.sidebarsEnabled) {\n> +      runtimeList.updateCommands();\n> +    }\n> +    document.dispatchEvent(busyEvent);\n\nWould it reduce event confusion if we use the same approach here as we do in app-manager, based on event-emitter?\n\nClients in child frames would do |window.parent.UI.on(...)| to listen.\n\n@@ +412,5 @@\n>    },\n>  \n>    /********** RUNTIME **********/\n>  \n> +  updateCommands: function() {\n\nI think this function belongs back under the \"COMMANDS\" section header that you removed.\n\nOr at least, it's not just about RUNTIME.\n\n::: browser/devtools/webide/modules/app-manager.js\n@@ +119,5 @@\n>          this._appsFront = null;\n>        }\n>        this._listTabsResponse = null;\n>      } else {\n> +      let self = this;\n\nAre you sure this is needed?  It should not be when using an arrow function.\n\n@@ +138,5 @@\n>            .then(() => {\n>              this.checkIfProjectIsRunning();\n>              this.update(\"runtime-apps-found\");\n> +            front.fetchIcons().then(() => {\n> +              setTimeout(() => self.update(\"runtime-apps-icons\"), 1000);\n\nIf I understand correctly, the |setTimeout| is needed for XUL popup wierdness.  So, we should emit the event immediately since that's when the icons really are ready.  Then, when handling the event, we can choose to use the |setTimeout| if needed.  Otherwise, every event consumer gets a delayed event unnecessarily.\n\nAlso, did you try a timeout value of 0?  Can't remember if you said you did.  That's what's used in |project-panel.js|, hopefully the same (terrible) thing can work in this case?\n\n::: browser/devtools/webide/modules/runtime-list.js\n@@ +21,5 @@\n> +module.exports = RuntimeList = function(window, parentWindow) {\n> +  EventEmitter.decorate(this);\n> +  this._doc = window.document;\n> +  this._UI = parentWindow.UI;\n> +  this._Cmds = parentWindow.Cmds;\n\nDepending on |_Cmds| still feels strange to me...  but I don't have a great answer.\n\nI suppose this is another thing that can be cleaned up a bit when the old mode is removed.\n\n::: browser/devtools/webide/test/sidebars/chrome.ini\n@@ +5,5 @@\n>    ../head.js\n>  \n>  [test_duplicate_import.html]\n>  [test_import.html]\n> +[test_addons.html]\n\nThere are quite a few tests of runtime code missing here...  Shouldn't you copy them too?\n\nCome to think of it, there seem be some project ones missing too, why's that?\n\n::: browser/devtools/webide/themes/webide.css\n@@ +150,5 @@\n>    min-width: 200px;\n>    max-width: 400px;\n>  }\n>  \n> +#project-listing-panel, #runtime-listing-panel {\n\nCan we give each of these sets of things a common class instead of listing both IDs?",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-21T02:34:36Z"
  }, {
    "text" : "(In reply to J. Ryan Stinnett [:jryans] from comment #11)\n> Comment on attachment 8580209\n> Bug1135191.patch\n> \n> Review of attachment 8580209:\n> -----------------------------------------------------------------\n> \n> Issues noticed in sidebar mode:\n> \n> #1 above, though I am not sure what's correct now, given the toolbox\n> placement, see #7.\n> #5 above.\n> 7. I just now noticed the position of the toolbox when using sidebars... \n> Should it be inside the \"body\" area, so with the sidebars around, or take up\n> the full width as it does now?  I can't decide.\n> \n\nI think for now it should take up the full width - it's easy to toggle to hide it and show the panels again.\n\n> ::: browser/devtools/webide/content/webide.js\n> @@ +12,5 @@\n> >  const {devtools} = Cu.import(\"resource://gre/modules/devtools/Loader.jsm\", {});\n> >  const {require} = devtools;\n> >  const {Services} = Cu.import(\"resource://gre/modules/Services.jsm\");\n> >  const {AppProjects} = require(\"devtools/app-manager/app-projects\");\n> >  const {Connection} = require(\"devtools/client/connection-manager\");\n> \n> Check first, but this appears unused now.\n> \n\nThis is needed for the tests, where win.Connection is called.\n\n> @@ +138,5 @@\n> >            .then(() => {\n> >              this.checkIfProjectIsRunning();\n> >              this.update(\"runtime-apps-found\");\n> > +            front.fetchIcons().then(() => {\n> > +              setTimeout(() => self.update(\"runtime-apps-icons\"), 1000);\n> \n> If I understand correctly, the |setTimeout| is needed for XUL popup\n> wierdness.  So, we should emit the event immediately since that's when the\n> icons really are ready.  Then, when handling the event, we can choose to use\n> the |setTimeout| if needed.  Otherwise, every event consumer gets a delayed\n> event unnecessarily.\n> \n> Also, did you try a timeout value of 0?  Can't remember if you said you did.\n> That's what's used in |project-panel.js|, hopefully the same (terrible)\n> thing can work in this case?\n> \n\nYep, tried that and it did not work. I'm going to leave this unchanged so you can help test on the next feedback cycle - I also tried to move the event outside of the setTimeout and that didn't work either.\n\n> \n> ::: browser/devtools/webide/test/sidebars/chrome.ini\n> @@ +5,5 @@\n> >    ../head.js\n> >  \n> >  [test_duplicate_import.html]\n> >  [test_import.html]\n> > +[test_addons.html]\n> \n> There are quite a few tests of runtime code missing here...  Shouldn't you\n> copy them too?\n> \n> Come to think of it, there seem be some project ones missing too, why's that?\n> \n\nAh, forgot to add them into the list.",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-03-25T21:37:10Z"
  }, {
    "text" : "Created attachment 8583893\nBug1135191.patch\n\nOne thing I haven't been able to fix \"properly\" - the fetchIcons call.\n\nTried moving the event outside of setTimeout and it didn't work; also tried setting the timeout to 0 and that did not work. Not really why, even though the URLs for each icon have all been retrieved.",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-03-26T16:16:46Z"
  }, {
    "text" : "Try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=144340aa587f",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-03-27T17:54:38Z"
  }, {
    "text" : "Comment on attachment 8583893\nBug1135191.patch\n\nReview of attachment 8583893:\n-----------------------------------------------------------------\n\nThe larger UX issues I noted last time appear resolved, so that's great!\n\nPlease rebase this against bug 1146542 which should land soon.  Also, let's talk about this event design in case it's unclear.  I avoid reading the events in detail, since I expect it to change heavily.\n\n::: browser/devtools/webide/content/project-listing.js\n@@ +38,1 @@\n>        projectList.update();\n\nHmm, this was not quite what I expecting after last round.  You've added a new layer of indirection, so most things now look like:\n\n1. Something changed, app-manager.js emits an event\n2. webide.js gets event, emits a project-update event\n3. project-listing.js gets event, call projectList.update\n\nMaybe I was not specific enough in my feedback last time?  I was imagining that *project-list.js* (the module, not the frame JS file project-listing.js) would listen to AppManager events directly.  That way, all events are handled there.  This means quite a few events can be removed from webide.js, for example.  With such a change, events would look like:\n\n1. Something changed, app-manager.js emits an event\n2. project-list.js gets event, calls this.update (or similar)\n\nAm I missing something?  Is there a reason for everything to flow through webide.js?\n\nAdditionally, bug 1146542 which you gave feedback on renames a number of events, so I think I'll skip reviewing the exact events for this round, since they will change anyway, and we should resolve the design discussion above first.\n\n::: browser/devtools/webide/modules/app-manager.js\n@@ +136,5 @@\n>            })\n>            .then(() => {\n>              this.checkIfProjectIsRunning();\n> +            front.fetchIcons().then(() => {\n> +              this.update(\"runtime-apps-found\");\n\nWhy is this event *after* the icons now?\n\n@@ +137,5 @@\n>            .then(() => {\n>              this.checkIfProjectIsRunning();\n> +            front.fetchIcons().then(() => {\n> +              this.update(\"runtime-apps-found\");\n> +              setTimeout(() => this.update(\"runtime-apps-icons\"), 1000);\n\nThe real issue here is a bug in |fetchIcons|.  It uses promise.all, but that method aborts when sees the first rejection.  And several apps do reject, since they have no icon, so it just skips the rest after that.\n\nSo, import DevToolsUtils.js into app-actor-front.js:\n\nconst DevToolsUtils = devtools.require(\"devtools/toolkit/DevToolsUtils.js\");\n\nand change |fetchIcons| to use |DevToolsUtils.settleAll| which is meant for exactly this sort of case.\n\n::: browser/devtools/webide/test/sidebars/chrome.ini\n@@ +6,5 @@\n>  \n>  [test_duplicate_import.html]\n>  [test_import.html]\n> +[test_addons.html]\n> +[test_autoconnect_runtime.html]\n\nIs it simpler to just add all of them?  I still think you've skipped quite a lot of tests that are impacted by the changes made here:\n\ntest_fullscreenToolbox\ntest_manifestUpdate\ntest_newapp\ntest_runtime (I guess you copied this one, but did not list it here?)\ntest_telemetry\n\nThey all seem to dive into different panels and use various elements.  They could be impacted by changes here.\n\nAnd what about the browser tests?  Still none added?",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-28T03:41:45Z"
  }, {
    "text" : "Created attachment 8588616\nBug1135191.patch",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-04-06T15:44:00Z"
  }, {
    "text" : "Comment on attachment 8588616\nBug1135191.patch\n\nReview of attachment 8588616:\n-----------------------------------------------------------------\n\nThere still seem to be many things missing here from what we have discussed...\n\nIs there an issue you were hoping for me to debug before finishing the patch, or is this meant to be ready for review?  Adding a comment when attaching an updated patch on what's changed / current status always helps, especially for large things!\n\n::: browser/devtools/webide/content/webide.js\n@@ +174,2 @@\n>          this.autoConnectRuntime();\n> +        if (!runtimeList.sidebarsEnabled) {\n\nI am confused...  I thought we agreed to move watching for such events into the module?\n\nI will stop reviewing here until we discuss this further.\n\n::: browser/devtools/webide/test/sidebars/chrome.ini\n@@ +1,1 @@\n>  [DEFAULT]\n\nI think this chrome test list seems reasonable.\n\nFor the 3rd time, where are the browser tests?  (The |browser.ini| list is empty for sidebars.)  We should include browser_tabs.js for sidebars.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-07T03:09:07Z"
  }, {
    "text" : "Created attachment 8589351\nBug1135191.patch\n\nCouple of things:\n\n- After the clarification, moved the event listeners to the modules for both AppManager and WebIDE. Feedback on this would be good to see if this is the ideal direction we want to go with. If it looks good, feel free to treat this patch iteration as the full review.\n\n- Tests all pass but I am having a strange issue in test_runtime.html with the popup version (sidebars disabled) if I run the entire suite - it hangs on \"Toolbox promise exists\" and times out before continuing the rest of the tests. If I run this test by itself it does not time out. In both situations, the test have no errors.",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-04-07T22:35:12Z"
  }, {
    "text" : "Comment on attachment 8589351\nBug1135191.patch\n\nReview of attachment 8589351:\n-----------------------------------------------------------------\n\nOkay, looking much better design wise!  The event setup here feels right to me.\n\nI did not notice any other major issues while testing.  All seem explained by things I've commented below.\n\n::: browser/devtools/webide/content/webide.js\n@@ +198,5 @@\n>        case \"project-stopped\":\n>        case \"project-started\":\n>        case \"runtime-global-actors\":\n>          this.updateCommands();\n> +        this.updateRemoveProjectButton();\n\nI don't think this is needed here, as |updateRemoveProjectButton| only depend on whether there is a project.  So, it should only need the |project| event.\n\n@@ +376,2 @@\n>  \n> +  update: function(what, details) {\n\nPlease document the possible events, just like we do in AppManager now.\n\n@@ +437,5 @@\n>  \n> +    let projectPanelCmd = document.querySelector(\"#cmd_showProjectPanel\");\n> +\n> +    if (document.querySelector(\"window\").classList.contains(\"busy\")) {\n> +      projectPanelCmd.setAttribute(\"disabled\", \"true\");\n\nThis should be moved back into the set at the top of this function.  As written, we never reach here when busy, since we already returned during the top block above.\n\n::: browser/devtools/webide/modules/app-manager.js\n@@ +185,5 @@\n>            })\n>            .then(() => {\n>              this.checkIfProjectIsRunning();\n>              this.update(\"runtime-targets\", { type: \"apps\" });\n> +            front.fetchIcons().then(() => this.update(\"runtime-apps-icons\"));\n\nPlease document this new event in the |update| method's list.\n\n::: browser/devtools/webide/modules/project-list.js\n@@ +26,5 @@\n>  \n>    if (this._sidebarsEnabled) {\n>      this._panelNodeEl = \"div\";\n> +    this.onWebIDEUpdate = this.onWebIDEUpdate.bind(this);\n> +    this._UI.on(\"webide-update\", this.onWebIDEUpdate);\n\nWhy is this only needed when sidebars are enabled?  I would think it's needed in both modes.\n\n@@ +43,5 @@\n>    get sidebarsEnabled() {\n>      return this._sidebarsEnabled;\n>    },\n>  \n> +  appManagerUpdate: function(event, what, details) {\n\nYou should also listen for the new \"runtime-app-icons\" here.\n\n@@ +47,5 @@\n> +  appManagerUpdate: function(event, what, details) {\n> +    // Got a message from app-manager.js\n> +    // See AppManager.update() for descriptions of what these events mean.\n> +    switch (what) {\n> +      case \"connection\":\n\nWhy is \"connection\" needed?  It was not needed previously.\n\n@@ +65,5 @@\n> +  },\n> +\n> +  onWebIDEUpdate: function(event, what, details) {\n> +    if (what == \"busy\" || what == \"unbusy\") {\n> +      this.updateCommands;\n\nYou need () to call the function.\n\n::: browser/devtools/webide/modules/runtime-list.js\n@@ +29,5 @@\n> +\n> +  if (this._sidebarsEnabled) {\n> +    this._panelNodeEl = \"button\";\n> +    this.onWebIDEUpdate = this.onWebIDEUpdate.bind(this);\n> +    this._UI.on(\"webide-update\", this.onWebIDEUpdate);\n\nAs with |ProjectList|, I think you need this in both modes.\n\n@@ +62,5 @@\n> +  },\n> +\n> +  onWebIDEUpdate: function(event, what, details) {\n> +    if (what == \"busy\" || what == \"unbusy\") {\n> +      this.updateCommands;\n\nYou need () to call the function.\n\n::: browser/devtools/webide/test/head.js\n@@ +189,5 @@\n>    targetBrowser.removeTab(aTab);\n>    return deferred.promise;\n>  }\n>  \n> +function connectToLocalRuntime(aWindow, bWindow) {\n\nNit: Names like |aWindow| are from an older style we don't use anymore where the \"a\" means \"argument\".  It's preferred to use meaningful, more descriptive names instead of the \"a\" prefix.\n\nHaving said that, I don't follow the purpose of this...  In each test we are only even in sidebars off OR sidebars on.  So, don't we always know the correct window in the test?\n\n::: browser/devtools/webide/test/sidebars/browser.ini\n@@ +4,5 @@\n>  support-files =\n>    ../head.js\n> +\n> +[browser_tabs.js]\n> +skip-if = os == 'win' || e10s # Bug 1149289 - Intermittent on Windows, Bug 1072167 - browser_tabs.js test fails under e10s\n\nIntermittent on Windows was fixed, please rebase and reset this to the same value as the other browser.ini file.\n\n::: browser/devtools/webide/test/sidebars/browser_tabs.js\n@@ +22,5 @@\n> +\n> +    let tab = yield addTab(TEST_URI);\n> +\n> +    let win = yield openWebIDE();\n> +    let winIframeProject = win.document.querySelector(\"#project-listing-panel-details\").contentWindow;\n\nMaybe you should make these two available as helpers in head.js?  Just a suggestion.\n\n@@ +58,5 @@\n> +  winIframeRuntime.document.querySelectorAll(\".runtime-panel-item-other\")[1].click();\n> +  return deferred.promise;\n> +}\n> +\n> +function selectTabProject(win, winIframeProject) {\n\nBe sure to update this test from the original copy to fix the Windows intermittent here as well.\n\n::: browser/devtools/webide/test/sidebars/test_telemetry.html\n@@ +209,5 @@\n> +\n> +        let win;\n> +\n> +        SimpleTest.registerCleanupFunction(() => {\n> +          Task.spawn(function*() {\n\nI think we discussed moving this work back into the end of the test, since right now it happens async, and you saw it interfere with other tests, right?",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-08T23:25:25Z"
  }, {
    "text" : "Created attachment 8594267\nBug1135191.patch\n\nAlmost there I think!\n\nA couple of notes on this version:\n\n1. I've added helper functions to call the panels in the tests in head.js as per your suggestion - I also reused the getRuntimeFrame function from this in the connectToLocalRuntime call instead of passing a second window object - let me known if that's a better solution or if you prefer some other method.\n\n2. Didn't need to move any changes from test_telemetry.html - it seems to work fine now.\n\n3. My only issue now is a failure of window leaks in try - https://treeherder.mozilla.org/#/jobs?repo=try&revision=e53243438ed7 \n\nWasn't able to figure out what I had around that was causing that problem and was hoping you might have an idea?",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-04-17T23:55:54Z"
  }, {
    "text" : "Comment on attachment 8594267\nBug1135191.patch\n\nReview of attachment 8594267:\n-----------------------------------------------------------------\n\nNot sure about the test issues off hand, have you tried narrowing it down to a specific test?\n\nLet me know what you've tried so far, so I have a better idea of where to start.\n\n::: browser/devtools/webide/modules/project-list.js\n@@ +51,5 @@\n> +    switch (what) {\n> +      case \"project-removed\":\n> +      case \"runtime-apps-icons\":\n> +      case \"runtime-targets\":\n> +      case \"update-tabs\":\n\nWhere did \"update-tabs\" come from?  This does not appear to be an event AppManager emits.\n\n@@ +63,5 @@\n> +  },\n> +\n> +  onWebIDEUpdate: function(event, what, details) {\n> +    if (what == \"busy\" || what == \"unbusy\") {\n> +      this.update(details);\n\nThe main |update| function doesn't check the busy state.  This suggests it does not belong here.\n\n::: browser/devtools/webide/test/head.js\n@@ +190,5 @@\n>    targetBrowser.removeTab(aTab);\n>    return deferred.promise;\n>  }\n>  \n> +function getRuntimeFrame(win) {\n\nMaybe getRuntimeDocument to be clear about what this returns?\n\n@@ +194,5 @@\n> +function getRuntimeFrame(win) {\n> +  return win.document.querySelector(\"#runtime-listing-panel-details\").contentDocument;\n> +}\n> +\n> +function getProjectFrame(win) {\n\n...Document here too, I think.\n\n::: browser/devtools/webide/test/sidebars/browser_tabs.js\n@@ +22,5 @@\n> +\n> +    let tab = yield addTab(TEST_URI);\n> +\n> +    let win = yield openWebIDE();\n> +    let winIframeProject = getProjectFrame(win);\n\nThese two variables are documents, not windows, so adjust the naming.\n\n::: browser/devtools/webide/test/sidebars/test_addons.html\n@@ +96,5 @@\n> +\n> +          ok(!Devices.helperAddonInstalled, \"Helper not installed\");\n> +\n> +          let win = yield openWebIDE(true);\n> +          let winIframe = getRuntimeFrame(win);\n\nNot a window, rename.\n\n::: browser/devtools/webide/test/sidebars/test_autoconnect_runtime.html\n@@ +27,5 @@\n> +            DebuggerServer.addBrowserActors();\n> +          }\n> +\n> +          let win = yield openWebIDE();\n> +          let winIframe = getRuntimeFrame(win);\n\nNot a window, rename.\n\n::: browser/devtools/webide/test/sidebars/test_autoselect_project.html\n@@ +27,5 @@\n> +            DebuggerServer.addBrowserActors();\n> +          }\n> +\n> +          let win = yield openWebIDE();\n> +          let winIframeRuntime = getRuntimeFrame(win);\n\nNot windows, rename both.\n\n::: browser/devtools/webide/test/sidebars/test_device_permissions.html\n@@ +29,5 @@\n> +\n> +          let win = yield openWebIDE();\n> +\n> +          let permIframe = win.document.querySelector(\"#deck-panel-permissionstable\");\n> +          let winIframe = getRuntimeFrame(win);\n\nNot window, rename.\n\n::: browser/devtools/webide/test/sidebars/test_device_preferences.html\n@@ +29,5 @@\n> +\n> +          let win = yield openWebIDE();\n> +\n> +          let prefIframe = win.document.querySelector(\"#deck-panel-devicepreferences\");\n> +          let winIframe = getRuntimeFrame(win);\n\nNot window, rename.\n\n::: browser/devtools/webide/test/sidebars/test_device_settings.html\n@@ +34,5 @@\n> +\n> +          let win = yield openWebIDE();\n> +\n> +          let settingIframe = win.document.querySelector(\"#deck-panel-devicesettings\");\n> +          let winIframe = getRuntimeFrame(win);\n\nNot window, rename.\n\n::: browser/devtools/webide/test/sidebars/test_duplicate_import.html\n@@ +19,5 @@\n>  \n>          Task.spawn(function*() {\n>            Services.prefs.setBoolPref(\"devtools.webide.sidebars\", true);\n>            let win = yield openWebIDE();\n> +          let winIframe = getProjectFrame(win);\n\nNot window, rename.\n\n::: browser/devtools/webide/test/sidebars/test_fullscreenToolbox.html\n@@ +30,5 @@\n> +        Task.spawn(function* () {\n> +          Cu.import(\"resource://gre/modules/devtools/dbg-server.jsm\");\n> +          Services.prefs.setBoolPref(\"devtools.webide.sidebars\", true);\n> +          let win = yield openWebIDE();\n> +          let winIframeProject = getProjectFrame(win);\n\nNot windows, rename both.\n\n::: browser/devtools/webide/test/sidebars/test_import.html\n@@ +19,5 @@\n>  \n>          Task.spawn(function*() {\n>            Services.prefs.setBoolPref(\"devtools.webide.sidebars\", true);\n>            let win = yield openWebIDE();\n> +          let winIframe = getProjectFrame(win);\n\nNot window, rename.\n\n::: browser/devtools/webide/test/sidebars/test_runtime.html\n@@ +48,5 @@\n>              DebuggerServer.addBrowserActors();\n>            }\n>  \n>            win = yield openWebIDE();\n> +          let winIframeRuntime = getRuntimeFrame(win);\n\nNot windows, rename both.\n\n::: browser/devtools/webide/test/sidebars/test_telemetry.html\n@@ +234,5 @@\n> +          // Cycle once, so we can test for multiple opens\n> +          yield cycleWebIDE();\n> +\n> +          win = yield openWebIDE();\n> +          let winIframe = getRuntimeFrame(win);\n\nNot window, rename.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-21T05:03:53Z"
  }, {
    "text" : "Created attachment 8596281\nBug1135191.patch\n\nRenamed and fixed up based on your last comments.\n\nAs for the failing test it is specifically for browser_tabs.js. I did some changes to test on try and also tried the following to see what would happen: \n\n./mach mochitest-devtools browser/devtools/webide --run-until-failure --repeat 15\n\nNot sure why but it appears that running a browser_tabs.js test within the sidebars directory AND in the main test directory seem to interfere with each other. The run-until-failure showed some issues where docRuntime.querySelectorAll(\".runtime-panel-item-other\")[1].click() in connectToLocal would not exist and I was able to fix that with forcing a preference setting in the main test: Services.prefs.setBoolPref(\"devtools.webide.sidebars\", false)\n\nSecond observation was that I got the \"1 tab available - Got 2, expected 1\" failure on both browser_tabs.js files and that was fixed by putting in a yield nextTick() after the yield removeTab() call.\n\nAnyway, not sure if either are the right solutions but they seem to resolve the run-until-failure problems.\n\nAs for the original try failure I linked to in the previous patch, it is unfortunately still around :\\\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=c423945f597e&filter-searchStr=OS%20X%2010.6%20debug%20Mochitest%20M%20Mochitest%20DevTools%20Browser%20Chrome%20dt4\n\nIf we click on the orange failure, we see a few leaks:\n\nTEST-UNEXPECTED-FAIL | browser/devtools/webide/test/sidebars/browser_tabs.js | leaked 2 window(s) until shutdown [url = chrome://webide/content/runtime-listing.xhtml]\n\nTEST-UNEXPECTED-FAIL | browser/devtools/webide/test/sidebars/browser_tabs.js | leaked 2 window(s) until shutdown [url = chrome://webide/content/project-listing.xhtml]\n\nTEST-UNEXPECTED-FAIL | browser/devtools/webide/test/sidebars/browser_tabs.js | leaked 1 window(s) until shutdown [url = about:blank]\n\nTEST-UNEXPECTED-FAIL | browser/devtools/webide/test/sidebars/browser_tabs.js | leaked 1 window(s) until shutdown [url = chrome://webide/content/webide.xul]\n\nbut only for OSX 10.6 dt4. Any ideas what could be happening?",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-04-23T00:20:47Z"
  }, {
    "text" : "Comment on attachment 8596281\nBug1135191.patch\n\nReview of attachment 8596281:\n-----------------------------------------------------------------\n\nOkay, I think the code looks good!\n\nOne nit below, plus the testing failure aren't quite right, so we need to fix those first.  I've already got one fix that I'll attach, and then I'll keep investigating the rest.\n\n::: browser/devtools/webide/test/sidebars/test_addons.html\n@@ +96,5 @@\n> +\n> +          ok(!Devices.helperAddonInstalled, \"Helper not installed\");\n> +\n> +          let win = yield openWebIDE(true);\n> +          let winDoc = getRuntimeDocument(win);\n\nWhat is a |winDoc|?  Use |docRuntime|.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-23T19:32:49Z"
  }, {
    "text" : "Created attachment 8596793\nResolve browser_tabs.js cleanup issues\n\nWith this extra patch, browser_tabs will clean up properly, and we don't need to clear the pref in the non-sidebar version, or wait for nextTick.  It turns out that we were registering clean up functions incorrectly for browser tests (chrome tests, the majority, were fine).\n\nFeel free to roll this up into your patch or land separately at the same time as yours, whichever you like.\n\nHere's a try run to see if this improves the other problems on 10.6:\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=b4c59cc45052",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-23T20:26:16Z"
  }, {
    "text" : "Created attachment 8596838\nBug1135191.patch\n\nMerging the resolved browser_tabs.js cleanup patch with original patch",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-04-23T21:40:49Z"
  }, {
    "text" : "Created attachment 8598039\nfix-browser-tab-window-leak.patch\n\nThis patch fixes the window leak error (plus some other minor updates) - let me know if anything should be changed on it - if all is good, I'll merge this one with the former patch.\n\nTry: https://treeherder.mozilla.org/#/jobs?repo=try&revision=deabd1bfab91",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-04-27T15:01:45Z"
  }, {
    "text" : "Comment on attachment 8598039\nfix-browser-tab-window-leak.patch\n\nReview of attachment 8598039:\n-----------------------------------------------------------------\n\nThis all looks good to me.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-27T21:12:42Z"
  }, {
    "text" : "Created attachment 8598253\nBug1135191.patch",
    "authour" : "jfong@mozilla.com",
    "created" : "2015-04-27T21:19:18Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/dd7a16593cf0",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-27T22:13:15Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/dd7a16593cf0",
    "authour" : "cbook@mozilla.com",
    "created" : "2015-04-28T11:54:09Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-28T11:54:09Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-28T11:54:09Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jfong@mozilla.com",
      "date" : "2015-03-06T00:12:13Z",
      "what" : "summary",
      "removed" : "Move runtime popup panel to an iframe with toggle",
      "added" : "Move runtime popup panel to a panel with toggle"
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-03-13T17:03:09Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jryans@gmail.com"
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-03-19T19:06:44Z",
      "what" : "attachments.isobsolete:8577311",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-03-26T16:16:46Z",
      "what" : "attachments.isobsolete:8580209",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-06T15:44:00Z",
      "what" : "attachments.isobsolete:8583893",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-07T22:35:12Z",
      "what" : "attachments.isobsolete:8588616",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-17T23:55:54Z",
      "what" : "attachments.isobsolete:8589351",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-23T00:20:47Z",
      "what" : "attachments.isobsolete:8594267",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-23T21:40:49Z",
      "what" : "attachments.isobsolete:8596281",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-23T21:40:49Z",
      "what" : "attachments.isobsolete:8596793",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-27T21:19:18Z",
      "what" : "attachments.isobsolete:8596838",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-27T21:19:18Z",
      "what" : "attachments.isobsolete:8598039",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-27T21:19:46Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-27T22:13:15Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-27T22:13:15Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-28T11:54:09Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 40"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-28T11:54:09Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-28T11:54:09Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-04-28 04:54:09"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-28T11:54:09Z",
      "what" : "cf_status_firefox40",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "jfong@mozilla.com",
      "date" : "2015-03-13T17:03:09Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8577311,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-17T00:44:25Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8577311,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-03-17T15:54:53Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-17T17:22:14Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-03-19T19:06:44Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8580209,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-21T02:34:36Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8580209,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-03-26T16:16:46Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8583893,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-28T03:41:45Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8583893,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-06T15:44:00Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8588616,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-07T03:09:07Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8588616,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-07T22:35:12Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8589351,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-08T23:25:25Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8589351,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-17T23:55:54Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8594267,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-21T05:03:53Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8594267,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-23T00:20:47Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8596281,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-23T19:32:49Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8596281,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-27T15:01:45Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8598039,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-27T21:12:42Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8598039,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jfong@mozilla.com",
      "date" : "2015-04-27T21:19:18Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8598253,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-27T22:13:15Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135191,
  "cclist" : [ "jryans@gmail.com" ]
}, {
  "component" : "PDF Viewer",
  "summary" : "Update pdf.js to version 1.0.1149",
  "reporter" : "ryanvm@gmail.com",
  "assigned" : "ryanvm@gmail.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "+++ This bug was initially created as a clone of Bug #1126941 +++\n\nChanges since last update:\n#5684 Make sure that an A entry in an annotation dictionary is also a dictionary itself\n#5691 Use the |shadow| function from src/shared/util.js in viewer.js\n#5634 Add support for TrueType (0, 0) cmap tables (issue 5501, issue 5574, and bug 1037973)\n#5651 Try to skip mapping of missing TrueType and CIDFontType2 glyphs\n#5717 Test case for issue 5567\n#5729 Fix CCITTStream regression by byte-aligning rows before checking EOL marker\n#5703 Relax the |isSymbolicFont| check for TrueType (3, 1) cmap tables (issue 5701)",
  "comments" : [ {
    "text" : "+++ This bug was initially created as a clone of Bug #1126941 +++\n\nChanges since last update:\n#5684 Make sure that an A entry in an annotation dictionary is also a dictionary itself\n#5691 Use the |shadow| function from src/shared/util.js in viewer.js\n#5634 Add support for TrueType (0, 0) cmap tables (issue 5501, issue 5574, and bug 1037973)\n#5651 Try to skip mapping of missing TrueType and CIDFontType2 glyphs\n#5717 Test case for issue 5567\n#5729 Fix CCITTStream regression by byte-aligning rows before checking EOL marker\n#5703 Relax the |isSymbolicFont| check for TrueType (3, 1) cmap tables (issue 5701)",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-20T13:06:00Z"
  }, {
    "text" : "Created attachment 8567044\nUpdate pdf.js to version 1.0.1147\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=97731bcfd238",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-20T13:10:15Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/2ce33d2b582e",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-20T19:41:07Z"
  }, {
    "text" : "At bdahl's request:\n\n#5743 Only skip the |!isSymbolicFont| check for TrueType (3, 1) cmap tables if no previous cmap table was found (PR 5703 followup)\n\nhttps://hg.mozilla.org/integration/fx-team/rev/980ed27ef3e3",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-20T22:01:29Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/2ce33d2b582e\nhttps://hg.mozilla.org/mozilla-central/rev/980ed27ef3e3",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-02-21T02:13:44Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-20T13:10:15Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-21T02:13:44Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-21T02:13:44Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-20T13:10:15Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "ryanvm@gmail.com"
    }, {
      "name" : "Virtual@MsgSafe.io",
      "date" : "2015-02-20T14:06:30Z",
      "what" : "cc",
      "removed" : "",
      "added" : "BernesB@gmail.com"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-20T19:41:07Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-20T22:01:29Z",
      "what" : "summary",
      "removed" : "Update pdf.js to version 1.0.1147",
      "added" : "Update pdf.js to version 1.0.1149"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-20T22:01:29Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-21T02:13:44Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 38"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-21T02:13:44Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-20 18:13:44"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-21T02:13:44Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "jonas.jenwald@gmail.com",
      "date" : "2015-03-12T14:44:12Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "894572"
    }, {
      "name" : "jonas.jenwald@gmail.com",
      "date" : "2015-03-12T19:46:06Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "893730"
    }, {
      "name" : "jonas.jenwald@gmail.com",
      "date" : "2015-03-12T19:46:32Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1122998"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-26T23:11:24Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1148192"
    } ],
    "flagEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-20T13:10:15Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567044,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "bdahl@mozilla.com",
      "date" : "2015-02-20T19:34:39Z",
      "what" : "flagtypes.name",
      "removed" : "review?(bdahl@mozilla.com)",
      "added" : "",
      "attachmentId" : 8567044,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135021,
  "cclist" : [ "bdahl@mozilla.com", "dtownsend@mozilla.com", "Virtual@MsgSafe.io", "ydelendik@mozilla.com" ]
}, {
  "component" : "Developer Tools",
  "summary" : "Host devices catalog on a CDN",
  "reporter" : "janx@linux.com",
  "assigned" : "janx@linux.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Instead of embedding the catalog of common devices in code, it would be better to host it on a CDN (e.g. alongside WebIDE's addon list) so that it can be kept up-to-date.",
  "comments" : [ {
    "text" : "Instead of embedding the catalog of common devices in code, it would be better to host it on a CDN (e.g. alongside WebIDE's addon list) so that it can be kept up-to-date.",
    "authour" : "janx@linux.com",
    "created" : "2015-02-20T12:38:57Z"
  }, {
    "text" : "Sole, can you please help with this? I'll upload the `devices.json` file here in a few days.",
    "authour" : "janx@linux.com",
    "created" : "2015-02-20T22:24:35Z"
  }, {
    "text" : "Created attachment 8567918\ndevices.json\n\nHere is the list I'd like to upload to the CDN.\n\nI also hosted it at https://github.com/jankeromnes/devices.json, maybe at some point we'd want that under github.com/mozilla/ to accept pull requests.",
    "authour" : "janx@linux.com",
    "created" : "2015-02-23T14:59:22Z"
  }, {
    "text" : "Created attachment 8567919\ndevices.json",
    "authour" : "janx@linux.com",
    "created" : "2015-02-23T15:03:00Z"
  }, {
    "text" : "Created attachment 8567923\ndevices.json",
    "authour" : "janx@linux.com",
    "created" : "2015-02-23T15:14:09Z"
  }, {
    "text" : "Created attachment 8570087\nMake devices.js use a CDN.\n\nIn addition to hosting the list on a CDN, we also need `devices.js` to actually use it. This for that.",
    "authour" : "janx@linux.com",
    "created" : "2015-02-26T20:32:36Z"
  }, {
    "text" : "Created attachment 8570090\ndevices.json",
    "authour" : "janx@linux.com",
    "created" : "2015-02-26T20:35:50Z"
  }, {
    "text" : "Created attachment 8570100\nMake devices.js use a CDN.",
    "authour" : "janx@linux.com",
    "created" : "2015-02-26T20:49:51Z"
  }, {
    "text" : "Comment on attachment 8570100\nMake devices.js use a CDN.\n\nModulo the pref pointing to my personal github repo (since the list is not uploaded to the CDN yet) what do you think?",
    "authour" : "janx@linux.com",
    "created" : "2015-02-26T21:11:50Z"
  }, {
    "text" : "Tim, I guess you are using browser/devtools/shared/devices.js in your Emulation devtool prototype :)\n\nJust FYI, this patch changes the API a little, from:\n\n    require('â€¦').Devices.FirefoxOS` / `.Others`\n\nto a single list:\n\n    `require('â€¦').GetDevices().then(function(devices){ /* devices.phones, etc */ })`",
    "authour" : "janx@linux.com",
    "created" : "2015-02-27T12:54:12Z"
  }, {
    "text" : "(In reply to Jan Keromnes [:janx] from comment #9)\n> Tim, I guess you are using browser/devtools/shared/devices.js in your\n> Emulation devtool prototype :)\n> \n> Just FYI, this patch changes the API a little, from:\n> \n>     require('â€¦').Devices.FirefoxOS` / `.Others`\n> \n> to a single list:\n> \n>     `require('â€¦').GetDevices().then(function(devices){ /* devices.phones,\n> etc */ })`\n\nI probably won't have time to change this, but feel free to :)",
    "authour" : "ntim.bugs@gmail.com",
    "created" : "2015-02-27T13:04:47Z"
  }, {
    "text" : "Comment on attachment 8570100\nMake devices.js use a CDN.\n\nReview of attachment 8570100:\n-----------------------------------------------------------------\n\nI would like to see usages of GetDevices and GetDevicesString, and final https link, before r+.\n\n::: browser/devtools/shared/devices.js\n@@ +12,4 @@\n>  const Strings = Services.strings.createBundle(\"chrome://browser/locale/devtools/device.properties\");\n>  \n> +/* `Devices` is a catalog of common web-enabled devices and their properties,\n> + * intended for (mobile) device emulation.\n\nYou would have to slightly update this comment as there is no more `Devices` global.",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-03-02T10:36:16Z"
  }, {
    "text" : "Jan, you should ping the server ops to get access to the CDN. I can't be the bottleneck in updating this :-)\nThey should give you S3 credentials so you can upload the file directly. I will ask them with a needinfo?",
    "authour" : "sole@mozilla.com",
    "created" : "2015-03-03T11:33:02Z"
  }, {
    "text" : "Created attachment 8571930\ndevices.json\n\nThanks Sole!\n\nDear server ops, please grant me S3 access so I can upload `devices.json` to a URL like https://code.cdn.mozilla.net/devices/devices.json",
    "authour" : "janx@linux.com",
    "created" : "2015-03-03T13:16:58Z"
  }, {
    "text" : "(stealing Sole's needinfo so I can track it)",
    "authour" : "janx@linux.com",
    "created" : "2015-03-06T11:39:17Z"
  }, {
    "text" : "Dear server ops, please grant me S3 access so I can upload the `devices.json` file to a URL like:\n\nhttps://code.cdn.mozilla.net/devices/devices.json",
    "authour" : "janx@linux.com",
    "created" : "2015-03-06T11:40:24Z"
  }, {
    "text" : "Created attachment 8573879\nMake devices.js use a CDN.\n\nFixed nits, added tests. Still uses the GitHub link. For usage examples, see:\n\n- browser/devtools/shared/test/browser_devices.js (this patch)\n- browser/devtools/webide/content/simulator.js (bug 1090949)\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=001f923e04e0",
    "authour" : "janx@linux.com",
    "created" : "2015-03-06T12:00:26Z"
  }, {
    "text" : "Created attachment 8574009\ndevices.json\n\nSince Chris Turra left and \"server-ops-webops@mozilla-org.bugs\" is not a real address,\n\nPhilippe, could you please grant me s3 credentials so that I can upload the `devices.json` file to a URL like:\n\nhttps://code.cdn.mozilla.net/devices/devices.json ?\n\nThat CDN was set up in bug 981801.",
    "authour" : "janx@linux.com",
    "created" : "2015-03-06T16:47:18Z"
  }, {
    "text" : "Comment on attachment 8573879\nMake devices.js use a CDN.\n\nAlex, apart from the soon-to-be-fixed URL, what do you think of the patch now? Please see comment 16.",
    "authour" : "janx@linux.com",
    "created" : "2015-03-06T16:54:11Z"
  }, {
    "text" : "Comment on attachment 8573879\nMake devices.js use a CDN.\n\nReview of attachment 8573879:\n-----------------------------------------------------------------\n\nLooks good but I'd like to see usages of devices.js before r+.",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-03-09T10:00:14Z"
  }, {
    "text" : "Jan,\n\nSo I've figured out how to give you access, I just need to make sure I can send over the details over to you securely. \n\nOnce I've done that, I'll get back to you (or Richard will).",
    "authour" : "smani@mozilla.com",
    "created" : "2015-03-10T01:06:15Z"
  }, {
    "text" : "Jan,\n\nCouple of questions :\n\n1) What's a good way to get you something securely? (do you use gpg/1password etc?) \n2) How are you planning to upload things? Via the AWS web interface or the awscli or?",
    "authour" : "smani@mozilla.com",
    "created" : "2015-03-10T21:43:18Z"
  }, {
    "text" : "Thanks Shyam!\n\n1) Is there a way to simply authorize my SSH public key / similar? Or else I do use GPG.\n2) I've never done that before, but I guess I'll use the AWS web interface if it's handy, or simply linux tools like scp / sftp / other (maybe the awscli if I have to).",
    "authour" : "janx@linux.com",
    "created" : "2015-03-11T15:11:30Z"
  }, {
    "text" : "If you have SSH access to people.mozilla.org, maybe Shyam is able to place the AWS credentials in your people.m.o user directory?",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-11T16:36:39Z"
  }, {
    "text" : "(In reply to J. Ryan Stinnett [:jryans] from comment #23)\n> If you have SSH access to people.mozilla.org, maybe Shyam is able to place\n> the AWS credentials in your people.m.o user directory?\n\nThis is prohibited by security policy, sorry. Access is via IAM credentials (rather than SSH key) and so GPG would be the correct choice here.",
    "authour" : "rsoderberg@mozilla.com",
    "created" : "2015-03-11T16:45:37Z"
  }, {
    "text" : "(In reply to Richard Soderberg [:atoll] from comment #24)\n> (In reply to J. Ryan Stinnett [:jryans] from comment #23)\n> > If you have SSH access to people.mozilla.org, maybe Shyam is able to place\n> > the AWS credentials in your people.m.o user directory?\n> \n> This is prohibited by security policy, sorry. Access is via IAM credentials\n> (rather than SSH key) and so GPG would be the correct choice here.\n\nHmm, it's possible I misunderstand...  but I was not trying to suggest the SSH key is used with AWS directly.  Instead, you would create the AWS IAM credentials, and then place them in Jan's people.m.o directory, so he can retrieve the credentials in a secure way via SSH.  His SSH key is only used to retrieve the new AWS credentials you have generated.\n\nI believe that's the approach Chris Turra used when setting up Sole's account for this same CDN bucket (see bug 981801 comment 17 and other comments).",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-11T16:52:55Z"
  }, {
    "text" : "(In reply to Jan Keromnes [:janx] from comment #22)\n> Thanks Shyam!\n> 2) I've never done that before, but I guess I'll use the AWS web interface\n> if it's handy, or simply linux tools like scp / sftp / other (maybe the\n> awscli if I have to).\n\nIf it's a single file, the web interface might be handy enough.\n\nIf you can email me your gpg key-id or public key, I'll be happy to finish this setup and email your credentials to you. \n\nI'm also going to spin off an actual bug to track that work (for our purposes)",
    "authour" : "smani@mozilla.com",
    "created" : "2015-03-13T01:00:56Z"
  }, {
    "text" : "Jan,\n\nPlease update Bug 1142830 in the future regarding access. Thanks!",
    "authour" : "smani@mozilla.com",
    "created" : "2015-03-13T01:51:46Z"
  }, {
    "text" : "Thanks Shyam!\n\nUploaded successfully to https://code.cdn.mozilla.net/devices/devices.json",
    "authour" : "janx@linux.com",
    "created" : "2015-03-18T19:11:03Z"
  }, {
    "text" : "Created attachment 8579557\nMake devices.js use a CDN.\n\nAlex, please have a look. The patch finally uses the CDN, has tests, and is required for bug 1090949.\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=69245826a7d6",
    "authour" : "janx@linux.com",
    "created" : "2015-03-18T19:34:20Z"
  }, {
    "text" : "Comment on attachment 8579557\nMake devices.js use a CDN.\n\nReview of attachment 8579557:\n-----------------------------------------------------------------\n\nSorry for the drive-by, just a few quick tweaks I wanted to suggest.\n\n::: browser/devtools/shared/devices.js\n@@ +4,5 @@\n>  \n>  \"use strict\";\n>  \n>  const { Ci, Cc } = require(\"chrome\");\n> +const { GetDevicesJSON } = require(\"devtools/webide/remote-resources\");\n\nIt feels a bit awkward for |shared| modules to depend on a particular tool like this.  Maybe you should invert things by moving the general |getJSON| function to a new shared module, which you use here, and then WebIDE's module also depends on?\n\n::: browser/devtools/webide/webide-prefs.js\n@@ +17,5 @@\n>  pref(\"devtools.webide.adbAddonURL\", \"https://ftp.mozilla.org/pub/mozilla.org/labs/fxos-simulator/adb-helper/#OS#/adbhelper-#OS#-latest.xpi\");\n>  pref(\"devtools.webide.adbAddonID\", \"adbhelper@mozilla.org\");\n>  pref(\"devtools.webide.adaptersAddonURL\", \"https://ftp.mozilla.org/pub/mozilla.org/labs/fxdt-adapters/#OS#/fxdt-adapters-#OS#-latest.xpi\");\n>  pref(\"devtools.webide.adaptersAddonID\", \"fxdevtools-adapters@mozilla.org\");\n> +pref(\"devtools.webide.devicesURL\", \"https://code.cdn.mozilla.net/devices/devices.json\");\n\nSince the |devices| module is shared, this pref should not be in this file, and the pref name should not contain \"webide\".",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-18T19:50:49Z"
  }, {
    "text" : "Comment on attachment 8579557\nMake devices.js use a CDN.\n\nReview of attachment 8579557:\n-----------------------------------------------------------------\n\nWhat :jryans says.\n\n::: browser/devtools/shared/devices.js\n@@ +4,5 @@\n>  \n>  \"use strict\";\n>  \n>  const { Ci, Cc } = require(\"chrome\");\n> +const { GetDevicesJSON } = require(\"devtools/webide/remote-resources\");\n\n+1",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-03-19T17:28:03Z"
  }, {
    "text" : "Created attachment 8580841\nMove getjson from webide/ to shared/.\n\nAs requested, moving the GetJSON function out of WebIDE and into shared territory.",
    "authour" : "janx@linux.com",
    "created" : "2015-03-20T19:02:19Z"
  }, {
    "text" : "Created attachment 8580843\nMake devices.js use a CDN.\n\nNew patch using the moved GetJSON and declaring its pref elsewhere.\n\nCarrying over Alex's r+.",
    "authour" : "janx@linux.com",
    "created" : "2015-03-20T19:04:06Z"
  }, {
    "text" : "Try for both patches: https://treeherder.mozilla.org/#/jobs?repo=try&revision=3807c13fe71f",
    "authour" : "janx@linux.com",
    "created" : "2015-03-20T19:04:49Z"
  }, {
    "text" : "Comment on attachment 8580841\nMove getjson from webide/ to shared/.\n\nReview of attachment 8580841:\n-----------------------------------------------------------------\n\n::: browser/devtools/shared/getjson.js\n@@ +1,1 @@\n>  /* This Source Code Form is subject to the terms of the Mozilla Public\n\nI guess you really did move the file correctly?  It's quite odd that it shows the new name in the splinter review mode, but the diff view and actual patch don't show the file move...\n\nMake sure the move really does happen!\n\n@@ +8,5 @@\n>  \n>  const XMLHttpRequest = CC(\"@mozilla.org/xmlextras/xmlhttprequest;1\");\n>  \n> +// Downloads and caches a JSON file from a URL given by the pref.\n> +exports.GetJSON = function (prefName, bypassCache) {\n\nI am not quite sure why Paul started these methods with an upper case letter, as it's kind of an unusual style choice I think...  I would prefer methods on an object to start with a lower case letter, like they do in nearly every other case.  If you really like this style though, I guess it's okay.\n\nAlso, methods that take boolean arguments are very confusing to read later at the call site[1].  I think it would be better to pass an object for the params here.  You can still leave out |bypassCache| for the default use case, but at least when it's used you are forced to type the words at the call site.  Or, use a different approach if you like, but I would really prefer to not end up with call sites that say |getJSON(..., true)|, since that's quite confusing to read.\n\nI realize it was already this way before, but I think it should be a pretty simple improvement!\n\n[1]: http://ariya.ofilabs.com/2011/08/hall-of-api-shame-boolean-trap.html\n\n@@ +22,1 @@\n>    let xhr = new XMLHttpRequest();\n\nI bet this function is so much simpler with the new |fetch| API! ;) Just thinking out loud, don't need to change anything...\n\n::: browser/devtools/webide/content/webide.js\n@@ +34,5 @@\n>  const MAX_ZOOM = 1.4;\n>  const MIN_ZOOM = 0.6;\n>  \n> +// Download remote resources early\n> +GetJSON(\"devtools.webide.addonsURL\", true);\n\nHmm, did you mean to add this?  It doesn't seem like were actually loading the add-ons here before...\n\n::: browser/devtools/webide/modules/addons.js\n@@ +7,5 @@\n>  const {AddonManager} = Cu.import(\"resource://gre/modules/AddonManager.jsm\");\n>  const {EventEmitter} = Cu.import(\"resource://gre/modules/devtools/event-emitter.js\");\n>  const {Services} = Cu.import(\"resource://gre/modules/Services.jsm\");\n> +const {GetJSON} = require(\"devtools/shared/getjson\");\n> +const EventEmitter = require(\"devtools/toolkit/event-emitter\");\n\nThis seems to duplicate |EventEmitter| above, so remove whichever you don't like.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-20T19:23:25Z"
  }, {
    "text" : "Thanks for the review!\n\nTry shows a surprising amount of oranges, I'll have a look to make sure they're not my doing.\n\n(In reply to J. Ryan Stinnett [:jryans] from comment #35)\n> I guess you really did move the file correctly?  It's quite odd that it\n> shows the new name in the splinter review mode, but the diff view and actual\n> patch don't show the file move...\n\nAs discussed on IRC, don't trust Splinter or Diff or Unified Diff. The only source of truth is the raw patch, which you can see by clicking on the attachment name directly (and it shows that the file was moved properly).\n\nOur review tools are quite bad at showing file moves.\n\n> > +exports.GetJSON = function (prefName, bypassCache) {\n> \n> I am not quite sure why Paul started these methods with an upper case\n> letter, as it's kind of an unusual style choice I think...  I would prefer\n> methods on an object to start with a lower case letter, like they do in\n> nearly every other case.  If you really like this style though, I guess it's\n> okay.\n\nI believe it's a convention somewhere for stand-alone static methods, but judging from `git grep \"exports\\.g\"` versus `git grep \"exports\\.G\"`, you're right about it not being common in devtools. I'll fix it in my patch, since I don't care that much.\n\n> Also, methods that take boolean arguments are very confusing to read later\n> at the call site[1].  I think it would be better to pass an object for the\n> params here.  You can still leave out |bypassCache| for the default use\n> case, but at least when it's used you are forced to type the words at the\n> call site.  Or, use a different approach if you like, but I would really\n> prefer to not end up with call sites that say |getJSON(..., true)|, since\n> that's quite confusing to read.\n> \n> I realize it was already this way before, but I think it should be a pretty\n> simple improvement!\n> \n> [1]: http://ariya.ofilabs.com/2011/08/hall-of-api-shame-boolean-trap.html\n\nYou do make a good point, but I think \"very confusing\" is an exaggeration, especially since it's an optional parameter. I'm not fond of making the code structure more complex just for the sake of forcing call sites to be more verbose/explicit, and since this is not an overly public API I'll keep the code as is.\n\n> >    let xhr = new XMLHttpRequest();\n> \n> I bet this function is so much simpler with the new |fetch| API! ;) Just\n> thinking out loud, don't need to change anything...\n\nYou're probably right, but I'll leave it as is for now.\n\n> > +// Download remote resources early\n> > +GetJSON(\"devtools.webide.addonsURL\", true);\n> \n> Hmm, did you mean to add this?  It doesn't seem like were actually loading\n> the add-ons here before...\n\nThat was on purpose. I think it makes sense to grab the list of addons early, and since the comments says \"remote resources\" (plural) I suppose that line was simply forgotten originally.\n\n> >  const {AddonManager} = Cu.import(\"resource://gre/modules/AddonManager.jsm\");\n> >  const {EventEmitter} = Cu.import(\"resource://gre/modules/devtools/event-emitter.js\");\n> >  const {Services} = Cu.import(\"resource://gre/modules/Services.jsm\");\n> > +const {GetJSON} = require(\"devtools/shared/getjson\");\n> > +const EventEmitter = require(\"devtools/toolkit/event-emitter\");\n> \n> This seems to duplicate |EventEmitter| above, so remove whichever you don't\n> like.\n\nNice catch! It was a mistake while rewriting history, the removal of the first line ended up in a later commit locally.",
    "authour" : "janx@linux.com",
    "created" : "2015-03-21T10:52:19Z"
  }, {
    "text" : "Looks like all the oranges were just about the duplicate `const EventEmitter`.",
    "authour" : "janx@linux.com",
    "created" : "2015-03-21T10:59:52Z"
  }, {
    "text" : "Created attachment 8581096\nMove getjson from webide/ to shared/.\n\n:jryans' r+",
    "authour" : "janx@linux.com",
    "created" : "2015-03-21T11:01:28Z"
  }, {
    "text" : "Created attachment 8581097\nMake devices.js use a CDN.\n\n:ochameau's r+",
    "authour" : "janx@linux.com",
    "created" : "2015-03-21T11:02:27Z"
  }, {
    "text" : "Try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=25e54a4f8521\n\n(Not sure how the 2 unrelated changes snuck in, let's hope they behave.)",
    "authour" : "janx@linux.com",
    "created" : "2015-03-21T11:03:57Z"
  }, {
    "text" : "Created attachment 8581110\nMove getjson from webide/ to shared/.\n\nRenamed a function originally also called \"getJSON\".\n\nStill :jryans' r+, new try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=1192b381bb06",
    "authour" : "janx@linux.com",
    "created" : "2015-03-21T12:51:29Z"
  }, {
    "text" : "All good now!\n\nSheriffs, please land the \"getjson\" patch first, and the \"devices.js\" patch after.",
    "authour" : "janx@linux.com",
    "created" : "2015-03-21T20:55:21Z"
  }, {
    "text" : "Created attachment 8581764\nAdd method to find a device by its properties.",
    "authour" : "janx@linux.com",
    "created" : "2015-03-23T17:26:48Z"
  }, {
    "text" : "Late addition, sheriffs please land the two previous patches (see comment 42) while the \"find a device\" patch is being reviewed.",
    "authour" : "janx@linux.com",
    "created" : "2015-03-23T17:28:23Z"
  }, {
    "text" : "Comment on attachment 8581764\nAdd method to find a device by its properties.\n\nAlex, please have a look. I didn't open a separate bug because I was lazy, but I'll do it if you complain.",
    "authour" : "janx@linux.com",
    "created" : "2015-03-23T17:30:01Z"
  }, {
    "text" : "Comment on attachment 8581764\nAdd method to find a device by its properties.\n\nActually, nevermind. I need something that doesn't return a promise.",
    "authour" : "janx@linux.com",
    "created" : "2015-03-23T17:38:02Z"
  }, {
    "text" : "Comment on attachment 8581764\nAdd method to find a device by its properties.\n\nNo need to land this.",
    "authour" : "janx@linux.com",
    "created" : "2015-03-23T17:38:50Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/d462c6963156\nhttps://hg.mozilla.org/integration/fx-team/rev/3ec9f77647f6",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-03-23T19:04:29Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/d462c6963156\nhttps://hg.mozilla.org/mozilla-central/rev/3ec9f77647f6",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-03-24T16:32:57Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:32:57Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:32:57Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "janx@linux.com",
      "date" : "2015-02-20T12:39:34Z",
      "what" : "platform",
      "removed" : "x86_64",
      "added" : "All"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-20T12:39:34Z",
      "what" : "op_sys",
      "removed" : "Linux",
      "added" : "All"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-20T22:24:35Z",
      "what" : "cc",
      "removed" : "",
      "added" : "sole@mozilla.com"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-23T15:03:00Z",
      "what" : "attachments.isobsolete:8567918",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-23T15:14:09Z",
      "what" : "attachments.isobsolete:8567919",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-26T20:35:50Z",
      "what" : "attachments.isobsolete:8567923",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-26T20:49:51Z",
      "what" : "attachments.isobsolete:8570087",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-26T20:50:50Z",
      "what" : "summary",
      "removed" : "Host device catalog on a CDN",
      "added" : "Host devices catalog on a CDN"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-26T20:50:50Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1090949"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-26T21:11:50Z",
      "what" : "cc",
      "removed" : "",
      "added" : "poirot.alex@gmail.com"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-27T12:54:12Z",
      "what" : "cc",
      "removed" : "",
      "added" : "ntim007@yahoo.it"
    }, {
      "name" : "sole@mozilla.com",
      "date" : "2015-03-03T11:33:02Z",
      "what" : "cc",
      "removed" : "",
      "added" : "server-ops-webops@mozilla-org.bugs"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-03T13:16:58Z",
      "what" : "attachments.isobsolete:8570090",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-06T12:00:26Z",
      "what" : "attachments.isobsolete:8570100",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-06T16:47:18Z",
      "what" : "attachments.isobsolete:8571930",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-06T16:47:18Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gozer@mozilla.com"
    }, {
      "name" : "rsoderberg@mozilla.com",
      "date" : "2015-03-09T19:06:20Z",
      "what" : "cc",
      "removed" : "",
      "added" : "rsoderberg@mozilla.com, webops-kanban@mozilla.bugs"
    }, {
      "name" : "webops-kanban@mozilla.bugs",
      "date" : "2015-03-09T19:10:09Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[kanban:https://webops.kanbanize.com/ctrl_board/2/712] "
    }, {
      "name" : "smani@mozilla.com",
      "date" : "2015-03-10T01:06:15Z",
      "what" : "cc",
      "removed" : "",
      "added" : "smani@mozilla.com"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-11T16:36:39Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jryans@gmail.com"
    }, {
      "name" : "smani@mozilla.com",
      "date" : "2015-03-13T01:04:04Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1142830"
    }, {
      "name" : "smani@mozilla.com",
      "date" : "2015-03-13T01:05:09Z",
      "what" : "cc",
      "removed" : "server-ops-webops@mozilla-org.bugs, webops-kanban@mozilla.bugs",
      "added" : ""
    }, {
      "name" : "smani@mozilla.com",
      "date" : "2015-03-13T01:05:09Z",
      "what" : "whiteboard",
      "removed" : "[kanban:https://webops.kanbanize.com/ctrl_board/2/712] ",
      "added" : ""
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-18T19:34:20Z",
      "what" : "attachments.isobsolete:8573879",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-20T19:04:06Z",
      "what" : "attachments.isobsolete:8579557",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "smani@mozilla.com",
      "date" : "2015-03-21T02:06:23Z",
      "what" : "cc",
      "removed" : "smani@mozilla.com",
      "added" : ""
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-21T11:01:28Z",
      "what" : "attachments.isobsolete:8580841",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-21T11:02:27Z",
      "what" : "attachments.isobsolete:8580843",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-21T12:51:29Z",
      "what" : "attachments.isobsolete:8581096",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-21T20:55:21Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-23T13:00:04Z",
      "what" : "component",
      "removed" : "Simulator",
      "added" : "Developer Tools"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-23T13:00:04Z",
      "what" : "product",
      "removed" : "Firefox OS",
      "added" : "Firefox"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-23T17:28:23Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "leave-open"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-23T17:39:05Z",
      "what" : "keywords",
      "removed" : "leave-open",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-23T19:04:29Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-23T19:04:29Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:32:57Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:32:57Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:32:57Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-24 09:32:57"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:32:57Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "mantaroh@gmail.com",
      "date" : "2015-05-01T08:01:38Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mantaroh@gmail.com"
    } ],
    "flagEvents" : [ {
      "name" : "janx@linux.com",
      "date" : "2015-02-20T22:24:35Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-26T21:11:50Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8570100,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-27T12:54:12Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-27T13:04:47Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(ntim007@yahoo.it)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-02T10:36:16Z",
      "what" : "flagtypes.name",
      "removed" : "review?(poirot.alex@gmail.com)",
      "added" : "",
      "attachmentId" : 8570100,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "sole@mozilla.com",
      "date" : "2015-03-03T11:33:02Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(sole@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-06T11:39:17Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(server-ops-webops@mozilla-org.bugs)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-06T11:40:24Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-06T16:47:18Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(server-ops-webops@mozilla-org.bugs)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-06T16:54:11Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8573879,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-09T10:00:14Z",
      "what" : "flagtypes.name",
      "removed" : "review?(poirot.alex@gmail.com)",
      "added" : "",
      "attachmentId" : 8573879,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "rsoderberg@mozilla.com",
      "date" : "2015-03-09T19:06:20Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(gozer@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "smani@mozilla.com",
      "date" : "2015-03-10T21:43:18Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(rsoderberg@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-11T15:11:30Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(janx@linux.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "smani@mozilla.com",
      "date" : "2015-03-13T01:00:56Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(smani@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-18T19:34:20Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8579557,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-18T19:50:49Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8579557,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-19T17:28:03Z",
      "what" : "flagtypes.name",
      "removed" : "review?(poirot.alex@gmail.com)",
      "added" : "",
      "attachmentId" : 8579557,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-20T19:02:19Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8580841,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-20T19:04:06Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8580843,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-20T19:23:25Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8580841,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-21T11:01:28Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8581096,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-21T11:02:27Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8581097,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-21T12:51:29Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8581110,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-23T17:30:01Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8581764,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-23T17:38:02Z",
      "what" : "flagtypes.name",
      "removed" : "review?(poirot.alex@gmail.com)",
      "added" : "",
      "attachmentId" : 8581764,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-23T17:38:50Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8581764,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-23T19:04:29Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1135018,
  "cclist" : [ "gozer@mozilla.com", "janx@linux.com", "jryans@gmail.com", "mantaroh@gmail.com", "ntim.bugs@gmail.com", "poirot.alex@gmail.com", "rsoderberg@mozilla.com", "sole@mozilla.com" ]
}, {
  "component" : "Developer Tools: Canvas Debugger",
  "summary" : "functionCalls is null when clicking on a recording that could not load/loading",
  "reporter" : "jordan@jsantell.com",
  "assigned" : "jordan@jsantell.com",
  "created" : null,
  "operatingSystem" : "Mac OS X",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "When clicking on the snapshot list item of a recording that has no rAF cycle, this throws. Even after refactoring and allowing timeouts in bug 985488 this occurs.\n\nA promise chain failed to handle a rejection. Did you forget to '.catch', or did you forget to 'return'?\nSee https://developer.mozilla.org/Mozilla/JavaScript_code_modules/Promise.jsm/Promise\n\nDate: Thu Feb 19 2015 14:50:14 GMT-0800 (PST)\nFull Message: TypeError: functionCalls is null\nFull Stack: CallsListView<.showCalls@chrome://browser/content/devtools/canvasdebugger.js:602:21\nSnapshotsListView<._onSelect/<@chrome://browser/content/devtools/canvasdebugger.js:330:7\nTaskImpl_run@resource://gre/modules/Task.jsm:314:40\nHandler.prototype.process@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:867:23\nthis.PromiseWalker.walkerLoop@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:746:7\nthis.PromiseWalker.scheduleWalkerLoop/<@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:688:37",
  "comments" : [ {
    "text" : "When clicking on the snapshot list item of a recording that has no rAF cycle, this throws. Even after refactoring and allowing timeouts in bug 985488 this occurs.\n\nA promise chain failed to handle a rejection. Did you forget to '.catch', or did you forget to 'return'?\nSee https://developer.mozilla.org/Mozilla/JavaScript_code_modules/Promise.jsm/Promise\n\nDate: Thu Feb 19 2015 14:50:14 GMT-0800 (PST)\nFull Message: TypeError: functionCalls is null\nFull Stack: CallsListView<.showCalls@chrome://browser/content/devtools/canvasdebugger.js:602:21\nSnapshotsListView<._onSelect/<@chrome://browser/content/devtools/canvasdebugger.js:330:7\nTaskImpl_run@resource://gre/modules/Task.jsm:314:40\nHandler.prototype.process@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:867:23\nthis.PromiseWalker.walkerLoop@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:746:7\nthis.PromiseWalker.scheduleWalkerLoop/<@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:688:37",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-19T22:52:15Z"
  }, {
    "text" : "Once rebased etc, simple fix:\n\nSnapshotsList._onSelect: function () {                                            \n  if (!snapshotItem || !snapshotItem.attachment.actor) {\n    return;\n  }\n...",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-20T00:58:37Z"
  }, {
    "text" : "Created attachment 8568610\n1134876-canvasbugs.patch\n\ntry's down.",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-24T16:50:52Z"
  }, {
    "text" : "Comment on attachment 8568610\n1134876-canvasbugs.patch\n\nReview of attachment 8568610:\n-----------------------------------------------------------------\n\n::: browser/devtools/canvasdebugger/snapshotslist.js\n@@ +161,5 @@\n>    /**\n>     * The select listener for this container.\n>     */\n>    _onSelect: function({ detail: snapshotItem }) {\n> +    if (!snapshotItem || !snapshotItem.attachment.actor) {\n\nMaybe add a comment here describing how the actor can be null for in-progress recordings.",
    "authour" : "vporof@mozilla.com",
    "created" : "2015-02-24T18:16:34Z"
  }, {
    "text" : "Created attachment 8569271\n1134876-canvasbugs.patch\n\n https://treeherder.mozilla.org/#/jobs?repo=try&revision=620af0fc1ddd",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-25T16:55:43Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/44bc0ab3e491",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-02-25T23:26:35Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/44bc0ab3e491",
    "authour" : "cbook@mozilla.com",
    "created" : "2015-02-26T11:04:00Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-19T22:52:34Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:04:00Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:04:00Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-19T22:52:24Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "985488"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-19T22:52:34Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "jsantell@mozilla.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-24T16:50:52Z",
      "what" : "cc",
      "removed" : "",
      "added" : "vporof@mozilla.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-25T16:55:43Z",
      "what" : "attachments.isobsolete:8568610",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-25T19:22:14Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-25T23:26:35Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-25T23:26:35Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:04:00Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:04:00Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:04:00Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-26 03:04:00"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-26T11:04:00Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-24T16:50:52Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8568610,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "vporof@mozilla.com",
      "date" : "2015-02-24T18:16:34Z",
      "what" : "flagtypes.name",
      "removed" : "review?(vporof@mozilla.com)",
      "added" : "",
      "attachmentId" : 8568610,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-25T16:55:43Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8569271,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134876,
  "cclist" : [ "vporof@mozilla.com" ]
}, {
  "component" : "Developer Tools: Console",
  "summary" : "Add clearHistory jsterm helper to remove persisted console input history",
  "reporter" : "bgrinstead@mozilla.com",
  "assigned" : "bgrinstead@mozilla.com",
  "created" : null,
  "operatingSystem" : "Mac OS X",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "This is a follow up to Bug 943306 to allow a way to clear the saved console history.\n\nThe proposal is to add a jsterm helper for \"clearHistory()\" that will send a helperResult of clearHistory to indicate to the frontend to do so.",
  "comments" : [ {
    "text" : "This is a follow up to Bug 943306 to allow a way to clear the saved console history.\n\nThe proposal is to add a jsterm helper for \"clearHistory()\" that will send a helperResult of clearHistory to indicate to the frontend to do so.",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-19T22:07:00Z"
  }, {
    "text" : "We have this old bug to alias our clear() helper to console.clear - I wonder if it would make sense to also add this method to the console object as they are related? We could see if the chrome folks were interested in adding it as well.\n\nSee bug 659625",
    "authour" : "jgriffiths@mozilla.com",
    "created" : "2015-02-19T22:23:28Z"
  }, {
    "text" : "(In reply to Jeff Griffiths (:canuckistani) from comment #1)\n> We have this old bug to alias our clear() helper to console.clear - I wonder\n> if it would make sense to also add this method to the console object as they\n> are related? We could see if the chrome folks were interested in adding it\n> as well.\n\nThe only problem with that is that a web page could call console.clearHistory and wipe out your saved data. (and/or clear your output).  To me, this makes sense as a js term helper (only available when inputting directly into the console).",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-19T22:25:43Z"
  }, {
    "text" : "(In reply to Brian Grinstead [:bgrins] from comment #2)\n> (In reply to Jeff Griffiths (:canuckistani) from comment #1)\n> > We have this old bug to alias our clear() helper to console.clear - I wonder\n> > if it would make sense to also add this method to the console object as they\n> > are related? We could see if the chrome folks were interested in adding it\n> > as well.\n> \n> The only problem with that is that a web page could call\n> console.clearHistory and wipe out your saved data. (and/or clear your\n> output).  To me, this makes sense as a js term helper (only available when\n> inputting directly into the console).\n\nYeah, forget I said anything.",
    "authour" : "jgriffiths@mozilla.com",
    "created" : "2015-02-19T22:27:03Z"
  }, {
    "text" : "Created attachment 8567361\nconsole-clearHistory.patch\n\nAdds a jsterm helper for clearHistory() that will remove all entries from the active toolbox any future ones.\n\nTry push: https://treeherder.mozilla.org/#/jobs?repo=try&revision=443cf848d591",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-20T22:57:49Z"
  }, {
    "text" : "Comment on attachment 8567361\nconsole-clearHistory.patch\n\nReview of attachment 8567361:\n-----------------------------------------------------------------\n\nGreat, don't forget to update MDN once this lands:\n\nhttps://developer.mozilla.org/docs/Tools/Web_Console/Helpers",
    "authour" : "past@mozilla.com",
    "created" : "2015-02-21T11:20:00Z"
  }, {
    "text" : "https://treeherder.mozilla.org/#/jobs?repo=try&revision=f7604b7f7cf6",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-27T03:32:43Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/e1a7c0e78a9d",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-27T19:27:55Z"
  }, {
    "text" : "Will, could you please add a note for this new 'clearHistory()' jsterm helper?  It will clear out any webconsole commands that have been saved to your profile (a feature added for 39 in Bug 943306).",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-28T03:35:21Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/e1a7c0e78a9d",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-03-02T20:48:36Z"
  }, {
    "text" : "I'll update MDN when this is in Developer Edition, unless you need it sooner.",
    "authour" : "wbamberg@mozilla.com",
    "created" : "2015-03-11T22:05:34Z"
  }, {
    "text" : "(In reply to Will Bamberg [:wbamberg] from comment #10)\n> I'll update MDN when this is in Developer Edition, unless you need it sooner.\n\nThat'd be perfect, thanks!",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-03-11T22:06:18Z"
  }, {
    "text" : "bgrins, I've added notes here: https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Command_history\nand here: https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Helper_commands. Does that cover it?",
    "authour" : "wbamberg@mozilla.com",
    "created" : "2015-04-02T04:25:22Z"
  }, {
    "text" : "(In reply to Will Bamberg [:wbamberg] from comment #12)\n> bgrins, I've added notes here:\n> https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Command_history\n> and here:\n> https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Helper_commands.\n> Does that cover it?\n\nLooks good, thanks.",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-04-02T14:25:25Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-20T22:57:49Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-02T20:48:36Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-02T20:48:36Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jgriffiths@mozilla.com",
      "date" : "2015-02-19T22:23:28Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jgriffiths@mozilla.com"
    }, {
      "name" : "jgriffiths@mozilla.com",
      "date" : "2015-02-19T22:23:28Z",
      "what" : "see_also",
      "removed" : "",
      "added" : "https://bugzilla.mozilla.org/show_bug.cgi?id=659625"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-20T22:57:49Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "bgrinstead@mozilla.com"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-27T03:32:43Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-27T19:27:55Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-27T19:27:55Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-28T03:35:21Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "dev-doc-needed"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-28T03:35:21Z",
      "what" : "cc",
      "removed" : "",
      "added" : "wbamberg@mozilla.com"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-02T20:48:36Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-02T20:48:36Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-02T20:48:36Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-02 12:48:36"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-02T20:48:36Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "wbamberg@mozilla.com",
      "date" : "2015-04-02T04:25:22Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bgrinstead@mozilla.com"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-04-02T14:25:25Z",
      "what" : "keywords",
      "removed" : "dev-doc-needed",
      "added" : "dev-doc-complete"
    } ],
    "flagEvents" : [ {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-20T22:57:49Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567361,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "past@mozilla.com",
      "date" : "2015-02-21T11:20:00Z",
      "what" : "flagtypes.name",
      "removed" : "review?(past@mozilla.com)",
      "added" : "",
      "attachmentId" : 8567361,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-27T19:27:55Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-28T03:35:21Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "wbamberg@mozilla.com",
      "date" : "2015-03-11T22:05:34Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(wbamberg@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "wbamberg@mozilla.com",
      "date" : "2015-04-02T04:25:22Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-04-02T14:25:25Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(bgrinstead@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134845,
  "cclist" : [ "bgrinstead@mozilla.com", "jgriffiths@mozilla.com", "past@mozilla.com", "wbamberg@mozilla.com" ]
}, {
  "component" : "Developer Tools",
  "summary" : "Consolidate `viewSourceInDebugger` helper",
  "reporter" : "jordan@jsantell.com",
  "assigned" : "jordan@jsantell.com",
  "created" : null,
  "operatingSystem" : "Mac OS X",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Used in webconsole, canvas debugger, and performance. Should move this to a shared utility in shared/ somewhere, or in gDevTools.\n\nNewest version (to be replicated) is in performance. webconsole seems to have an additional feature of allowing opening in source view?",
  "comments" : [ {
    "text" : "Used in webconsole, canvas debugger, and performance. Should move this to a shared utility in shared/ somewhere, or in gDevTools.\n\nNewest version (to be replicated) is in performance. webconsole seems to have an additional feature of allowing opening in source view?",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-19T19:49:24Z"
  }, {
    "text" : "Created attachment 8590109\n1134778-view-source.patch\n\nf? as this is a pretty global change.\n\nNew utilites for viewing source in debugger, style editor, scratchpad, and with the native View Source. Currently standalone (requiring a target), but maybe this would make more sense as toolbox methods (namespaced)? Only case I saw this outside of the toolbox was in the webconsole, but not sure what would trigger that case.\n\nCurrently, to fetch gViewSourceUtils[0], there are many magic ways throughout the tools to do this, but this file is included in the inspector, and the inspector exposes this for others to consume (style-inspector), so the utilities start up the inspector if it's not already and use it. Super lazy, so should be ok, but if there's a cleaner way to do this (so inspector doesn't have to be in control of this) that'd be ideal. Feel free to f? anyone else who you think would be interested (esp for web console?)\n\n[0]http://mxr.mozilla.org/mozilla-central/source/toolkit/components/viewsource/content/viewSourceUtils.js\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=c5ea1fe71c5c",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-09T08:05:09Z"
  }, {
    "text" : "Comment on attachment 8590109\n1134778-view-source.patch\n\nReview of attachment 8590109:\n-----------------------------------------------------------------\n\nOverall, it seems logical to me, but it would nice to move ownership to the toolbox for real, I think, instead of living oddly in the inspector but also shared.\n\n(In reply to Jordan Santell [:jsantell] [@jsantell] from comment #1)\n> Created attachment 8590109\n> 1134778-view-source.patch\n> \n> f? as this is a pretty global change.\n> \n> New utilites for viewing source in debugger, style editor, scratchpad, and\n> with the native View Source. Currently standalone (requiring a target), but\n> maybe this would make more sense as toolbox methods (namespaced)? Only case\n> I saw this outside of the toolbox was in the webconsole, but not sure what\n> would trigger that case.\n\nWhere is this \"out of toolbox\" case?\n\n::: browser/devtools/framework/toolbox.js\n@@ +1828,5 @@\n> +    if (this._gViewSourceUtils) {\n> +      return this._gViewSourceUtils;\n> +    }\n> +    let inspectorPanel = yield this.loadTool(\"inspector\");\n> +    return this._gViewSourceUtils = inspectorPanel.viewSourceUtils;\n\nIt seems odd to me to make this available the toolbox level, but then have the toolbox pull a reference from the inspector panel...\n\nCould we just load the |viewSourceUtils.js| file in the toolbox frame instead?\n\nReally, it would be much better if |gViewSourceUtils| were instead an require()able module, but I realize that could be too much to ask for.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-09T22:27:52Z"
  }, {
    "text" : "Comment on attachment 8590109\n1134778-view-source.patch\n\nReview of attachment 8590109:\n-----------------------------------------------------------------\n\nThe \"outside the toolbox\" case was the webconsole checking if the toolbox exists, and then handling that case, and not sure if that can exist or what, so whether or not we need to support a scenario where there is no toolbox -- which would affect whether or not we can attach it to toolbox.\n\nI'll move these methods to toolbox instance, also with the shared lib, and see if i can pull out inspector exposing its own version, with the toolbox.xul hosting the viewSourceUtils in the first place. Thanks!\n\n::: browser/devtools/framework/toolbox.js\n@@ +1828,5 @@\n> +    if (this._gViewSourceUtils) {\n> +      return this._gViewSourceUtils;\n> +    }\n> +    let inspectorPanel = yield this.loadTool(\"inspector\");\n> +    return this._gViewSourceUtils = inspectorPanel.viewSourceUtils;\n\nAgreed -- this was something I wanted to ask you, since I wasn't quite sure how it worked. Seemed that the inspector had it, as well as the browser toolbox.\n\n+1 on the requireable, but this is just a direct translation, can get fancy in the future IMO",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-09T22:34:13Z"
  }, {
    "text" : "(In reply to Jordan Santell [:jsantell] [@jsantell] from comment #3)\n> Comment on attachment 8590109\n> 1134778-view-source.patch\n> \n> Review of attachment 8590109:\n> -----------------------------------------------------------------\n> \n> The \"outside the toolbox\" case was the webconsole checking if the toolbox\n> exists, and then handling that case, and not sure if that can exist or what,\n> so whether or not we need to support a scenario where there is no toolbox --\n> which would affect whether or not we can attach it to toolbox.\n\nAh, I think the \"no toolbox\" case is the Browser Console.  There, the lonely console is all by itself, and so there is no guarantee of access to other tools.  But, it seems your translation of the code would handle this and fall back to plain view source as before.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-09T22:43:24Z"
  }, {
    "text" : "Comment on attachment 8590109\n1134778-view-source.patch\n\nReview of attachment 8590109:\n-----------------------------------------------------------------\n\nomg finally",
    "authour" : "vporof@mozilla.com",
    "created" : "2015-04-10T15:18:35Z"
  }, {
    "text" : "Created attachment 8591113\n1134778-view-source.patch\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=0fd115d1f33c",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-10T22:16:27Z"
  }, {
    "text" : "This should land after bug 1077464 lands",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-10T22:17:44Z"
  }, {
    "text" : "Comment on attachment 8591113\n1134778-view-source.patch\n\nReview of attachment 8591113:\n-----------------------------------------------------------------\n\nA few remaining things to fix, looks good overall.\n\nI'll be gone for the next week, so I trust Victor to handle any further rounds. :)\n\n::: browser/devtools/framework/toolbox.js\n@@ +165,5 @@\n>    CUSTOM: \"custom\"\n>  };\n>  \n>  Toolbox.prototype = {\n> +  _gViewSourceUtils: null,\n\nNit: This is kind of surprising to see at the top of the prototype, since it's kind of an ancillary feature...  But, no great suggestions either. :)\n\n@@ +1824,5 @@\n> +\n> +  /**\n> +   * Returns gViewSourceUtils for viewing source.\n> +   */\n> +  get gViewSourceUtils() {\n\nWait, what is |_gViewSourceUtils| for then?  Were you going to cache it?\n\n::: browser/devtools/shared/source-utils.js\n@@ +123,5 @@\n> + * @return {Promise}\n> + */\n> +exports.viewSource = Task.async(function *(toolbox, sourceURL, sourceLine) {\n> +  let utils = toolbox.gViewSourceUtils;\n> +  // XXX does it matter what document we use for this?\n\nI don't believe it matters.\n\n::: browser/devtools/shared/timeline/marker-details.js\n@@ +218,5 @@\n>          hbox.appendChild(aNode);\n>  \n>          aNode.addEventListener(\"click\", (event) => {\n>            event.preventDefault();\n> +          this.emit(\"view-source\", url, line);\n\nHmm, where is the listener for this?",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-10T23:34:22Z"
  }, {
    "text" : "Comment on attachment 8591113\n1134778-view-source.patch\n\nReview of attachment 8591113:\n-----------------------------------------------------------------\n\n::: browser/devtools/framework/toolbox.js\n@@ +1824,5 @@\n> +\n> +  /**\n> +   * Returns gViewSourceUtils for viewing source.\n> +   */\n> +  get gViewSourceUtils() {\n\nGood catch -- yeah, was cached when it involved talking to the inspector -- removed the _gViewSourceUtils\n\n::: browser/devtools/shared/source-utils.js\n@@ +123,5 @@\n> + * @return {Promise}\n> + */\n> +exports.viewSource = Task.async(function *(toolbox, sourceURL, sourceLine) {\n> +  let utils = toolbox.gViewSourceUtils;\n> +  // XXX does it matter what document we use for this?\n\n+1\n\n::: browser/devtools/shared/timeline/marker-details.js\n@@ +218,5 @@\n>          hbox.appendChild(aNode);\n>  \n>          aNode.addEventListener(\"click\", (event) => {\n>            event.preventDefault();\n> +          this.emit(\"view-source\", url, line);\n\nIn performance/views/details-waterfall.js",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-11T00:10:05Z"
  }, {
    "text" : "Created attachment 8591166\n1134778-view-source.patch",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-11T00:58:16Z"
  }, {
    "text" : "Created attachment 8591357\n1134778-view-source.patch\n\nWaiting to land after bug 1077464, which will require rebasing\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=b7533fc425b6",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-12T16:28:50Z"
  }, {
    "text" : "Created attachment 8592028\n1134778-view-source.patch\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=2eaef0acf588",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-14T02:34:34Z"
  }, {
    "text" : "Created attachment 8594183\n1134778-view-source.patch\n\nRebased after the console.profile patch was backed out and relanded. https://treeherder.mozilla.org/#/jobs?repo=try&revision=4d21cccfc820",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-17T21:11:28Z"
  }, {
    "text" : "Is this ready to land again?",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-22T00:47:22Z"
  }, {
    "text" : "browser/devtools/framework/test/browser_toolbox_view_source_04.js is still failing only on try",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-22T03:01:00Z"
  }, {
    "text" : "Created attachment 8597453\n1134778-view-source.patch\n\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=e6f3cfd54237",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-24T21:21:40Z"
  }, {
    "text" : "Created attachment 8597558\n1134778-view-source.patch\n\nRebased",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-25T01:49:11Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/c3d0143b9268",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-04-25T01:50:23Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/c3d0143b9268",
    "authour" : "cbook@mozilla.com",
    "created" : "2015-04-27T10:37:34Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-09T02:56:28Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-27T10:37:34Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-27T10:37:34Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-19T19:50:48Z",
      "what" : "component",
      "removed" : "Developer Tools: Debugger",
      "added" : "Developer Tools"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-01T17:33:12Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1050128"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-09T02:56:28Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "jsantell@mozilla.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-09T08:05:09Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jryans@gmail.com, vporof@mozilla.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-10T04:11:41Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1088785"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-04-10T14:34:50Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bgrinstead@mozilla.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-10T18:18:55Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1067325"
    }, {
      "name" : "bruant.d@gmail.com",
      "date" : "2015-04-10T18:31:39Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bruant.d@gmail.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-10T22:16:27Z",
      "what" : "attachments.isobsolete:8590109",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-10T22:17:44Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1077464"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-10T22:30:56Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1153412"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-10T23:56:08Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1036698"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-11T00:58:16Z",
      "what" : "attachments.isobsolete:8591113",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-12T16:28:50Z",
      "what" : "attachments.isobsolete:8591166",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-14T02:34:34Z",
      "what" : "attachments.isobsolete:8591357",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-17T21:11:28Z",
      "what" : "attachments.isobsolete:8592028",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-22T00:47:22Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jsantell@mozilla.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-24T21:21:40Z",
      "what" : "attachments.isobsolete:8594183",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-25T01:49:11Z",
      "what" : "attachments.isobsolete:8597453",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-25T01:50:23Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-27T10:37:34Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 40"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-27T10:37:34Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-27T10:37:34Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-04-27 03:37:34"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-27T10:37:34Z",
      "what" : "cf_status_firefox40",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-30T20:54:57Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1160305"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-05-01T13:35:27Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1160492"
    }, {
      "name" : "sjakthol@outlook.com",
      "date" : "2015-05-24T06:08:27Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1167917"
    } ],
    "flagEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-09T08:05:09Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8590109,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      }, {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-09T22:27:52Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8590109,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "vporof@mozilla.com",
      "date" : "2015-04-10T15:18:35Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(vporof@mozilla.com)",
      "added" : "",
      "attachmentId" : 8590109,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-10T22:16:27Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591113,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      }, {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-10T23:34:22Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8591113,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-11T00:58:16Z",
      "what" : "flagtypes.name",
      "removed" : "review?(vporof@mozilla.com)",
      "added" : "",
      "attachmentId" : 8591113,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-11T00:58:16Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591166,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "vporof@mozilla.com",
      "date" : "2015-04-12T13:53:13Z",
      "what" : "flagtypes.name",
      "removed" : "review?(vporof@mozilla.com)",
      "added" : "",
      "attachmentId" : 8591166,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-12T16:28:50Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591357,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-14T02:34:34Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8592028,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-17T21:11:28Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8594183,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-22T00:47:22Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-22T03:01:00Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(jsantell@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-24T21:21:40Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8597453,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-04-25T01:49:11Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8597558,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134778,
  "cclist" : [ "bgrinstead@mozilla.com", "bruant.d@gmail.com", "jordan@jsantell.com", "jryans@gmail.com", "vporof@mozilla.com" ]
}, {
  "component" : "Menus",
  "summary" : "[e10s] \"This Frame > Show/Open\" commands causes unsafe CPOW usage warning",
  "reporter" : "moz-ian@perix.co.uk",
  "assigned" : "moz-ian@perix.co.uk",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with frames on it in an e10s window\n2) Right-click on a frame, and choose \"This Frame\" then any of \"Show Only[...]\", \"Open Frame in New Tab\", \"Open Frame in New Window\"\n\nThis causes some \"unsafe CPOW usage\" warnings in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n[all from uses of doc.location.href, doc.referrer, or doc.characterSet]\n\npatch incoming",
  "comments" : [ {
    "text" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with frames on it in an e10s window\n2) Right-click on a frame, and choose \"This Frame\" then any of \"Show Only[...]\", \"Open Frame in New Tab\", \"Open Frame in New Window\"\n\nThis causes some \"unsafe CPOW usage\" warnings in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n[all from uses of doc.location.href, doc.referrer, or doc.characterSet]\n\npatch incoming",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-19T17:48:01Z"
  }, {
    "text" : "Created attachment 8566604\nMake context-menu open-frame commands e10s safe",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-19T17:52:14Z"
  }, {
    "text" : "Created attachment 8566902\nMake context-menu open-frame commands e10s safe (applies before 1075670)\n\nInconveniently, I made this patch on a slightly old m-c, and after the backout of bug 1075670 it no longer applies cleanly.\nHere's one that does.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-20T00:55:00Z"
  }, {
    "text" : "Comment on attachment 8566604\nMake context-menu open-frame commands e10s safe\n\nClearing review because I need to make a patch with saner naming.  Having frameURL separate from doc.location.href (which is needed for the regular open link) doesn't seem to make sense unless there's a time when we need both.  And thus the frame check if() is probably unnecessary.\nMight swap the ordering of the patches as well, or just combine them.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-20T22:15:20Z"
  }, {
    "text" : "Fixed in Bug 1133577.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-03-06T21:57:02Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-06T21:57:02Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-06T21:57:02Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-19T18:06:38Z",
      "what" : "cf_tracking_e10s",
      "removed" : "?",
      "added" : "m8+"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-20T17:05:24Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1133577"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-21T00:47:33Z",
      "what" : "blocks",
      "removed" : "1133577",
      "added" : ""
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-21T00:47:33Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1133577"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-21T00:54:37Z",
      "what" : "attachments.isobsolete:8566604",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-21T00:54:54Z",
      "what" : "attachments.isobsolete:8566902",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-06T21:57:02Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-06 13:57:02"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-13T20:27:12Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-13T20:27:12Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-19T17:52:14Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8566604,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-20T22:15:20Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8566604,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "DENIED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134708,
  "cclist" : [ "blassey.bugs@lassey.us", "mconley@mozilla.com" ]
}, {
  "component" : "Build Config",
  "summary" : "Add 'brx' 'ks' 'kok' to the Firefox build",
  "reporter" : "jbeatty@mozilla.com",
  "assigned" : "l10n@mozilla.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "We need to add 'brx' to browser/locales/all-locales on mozilla-aurora.\n\nPS: to be clear to the localization team, this bug is handled by Mozilla staff.",
  "comments" : [ {
    "text" : "We need to add 'brx' to browser/locales/all-locales on mozilla-aurora.\n\nPS: to be clear to the localization team, this bug is handled by Mozilla staff.",
    "authour" : "jbeatty@mozilla.com",
    "created" : "2015-02-19T16:57:34Z"
  }, {
    "text" : "Merging this with 'ks' and 'kok'.\n\nThis is actionable now that the repos from bug 1158050 are up",
    "authour" : "l10n@mozilla.com",
    "created" : "2015-06-02T12:18:29Z"
  }, {
    "text" : "*** Bug 1158051 has been marked as a duplicate of this bug. ***",
    "authour" : "l10n@mozilla.com",
    "created" : "2015-06-02T12:19:09Z"
  }, {
    "text" : "*** Bug 1158062 has been marked as a duplicate of this bug. ***",
    "authour" : "l10n@mozilla.com",
    "created" : "2015-06-02T12:19:41Z"
  }, {
    "text" : "Created attachment 8614011\nadd brx, kok, ks to aurora\n\nPicking flod as reviewer, as one of the l10n guys not on pto.",
    "authour" : "l10n@mozilla.com",
    "created" : "2015-06-02T12:29:48Z"
  }, {
    "text" : "Comment on attachment 8614011\nadd brx, kok, ks to aurora\n\nApproval Request Comment\n[Feature/regressing bug #]: Add new locales to Firefox\n[User impact if declined]:\n[Describe test coverage new/current, TreeHerder]: None\n[Risks and why]: no risk, new locales only added on aurora\n[String/UUID change made/needed]: -",
    "authour" : "l10n@mozilla.com",
    "created" : "2015-06-02T12:38:22Z"
  }, {
    "text" : "Release Note Request (optional, but appreciated)\n[Why is this notable]: New locale\n[Suggested wording]: New locale (TODO as I don't know what these languages).\n[Links (documentation, blog post, etc)]: NA",
    "authour" : "sledru@mozilla.com",
    "created" : "2015-06-02T12:40:17Z"
  }, {
    "text" : "The languages are Bodo, Konkani, and Kashmiri.\n\nWe could do aurora relnotes for now.\n\nNot sure if they're on a train to release just yet.",
    "authour" : "l10n@mozilla.com",
    "created" : "2015-06-02T13:02:04Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-aurora/rev/4c06f5e9db1a",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-06-02T17:16:32Z"
  }, {
    "text" : "Removing the release note tracking flag from this bug. These locales are not part of the shipped-locales.\n\nFrancesco mentioned that a bug similar to bug 1126794 will be filed for these locales when they will be available in shipped builds.",
    "authour" : "rkothari@mozilla.com",
    "created" : "2015-07-01T18:28:47Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "l10n@mozilla.com",
      "date" : "2015-06-02T12:29:48Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-06-02T17:16:54Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-06-02T17:16:54Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "l10n@mozilla.com",
      "date" : "2015-06-02T12:18:29Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1158048, 1158059"
    }, {
      "name" : "l10n@mozilla.com",
      "date" : "2015-06-02T12:18:29Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1158050"
    }, {
      "name" : "l10n@mozilla.com",
      "date" : "2015-06-02T12:18:29Z",
      "what" : "summary",
      "removed" : "Add 'brx' to the Firefox build",
      "added" : "Add 'brx' 'ks' 'kok' to the Firefox build"
    }, {
      "name" : "l10n@mozilla.com",
      "date" : "2015-06-02T12:29:48Z",
      "what" : "cc",
      "removed" : "",
      "added" : "francesco.lodolo@gmail.com"
    }, {
      "name" : "l10n@mozilla.com",
      "date" : "2015-06-02T12:29:48Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "l10n@mozilla.com"
    }, {
      "name" : "sledru@mozilla.com",
      "date" : "2015-06-02T12:40:17Z",
      "what" : "cc",
      "removed" : "",
      "added" : "sledru@mozilla.com"
    }, {
      "name" : "sledru@mozilla.com",
      "date" : "2015-06-02T12:40:17Z",
      "what" : "cf_tracking_firefox_relnote",
      "removed" : "---",
      "added" : "?"
    }, {
      "name" : "l10n@mozilla.com",
      "date" : "2015-06-02T13:02:04Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "l10n@mozilla.com",
      "date" : "2015-06-02T13:02:04Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[aurora-only]"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-06-02T17:16:32Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-06-02T17:16:32Z",
      "what" : "whiteboard",
      "removed" : "[aurora-only]",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-06-02T17:16:32Z",
      "what" : "cf_status_firefox40",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-06-02T17:16:54Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 40"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-06-02T17:16:54Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-06-02 10:16:54"
    }, {
      "name" : "rkothari@mozilla.com",
      "date" : "2015-07-01T18:28:47Z",
      "what" : "cc",
      "removed" : "",
      "added" : "rkothari@mozilla.com"
    }, {
      "name" : "rkothari@mozilla.com",
      "date" : "2015-07-01T18:28:47Z",
      "what" : "cf_tracking_firefox_relnote",
      "removed" : "?",
      "added" : "-"
    } ],
    "flagEvents" : [ {
      "name" : "l10n@mozilla.com",
      "date" : "2015-06-02T12:29:48Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8614011,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "francesco.lodolo@gmail.com",
      "date" : "2015-06-02T12:32:52Z",
      "what" : "flagtypes.name",
      "removed" : "review?(francesco.lodolo@gmail.com)",
      "added" : "",
      "attachmentId" : 8614011,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "l10n@mozilla.com",
      "date" : "2015-06-02T12:38:22Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8614011,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "sledru@mozilla.com",
      "date" : "2015-06-02T12:39:40Z",
      "what" : "flagtypes.name",
      "removed" : "approval-mozilla-aurora?",
      "added" : "",
      "attachmentId" : 8614011,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-06-02T17:16:32Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "DENIED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134674,
  "cclist" : [ "francesco.lodolo@gmail.com", "l10n@mozilla.com", "rkothari@mozilla.com", "sledru@mozilla.com" ]
}, {
  "component" : "Developer Tools: WebIDE",
  "summary" : "WebIDE can't debug Chrome when settings are open",
  "reporter" : "past@mozilla.com",
  "assigned" : "past@mozilla.com",
  "created" : null,
  "operatingSystem" : "Mac OS X",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Opening WebIDE and connecting to Chrome with the Settings page open in a tab I get this error and the tab list fails to appear:\n\nJPM error JavaScript error: chrome://webide/content/webide.js, line 1219: TypeError: chrome://settings/ is not a valid URL.\n\nThat line contains:\n\n1219:      let url = new URL(tab.url);\n\nThe debugger is much less strict in handling tab URLs:\n\nhttps://dxr.mozilla.org/mozilla-central/source/browser/devtools/debugger/debugger-panes.js#1793\n\nCan't we do something similar here? Note that Chrome devtools properly open and debug such pages, just like we can debug about: pages.\n\nAt the very least, we should try/catch around that line and continue with the rest of the open tabs.",
  "comments" : [ {
    "text" : "Opening WebIDE and connecting to Chrome with the Settings page open in a tab I get this error and the tab list fails to appear:\n\nJPM error JavaScript error: chrome://webide/content/webide.js, line 1219: TypeError: chrome://settings/ is not a valid URL.\n\nThat line contains:\n\n1219:      let url = new URL(tab.url);\n\nThe debugger is much less strict in handling tab URLs:\n\nhttps://dxr.mozilla.org/mozilla-central/source/browser/devtools/debugger/debugger-panes.js#1793\n\nCan't we do something similar here? Note that Chrome devtools properly open and debug such pages, just like we can debug about: pages.\n\nAt the very least, we should try/catch around that line and continue with the rest of the open tabs.",
    "authour" : "past@mozilla.com",
    "created" : "2015-02-19T15:15:52Z"
  }, {
    "text" : "Hmm, it seems the platform explicitly blocks new URL() from parsing chrome:// URLs. :/ Any random scheme name works, so chrome must be banned for some reason.\n\nAnyway, we should make this work one way or another.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-02-19T20:51:24Z"
  }, {
    "text" : "Created attachment 8572635\nDon't let WebIDE break when trying to debug Chrome settings\n\nIt turns out that chrome: URLs are parsed properly, but only those that are actually valid for Firefox (which chrome://settings is not). Therefore I just ignore these URLs, since I can't think of a way to debug them properly.\n\nI couldn't write a test for the same reason: using something like chrome://webide/content would work even without the patch and using chrome://settings would throw when trying to create the tab in Firefox.",
    "authour" : "past@mozilla.com",
    "created" : "2015-03-04T15:28:10Z"
  }, {
    "text" : "Comment on attachment 8572635\nDon't let WebIDE break when trying to debug Chrome settings\n\nReview of attachment 8572635:\n-----------------------------------------------------------------\n\nLooks good to me, especially if these pages can't be debugged.\nOtherwise it would be better to fix that code to be able to display a meaningful label instead of skipping them.\nAlso, may be valence should only expose the tabs it is able to debug?",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-03-04T15:59:32Z"
  }, {
    "text" : "Both good points. It turns out that these pages can indeed be debugged, it's just the tab list that can't handle them. I have a fix in Valence for this and I'll land this patch as a safeguard that WebIDE never breaks in the presence of an invalid URL.",
    "authour" : "past@mozilla.com",
    "created" : "2015-03-04T16:58:56Z"
  }, {
    "text" : "Here is the change I mention above:\n\nhttps://github.com/campd/valence/pull/167\n\nCan you review that too, please?",
    "authour" : "past@mozilla.com",
    "created" : "2015-03-04T17:11:42Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/e278a83c3975",
    "authour" : "past@mozilla.com",
    "created" : "2015-03-05T06:42:56Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/e278a83c3975",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-03-05T23:07:04Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "past@mozilla.com",
      "date" : "2015-03-04T15:28:12Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-05T23:07:04Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-05T23:07:04Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-19T20:51:24Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jryans@gmail.com"
    }, {
      "name" : "past@mozilla.com",
      "date" : "2015-03-04T15:28:10Z",
      "what" : "cc",
      "removed" : "",
      "added" : "poirot.alex@gmail.com"
    }, {
      "name" : "past@mozilla.com",
      "date" : "2015-03-04T15:28:12Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "past@mozilla.com"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-05T23:07:04Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-05T23:07:04Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-05 15:07:04"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-05T23:07:04Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "past@mozilla.com",
      "date" : "2015-03-04T15:28:10Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8572635,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-04T15:59:32Z",
      "what" : "flagtypes.name",
      "removed" : "review?(poirot.alex@gmail.com)",
      "added" : "",
      "attachmentId" : 8572635,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134619,
  "cclist" : [ "jryans@gmail.com", "poirot.alex@gmail.com" ]
}, {
  "component" : "Menus",
  "summary" : "[e10s] \"View Selection/MathML Source\" in remote browser causes unsafe CPOW usage warning",
  "reporter" : "moz-ian@perix.co.uk",
  "assigned" : "enndeakin@gmail.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site in an e10s window, optionally one with MathML\n2) Select some page text/find some MathML\n2) Right-click on the page/MathML, and choose \"View Selection/MathML Source\"\n\nThis causes lots \"unsafe CPOW usage\" warnings in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n  // View Partial Source\n  viewPartialSource: function(aContext) {\n    var focusedWindow = document.commandDispatcher.focusedWindow;\n    if (focusedWindow == window)\n      focusedWindow = gBrowser.selectedBrowser.contentWindowAsCPOW;\n\n    var docCharset = null;\n    if (focusedWindow)\n      docCharset = \"charset=\" + focusedWindow.document.characterSet; <-- Causes CPOW warning\n\n    // \"View Selection Source\" and others such as \"View MathML Source\"\n    // are mutually exclusive, with the precedence given to the selection\n    // when there is one\n    var reference = null;\n    if (aContext == \"selection\")\n      reference = focusedWindow.getSelection(); <-- Causes CPOW warning [selection]\n    else if (aContext == \"mathml\")\n      reference = this.target;\n    else\n      throw \"not reached\";\n\n    // unused (and play nice for fragments generated via XSLT too)\n    var docUrl = null;\n    window.openDialog(\"chrome://global/content/viewPartialSource.xul\",\n                      \"_blank\", \"scrollbars,resizable,chrome,dialog=no\",\n                      docUrl, docCharset, reference, aContext);\n  },\n\nin toolkit/components/viewsource/content/viewPartialSource.js\n\n[far more than I care to list right now, at least 31 distinct source lines, just selecting <a>text</a>, and even more console messages due to loops.  It gets distinctly worse the more complicated the source of the selection/with MathML]",
  "comments" : [ {
    "text" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site in an e10s window, optionally one with MathML\n2) Select some page text/find some MathML\n2) Right-click on the page/MathML, and choose \"View Selection/MathML Source\"\n\nThis causes lots \"unsafe CPOW usage\" warnings in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n  // View Partial Source\n  viewPartialSource: function(aContext) {\n    var focusedWindow = document.commandDispatcher.focusedWindow;\n    if (focusedWindow == window)\n      focusedWindow = gBrowser.selectedBrowser.contentWindowAsCPOW;\n\n    var docCharset = null;\n    if (focusedWindow)\n      docCharset = \"charset=\" + focusedWindow.document.characterSet; <-- Causes CPOW warning\n\n    // \"View Selection Source\" and others such as \"View MathML Source\"\n    // are mutually exclusive, with the precedence given to the selection\n    // when there is one\n    var reference = null;\n    if (aContext == \"selection\")\n      reference = focusedWindow.getSelection(); <-- Causes CPOW warning [selection]\n    else if (aContext == \"mathml\")\n      reference = this.target;\n    else\n      throw \"not reached\";\n\n    // unused (and play nice for fragments generated via XSLT too)\n    var docUrl = null;\n    window.openDialog(\"chrome://global/content/viewPartialSource.xul\",\n                      \"_blank\", \"scrollbars,resizable,chrome,dialog=no\",\n                      docUrl, docCharset, reference, aContext);\n  },\n\nin toolkit/components/viewsource/content/viewPartialSource.js\n\n[far more than I care to list right now, at least 31 distinct source lines, just selecting <a>text</a>, and even more console messages due to loops.  It gets distinctly worse the more complicated the source of the selection/with MathML]",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-19T12:13:54Z"
  }, {
    "text" : "This is still around.",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-06-29T14:28:30Z"
  }, {
    "text" : "Neil is taking this one after a rock-paper-scissors battle.",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-07-22T17:45:12Z"
  }, {
    "text" : "Created attachment 8640009\nView Partial Selection Changes\n\nAlso changes tests that were affected by this.\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=d98c06ca3873",
    "authour" : "enndeakin@gmail.com",
    "created" : "2015-07-28T18:56:08Z"
  }, {
    "text" : "Comment on attachment 8640009\nView Partial Selection Changes\n\nReview of attachment 8640009:\n-----------------------------------------------------------------\n\nOk, I've reviewed a little over half of this. This looks great, for the most part - just some minor suggestions.\n\nI haven't really reviewed the tests, nor the big swatch of copy-paste that got put into browser-content.js. I'll do that tomorrow.\n\n::: toolkit/components/viewsource/ViewSourceBrowser.jsm\n@@ +218,5 @@\n>        throw new Error(\"View source browser's remoteness mismatch\");\n>      }\n>    },\n>  \n> +  loadViewSourceFromSelection(uri, drawSelection, baseURI) {\n\nLet's get a docstring for this function.\n\n::: toolkit/components/viewsource/content/viewSource-content.js\n@@ +758,5 @@\n>                                                   [result.line, result.col], 2);\n>      sendAsyncMessage(\"ViewSource:UpdateStatus\", { label });\n>    },\n>  \n> +  viewSourceWithSelection(uri, drawSelection, baseURI)\n\ndocstring for this method please.\n\n@@ +763,5 @@\n> +  {\n> +    this.needsDrawSelection = drawSelection;\n> +\n> +    // all our content is held by the data:URI and URIs are internally stored as utf-8 (see nsIURI.idl)\n> +    var loadFlags = Components.interfaces.nsIWebNavigation.LOAD_FLAGS_NONE;\n\nlet, not var. Also, we have access to Ci here.\n\n::: toolkit/components/viewsource/content/viewSource.js\n@@ +296,5 @@\n>      if (!window.arguments[0]) {\n>        return;\n>      }\n>  \n> +    if (window.arguments.length >= 4 && window.arguments[3] == \"partial\") {\n\nWith my suggestion for viewSourceUtils, we can put this under the deprecated API check, and then check for args.partial.\n\n::: toolkit/components/viewsource/content/viewSourceUtils.js\n@@ +98,2 @@\n>     * @param aViewSourceInBrowser\n>     *        The browser to display the view source in.\n\nI know you didn't add this comment, but with the aGetBrowserFn thing we've got going on, it's actually not clear whether or not this is the browser that we're supposed to view source in, or the browser we want to view the source _from_.\n\nCan you please update this to be:\n\n\"The browser to display the source from.\"\n\n@@ +105,2 @@\n>     */\n> +  viewPartialSourceInBrowser: function(aViewSourceInBrowser, aTarget, aGetBrowserFn) {\n\nWhy do we want to pass in a function that produces a browser instead of the browser itself? It's probably a simpler API to just have the caller pass in the browser, or null if they want to open in a new window.\n\n@@ +117,5 @@\n> +        viewSourceBrowser.loadViewSourceFromSelection(message.data.uri, message.data.drawSelection,\n> +                                                      message.data.baseURI);\n> +      }\n> +      else {\n> +        // unused (and play nice for fragments generated via XSLT too)\n\nI don't think this is necessarily unused - it's just unused by Firefox. As this is toolkit code, I suspect there are other apps (I'm looking at you Thunderbird and SeaMonkey) that might still use this path. So I think \"unused\" is erroneous.\n\n@@ +118,5 @@\n> +                                                      message.data.baseURI);\n> +      }\n> +      else {\n> +        // unused (and play nice for fragments generated via XSLT too)\n> +        var docUrl = null;\n\nlet, not var.\n\n@@ +121,5 @@\n> +        // unused (and play nice for fragments generated via XSLT too)\n> +        var docUrl = null;\n> +        window.openDialog(\"chrome://global/content/viewPartialSource.xul\",\n> +                          \"_blank\", \"scrollbars,resizable,chrome,dialog=no\",\n> +                          message.data.uri, message.data.drawSelection,\n\nThis is going to use the old-school arguments mechanism, which puts us into the \"deprecated API\" function in viewSource.js. Since we're already changing the signature of what viewPartialSource.xul accepts as arguments, we might as well go with the pattern we set up for viewSource.xul.\n\nSo instead of passing these individually, can you pass them as an object? Like:\n\nwindow.openDialog(\"chrome://global/content/viewPartialSource.xul\",\n                  \"_blank\", \"scrollbars,resizable,chrome,dialog=no\",\n                  {\n                    URL: message.data.uri,\n                    drawSelection: message.data.drawSelection,\n                    baseURI: message.data.baseURI,\n                    partial: true,\n                  });\n\nThat's more in line with how we treat viewSource.xul - I think the consistency is valuable.\n\n@@ +126,5 @@\n> +                          message.data.baseURI, \"partial\");\n> +      }\n> +    });\n> +\n> +    mm.sendAsyncMessage(\"ViewSource:GetSelection\", { }, { target: aTarget });\n\nViewSource:GetSelection and ViewSource:GotSelection, are a bit close for me. Can we do:\n\nViewSource:GetSelection and ViewSource:GetSelection:Done?\n\n::: toolkit/components/viewsource/test/browser/browser_contextmenu.js\n@@ +57,5 @@\n> +  }\n> +\n> +  is(items[0], \"view-source:http://example.com/\", \"Link has correct href\");\n> +  is(items[1], \"mailto:abc@def.ghi\", \"Link has correct href\");\n> +  \n\nNit - trailing ws\n\n::: toolkit/components/viewsource/test/browser/head.js\n@@ +40,5 @@\n>    });\n>  }\n>  \n> +function* openViewPartialSourceWindow(aURI, aCSSSelector) {\n> +  var contentAreaContextMenu = document.getElementById(\"contentAreaContextMenu\");\n\nPlease use let not var.\n\n@@ +48,5 @@\n> +  yield popupShownPromise;\n> +\n> +  let newTabPromise = BrowserTestUtils.waitForNewTab(gBrowser, null);\n> +\n> +  document.getElementById(\"context-viewpartialsource-selection\").click();\n\nShouldn't clicking on this item automatically hide the context menu? Why are you manually doing it?\n\n@@ +54,5 @@\n> +  let popupHiddenPromise = BrowserTestUtils.waitForEvent(contentAreaContextMenu, \"popuphidden\");\n> +  contentAreaContextMenu.hidePopup();\n> +  yield popupHiddenPromise;\n> +\n> +  return (yield newTabPromise);\n\nI think it's more common to just return the newTabPromise.\n\n@@ +78,2 @@\n>  \n> +  let newtab = yield* openViewPartialSourceWindow(aURI, aCSSSelector);\n\nI have never seen yield* before. Can you explain it to me?\n\n@@ +80,5 @@\n> +\n> +  // Wait until the source has been loaded.\n> +  yield new Promise(resolve => {\n> +    let mm = newtab.linkedBrowser.messageManager;\n> +    mm.addMessageListener(\"ViewSource:SourceLoaded\", function selectionDrawn() {\n\nIs there a risk of ViewSource:SourceLoaded being fired before we have a chance to set this message listener?\n\n::: toolkit/content/browser-content.js\n@@ +730,5 @@\n> +    addMessageListener(\"ViewSource:GetSelection\", this);\n> +  },\n> +\n> +  receiveMessage: function(message) {\n> +    switch(message.name) {\n\nIt doesn't make a whole lot of sense to use a switch with just a single case - might as well just do an if.\n\n@@ +736,5 @@\n> +        let selectionDetails;\n> +        try {\n> +          selectionDetails = message.objects.target ? this.getMathMLSelection(message.objects.target)\n> +                                                    : this.getSelection();\n> +        } finally {\n\nGood - I'm glad we've got some guarantees that we'll send back ViewSource:GotSelection.",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-07-29T18:05:37Z"
  }, {
    "text" : "> Why do we want to pass in a function that produces a browser instead of the\n> browser itself? It's probably a simpler API to just have the caller pass in\n> the browser, or null if they want to open in a new window.\n\nThe browser doesn't exist when the function is called. It is a browser for a new tab opened after the selection has been retrieved. Opening the new tab earlier will change the focus and could cause the selection to be changed or cleared.\n\n\n> Shouldn't clicking on this item automatically hide the context menu? Why are\n> you manually doing it?\n\nThe click() method only sends the dom events 'mousedown', 'mouseup' and 'click', so any behaviour not done though these events (mostly default handling in EventStateManager/PresShell/nsFrames) doesn't happen.\n\nI just copied this code from another test though; I can change it to use synthesizeMouse instead.\n\n\n> > +  return (yield newTabPromise);\n> \n> I think it's more common to just return the newTabPromise.\n\nI want to return the result of the promise (the new tab) not the promise. The test fails otherwise.\n\n\n> > +  let newtab = yield* openViewPartialSourceWindow(aURI, aCSSSelector);\n> \n> I have never seen yield* before. Can you explain it to me?\n\nIt is an delegating yield. The openViewPartialSourceWindow is a generator that yields several times. 'yield' would yield only the first value. 'yield*' calls\nit repeatedly until it returns, yielding the return value. See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield*\n\nIt seems to work ok without yield* though perhaps through the magic of promises/tasks.\n\n\n> Is there a risk of ViewSource:SourceLoaded being fired before we have a\n> chance to set this message listener?\n\n\nPossibly, but I need to add a message listener to a new tab.",
    "authour" : "enndeakin@gmail.com",
    "created" : "2015-07-30T15:52:02Z"
  }, {
    "text" : "Comment on attachment 8640009\nView Partial Selection Changes\n\nReview of attachment 8640009:\n-----------------------------------------------------------------\n\nFinished my review. This looks great - just a few suggestions for the tests.\n\n::: toolkit/components/viewsource/test/browser/browser_bug464222.js\n@@ +1,3 @@\n>  const source = \"http://example.com/browser/toolkit/components/viewsource/test/browser/file_bug464222.html\";\n>  \n> +add_task(function *() {\n\nGlad to see more usage of add_task!\n\n::: toolkit/components/viewsource/test/browser/browser_contextmenu.js\n@@ +10,5 @@\n> +add_task(function *() {\n> +  let newWindow = yield loadViewSourceWindow(source);\n> +  yield SimpleTest.promiseFocus(newWindow);\n> +\n> +  yield* onViewSourceWindowOpen(newWindow, false);\n\nOkay, I understand how yield* works here now, but I'm a bit worried that this adds some cognitive overhead to reading and understanding these tests.\n\nFor someone modifying these tests, or using the helper functions in head.js, how do they know when they should use yield or yield*? I don't think it's immediately obvious.\n\nA few suggestions:\n\n1) Add documentation for the helper functions to make it clear how they should be used with yield*\n2) Use Task.async for each of the helper functions (and the helper functions they depend on) instead, so that we just need to use yield here.\n\n@@ +12,5 @@\n> +  yield SimpleTest.promiseFocus(newWindow);\n> +\n> +  yield* onViewSourceWindowOpen(newWindow, false);\n> +\n> +  var contextMenu = gViewSourceWindow.document.getElementById(\"viewSourceContextMenu\");\n\nlet, not var\n\n@@ +51,5 @@\n> +      return [tags[0].href, tags[1].href];\n> +    });\n> +  }\n> +  else {\n> +    let tags = gViewSourceWindow.gBrowser.contentDocument.querySelectorAll(\"a[href]\");\n\nWe can technically use the ContentTask in both cases, can we not?\n\n@@ +69,3 @@\n>  \n> +  if (isTab) {\n> +    yield ContentTask.spawn(gBrowser.selectedBrowser, { selector: selector }, function* (arg) {\n\nAs above - we can use this regardless of whether or not we're viewing the source in a tab, no?\n\n::: toolkit/content/browser-content.js\n@@ +1083,5 @@\n> +    return str;\n> +  }\n> +}\n> +\n> +ViewSelectionSource.init()\n\nNit - missing semicolon.",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-07-31T17:06:28Z"
  }, {
    "text" : "Created attachment 8643999\nView Partial Selection Changes, v2",
    "authour" : "enndeakin@gmail.com",
    "created" : "2015-08-05T22:22:38Z"
  }, {
    "text" : "Comment on attachment 8643999\nView Partial Selection Changes, v2\n\nReview of attachment 8643999:\n-----------------------------------------------------------------\n\nI think this is fine - my only leftover request is that you document the functions you've modified in head.js, with how they should be used within add_task.\n\n::: toolkit/components/viewsource/test/browser/head.js\n@@ +68,4 @@\n>    registerCleanupFunction(function() {\n>      gBrowser.removeTab(tab);\n>    });\n> +  \n\nNit - trailing ws\n\n::: toolkit/content/browser-content.js\n@@ +1079,5 @@\n> +    str = str.replace(/[^\\0-\\u007f]/g, convertEntity);\n> +\n> +    return str;\n> +  }\n> +}\n\nNit - missing semi-colon.",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-08-07T19:19:45Z"
  }, {
    "text" : "url:        https://hg.mozilla.org/integration/mozilla-inbound/rev/1199c7fed1fe9bb4fb01dac51dce9d63b4949da8\nchangeset:  1199c7fed1fe9bb4fb01dac51dce9d63b4949da8\nuser:       Neil Deakin <neil@mozilla.com>\ndate:       Mon Aug 10 09:42:51 2015 -0400\ndescription:\nBug 1134585, remove cpow usage from view selection source, r=mconley",
    "authour" : "enndeakin@gmail.com",
    "created" : "2015-08-10T13:46:29Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/1199c7fed1fe",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-08-10T21:45:38Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "enndeakin@gmail.com",
      "date" : "2015-04-24T12:55:44Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "enndeakin@gmail.com",
      "date" : "2015-06-15T17:45:27Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "NEW"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-08-10T21:45:38Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-08-10T21:45:38Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-19T17:39:35Z",
      "what" : "cf_tracking_e10s",
      "removed" : "?",
      "added" : "m8+"
    }, {
      "name" : "enndeakin@gmail.com",
      "date" : "2015-04-24T12:55:44Z",
      "what" : "cc",
      "removed" : "",
      "added" : "enndeakin@gmail.com"
    }, {
      "name" : "enndeakin@gmail.com",
      "date" : "2015-04-24T12:55:44Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "2"
    }, {
      "name" : "enndeakin@gmail.com",
      "date" : "2015-04-24T12:55:44Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "40.3 - 11 May"
    }, {
      "name" : "enndeakin@gmail.com",
      "date" : "2015-04-24T12:55:44Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "enndeakin@gmail.com"
    }, {
      "name" : "enndeakin@gmail.com",
      "date" : "2015-06-15T17:45:27Z",
      "what" : "assigned_to",
      "removed" : "enndeakin@gmail.com",
      "added" : "nobody@mozilla.org"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-06-26T17:03:27Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[unsafe-cpow-usage]"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-06-26T17:03:27Z",
      "what" : "cf_tracking_e10s",
      "removed" : "m8+",
      "added" : "---"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-06-29T14:28:30Z",
      "what" : "whiteboard",
      "removed" : "[unsafe-cpow-usage]",
      "added" : ""
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-06-29T14:28:30Z",
      "what" : "cf_tracking_e10s",
      "removed" : "---",
      "added" : "?"
    }, {
      "name" : "blassey.bugs@lassey.us",
      "date" : "2015-06-30T20:14:28Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "mconley@mozilla.com"
    }, {
      "name" : "blassey.bugs@lassey.us",
      "date" : "2015-06-30T20:14:28Z",
      "what" : "cf_tracking_e10s",
      "removed" : "?",
      "added" : "m8+"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-07-22T17:45:12Z",
      "what" : "assigned_to",
      "removed" : "mconley@mozilla.com",
      "added" : "enndeakin@gmail.com"
    }, {
      "name" : "enndeakin@gmail.com",
      "date" : "2015-08-05T22:22:38Z",
      "what" : "attachments.isobsolete:8640009",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "enndeakin@gmail.com",
      "date" : "2015-08-10T14:46:43Z",
      "what" : "cf_fx_points",
      "removed" : "2",
      "added" : "3"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-08-10T21:45:38Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 43"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-08-10T21:45:38Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-08-10 14:45:38"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-08-10T21:45:38Z",
      "what" : "cf_status_firefox43",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-08-11T17:40:59Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1168243"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-09-25T00:08:46Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1203395"
    }, {
      "name" : "philip.chee@gmail.com",
      "date" : "2016-03-31T13:40:01Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1259928"
    }, {
      "name" : "philip.chee@gmail.com",
      "date" : "2016-04-08T19:18:42Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1263262"
    } ],
    "flagEvents" : [ {
      "name" : "enndeakin@gmail.com",
      "date" : "2015-07-28T18:56:08Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8640009,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-07-31T17:06:28Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8640009,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "enndeakin@gmail.com",
      "date" : "2015-08-05T22:22:38Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8643999,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-08-07T19:19:45Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8643999,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134585,
  "cclist" : [ "blassey.bugs@lassey.us", "enndeakin@gmail.com", "mconley@mozilla.com" ]
}, {
  "component" : "Developer Tools: Inspector",
  "summary" : "Add a list of predefined easing functions to the cubic-bezier tooltip",
  "reporter" : "pbrosset@mozilla.com",
  "assigned" : "j@jtgi.me",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Created attachment 8566450\ntiming-functions-adobe-edge-animate.gif\n\nThere are many animation/transition timing functions that could be helpful to developers if they were readily available in a list, when using the cubic-bezier tooltip in the inspector.\n\nApart from the built-in named functions like linear, ease-in, ease-out, ease-in-out, there are many functions that people commonly use but don't have built-in names: bounce, elastic, sine, ...\n\nAdobe Edge Animation provides a nice UI for this, I've attached a GIF that shows it.",
  "comments" : [ {
    "text" : "Created attachment 8566450\ntiming-functions-adobe-edge-animate.gif\n\nThere are many animation/transition timing functions that could be helpful to developers if they were readily available in a list, when using the cubic-bezier tooltip in the inspector.\n\nApart from the built-in named functions like linear, ease-in, ease-out, ease-in-out, there are many functions that people commonly use but don't have built-in names: bounce, elastic, sine, ...\n\nAdobe Edge Animation provides a nice UI for this, I've attached a GIF that shows it.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-02-19T10:35:04Z"
  }, {
    "text" : "Ana Tudor suggested this site: http://easings.net/\nThat's a nice list of easing functions right there.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-02-19T10:47:00Z"
  }, {
    "text" : "I've started working on this.\nProgress: http://i.imgur.com/8Eej9xM.gif",
    "authour" : "j@jtgi.me",
    "created" : "2015-02-21T00:28:17Z"
  }, {
    "text" : "Looks great!  I've assigned the bug to you.",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-21T00:37:02Z"
  }, {
    "text" : "Created attachment 8567482\nInitial Cubic-Bezier Presets Mock.\n\nAny thoughts on the attached design? Its just a PSD at the moment, but should be achievable with enough svg twiddling I believe.\n\nSome thoughts:\n- There's a bit of extra space above and below the graph to make sure dragging the handles is still comfortable.\n- # of presets, if we start to go over we could either opt for scroll bars vertical or horizontal, or some carousel style arrows if we want to get fancy.\n- We can include 'linear' as the first preset in any given category and remove the need to have a top level category with 1 preset in it.\n- The design attempts to mimic the rest of the dev tools where a precedent exists. The dark theme would simply follow existing inverted conventions.\n\nQuestions:\n1. Is it okay to assume all interaction with this panel will result in a cubic-bezier setting? ie. Even if you selected `linear` the animation set would still be of type cubic-bezier?\n2. Is loading this many svgs okay? Haven't built them yet and don't have a great idea of perf implications, if any. Are static assets jpg, png, etc an option?\n3. Too large? There's no other widgets this big â€“not sure if there are some max-size requirements or otherwise. The size as it stands now is mostly constrained on attempting to match font-sizes, margins, padding with other parts of the devtool chrome as well as size of the graph with enough room to move handles.\n4. Too many presets? Some of the differences like quartic, quintic are kinda negligible. Might be fine with less.",
    "authour" : "j@jtgi.me",
    "created" : "2015-02-21T11:23:46Z"
  }, {
    "text" : "Created attachment 8567807\neaseInOutBack.png\n\n(In reply to John Giannakos [:jtgi] from comment #4)\n> Created attachment 8567482\n> Initial Cubic-Bezier Presets Mock.\n> \n> Any thoughts on the attached design? Its just a PSD at the moment, but\n> should be achievable with enough svg twiddling I believe.\nThat looks great! I like the categories (tabs) and the little previews.\nI'm not so sure we need the header part though, since it's easy to know what setting is selected in the list below. Also because the more room we can keep to drag the handles, the better.\nIn fact, already today, with nothing else in the tooltip than the graph, it's hard to set certain functions (see the attached screenshot where I've reproduced the easeInOutBack setting, the handles are out of the tooltip area).\n\n> Some thoughts:\n> - There's a bit of extra space above and below the graph to make sure\n> dragging the handles is still comfortable.\nSee previous comment. Perhaps we can make the graph smaller?\n> - # of presets, if we start to go over we could either opt for scroll bars\n> vertical or horizontal, or some carousel style arrows if we want to get\n> fancy.\nThere are probably a tone of UX approaches we could take to have more presets in there if we need too (there could be only one preview svg area, and hovering over preset names would preview the corresponding curve there, or we could also get rid of all the preview svg areas, and just preview on hover on the main graph, in a different color than the current curve). I'm happy to start with a small number of presets and keep your current design proposal.\nBrian can probably also give his feedback here.\n> - We can include 'linear' as the first preset in any given category and\n> remove the need to have a top level category with 1 preset in it.\nYes!\n> - The design attempts to mimic the rest of the dev tools where a precedent\n> exists. The dark theme would simply follow existing inverted conventions.\nPerfect.\n\n> Questions:\n> 1. Is it okay to assume all interaction with this panel will result in a\n> cubic-bezier setting? ie. Even if you selected `linear` the animation set\n> would still be of type cubic-bezier?\nThere's an advantage to keeping the few built-in CSS function names I think (linear, ease, ease-in, ease-out, ease-in-out): it helps users learn that those names exist and can be used in stylesheets. So I'd like it if you'd select one of those in the list, that would enter the corresponding name in the property value below.\n> 2. Is loading this many svgs okay? Haven't built them yet and don't have a\n> great idea of perf implications, if any. Are static assets jpg, png, etc an\n> option?\nStatic images are an option of course, but we have to consider @2x images too, and dark theme... this can quickly become a nightmare. SVG (or canvas for that matter) would be a much better fit. With SVG, if I'm not wrong, this is just a single <path> element, I don't see any perf implications there.\nIn fact, one other option would be to simply instantiate new BezierCanvas widgets to render the previews, see:\nhttp://mxr.mozilla.org/mozilla-central/source/browser/devtools/shared/widgets/CubicBezierWidget.js#209\n> 3. Too large? There's no other widgets this big â€“not sure if there are some\n> max-size requirements or otherwise. The size as it stands now is mostly\n> constrained on attempting to match font-sizes, margins, padding with other\n> parts of the devtool chrome as well as size of the graph with enough room to\n> move handles.\nI would say developers tend to have big screens, but that's just an assumption and we have no numbers to back this out. In fact, we just landed a change to our telemetry system that will tell us our users' screen sizes, but right now we don't know.  I would say, if the tooltip still fits on a 13'' display, we're probably ok. The screenshot you attached looks fine too me. I wouldn't worry too much about it being bigger than the other widgets in devtools. \nAs I said earlier, another option is to make the graph a bit smaller (tooltip thinner, but maybe as high, to leave space for dragging the handles), then make the categories text only, and preview on hover in the main graph. So we have options if needed.\n> 4. Too many presets? Some of the differences like quartic, quintic are kinda\n> negligible. Might be fine with less.\nYeah, let's start with a small list, it's better to add more later.\nCan you provide the list of presets you intend to add?",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-02-23T08:31:17Z"
  }, {
    "text" : "Created attachment 8567884\ncubic-bezier-tooltip-chrome.gif\n\nThis just landed in chrome :)",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-02-23T12:42:51Z"
  }, {
    "text" : "(In reply to Patrick Brosset [:pbrosset] [:patrick] from comment #5)\n> > Some thoughts:\n> > - There's a bit of extra space above and below the graph to make sure\n> > dragging the handles is still comfortable.\n> See previous comment. Perhaps we can make the graph smaller?\n> > - # of presets, if we start to go over we could either opt for scroll bars\n> > vertical or horizontal, or some carousel style arrows if we want to get\n> > fancy.\n> There are probably a tone of UX approaches we could take to have more\n> presets in there if we need too (there could be only one preview svg area,\n> and hovering over preset names would preview the corresponding curve there,\n> or we could also get rid of all the preview svg areas, and just preview on\n> hover on the main graph, in a different color than the current curve). I'm\n> happy to start with a small number of presets and keep your current design\n> proposal.\n> Brian can probably also give his feedback here.\n\nGoing to forward the UX request onto Stephen.  See Comment 4 for more information.\n\n(In reply to Patrick Brosset [:pbrosset] [:patrick] from comment #6)\n> Created attachment 8567884\n> cubic-bezier-tooltip-chrome.gif\n> \n> This just landed in chrome :)\n\nI like that, although I don't know how it would scale with the longer list of options.",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-23T16:47:58Z"
  }, {
    "text" : "(In reply to Patrick Brosset [:pbrosset] [:patrick] from comment #5)\n> I'm not so sure we need the header part though, since it's easy to know what\n> setting is selected in the list below. Also because the more room we can\n> keep to drag the handles, the better.\n\nYeah, good point re: header and vertical space. I'll wait for Stephens follow up on this. Since vertical space is a bit of an issue, it might be smart to have a more columnar layout. The listing could be left/right of the graph if need be.\n\n> one other option would be to simply instantiate new BezierCanvas\n> widgets to render the previews, see:\n> http://mxr.mozilla.org/mozilla-central/source/browser/devtools/shared/\n> widgets/CubicBezierWidget.js#209\n\nGood idea. This is the file I've been working in where I built the prototype above.\n\n> Can you provide the list of presets you intend to add?\n\nI intend to add every 2nd function that is available at http://easings.net.\n\nI can see a couple categorization schemes.\n\n# Option 1: Categorize based on function type\n\n3 categories: Ease In, Ease Out, Ease In Out\n\nEase In\n  Linear (linear)\n  Default (ease-in)\n  Quadratic (cubic-bezier)\n  Quartic (cubic-bezier)\n  Exponential (cubic-bezier)\n  Circular (cubic-bezier)\n  Back (Backward?) (cubic-bezier)\n\nEase Out\n  Linear (linear)\n  Default (ease-out)\n  Quadratic (cubic-bezier)\n  Quartic (cubic-bezier)\n  Exponential (cubic-bezier)\n  Circular (cubic-bezier)\n  Back (Backward?) (cubic-bezier)\n\nEase In Out\n  Linear (linear)\n  Default (ease-in-out)\n  Ease (ease) <- [1]\n  Quadratic (cubic-bezier)\n  Quartic (cubic-bezier)\n  Exponential (cubic-bezier)\n  Circular (cubic-bezier)\n  Back (Backward?) (cubic-bezier)\n\n[1] Ease is a bit hard to place. Its somewhere in between an ease-in-out and and ease-out. I placed it here.\n\nThoughts: In this scheme, 'Linear' can be a bit redundant, 'Default' perhaps isn't too clear, and 'Ease' is somewhat lost in the mix. Overall though, I think this approach is reasonable.\n\n# Option 2: Same as #1 but add 'Defaults' category; Remove `Linear` and `Default` from each category.\n\nDefaults\n  Linear (linear)\n  Ease (ease)\n  Ease In (ease-in)\n  Ease Out (ease-out)\n  Ease In Out (ease-in-out)\n\nEase In\n  ...\n\n...\n\nThoughts: This is not too bad. A little strange maybe to have \"Ease In, Out, In Out\" as an item and a category but this could serve to better drive awareness of built in functions and remove redundancy.\n\n# Option 3: Categorize based on preset type\n\nStandard\n  Linear (linear)\n  Ease (ease)\n  Ease In (ease-in)\n  Ease Out (ease-out)\n  Ease In Out (ease-in-out)\n\nCubic Bezier\n  Ease In Quadratic\n  ..\n  Ease Out Quadratic\n  ..\n  Ease In Out Quadratic\n  ..\n\nThoughts: This is perhaps a bit cleaner in terms of organization (no repeated linear, clearer what is a css default), but the cubic bezier list can grow long. It's probably not going to be great given the current mock I have but maybe better suited to a listing.\n\n(In reply to Patrick Brosset [:pbrosset] [:patrick] from comment #6)\n> This just landed in chrome :)\nNice. It would be easy to add presets to that and is quite compact. Does become a little hard to know what you have and haven't seen though. Previews are nice in that you can quickly scan things and know what you have and have not tried.\n\np.s. Would be sweet to get some markdown support on this.",
    "authour" : "j@jtgi.me",
    "created" : "2015-02-23T20:21:11Z"
  }, {
    "text" : "Also, I'm not sure how the other `step` related functions should fit into this, if at all.",
    "authour" : "j@jtgi.me",
    "created" : "2015-02-23T20:45:23Z"
  }, {
    "text" : "Created attachment 8568172\nadd_presets_to_cubic_bezier.patch\n\nAttaching what I've done to date before I get too far in with hopes on early feedback on code style, placement and the works.\n\nThe patch contains:\n - Sample definition of presets as per easings.net + defaults.\n - Logic for toggling a preset category and their corresponding presets.\n - Rendering coordinates to display when a preset is selected.\n\nThank you~",
    "authour" : "j@jtgi.me",
    "created" : "2015-02-23T21:43:56Z"
  }, {
    "text" : "(In reply to John Giannakos [:jtgi] from comment #8)\n> Yeah, good point re: header and vertical space. I'll wait for Stephens\n> follow up on this. Since vertical space is a bit of an issue, it might be\n> smart to have a more columnar layout. The listing could be left/right of the\n> graph if need be.\nThat sounds great.\n\n> # Option 1: Categorize based on function type\n> # Option 2: Same as #1 but add 'Defaults' category; Remove `Linear` and\n> `Default` from each category.\n> # Option 3: Categorize based on preset type\nOption 1 makes the most sense to me, but I would take 'linear' out of the categories and make it an empty category (it would show at the same level as the other categories, but selecting it would apply the linear function, not display the list of functions). But that's just my opinion. #2 also sounds reasonable.\nI'll let you choose between those 2.\n\n> p.s. Would be sweet to get some markdown support on this.\nThis will be possible in BZ 6.0 (we're currently running 4.2 something)",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-02-24T16:29:37Z"
  }, {
    "text" : "(In reply to John Giannakos [:jtgi] from comment #9)\n> Also, I'm not sure how the other `step` related functions should fit into\n> this, if at all.\nThe steps functions should not be part of this widget, at least not right now. We need a way to visually represent them first. This would be very useful (I doubt everyone knows how they work by heart) but will be better treated in another bug.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-02-24T16:31:14Z"
  }, {
    "text" : "Comment on attachment 8568172\nadd_presets_to_cubic_bezier.patch\n\nReview of attachment 8568172:\n-----------------------------------------------------------------\n\nDefinitely a great start!\nI have made some minor comments in the code below.\n\nI have also applied the patch locally and gave it a try, here are some comments, in no particular order:\n- the tooltip has the same size as before for me, so you have to scroll to get to the categories,\n- a 'pointer' cursor would help knowing that you can click on the presets,\n- it's kind of hard to see when you change category, the category name becomes highlighted, which is good, but since the list of presets is exactly the same, it's easy to miss that something changed. Having the previews like chrome would help there,\n- when a preset is selected, it should also be highlighted like the category name, right now, the background color is a paler blue,\n- a columnar layout, as you proposed, would indeed work better I believe,\n- if you select a preset, and then change the function by dragging the handles, then the category and preset should appear unselected (removing the highlight color should be enough).\n\nYou're on the right track. Thanks for working on this.\n\n::: browser/devtools/shared/widgets/CubicBezierWidget.js\n@@ +198,5 @@\n>   * sent a CubicBezier object\n>   */\n>  function CubicBezierWidget(parent, coordinates=PREDEFINED[\"ease-in-out\"]) {\n>    this.parent = parent;\n> +  let {curve, p1, p2, presetPane} = this._initMarkup();\n\nI doesn't look like presetPane is returned by _initMarkup.\n\n@@ +228,5 @@\n>    this.timingPreview = new TimingFunctionPreviewWidget(parent);\n>  \n> +  //TODO: What's the best way to update the display when an\n> +  //item has been clicked in the preset widget? EventEmitter?\n> +  //call it directly? Probably not passing the whole ref.\n\nEventEmitter seems to me like the best solution. This helps decoupling and reusability.\n\n@@ +439,5 @@\n>    }\n>  };\n>  \n> +//TODO: Is there some default widgets I should be using? I saw\n> +//      the generic lists but couldn't find any other examples.\n\nWhat do you mean by default widgets? This looks ok to me.\n\n@@ +441,5 @@\n>  \n> +//TODO: Is there some default widgets I should be using? I saw\n> +//      the generic lists but couldn't find any other examples.\n> +//TODO: Is there no CSS sass like variables? What if ff changes\n> +//      theme color later? Update all of these things?\n\nOur light/dark themes are based on css variables. You can see them in light-theme.css and dark-theme.css in the :root selector.\nAs long as theme-switching.js is included in the parent window (and it already is), then the switch will work automatically.\nSo if you need to define colors in your CSS file, make sure you reuse the corresponding variables when possible.\n\n@@ +444,5 @@\n> +//TODO: Is there no CSS sass like variables? What if ff changes\n> +//      theme color later? Update all of these things?\n> +//TODO: How can I make this tooltip larger/wider, seems fixed~~~\n> +//TODO: Anything I should be concerned about in regards to screen res\n> +//      and resizing?\n\nWe should make sure the UI you create works both on retina and non-retina pixel density screens.\n\n@@ +445,5 @@\n> +//      theme color later? Update all of these things?\n> +//TODO: How can I make this tooltip larger/wider, seems fixed~~~\n> +//TODO: Anything I should be concerned about in regards to screen res\n> +//      and resizing?\n> +//TODO: This should probably be in another file.\n\nYes, you can create a new file in the widgets folder that only has the presets.\n\n@@ +446,5 @@\n> +//TODO: How can I make this tooltip larger/wider, seems fixed~~~\n> +//TODO: Anything I should be concerned about in regards to screen res\n> +//      and resizing?\n> +//TODO: This should probably be in another file.\n> +//TODO: l18n for these strings? How?\n\nWe don't really need l10n for these strings. They are technical words, and some of them are actually CSS keywords.\n\n@@ +493,5 @@\n> + * and binding basic event handlers. Maybe something simpler that\n> + * can be done.\n> + */\n> +//TODO: Only need `cubicBezierDisplay` for calling set coordinates(), \n> +//      maybe some better way to share this method. Events?\n\nYes, you can get rid of the cubicBezierDisplay parameter if you make this new widget \"observable\":\n\nEventEmitter.decorate(this);\n...\nthis.emit(\"new-coordinates\", coordinates);\n\nOr something like this.\n\n@@ +547,5 @@\n> +\n> +    let allCategoriesNodeList = presetPane.querySelectorAll(\".category\");\n> +    let allPresetsNodeList = presetPane.querySelectorAll(\".preset\");\n> +\n> +    //Just say no to nodeLists.\n\nThis isn't needed if you use for..of loops.\nfor..of loops can iterate on nodeLists.\nIf you prefer to use .forEach, you could also do this instead:\nlet allCategories = [...allCategoriesNodeList];\n\n@@ +566,5 @@\n> +    category.id = categoryLabel;\n> +    category.classList.add(\"category\");\n> +\n> +    let categoryDisplayLabel = this._normalizeCategoryLabel(categoryLabel);\n> +    category.appendChild(doc.createTextNode(categoryDisplayLabel));\n\ncategory.textContent = categoryDisplayLabel;\nshould work too.\n\n@@ +608,5 @@\n> +  _normalizePresetLabel: function(categoryLabel, presetLabel) {\n> +    return presetLabel.replace(categoryLabel + \"-\", \"\");\n> +  },\n> +\n> +  _initEvents: function() {\n\nCan you also define a _removeEvents method that removes all the added event listeners, and call it in destroy?\n\n@@ +609,5 @@\n> +    return presetLabel.replace(categoryLabel + \"-\", \"\");\n> +  },\n> +\n> +  _initEvents: function() {\n> +    this.categories.forEach(category => {\n\nThat's where you can use the for..of loops on nodeLists.\n\n@@ +618,5 @@\n> +      preset.addEventListener(\"click\", this._onPresetClick);\n> +    });\n> +  },\n> +\n> +  _onPresetClick: function(event) { \n\nnit: trailing whitespace\n\n@@ +619,5 @@\n> +    });\n> +  },\n> +\n> +  _onPresetClick: function(event) { \n> +    this.display.coordinates = event.target.coordinates;\n\nEmit an event here instead.\n\n@@ +623,5 @@\n> +    this.display.coordinates = event.target.coordinates;\n> +    this.activePreset = event.target.id;\n> +  },\n> +\n> +  _onCategoryClick: function(event) { \n\nnit: trailing whitespace\n\n@@ +634,5 @@\n> +    this._activePresetList = presetList;\n> +  },\n> +\n> +  set activeCategory(categoryId) {\n> +    let category = this.presetPane.querySelector(\"#\" + categoryId);\n\nWhy pass the ID only here? Passing the DOM node directly would avoid having to look it up again later.\n\n@@ +645,5 @@\n> +  get activeCategory() {\n> +    return this._activeCategory;\n> +  },\n> +\n> +  set activePreset(presetId) {\n\nWhy pass the ID only here? Passing the DOM node directly would avoid having to look it up again later.\n\n@@ +782,5 @@\n>  \n>    return false;\n>  }\n> +\n> +function swapClassName(className, from, to) {\n\nPlease add a jsdoc comment for this function.\n\n@@ +783,5 @@\n>    return false;\n>  }\n> +\n> +function swapClassName(className, from, to) {\n> +  if(from !== null) {\n\nnit: we usually insert a space between if and (\n\n@@ +787,5 @@\n> +  if(from !== null) {\n> +    from.classList.remove(className);\n> +  }\n> +\n> +  if(to !== null) {\n\nditto\n\n::: browser/devtools/shared/widgets/cubic-bezier.css\n@@ +4,5 @@\n>  \n>  /* Based on Lea Verou www.cubic-bezier.com\n>     See https://github.com/LeaVerou/cubic-bezier */\n>  \n> +/* =====================\n\nnit: We usually don't have these kinds of big separator comments in the devtools codebase.\nA simple /* ... */ comment line should be enough.\n\n@@ +14,2 @@\n>  .coordinate-plane {\n> +  position:relative;\n\nnit: please add a space after the :\n\n@@ +153,5 @@\n> +/* ================================\n> + *\n> + *  PRESET WIDGET\n> + *\n> + * ===============================*/\n\nGlobal comments about the preset widget css code:\n- no need for bug separatorcomment,\n- please add an empty space after : in properties,\n- please try and avoid hard coding colors if their equivalent exist in dark/light-theme.css",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-02-24T17:21:56Z"
  }, {
    "text" : "Patrick, thanks for the feedback! \n\nI should have been clear that this was not intended to be a UI design in response to our discussion above but just an implementation of the key behaviours we are after.\n\nI will respond to feedback and resubmit.",
    "authour" : "j@jtgi.me",
    "created" : "2015-02-24T22:17:41Z"
  }, {
    "text" : "Couple things:\n\n1. I can't seem to be able to adjust the width or height of the tooltip. Only the width or height of the tooltip's contents, which creates horizontal or vertical scrollbars. I presume this is set somewhere else but my efforts to find this somewhere else have all failed. Any ideas?\n\n2. Is there an example of using the light/dark CSS variables? I wasn't able to find one.\n\nThank you.",
    "authour" : "j@jtgi.me",
    "created" : "2015-02-27T10:51:56Z"
  }, {
    "text" : "(In reply to John Giannakos [:jtgi] from comment #15)\n> Couple things:\n> \n> 1. I can't seem to be able to adjust the width or height of the tooltip.\n> Only the width or height of the tooltip's contents, which creates horizontal\n> or vertical scrollbars. I presume this is set somewhere else but my efforts\n> to find this somewhere else have all failed. Any ideas?\nThe only place the tooltip dimension is set is here: http://mxr.mozilla.org/mozilla-central/source/browser/devtools/shared/widgets/Tooltip.js#794 and it's done by setting the size of the iframe inside.\nIf that doesn't work for some reason, you can also try to call this.setSize(w,h): http://mxr.mozilla.org/mozilla-central/source/browser/devtools/shared/widgets/Tooltip.js#271\n\n> 2. Is there an example of using the light/dark CSS variables? I wasn't able\n> to find one.\nThere is a few example in this css file: http://mxr.mozilla.org/mozilla-central/source/browser/themes/shared/devtools/animationinspector.css#12\nSearch for var( in the file.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-02T08:17:18Z"
  }, {
    "text" : "(In reply to Patrick Brosset [:pbrosset] [:patrick] from comment #16)\n> > 2. Is there an example of using the light/dark CSS variables? I wasn't able\n> > to find one.\n> There is a few example in this css file:\n> http://mxr.mozilla.org/mozilla-central/source/browser/themes/shared/devtools/\n> animationinspector.css#12\n> Search for var( in the file.\n\nAnd the available variables are listed here: https://dxr.mozilla.org/mozilla-central/source/browser/themes/shared/devtools/light-theme.css#9",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-03-02T16:33:35Z"
  }, {
    "text" : "Created attachment 8572581\ncubic-bezier-presets-candidate-1\n\nUpdate: I've got an updated patch I'm starting to polish up in response to @pbrosset's code review and our design discussion above.\n\nThis implementation is a side by side layout to maximize that vertical space. We can make it smaller yet, if we'd like to.\n\nTo keep the preset panel a reasonable width I've just gone with 3 top level categories. We could make it wider, make it a drop down, accordion, or others if we'd like more categories in the future, or if opposed to this.\n\nIf the presets overflow the height of the tooltip, the categories and everything else will stay fixed and the preset previews will get a scroll bar.\n\nAs for remaining work, just some small behavior and some alignment tasks to work through.\n\nLet me know if you have any thoughts / criticisms with this approach.",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-04T12:44:46Z"
  }, {
    "text" : "Created attachment 8573868\nadd_presets_to_cubic_bezier.patch\n\nI've gone ahead and implemented the remaining tasks.\n\nIn this patch:\n- Canvas preset previews for of each preset available.\n- Basic scrollable panel for presets.\n- Proper use of CSS vars (sans one rule). Works in both light+dark theme.\n- If user has defined a animation-timing-function that we have a preset defined for (linear, ease, cubic-bezier(*)), the tool tip will display that onOpen and set state accordingly.\n- If user chooses a HTML predefined preset (linear, ease-in) from the menu that rule will then be written back to the variables view as oppose to `cubic-bezier` before.\n- Code organization and formatting as per @pbrosset's feedback.\n\nTesting: \n- I have only done manual testing on a Macbook Pro Retina, not sure how to go about testing on other machines. I'll try and set up a build environment on my Win8.1 machine.",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-06T11:09:29Z"
  }, {
    "text" : "Created attachment 8574445\nAdded missing CubicBezierPresets.js\n\nAdded missing CubicBezierPresets.js",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-08T21:21:31Z"
  }, {
    "text" : "(In reply to John Giannakos [:jtgi] from comment #18)\n> This implementation is a side by side layout to maximize that vertical\n> space. We can make it smaller yet, if we'd like to.\n> \n> To keep the preset panel a reasonable width I've just gone with 3 top level\n> categories. We could make it wider, make it a drop down, accordion, or\n> others if we'd like more categories in the future, or if opposed to this.\n> \n> If the presets overflow the height of the tooltip, the categories and\n> everything else will stay fixed and the preset previews will get a scroll\n> bar.\nThat looks great to me! I like it a lot.\nI was off last week, but will get to the code review early this week (you removed the F? flag when attaching the second version of the patch, I guess this was accidental).",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-09T10:36:05Z"
  }, {
    "text" : "Thanks Patrick. Yes, I forgot to put the F? flag, actually I wasn't sure it was necessary in addition to the needinfo at the bottom of the attachment. Will do for next time.\n\nIn other news, I found a regression today. It's easy to repro.\n1. Open nightly.\n2. Open the bezier tooltip.\n3. Click anywhere in the coordinate plane or drag handles before choosing any type of preset on the left.\nExpected: updated graph.\nActual: (uncaught exception: Wrong coordinate at 0(2.24)), handles detach.\n\nAfter clicking any preset, the problem never reoccurs, even if closed and reopened.\n\nI'll fix this. I assume a small oversight somewhere in my first-time init of the canvas.",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-09T17:31:44Z"
  }, {
    "text" : "Created attachment 8575023\nadd_presets_to_cubic_bezier.patch\n\nApologies for the multiple updates but I've updated the patch with a fix for the problem mentioned above.\n\nIf interested:\nProblem was the canvas' `curveBoundingBox` is initialized to [0, 0, 0, 0] and not updated until a drag event occurs where getBoundingClientRect() is called. Since `onCurveClick` calculates its offset based on the curveBoundingBox's x-position and since the canvas' x-position in the new layout is no longer 0 but rather ~50%, the left offset was incorrect. This was never a problem before because the canvas' x-position was in fact at the left most coordinate (0).\n\nSolution was just to call `getBoundingClientRect()` in `onCurveClick` to get fresh positions, like what is done in `onPointMouseDown`.\n\nP.S. I'm still figuring out bugzilla convention re: making things obsolete, what flags to use and how often I should post here so please let me know if I am doing anything odd.",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-10T02:29:01Z"
  }, {
    "text" : "(In reply to John Giannakos [:jtgi] from comment #23)\n> P.S. I'm still figuring out bugzilla convention re: making things obsolete,\n> what flags to use and how often I should post here so please let me know if\n> I am doing anything odd.\nNo you're fine :)\nYou should upload a new patch as soon as you either need help, or feedback, or a formal code review (once you think the patch is done). When doing so, you should mark the old version of the patch as obsolete (which is what you did so, great).",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-11T09:04:07Z"
  }, {
    "text" : "Comment on attachment 8575023\nadd_presets_to_cubic_bezier.patch\n\nReview of attachment 8575023:\n-----------------------------------------------------------------\n\nThis looks great. I haven't yet applied the patch locally and played with the tooltip, but I'll do this next. \nI've looked at the code though, and it's easy to read and simple. I also really liked that screenshot you uploaded recently, so we're getting there!\nI guess the next big step will be making sure the existing tests still pass (they will surely need some adapting), and adding new tests.\n\n::: browser/devtools/shared/widgets/CubicBezierPresets.js\n@@ +1,1 @@\n> +/*\n\nThis new file needs the usual js file header we normally have:\n\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n\"use strict\";\n\n@@ +1,2 @@\n> +/*\n> + * Set of preset definitions for use with CubicBezierWidget \n\nnit: trailing white space.\n\n@@ +9,5 @@\n> +  \"ease-in\": [0.42, 0, 1, 1],\n> +  \"ease-out\": [0, 0, 0.58, 1],\n> +  \"ease-in-out\": [0.42, 0, 0.58, 1]\n> +};\n> +\n\nnit: just one empty line is needed.\n\n::: browser/devtools/shared/widgets/CubicBezierWidget.js\n@@ +66,5 @@\n>      return this.coordinates.slice(2);\n>    },\n>  \n>    toString: function() {\n> +    //Check first if current coords are html predefined\n\nMaybe rephrase:\n// Check first if current coords are one of the predefined CSS easing functions.\n\n@@ +70,5 @@\n> +    //Check first if current coords are html predefined\n> +    let predefName = Object.keys(PREDEFINED)\n> +                           .find(key => coordsAreEqual(PREDEFINED[key], this.coordinates));\n> +\n> +    return predefName ? predefName : 'cubic-bezier(' + this.coordinates + ')';\n\nOr perhaps:\nreturn predefName || 'cubic-bezier(' + this.coordinates + ')';\n\nBtw, thanks for this change, that's a nice thing to add.\n\n@@ +149,5 @@\n>      for (let setting in settings) {\n>        defaultSettings[setting] = settings[setting];\n>      }\n>  \n> +    //Fix canvas refresh problem: \n\nnit: trailing whitespace, also, we usually insert a whitespace after //, before the actual comment string.\nAlso, can you explain what problem you're trying to solve with the code below?\nThat URL seems to mention performance problems, did you measure the perf improvement this change brings?\nI'm not against this at all, just want to make sure there's a real benefit for doing it. And if there is, I think these 4 lines need more commenting.\n\n@@ +472,5 @@\n> + *\n> + * Emits \"new-coordinate\" event along with the coordinates \n> + * whenever a preset is selected.\n> + */\n> +function CubicBezierPresetWidget(parent) {\n\nSeveral formatting nits for this new class (for better consistency with the rest of the codebase):\n- there are trailing whitespaces here and there,\n- we usually don't insert an empty line after the prototype object definition,\n- just one empty line between functions is enough,\n- need an whitespace between // and the comment itself for line comments,\n- please use let instead of var,\n- we normally insert a whitespace between statements and the corresponding (. You missed it a couple of times if( while(\n\n@@ +593,5 @@\n> +\n> +    curve.setAttribute(\"height\", 55);\n> +    curve.setAttribute(\"width\", 55);\n> +\n> +    preset.bezierCanvas = new BezierCanvas(curve, bezier, [0.15, 0]);\n\nNice that you reused the BezierCanvas class here.\n\n@@ +645,5 @@\n> +    let maxDepth = 3;\n> +    let node = event.target;\n> +\n> +    //event delegation may require a search upwards for the top level node\n> +    while(!node.classList.contains(\"preset\") && maxDepth > 0) {\n\nAm I missing something? Why do you need this when you added exactly one click event listener per preset element? event.target should always be a preset element.\n\n::: browser/devtools/shared/widgets/cubic-bezier.css\n@@ +1,4 @@\n>  /* This Source Code Form is subject to the terms of the Mozilla Public\n>   * License, v. 2.0. If a copy of the MPL was not distributed with this\n>   * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n>  \n\nnit: A few trailing whitespaces in this file too.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-11T09:55:04Z"
  }, {
    "text" : "Some impressions after having applied the patch locally:\n1) this is great! love it!\n2) the <ENTER> and <ESC> keybindings still work as before, great.\n3) I think we'll need some kind of keyboard support for the tooltip: arrow keys to move through presets, and maybe another to move through categories, but let's keep this for another bug (can you file a new bug for this, that depends on this one?)\n4) the background gradient is looking weird for me (I'll attach a screen capture)\n5) can you set width/height 100% and overflow hidden on the html,body selector to avoid any kind of scrollbars? Depending on the curve there may be a horizontal scrollbar that appears because the preview animation makes the circle move too far to the right (I'll attach a screen capture too).",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-11T10:30:30Z"
  }, {
    "text" : "Created attachment 8575891\ncubic-bezier-tooltip.gif\n\nShows the background and the scrollbar problems.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-11T10:32:45Z"
  }, {
    "text" : "Comment on attachment 8575023\nadd_presets_to_cubic_bezier.patch\n\nReview of attachment 8575023:\n-----------------------------------------------------------------\n\n::: browser/devtools/shared/widgets/CubicBezierWidget.js\n@@ +149,5 @@\n>      for (let setting in settings) {\n>        defaultSettings[setting] = settings[setting];\n>      }\n>  \n> +    //Fix canvas refresh problem: \n\nYeah, my comment + link is partially misleading. This isn't actually for sake of performance. It is the only way I could get the canvas to render without leaving behind artifacts. I'm really not sure what is causing this and why this specific combination works. I had expected clearRect(...) or `canvas.width = canvas.width` to clear these artifacts, but no luck. In fact, if any of these 4 lines are removed it either doesn't render, or I get artifacts. \n\nI'm quite inexperienced with canvases and I would prefer not to employ this fix but I'm not sure what else to try, I've spent a considerable amount of time debugging this. I presume it has something to do with the change in markup surrounding the canvas as it is not a problem in the current implementation.\n\nI've attached screenshots as a follow up demonstrating the problem. Perhaps you've seen this before?\n\n@@ +593,5 @@\n> +\n> +    curve.setAttribute(\"height\", 55);\n> +    curve.setAttribute(\"width\", 55);\n> +\n> +    preset.bezierCanvas = new BezierCanvas(curve, bezier, [0.15, 0]);\n\nYeah, this worked out really great. Simplified things.\n\n@@ +645,5 @@\n> +    let maxDepth = 3;\n> +    let node = event.target;\n> +\n> +    //event delegation may require a search upwards for the top level node\n> +    while(!node.classList.contains(\"preset\") && maxDepth > 0) {\n\nThe preset element has the following html\n\npreset <- holds reference to coordinates\n  preview\n  label\n\nI attach an event listener to `preset` which also enables any of its children to pick up click events. `event.target` will point to the DOM Node clicked even if it is a child of `preset`. Since I store the coordinates in `preset` as a part of `_initMarkup` I have to traverse upwards to find it.",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-12T01:16:02Z"
  }, {
    "text" : "Re: my comments above ^, I thought this would appear in a thread, hopefully you can infer the context.\n\n(In reply to Patrick Brosset [:pbrosset] [:patrick] from comment #26)\n> Some impressions after having applied the patch locally:\n> 1) this is great! love it!\n\nAwesome. I think it feels quite good overall. The previews are certainly a nice ux improvement in my opinion.\n\n> 2) the <ENTER> and <ESC> keybindings still work as before, great.\n> 3) I think we'll need some kind of keyboard support for the tooltip: arrow\n> keys to move through presets, and maybe another to move through categories,\n> but let's keep this for another bug (can you file a new bug for this, that\n> depends on this one?)\n\nDone: #1142255\n\n> 4) the background gradient is looking weird for me (I'll attach a screen\n> capture)\n\nI can't repro this on my dev machine so I'm unable to confirm, but I believe in the latest patch below this is fixed. I removed the em based widths and set clearer boundaries on the repeating-linear-gradient. Is there an standard way to test this across Firefox versions and platforms?",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-12T01:26:03Z"
  }, {
    "text" : "Created attachment 8576358\nadd_presets_to_cubic_bezier.patch\n\nPatch updated based on feedback.\n\nSummary of open issues from my perspective:\n\n1. Have canvas refresh fix approved or dig into some other potential fix (line ~156). See next post for images of the problem.\n2. Testing. I see `/fx-team/browser/devtools/shared/test/*-cubic-bezier-*. I'll update that and add new tests where necessary; is there anywhere else or other type of testing I should do?",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-12T01:53:28Z"
  }, {
    "text" : "Created attachment 8576369\nCanvas refresh problem\n\nAttached is a demonstration of the canvas leaving artifacts if not cleared as is in the patch. \n\nThe implementation for each screenshot can be seen immediately right of the graph.",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-12T01:59:41Z"
  }, {
    "text" : "(In reply to John Giannakos [:jtgi] from comment #28)\n> Comment on attachment 8575023\n> add_presets_to_cubic_bezier.patch\n> \n> Review of attachment 8575023:\n> -----------------------------------------------------------------\n> \n> ::: browser/devtools/shared/widgets/CubicBezierWidget.js\n> @@ +149,5 @@\n> >      for (let setting in settings) {\n> >        defaultSettings[setting] = settings[setting];\n> >      }\n> >  \n> > +    //Fix canvas refresh problem: \n> \n> Yeah, my comment + link is partially misleading. This isn't actually for\n> sake of performance. It is the only way I could get the canvas to render\n> without leaving behind artifacts. I'm really not sure what is causing this\n> and why this specific combination works. I had expected clearRect(...) or\n> `canvas.width = canvas.width` to clear these artifacts, but no luck. In\n> fact, if any of these 4 lines are removed it either doesn't render, or I get\n> artifacts. \n> \n> I'm quite inexperienced with canvases and I would prefer not to employ this\n> fix but I'm not sure what else to try, I've spent a considerable amount of\n> time debugging this. I presume it has something to do with the change in\n> markup surrounding the canvas as it is not a problem in the current\n> implementation.\n> I've attached screenshots as a follow up demonstrating the problem. Perhaps\n> you've seen this before?\nThanks for the explanation and the screenshot attached in comment 31. So, the problem comes from the fact that the canvas context is scaled and translated in the BezierCanvas constructor. That's because it makes it easier to draw the various shapes afterwards. But it also means that now, the clearRect command applies only to the scaled and translated area, that's why just clearing from 0, 0 to width/height doesn't clear everything.\nSo in that respect, your fix is correct, only I would remove the URL from the comment and change the comment itself to something like:\n\n    // Clear the canvas, making sure to clear the whole area by resetting the\n    // transform first.\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    this.ctx.restore();\n\n> @@ +645,5 @@\n> > +    let maxDepth = 3;\n> > +    let node = event.target;\n> > +\n> > +    //event delegation may require a search upwards for the top level node\n> > +    while(!node.classList.contains(\"preset\") && maxDepth > 0) {\n> \n> The preset element has the following html\n> \n> preset <- holds reference to coordinates\n>   preview\n>   label\n> \n> I attach an event listener to `preset` which also enables any of its\n> children to pick up click events. `event.target` will point to the DOM Node\n> clicked even if it is a child of `preset`. Since I store the coordinates in\n> `preset` as a part of `_initMarkup` I have to traverse upwards to find it.\nSorry, my bad. But then you can use currentTarget instead:\n\n  _onPresetClick: function(event) {\n    let node = event.currentTarget;\n    this.emit(\"new-coordinates\", node.coordinates);\n    this.activePreset = node;\n  },\n\n  _onCategoryClick: function(event) {\n    this.activeCategory = event.currentTarget;\n  },",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-13T09:13:41Z"
  }, {
    "text" : "(In reply to John Giannakos [:jtgi] from comment #29)\n> > 4) the background gradient is looking weird for me (I'll attach a screen\n> > capture)\n> \n> I can't repro this on my dev machine so I'm unable to confirm, but I believe\n> in the latest patch below this is fixed. I removed the em based widths and\n> set clearer boundaries on the repeating-linear-gradient. Is there an\n> standard way to test this across Firefox versions and platforms?\nI can't repro with the new patch either, all good.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-13T09:16:41Z"
  }, {
    "text" : "Comment on attachment 8576369\nCanvas refresh problem\n\nClearing the feedback flag, please see my earlier comment. Your fix is fine, just modify the comment.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-13T09:17:26Z"
  }, {
    "text" : "Comment on attachment 8576358\nadd_presets_to_cubic_bezier.patch\n\nReview of attachment 8576358:\n-----------------------------------------------------------------\n\nLooks good to me.\nOnly tests are missing now. If you manage to make the current tests pass again, that's a good start. Then, please create a few new ones. Better create many small tests than 1 big that does everything. So you should start with one that just opens the tooltip and checks that the categories and presets are actually just displayed. Then one that switches categories and checks that presets are displayed. Etc... until you write more complex ones that actually click on presets and check that the preview refreshes and that the property value in the rule-view changes too.\nAnd you were right, the browser_ruleview_cubicbezier-* tests are what you should be looking at.\nSome information about tests can be found here: https://wiki.mozilla.org/DevTools/Hacking#Running_the_Developer_Tools_Tests\n\n::: browser/devtools/shared/widgets/CubicBezierWidget.js\n@@ +151,5 @@\n> +    // Fix canvas refresh problem.\n> +    // Without the following 4 lines, dragging of handles\n> +    // will leave artifacts on the canvas.\n> +    // More info: http://simonsarris.com/blog/346-how-\n> +    // you-clear-your-canvas-matters\n\nAs said earlier, please modify this comment.\n\n@@ +622,5 @@\n> +\n> +    for (let preset of this.presets) {\n> +      preset.addEventListener(\"click\", this._onPresetClick);\n> +    }\n> +\n\nnit: empty line\n\n@@ +636,5 @@\n> +    }\n> +  },\n> +\n> +  /*\n> +   * When a preset is selected, event delegation requires searching\n\nAs commented earlier, you don't need to worry about going back up to the parent, use currentTarget instead.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-13T09:25:20Z"
  }, {
    "text" : "Created attachment 8581462\nadd_presets_to_cubic_bezier.patch\n\nApologies for the slow turn around; school has been relentless.\n\nUpdated patch contains:\n- Changes as per previous review feedback.\n- Updated tests.\n- New integration tests as per feedback.",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-23T07:03:04Z"
  }, {
    "text" : "Created attachment 8581464\nadd_presets_to_cubic_bezier.patch\n\nRemoved some leftover whitespace.",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-23T07:22:20Z"
  }, {
    "text" : "Comment on attachment 8581464\nadd_presets_to_cubic_bezier.patch\n\nReview of attachment 8581464:\n-----------------------------------------------------------------\n\n::: browser/devtools/shared/test/browser_cubic-bezier-02.js\n@@ +14,5 @@\n>  \n>  add_task(function*() {\n>    yield promiseTab(\"about:blank\");\n>    let [host, win, doc] = yield createHost(\"bottom\", TEST_URI);\n> +  doc.body.setAttribute(\"style\", \"position: fixed\");\n\nWithout this, boundingClientRect.top has negative top (-14) and visually, the cubic bezier widget is clipped under the bottom frame.\nThis only occurs in the test env, debugged it for some time but not sure why it happens. \nI need it to be zero'd to calculate expected offsets correctly.\n\n@@ +42,5 @@\n>    let onUpdated = widget.once(\"updated\");\n>  \n>    info(\"Generating a mousedown/move/up on P1\");\n>    widget._onPointMouseDown({target: widget.p1});\n> +  doc.onmousemove({pageX: offsets.left, pageY: offsets.graphTop});\n\nThe hardcoded values don't work so well anymore for a couple reasons:\n1. The canvas no longer begins at pageX 0. Because of the presets, it now begins at the horizontal halfway point in the tooltip.\n2. The canvas no longer uses padding of 25%. This produced some interesting floats that complicated the nice simple expected values you had.\n\n@@ +107,4 @@\n>    info(\"Moving P1 to the left\");\n> +  let newOffset = parseInt(widget.p1.style.left) - singleStep;\n> +  let x = widget.bezierCanvas.\n> +          offsetsToCoordinates({style: {left: newOffset}})[0];\n\nThis was also due to the fact that the bezier canvas uses a padding of 30% as oppose to the previous 25%. It made these floats far less clean and tougher to work with. That's why I resorted to calculating the values with offsetsToCoords",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-23T07:24:35Z"
  }, {
    "text" : "Comment on attachment 8581464\nadd_presets_to_cubic_bezier.patch\n\nReview of attachment 8581464:\n-----------------------------------------------------------------\n\nThanks. Those new tests look good.\nCan I suggest that in future bugs you try and split your work in several patches? For instance here, it would help review if the test changes were in a different patch.\nI just a few nit comments (whitespaces, comments, ...) but the patch looks fine for me otherwise, R+\nI pushed it to try to verify that tests still pass fine https://treeherder.mozilla.org/#/jobs?repo=try&revision=af2e6bbb7c2d \n(they all passed fine for me locally, so not expecting anything too bad).\n\nCan you update the patch one last time as per my comments and then feel free to mark it R+ yourself when you upload the new version.\nOnce try is finished and is green, we'll land the patch. Thanks John!\n\n::: browser/devtools/shared/test/browser_cubic-bezier-01.js\n@@ +7,5 @@\n>  // Tests that the CubicBezierWidget generates content in a given parent node\n>  \n>  const TEST_URI = \"chrome://browser/content/devtools/cubic-bezier-frame.xhtml\";\n>  const {CubicBezierWidget} = devtools.require(\"devtools/shared/widgets/CubicBezierWidget\");\n> +const {PREDEFINED, PRESETS, DEFAULT_PRESET_CATEGORY} = require(\"devtools/shared/widgets/CubicBezierPresets\");\n\nIt doesn't look like you actually need to require this module, as none of the exported variables are being used here.\n\n::: browser/devtools/shared/test/browser_cubic-bezier-02.js\n@@ +6,5 @@\n>  \n>  // Tests the CubicBezierWidget events\n>  \n>  const TEST_URI = \"chrome://browser/content/devtools/cubic-bezier-frame.xhtml\";\n> +const {CubicBezierWidget} = \n\nnit: trailing whitespace.\n\n@@ +11,2 @@\n>    devtools.require(\"devtools/shared/widgets/CubicBezierWidget\");\n> +const {PREDEFINED, PRESETS, DEFAULT_PRESET_CATEGORY} = \n\nnit: trailing whitespace.\n\nAlso, PRESETS and DEFAULT_PRESET_CATEGORY aren't being used in this test, no need to import these variables here.\n\n@@ +14,5 @@\n>  \n>  add_task(function*() {\n>    yield promiseTab(\"about:blank\");\n>    let [host, win, doc] = yield createHost(\"bottom\", TEST_URI);\n> +  doc.body.setAttribute(\"style\", \"position: fixed\");\n\nIt's odd, but I'm ok with fixing the position in the test. Can you just copy your explanation as a comment above this line?\n\n@@ +20,5 @@\n>    let container = doc.querySelector(\"#container\");\n>    let w = new CubicBezierWidget(container, PREDEFINED.linear);\n>  \n> +  let rect = w.curve.getBoundingClientRect();\n> +  rect.padding = w.bezierCanvas.padding[0];\n\nWhy store padding as a property of rect, it doesn't seem to be used anywhere else than in the current scope. You could just make it a local variable `let padding`\n\n@@ +107,4 @@\n>    info(\"Moving P1 to the left\");\n> +  let newOffset = parseInt(widget.p1.style.left) - singleStep;\n> +  let x = widget.bezierCanvas.\n> +          offsetsToCoordinates({style: {left: newOffset}})[0];\n\nSounds good to me.\n\n::: browser/devtools/shared/test/browser_cubic-bezier-03.js\n@@ +6,5 @@\n>  \n>  // Tests that coordinates can be changed programatically in the CubicBezierWidget\n>  \n>  const TEST_URI = \"chrome://browser/content/devtools/cubic-bezier-frame.xhtml\";\n> +const {CubicBezierWidget} = \n\nnit: trailing whitespace.\n\n@@ +11,2 @@\n>    devtools.require(\"devtools/shared/widgets/CubicBezierWidget\");\n> +const {PREDEFINED, PRESETS, DEFAULT_PRESET_CATEGORY} = \n\nnit: trailing whitespace.\nAlso, if this test only uses PREDEFINED, no need to import all 3 symbols then.\nconst {PREDEFINED} = require...\n\n::: browser/devtools/shared/test/browser_cubic-bezier-04.js\n@@ +6,5 @@\n> +\n> +// Tests that the CubicBezierPresetWidget generates markup.\n> +\n> +const TEST_URI = \"chrome://browser/content/devtools/cubic-bezier-frame.xhtml\";\n> +const {CubicBezierPresetWidget} = \n\nnit trailing whitespace.\n\n@@ +8,5 @@\n> +\n> +const TEST_URI = \"chrome://browser/content/devtools/cubic-bezier-frame.xhtml\";\n> +const {CubicBezierPresetWidget} = \n> +  devtools.require(\"devtools/shared/widgets/CubicBezierWidget\");\n> +const {PREDEFINED, PRESETS, DEFAULT_PRESET_CATEGORY} = \n\nnit trailing whitespace.\n\n@@ +25,5 @@\n> +\n> +  ok(container.querySelector(\"#preset-categories\"),\n> +     \"The preset categories have been added\");\n> +  let categories = container.querySelectorAll(\".category\");\n> +  is(categories.length, Object.keys(PRESETS).length, \n\nnit trailing whitespace.\n\n@@ +38,5 @@\n> +  Object.keys(PRESETS).forEach(category => {\n> +    Object.keys(PRESETS[category]).forEach(presetLabel => {\n> +      let preset = container.querySelector(\"#\" + presetLabel);\n> +      ok(preset, `${presetLabel} has been added`);\n> +      ok(preset.querySelector(\"canvas\"), \n\nnit trailing whitespace.\n\n::: browser/devtools/shared/test/browser_cubic-bezier-05.js\n@@ +6,5 @@\n> +\n> +// Tests that the CubicBezierPresetWidget cycles menus\n> +\n> +const TEST_URI = \"chrome://browser/content/devtools/cubic-bezier-frame.xhtml\";\n> +const {CubicBezierPresetWidget} = \n\nnit trailing whitespace.\n\n@@ +8,5 @@\n> +\n> +const TEST_URI = \"chrome://browser/content/devtools/cubic-bezier-frame.xhtml\";\n> +const {CubicBezierPresetWidget} = \n> +  devtools.require(\"devtools/shared/widgets/CubicBezierWidget\");\n> +const {PREDEFINED, PRESETS, DEFAULT_PRESET_CATEGORY} = \n\nnit trailing whitespace.\n\n@@ +23,5 @@\n> +\n> +  w.refreshMenu([0, 0, 0, 0]);\n> +  is(w.activeCategory, container.querySelector(`#${DEFAULT_PRESET_CATEGORY}`),\n> +    \"Check the default category is selected if none chosen yet\");\n> +  is(w._activePreset, null, \"Check no preset is active\");\n\nComments in assertions shouldn't really say what you're doing, but rather what you're expecting:\nis(w._activePreset, null, \"There is no selected category\");\nSame comment for other assertions in this file and other test files.\n\n::: browser/devtools/shared/test/browser_cubic-bezier-06.js\n@@ +7,5 @@\n> +\n> +// Tests the integration between CubicBezierWidget and CubicBezierPresets\n> +\n> +const TEST_URI = \"chrome://browser/content/devtools/cubic-bezier-frame.xhtml\";\n> +const {CubicBezierWidget} = \n\nnit trailing whitespace.\n\n@@ +9,5 @@\n> +\n> +const TEST_URI = \"chrome://browser/content/devtools/cubic-bezier-frame.xhtml\";\n> +const {CubicBezierWidget} = \n> +  devtools.require(\"devtools/shared/widgets/CubicBezierWidget\");\n> +const {PREDEFINED, PRESETS, DEFAULT_PRESET_CATEGORY} = \n\nnit trailing whitespace.\n\n@@ +17,5 @@\n> +  yield promiseTab(\"about:blank\");\n> +  let [host, win, doc] = yield createHost(\"bottom\", TEST_URI);\n> +\n> +  let container = doc.querySelector(\"#container\");\n> +  let w = new CubicBezierWidget(container, \n\nnit trailing whitespace.\n\n@@ +38,5 @@\n> +\n> +function* adjustingBezierUpdatesPreset(widget, win, doc, rect) {\n> +  info(\"Checking that changing the bezier refreshes the preset menu\");\n> +\n> +  is(widget.presets.activeCategory, \n\nnit trailing whitespace.\n\n@@ +39,5 @@\n> +function* adjustingBezierUpdatesPreset(widget, win, doc, rect) {\n> +  info(\"Checking that changing the bezier refreshes the preset menu\");\n> +\n> +  is(widget.presets.activeCategory, \n> +     doc.querySelector(\"#ease-in\"), \n\nnit trailing whitespace.\n\n@@ +42,5 @@\n> +  is(widget.presets.activeCategory, \n> +     doc.querySelector(\"#ease-in\"), \n> +     \"Check preset category is as initialized\");\n> +\n> +  is(widget.presets._activePreset, \n\nnit trailing whitespace.\n\n@@ +43,5 @@\n> +     doc.querySelector(\"#ease-in\"), \n> +     \"Check preset category is as initialized\");\n> +\n> +  is(widget.presets._activePreset, \n> +     doc.querySelector(\"#ease-in-sine\"), \n\nnit trailing whitespace.\n\n@@ +51,5 @@\n> +  widget._onPointMouseDown({target: widget.p1});\n> +  doc.onmousemove({pageX: rect.left, pageY: rect.graphTop});\n> +  doc.onmouseup();\n> +\n> +  is(widget.presets.activeCategory, \n\nnit trailing whitespace.\n\n@@ +52,5 @@\n> +  doc.onmousemove({pageX: rect.left, pageY: rect.graphTop});\n> +  doc.onmouseup();\n> +\n> +  is(widget.presets.activeCategory, \n> +     doc.querySelector(\"#ease-in\"), \n\nnit trailing whitespace.\n\n@@ +55,5 @@\n> +  is(widget.presets.activeCategory, \n> +     doc.querySelector(\"#ease-in\"), \n> +     \"Check preset category is still last active category\");\n> +\n> +  is(widget.presets._activePreset, null, \n\nnit trailing whitespace.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-23T13:03:47Z"
  }, {
    "text" : "Created attachment 8581642\nadd_presets_to_cubic_bezier.patch\n\nUpdated in response to code review.\n\nPatrick, thanks for all your help. Super excited to see this land and to take on something new.\n\nCheers!",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-23T15:01:53Z"
  }, {
    "text" : "Try is nice and green: https://treeherder.mozilla.org/#/jobs?repo=try&revision=af2e6bbb7c2d (the rare failures aren't related).\nLet's ask for this to be checked-in.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-23T16:02:10Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/1e547a8615b4",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-03-23T19:04:32Z"
  }, {
    "text" : "Clearing needinfo for UX since this landed",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-03-24T16:32:55Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/1e547a8615b4",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-03-24T16:33:01Z"
  }, {
    "text" : "Release Note Request (optional, but appreciated)\n[Why is this notable]: Great new feature\n[Suggested wording]: Inspector : Cubic bezier tooltip now shows presets\n[Links (documentation, blog post, etc)]:",
    "authour" : "ntim.bugs@gmail.com",
    "created" : "2015-03-24T23:06:56Z"
  }, {
    "text" : "(In reply to Tim Nguyen [:ntim] from comment #45)\n> Release Note Request (optional, but appreciated)\n> [Why is this notable]: \nInspector : Cubic bezier tooltip now shows a gallery of timing-function presets for use with CSS animations.\n\n> [Links (documentation, blog post, etc)]: \nhttp://jtgi.me/adding-presets-to-firefox-dev-tools/ \n(not sure what the expectation in terms of content at the link is for this. Please discard if not suitable.)",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-25T00:53:42Z"
  }, {
    "text" : "^",
    "authour" : "j@jtgi.me",
    "created" : "2015-03-25T00:57:36Z"
  }, {
    "text" : "Thanks for the clarifications John, that sounds fine.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-03-25T09:30:25Z"
  }, {
    "text" : "Adding this to release notes for 39 aurora. Thanks for including the blog post!",
    "authour" : "lhenry@mozilla.com",
    "created" : "2015-03-29T18:45:28Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-21T00:37:10Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:33:01Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:33:01Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-02-19T10:35:23Z",
      "what" : "bug_mentor",
      "removed" : "",
      "added" : "pbrosset@mozilla.com"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-21T00:18:35Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bgrinstead@mozilla.com"
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-02-21T00:28:17Z",
      "what" : "cc",
      "removed" : "",
      "added" : "j@jtgi.me"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-21T00:37:02Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "j@jtgi.me"
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-02-21T11:23:46Z",
      "what" : "cc",
      "removed" : "",
      "added" : "pbrosset@mozilla.com"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-23T16:47:58Z",
      "what" : "cc",
      "removed" : "",
      "added" : "shorlander@mozilla.com"
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-06T11:09:29Z",
      "what" : "attachments.isobsolete:8568172",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-08T21:21:31Z",
      "what" : "attachments.isobsolete:8573868",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-10T02:29:01Z",
      "what" : "attachments.isobsolete:8574445",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-11T21:24:32Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1142255"
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-12T01:53:28Z",
      "what" : "attachments.isobsolete:8575023",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-23T07:03:04Z",
      "what" : "attachments.isobsolete:8576358",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-23T07:22:20Z",
      "what" : "attachments.isobsolete:8581462",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-23T15:01:53Z",
      "what" : "attachments.isobsolete:8581464",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-03-23T16:02:10Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-23T19:04:32Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-23T19:04:32Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "gl@mozilla.com",
      "date" : "2015-03-23T21:04:55Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gabriel.luong@gmail.com"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:33:01Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:33:01Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:33:01Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-24 09:33:01"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-24T16:33:01Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-03-24T23:06:56Z",
      "what" : "cc",
      "removed" : "",
      "added" : "ntim.bugs@gmail.com"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-03-24T23:06:56Z",
      "what" : "cf_tracking_firefox_relnote",
      "removed" : "---",
      "added" : "?"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-03-26T20:35:51Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1148081"
    }, {
      "name" : "lhenry@mozilla.com",
      "date" : "2015-03-29T18:45:28Z",
      "what" : "cf_tracking_firefox_relnote",
      "removed" : "?",
      "added" : "39+"
    } ],
    "flagEvents" : [ {
      "name" : "j@jtgi.me",
      "date" : "2015-02-21T11:23:46Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-02-23T08:31:17Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-23T16:47:58Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(bgrinstead@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-02-23T20:21:11Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-02-23T21:43:56Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8568172,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-02-24T16:29:37Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-02-24T17:21:56Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : 8568172,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-02-27T10:51:56Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-03-02T08:17:18Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-04T12:44:46Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-06T11:09:29Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8573868,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-08T21:21:31Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : 8573868,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-03-09T10:36:05Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-03-09T10:36:26Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8574445,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-10T02:29:01Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : 8574445,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-10T02:29:01Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8575023,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-03-11T09:55:04Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : 8575023,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-12T01:16:02Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8575023,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-12T01:53:28Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : 8575023,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-12T01:53:28Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8576358,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-12T01:59:41Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8576369,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-03-13T09:17:26Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : 8576369,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-03-13T09:25:20Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : 8576358,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-23T07:03:04Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8581462,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-23T07:22:20Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : 8581462,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-23T07:22:20Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8581464,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-03-23T13:03:47Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : 8581464,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-23T15:01:53Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8581642,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-23T19:04:32Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-03-24T16:32:55Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(shorlander@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "j@jtgi.me",
      "date" : "2015-03-25T00:57:36Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-03-25T09:30:25Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134568,
  "cclist" : [ "bgrinstead@mozilla.com", "gl@mozilla.com", "j@jtgi.me", "ntim.bugs@gmail.com", "pbrosset@mozilla.com", "shorlander@mozilla.com" ]
}, {
  "component" : "General",
  "summary" : "Incorrect back-forward navigation in tab with lots of history and e10s enabled",
  "reporter" : "cmanchester@mozilla.com",
  "assigned" : "ttaubert@mozilla.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "STR:\n\n1. Navigate around in a tab to accumulate history (10 pages is sufficient)\n2. Navigate to \"about:preferences\"\n3. Click the back button\n\nER:\nClicking back returns to the previous page, whatever it was\n\nAR:\nClicking back reloads \"about:preferences\". Clicking back one more time goes to the previous page.",
  "comments" : [ {
    "text" : "STR:\n\n1. Navigate around in a tab to accumulate history (10 pages is sufficient)\n2. Navigate to \"about:preferences\"\n3. Click the back button\n\nER:\nClicking back returns to the previous page, whatever it was\n\nAR:\nClicking back reloads \"about:preferences\". Clicking back one more time goes to the previous page.",
    "authour" : "cmanchester@mozilla.com",
    "created" : "2015-02-19T04:10:43Z"
  }, {
    "text" : "I am able to see this in a non-e10s window on my Macbook Pro.",
    "authour" : "davidp99@gmail.com",
    "created" : "2015-02-19T17:45:37Z"
  }, {
    "text" : "When doing a load from history that switches process we send a message to the main process telling it which history index to load. We rely on session store collecting the history but it actually throws away the history older than a certain point so the index is now incorrect and we just load the most recent document.\n\nOne fix for this would be to pass something other than the index, instead maybe pass the history entry's ID, docshellID or docIdentifier. I'm not sure what the difference is between those but presumably one of them is unique enough that we can then scan the history sessionstore gives us to find the page to load.\n\nBut that assumes the user doesn't want to go too far back in history, at some point they can request an old page that isn't in the session stored history. Also there is the problem that navigating between remote and non-remote is throwing away history.\n\nTim, what would you think about changing session store so it always collects the entire session history but then only persists the subset to disk that max_serialize_back and max_serialize_forward define?",
    "authour" : "dtownsend@mozilla.com",
    "created" : "2015-03-26T20:01:54Z"
  }, {
    "text" : "(In reply to Dave Townsend [:mossop] from comment #2)\n> Tim, what would you think about changing session store so it always collects\n> the entire session history but then only persists the subset to disk that\n> max_serialize_back and max_serialize_forward define?\n\nYeah, that sounds like the most reasonable thing to do.\n\nCurrently we collect data in SessionHistory.jsm and ignore entries if we hit the limits. We can't iterate all entries on the main thread before saving, that's bad enough for cookies already...\n\nThe only option I see here is that we do this kind of cleanup on the SessionWorker. Either always when saving, or only on the final write before shutdown. It might make sense to send the state as an object (instead as a string) to the worker so we don't JSON.stringify() on the main thread only to JSON.parse() + .stringify() on the worker again. I don't know a lot about the perf impact here though.\n\nAnother advantage for such a cleanup job on the worker would be that we could maybe use that to fix bug 912717 as well and filter cookies off the main thread. SessionStore.getCurrentState() would then always report a little more data than is saved to disk but I do think that's better than the other way around.\n\nDavid, any thoughts?",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-02T14:41:45Z"
  }, {
    "text" : "> Tim, what would you think about changing session store so it always collects the entire session history but then only persists the subset to disk that max_serialize_back and max_serialize_forward define?\n\nCan you walk me through this? I'm not sure how this would fix the issue.",
    "authour" : "dteller@mozilla.com",
    "created" : "2015-04-07T13:58:47Z"
  }, {
    "text" : "(In reply to David Rajchenbach-Teller [:Yoric] (use \"needinfo\") from comment #4)\n> > Tim, what would you think about changing session store so it always collects the entire session history but then only persists the subset to disk that max_serialize_back and max_serialize_forward define?\n> \n> Can you walk me through this? I'm not sure how this would fix the issue.\n\nWe keep session history for all tabs in memory but it is only a subset of the history based on the prefs. So when we recreate a tab either because it has crashed or because (as here) we are switching from a non-remote to a remote tab we end up throwing away some of the user's history which isn't ideal.\n\nI had assumed that we were only collecting a subset based on not wanting the data written to disk to be large but sounds like the perf impact of the collection itself might be a bigger deal?",
    "authour" : "dtownsend@mozilla.com",
    "created" : "2015-04-07T15:48:50Z"
  }, {
    "text" : "(In reply to Dave Townsend [:mossop] from comment #5)\n> I had assumed that we were only collecting a subset based on not wanting the\n> data written to disk to be large but sounds like the perf impact of the\n> collection itself might be a bigger deal?\n\nYeah, bug 943339 reduced the amount of data written to disk. The perf impact of the collection itself wasn't a huge issue iirc. If it is, we always have the ability to make history collection a tad more intelligent and only collect the stuff that changed. This might not be super easy to do but also not super hard.",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-16T14:20:06Z"
  }, {
    "text" : "Taking.",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-23T09:32:26Z"
  }, {
    "text" : "Created attachment 8596463\n0001-Bug-1134518-Remove-shistory-capping-code-from-Sessio.patch\n\nThis patch removes the current code that caps the number of shistory entries, introduced in bug 943339.",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-23T09:34:02Z"
  }, {
    "text" : "Created attachment 8596469\n0002-Bug-1134518-Send-a-state-object-instead-of-a-string-.patch\n\nThis patch makes us send a state object to the worker, instead of a state string.\n\nDavid, I remember you saying that in the future sending strings might be faster than sending objects. Not sure if we're there yet but I assume that sending an object to the worker and stringifying it there after cleaning up might make up for the small overhead? We probably don't want to JSON.parse(), cleanup, JSON.stringify() on the worker even though it's OMT.",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-23T09:37:39Z"
  }, {
    "text" : "Created attachment 8596475\n0003-Bug-1134518-Cap-shistory-entries-in-the-SessionWorke.patch\n\nThis patch moves the shistory capping code to the SessionWorker. I would like to do the same for cookies to fix bug 912717. It cleans up only once on clean shutdown, we should think about moving other cleanup routines here as well.",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-23T09:39:13Z"
  }, {
    "text" : "Created attachment 8596477\n0004-Bug-1134518-Add-xpcshell-test-for-shistory-caps-on-c.patch\n\nThis removes the old test and adds a new xpcshell one. It also fixes test_backup_once.js to work with proper state objects instead of mock strings.",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-23T09:40:08Z"
  }, {
    "text" : "Comment on attachment 8596463\n0001-Bug-1134518-Remove-shistory-capping-code-from-Sessio.patch\n\nReview of attachment 8596463:\n-----------------------------------------------------------------\n\nFair enough. Performance data showed that this had no impact on loading time.\n\nr=me with the remark below addressed.\n\n::: browser/components/sessionstore/SessionHistory.jsm\n@@ +78,3 @@\n>          entry.persist = txn.persist;\n>          data.entries.push(entry);\n> +      } while (txn = txn.next);\n\nI seem to remember the convention that we should double-parenthesize in such cases to show that yes, we really intend `=` and not `==`.\n\nHowever, a `for` would be much nicer (and would work even if `rootTransaction` is empty, I don't know if this can happen).",
    "authour" : "dteller@mozilla.com",
    "created" : "2015-04-23T11:46:40Z"
  }, {
    "text" : "Comment on attachment 8596469\n0002-Bug-1134518-Send-a-state-object-instead-of-a-string-.patch\n\nReview of attachment 8596469:\n-----------------------------------------------------------------\n\nWell, I guess that bug 984886 and my hopes of shaving 10-20ms from the critical path are dead and gone.",
    "authour" : "dteller@mozilla.com",
    "created" : "2015-04-23T12:00:01Z"
  }, {
    "text" : "(In reply to David Rajchenbach-Teller [:Yoric] (use \"needinfo\" - away until May 6th) from comment #12)\n> >          entry.persist = txn.persist;\n> >          data.entries.push(entry);\n> > +      } while (txn = txn.next);\n> \n> I seem to remember the convention that we should double-parenthesize in such\n> cases to show that yes, we really intend `=` and not `==`.\n> \n> However, a `for` would be much nicer (and would work even if\n> `rootTransaction` is empty, I don't know if this can happen).\n\nYeah, fair point. Will address that.",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-23T12:01:38Z"
  }, {
    "text" : "Comment on attachment 8596475\n0003-Bug-1134518-Cap-shistory-entries-in-the-SessionWorke.patch\n\nReview of attachment 8596475:\n-----------------------------------------------------------------\n\n::: browser/components/sessionstore/SessionWorker.js\n@@ +97,5 @@\n>      this.state = origin;\n>      this.Paths = paths;\n> +    this.maxUpgradeBackups = maxUpgradeBackups;\n> +    this.maxSerializeBack = maxSerializeBack;\n> +    this.maxSerializeForward = maxSerializeForward;\n\nCan you throw a `TypeError` if any of these fields is unset, to avoid bad surprises in the future?",
    "authour" : "dteller@mozilla.com",
    "created" : "2015-04-23T12:05:36Z"
  }, {
    "text" : "Comment on attachment 8596477\n0004-Bug-1134518-Add-xpcshell-test-for-shistory-caps-on-c.patch\n\nReview of attachment 8596477:\n-----------------------------------------------------------------\n\n::: browser/components/sessionstore/test/unit/test_backup_once.js\n@@ +78,5 @@\n>  function promise_check_contents(path, expect) {\n>    return Task.spawn(function*() {\n>      do_print(\"Checking whether \" + path + \" has the right contents\");\n>      let actual = yield OS.File.read(path, { encoding: \"utf-8\"});\n> +    Assert.deepEqual(JSON.parse(actual), expect);\n\n, `File ${path} contains the expected data.`\n\n::: browser/components/sessionstore/test/unit/test_shutdown_cleanup.js\n@@ +1,1 @@\n> +\"use strict\";\n\nA few words to explain what this test is all about?",
    "authour" : "dteller@mozilla.com",
    "created" : "2015-04-23T12:13:15Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/6fe254a6e35a\nhttps://hg.mozilla.org/integration/fx-team/rev/9484987dbf3e\nhttps://hg.mozilla.org/integration/fx-team/rev/a0b3a91f0960\nhttps://hg.mozilla.org/integration/fx-team/rev/8a151d59bdec",
    "authour" : "pulsebot@bots.tld",
    "created" : "2015-04-23T12:45:17Z"
  }, {
    "text" : "Oh, hm. I forgot to add a test for the original issue. Will attach one shortly.",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-23T13:02:45Z"
  }, {
    "text" : "Created attachment 8596566\n0005-Bug-1134518-Add-test-to-ensure-we-don-t-lose-shistor.patch\n\nHad to fix ContentTask.spawn(), the method it used to determine whether to load the helper frame script was a little flawed. browser.permanentKey is the same for the remote and the non-remote frameLoader. After switching a browser's remoteness ContentTask.spawn() thus seized working.",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-23T13:45:34Z"
  }, {
    "text" : "Comment on attachment 8596463\n0001-Bug-1134518-Remove-shistory-capping-code-from-Sessio.patch\n\nThis removes more code than I remember adding - but then I think things have changed a fair bit since then (e10s wasn't being pushed yet) :)",
    "authour" : "emanuel.hoogeveen@gmail.com",
    "created" : "2015-04-23T14:09:37Z"
  }, {
    "text" : "(In reply to Emanuel Hoogeveen [:ehoogeveen] from comment #20)\n> This removes more code than I remember adding - but then I think things have\n> changed a fair bit since then (e10s wasn't being pushed yet) :)\n\nYeah indeed, this wasn't a straight backout. Your code lives on in SessionWorker.js now!",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-23T15:17:57Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/6fe254a6e35a\nhttps://hg.mozilla.org/mozilla-central/rev/9484987dbf3e\nhttps://hg.mozilla.org/mozilla-central/rev/a0b3a91f0960\nhttps://hg.mozilla.org/mozilla-central/rev/8a151d59bdec",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-23T21:08:03Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/11c4c1801cbe",
    "authour" : "pulsebot@bots.tld",
    "created" : "2015-04-24T07:30:07Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/4d9970eb3c80",
    "authour" : "pulsebot@bots.tld",
    "created" : "2015-04-24T09:08:07Z"
  }, {
    "text" : "Needed to push a bustage fix. When swapping a docShell to another window it seems we just load all of the pending frame scripts again, no matter whether one or all of those were loaded by that frameLoader before.",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-24T09:09:45Z"
  }, {
    "text" : "(In reply to Pulsebot from comment #24)\n> https://hg.mozilla.org/integration/fx-team/rev/4d9970eb3c80\n\nNit: Services.mm!\n\n(In reply to Tim Taubert [:ttaubert] from comment #25)\n> Needed to push a bustage fix. When swapping a docShell to another window it\n> seems we just load all of the pending frame scripts again, no matter whether\n> one or all of those were loaded by that frameLoader before.\n\nThat sounds like a bug to me, filed bug 1158198",
    "authour" : "dtownsend@mozilla.com",
    "created" : "2015-04-24T15:34:04Z"
  }, {
    "text" : "(In reply to Dave Townsend [:mossop] from comment #26)\n> (In reply to Pulsebot from comment #24)\n> > https://hg.mozilla.org/integration/fx-team/rev/4d9970eb3c80\n> \n> Nit: Services.mm!\n\nOh, right. Forgot that this was added a while ago.",
    "authour" : "ttaubert@mozilla.com",
    "created" : "2015-04-27T10:12:03Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/11c4c1801cbe\nhttps://hg.mozilla.org/mozilla-central/rev/4d9970eb3c80",
    "authour" : "cbook@mozilla.com",
    "created" : "2015-04-27T10:38:52Z"
  }, {
    "text" : "*** Bug 1154552 has been marked as a duplicate of this bug. ***",
    "authour" : "ehsan@mozilla.com",
    "created" : "2015-07-09T02:53:18Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-23T09:32:26Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-27T10:38:52Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-27T10:38:52Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "dtownsend@mozilla.com",
      "date" : "2015-02-19T17:41:27Z",
      "what" : "cc",
      "removed" : "",
      "added" : "dtownsend@mozilla.com"
    }, {
      "name" : "davidp99@gmail.com",
      "date" : "2015-02-19T17:45:37Z",
      "what" : "cc",
      "removed" : "",
      "added" : "davidp99@gmail.com"
    }, {
      "name" : "dtownsend@mozilla.com",
      "date" : "2015-03-26T20:01:54Z",
      "what" : "cc",
      "removed" : "",
      "added" : "ttaubert@mozilla.com"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-02T14:26:05Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "943339"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-02T14:41:45Z",
      "what" : "cc",
      "removed" : "",
      "added" : "dteller@mozilla.com"
    }, {
      "name" : "blassey.bugs@lassey.us",
      "date" : "2015-04-07T20:11:21Z",
      "what" : "cc",
      "removed" : "",
      "added" : "blassey.bugs@lassey.us"
    }, {
      "name" : "blassey.bugs@lassey.us",
      "date" : "2015-04-07T20:11:21Z",
      "what" : "cf_tracking_e10s",
      "removed" : "---",
      "added" : "m7+"
    }, {
      "name" : "dtownsend@mozilla.com",
      "date" : "2015-04-09T22:32:14Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "3"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-04-10T18:56:29Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmucci@mozilla.com"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-23T09:32:26Z",
      "what" : "cf_fx_points",
      "removed" : "3",
      "added" : "5"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-23T09:32:26Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "40.2 - 27 Apr"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-23T09:32:26Z",
      "what" : "platform",
      "removed" : "x86",
      "added" : "All"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-23T09:32:26Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "ttaubert@mozilla.com"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-23T09:32:26Z",
      "what" : "op_sys",
      "removed" : "Mac OS X",
      "added" : "All"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-23T13:02:45Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "leave-open"
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-24T07:30:34Z",
      "what" : "keywords",
      "removed" : "leave-open",
      "added" : ""
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-27T10:38:52Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 40"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-27T10:38:52Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-04-27 03:38:52"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-27T10:38:52Z",
      "what" : "cf_status_firefox40",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "Virtual@MsgSafe.io",
      "date" : "2015-06-28T17:14:14Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bernesb@gmail.com"
    }, {
      "name" : "ehsan@mozilla.com",
      "date" : "2015-07-09T02:53:18Z",
      "what" : "cc",
      "removed" : "",
      "added" : "ehsan@mozilla.com"
    } ],
    "flagEvents" : [ {
      "name" : "dtownsend@mozilla.com",
      "date" : "2015-02-19T17:41:27Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "dtownsend@mozilla.com",
      "date" : "2015-03-26T20:01:54Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "dtownsend@mozilla.com",
      "date" : "2015-03-26T20:02:20Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(dtownsend@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-02T14:41:45Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(ttaubert@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "dteller@mozilla.com",
      "date" : "2015-04-07T13:58:47Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(dteller@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "dtownsend@mozilla.com",
      "date" : "2015-04-07T15:48:50Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(dtownsend@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "dtownsend@mozilla.com",
      "date" : "2015-04-09T22:32:14Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "BACKLOG",
        "state" : "GRANTED"
      }, {
        "status" : "QE_VERIFY",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-23T09:36:17Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8596463,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-23T09:37:39Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8596469,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-23T09:39:13Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8596475,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-23T09:40:08Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8596477,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "dteller@mozilla.com",
      "date" : "2015-04-23T11:46:40Z",
      "what" : "flagtypes.name",
      "removed" : "review?(dteller@mozilla.com)",
      "added" : "",
      "attachmentId" : 8596463,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "dteller@mozilla.com",
      "date" : "2015-04-23T12:00:01Z",
      "what" : "flagtypes.name",
      "removed" : "review?(dteller@mozilla.com)",
      "added" : "",
      "attachmentId" : 8596469,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "dteller@mozilla.com",
      "date" : "2015-04-23T12:05:36Z",
      "what" : "flagtypes.name",
      "removed" : "review?(dteller@mozilla.com)",
      "added" : "",
      "attachmentId" : 8596475,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "dteller@mozilla.com",
      "date" : "2015-04-23T12:13:15Z",
      "what" : "flagtypes.name",
      "removed" : "review?(dteller@mozilla.com)",
      "added" : "",
      "attachmentId" : 8596477,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ttaubert@mozilla.com",
      "date" : "2015-04-23T13:45:34Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8596566,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "dtownsend@mozilla.com",
      "date" : "2015-04-23T20:25:21Z",
      "what" : "flagtypes.name",
      "removed" : "review?(dtownsend@mozilla.com)",
      "added" : "",
      "attachmentId" : 8596566,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-23T21:08:03Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134518,
  "cclist" : [ "blassey.bugs@lassey.us", "davidp99@gmail.com", "dteller@mozilla.com", "dtownsend@mozilla.com", "ehsan@mozilla.com", "mmucci@mozilla.com", "ttaubert@mozilla.com", "Virtual@MsgSafe.io" ]
}, {
  "component" : "General",
  "summary" : "[EME] Create a teaching moment on first play of DRM-protected content",
  "reporter" : "jmoradi@mozilla.com",
  "assigned" : "gijskruitbosch+bugs@gmail.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "On first play of DRM-protected content, we want to notify user that something is different by calling attention to the new icon in the URL bar.",
  "comments" : [ {
    "text" : "On first play of DRM-protected content, we want to notify user that something is different by calling attention to the new icon in the URL bar.",
    "authour" : "jmoradi@mozilla.com",
    "created" : "2015-02-19T03:17:19Z"
  }, {
    "text" : "Dolske needs a UX spec and final artwork to handle the teaching moment on first play.",
    "authour" : "jmoradi@mozilla.com",
    "created" : "2015-02-19T03:20:06Z"
  }, {
    "text" : "Icon shake animation: http://people.mozilla.org/~sfranks/EME/shake.gif\n\nPlays only once open detection of DRM content. Not sure if it should wait until the actual playing of content as if motion appears on the screen instantly after pressing play, it may take all the attention away from the icon shake.\n\nCan we tell from the source code if the content on a page will use the CDM before the user presses play?",
    "authour" : "sfranks@mozilla.com",
    "created" : "2015-02-19T22:01:53Z"
  }, {
    "text" : "We do not currently watch for first-play, just whenever EME is used by content. That feels like a complication that isn't important -- when we add the icon (because EME usage had been triggered), we can shake the icon then.",
    "authour" : "dolske@mozilla.com",
    "created" : "2015-02-21T02:48:49Z"
  }, {
    "text" : "So, is the idea here to display the \"shaker\" animation on first display of the url bar icon (triggered by first usage of EME)?",
    "authour" : "jmoradi@mozilla.com",
    "created" : "2015-02-21T03:39:44Z"
  }, {
    "text" : "(In reply to Javaun Moradi [:javaun] from comment #4)\n> So, is the idea here to display the \"shaker\" animation on first display of\n> the url bar icon (triggered by first usage of EME)?\n\nYes, precisely.",
    "authour" : "sfranks@mozilla.com",
    "created" : "2015-02-23T17:13:41Z"
  }, {
    "text" : "Created attachment 8568577\nshaky eme icon on first play,\n\nThis wfm, keep in mind you need to restart the browser (and clear the pref) for the animation to play a second time (or mess with the CSS / DOM in some other way).",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-24T16:06:25Z"
  }, {
    "text" : "Thanks Gijs. Can you post which pref to clear here so we can test later?",
    "authour" : "jmoradi@mozilla.com",
    "created" : "2015-02-24T16:36:07Z"
  }, {
    "text" : "browser.eme.ui.firstContentShown\n\nis the pref in question.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-24T17:21:41Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #6)\n> Created attachment 8568577\n> shaky eme icon on first play,\n> \n> This wfm, keep in mind you need to restart the browser (and clear the pref)\n> for the animation to play a second time (or mess with the CSS / DOM in some\n> other way).\n\nWould you be able to push a build or record a video of how it looks? Sorry, I have never made a build before (but would like to learn when I have more bandwidth).",
    "authour" : "sfranks@mozilla.com",
    "created" : "2015-02-25T20:04:23Z"
  }, {
    "text" : "remote:   https://treeherder.mozilla.org/#/jobs?repo=try&revision=ea24779be4b5\n\nBuilds will appear at:\n\nhttps://ftp-ssl.mozilla.org/pub/mozilla.org/firefox/try-builds/gijskruitbosch@gmail.com-ea24779be4b5",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-26T10:13:44Z"
  }, {
    "text" : "Comment on attachment 8568577\nshaky eme icon on first play,\n\nLooks great.",
    "authour" : "sfranks@mozilla.com",
    "created" : "2015-02-26T17:40:36Z"
  }, {
    "text" : "remote:   https://hg.mozilla.org/integration/fx-team/rev/279bf3bf6c43",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-03-03T12:24:19Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/279bf3bf6c43",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-03-04T01:13:51Z"
  }, {
    "text" : "Comment on attachment 8568577\nshaky eme icon on first play,\n\nApproval Request Comment\n[Feature/regressing bug #]: EME UI\n[User impact if declined]: user might miss EME UI\n[Describe test coverage new/current, TreeHerder]: nope\n[Risks and why]: very low, mostly CSS changes for the animation and a small bit of JS to trigger it.\n[String/UUID change made/needed]: no\n\n(NB: please transplant for uplift, the attached patch only has OS X css)",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-03-04T13:12:05Z"
  }, {
    "text" : "Comment on attachment 8568577\nshaky eme icon on first play,\n\nApproving for uplift to aurora since this looks low risk. \n \nLukas mentioned that the note about \"transplanting\" is for the sheriffs. Gijs, what does that mean? Thanks!",
    "authour" : "lhenry@mozilla.com",
    "created" : "2015-03-11T17:42:41Z"
  }, {
    "text" : "Is there an accessibility affordance for this shaky animation in the tab, or a plan for one in the future? How might screen readers get feedback about this?",
    "authour" : "inkpixelspaper@gmail.com",
    "created" : "2015-03-11T17:46:38Z"
  }, {
    "text" : "(In reply to jstrickland from comment #16)\n> Is there an accessibility affordance for this shaky animation in the tab, or\n> a plan for one in the future? How might screen readers get feedback about\n> this?\n\nAIUI the notifications have role alert and therefore get announced - unless that doesn't work if they start off collapsed? David, can you file a followup bug in that case?",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-03-11T18:05:40Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-aurora/rev/0d1531a43a58",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-03-11T20:59:20Z"
  }, {
    "text" : "Thanks for asking! Bumping NI over to Marco to test next week.",
    "authour" : "dbolter@mozilla.com",
    "created" : "2015-03-12T17:24:31Z"
  }, {
    "text" : "OK, in order to be able to test this, I need access to something that actually has EME content. I am not a Netflix user, so have no private account to test this with. I also don't know where else I might find EME content, never came across it AFAIK.",
    "authour" : "mzehe@mozilla.com",
    "created" : "2015-03-23T09:13:42Z"
  }, {
    "text" : "Marco: http://people.mozilla.org/~cpearce/mse-clearkey/ should work on current Nightly/Aurora.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-03-23T10:13:22Z"
  }, {
    "text" : "This page doesn't give me any indication that this is anything other than an ordinary video that you can also find on Youtube. Video playback controls are there, the video plays, but I don't get any indication that there is anything special about it. No notification bar or other alert type whatsoever.",
    "authour" : "mzehe@mozilla.com",
    "created" : "2015-03-23T11:37:30Z"
  }, {
    "text" : "Mistakenly filed against Firefox 38 and should be instead 38 Branch. Sorry for the spam. dkl",
    "authour" : "dkl@mozilla.com",
    "created" : "2015-04-13T22:46:58Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T17:11:50Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-04T01:13:51Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-04T01:13:51Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-19T03:20:06Z",
      "what" : "cc",
      "removed" : "",
      "added" : "dolske@mozilla.com, madhava@mozilla.com, sfranks@mozilla.com"
    }, {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-19T03:20:06Z",
      "what" : "version",
      "removed" : "unspecified",
      "added" : "Firefox 38"
    }, {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-19T03:20:06Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1083662"
    }, {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-19T03:20:06Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "sfranks@mozilla.com"
    }, {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-19T03:20:06Z",
      "what" : "op_sys",
      "removed" : "Mac OS X",
      "added" : "All"
    }, {
      "name" : "jld@mozilla.com",
      "date" : "2015-02-19T03:28:56Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jld@mozilla.com"
    }, {
      "name" : "sfranks@mozilla.com",
      "date" : "2015-02-19T22:01:53Z",
      "what" : "cc",
      "removed" : "",
      "added" : "philipp@mozilla.com"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T16:57:20Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gijskruitbosch+bugs@gmail.com"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T17:11:50Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "3"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T17:11:50Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "39.1 - 9 Mar"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T17:11:50Z",
      "what" : "assigned_to",
      "removed" : "sfranks@mozilla.com",
      "added" : "gijskruitbosch+bugs@gmail.com"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-24T16:25:51Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmucci@mozilla.com"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-04T01:13:51Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-04T01:13:51Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-03 17:13:51"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-04T01:13:51Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "inkpixelspaper@gmail.com",
      "date" : "2015-03-11T17:46:38Z",
      "what" : "cc",
      "removed" : "",
      "added" : "dbolter@mozilla.com, inkpixelspaper@gmail.com"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-11T20:59:20Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "dbolter@mozilla.com",
      "date" : "2015-03-12T17:24:31Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mzehe@mozilla.com"
    }, {
      "name" : "cpeterson@mozilla.com",
      "date" : "2015-03-19T07:01:29Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1145035"
    }, {
      "name" : "dkl@mozilla.com",
      "date" : "2015-04-13T22:46:58Z",
      "what" : "version",
      "removed" : "Firefox 38",
      "added" : "38 Branch"
    } ],
    "flagEvents" : [ {
      "name" : "sfranks@mozilla.com",
      "date" : "2015-02-19T22:01:53Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      }, {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-02-21T02:48:49Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(dolske@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-23T17:11:50Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(philipp@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-24T16:06:25Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8568577,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-24T16:25:51Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "BACKLOG",
        "state" : "GRANTED"
      }, {
        "status" : "TEST_SUITE",
        "state" : "DENIED"
      }, {
        "status" : "QE_VERIFY",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "jmoradi@mozilla.com",
      "date" : "2015-02-24T16:36:07Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-24T17:21:41Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-25T20:12:46Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-26T10:13:44Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "sfranks@mozilla.com",
      "date" : "2015-02-26T17:40:36Z",
      "what" : "flagtypes.name",
      "removed" : "review?(sfranks@mozilla.com)",
      "added" : "",
      "attachmentId" : 8568577,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-03-04T13:12:05Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8568577,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "lhenry@mozilla.com",
      "date" : "2015-03-11T17:42:41Z",
      "what" : "flagtypes.name",
      "removed" : "approval-mozilla-aurora?",
      "added" : "",
      "attachmentId" : 8568577,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "inkpixelspaper@gmail.com",
      "date" : "2015-03-11T17:46:38Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "dbolter@mozilla.com",
      "date" : "2015-03-12T17:24:31Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(dbolter@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mzehe@mozilla.com",
      "date" : "2015-03-23T11:37:30Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(mzehe@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134513,
  "cclist" : [ "dbolter@mozilla.com", "dolske@mozilla.com", "gijskruitbosch+bugs@gmail.com", "inkpixelspaper@gmail.com", "jld@mozilla.com", "madhava@mozilla.com", "mmucci@mozilla.com", "mzehe@mozilla.com", "philipp@mozilla.com", "sfranks@mozilla.com" ]
}, {
  "component" : "Tours",
  "summary" : "Implement infopanel to promote Reader View when first available",
  "reporter" : "dolske@mozilla.com",
  "assigned" : "MattN+bmo@mozilla.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "P1",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Created attachment 8566349\nCurrent UX mock\n\nThis bug covers implementing two infopanels to help promote the Reading View button and Reading List sidebar the first time they're seen.\n\n1) The first time the Reading List sidebar is shown, display a \"Welcome to Reading List\" (all strings TBD) panel, with a \"Show me\" button to open a tour page (including bug 1134497), URL TBD.\n\nSince we only want to show this once, this should set a pref to prevent showing it again.\n\n2) The first time a user visits a page that can be viewed in Reader View, display an infopanel pointing out that this button is available in inviting them to click it. (This will open the page in Reader View, which should also show the Reading List sidebar the first time, which will in turn show the infopanel from #1 inviting them to take a tour of the feature).\n\nAs with #1, we want a pref to make sure this is only shown once.\n\n\nFor both infopanels, we want to suppress (blacklist) their display on www.mozilla.org where another UITour might be active -- this avoids these panels dueling with panels from past/future UITours. EG, if you're on a tour page that has opened the Hello panel, it would be really confusing to also have one of this bug's infopanels open at the same time (or to cause the Hello panel to close).\n\n\nOne edge case: If the user is on a blacklisted page, and clicks the Reader View button (without having seen the infopanel), we should ideally set the pref to avoid showing the infopanel that promotes the button (since they've clearly already discovered it themselves). But, just to be clear, if they're on a readable-but-blacklisted page and they do _not_ click the button, we'd still want to show the infopanel on the first non-blacklisted page (since they clearly haven't discovered the button!).",
  "comments" : [ {
    "text" : "Created attachment 8566349\nCurrent UX mock\n\nThis bug covers implementing two infopanels to help promote the Reading View button and Reading List sidebar the first time they're seen.\n\n1) The first time the Reading List sidebar is shown, display a \"Welcome to Reading List\" (all strings TBD) panel, with a \"Show me\" button to open a tour page (including bug 1134497), URL TBD.\n\nSince we only want to show this once, this should set a pref to prevent showing it again.\n\n2) The first time a user visits a page that can be viewed in Reader View, display an infopanel pointing out that this button is available in inviting them to click it. (This will open the page in Reader View, which should also show the Reading List sidebar the first time, which will in turn show the infopanel from #1 inviting them to take a tour of the feature).\n\nAs with #1, we want a pref to make sure this is only shown once.\n\n\nFor both infopanels, we want to suppress (blacklist) their display on www.mozilla.org where another UITour might be active -- this avoids these panels dueling with panels from past/future UITours. EG, if you're on a tour page that has opened the Hello panel, it would be really confusing to also have one of this bug's infopanels open at the same time (or to cause the Hello panel to close).\n\n\nOne edge case: If the user is on a blacklisted page, and clicks the Reader View button (without having seen the infopanel), we should ideally set the pref to avoid showing the infopanel that promotes the button (since they've clearly already discovered it themselves). But, just to be clear, if they're on a readable-but-blacklisted page and they do _not_ click the button, we'd still want to show the infopanel on the first non-blacklisted page (since they clearly haven't discovered the button!).",
    "authour" : "dolske@mozilla.com",
    "created" : "2015-02-19T02:22:35Z"
  }, {
    "text" : "Matt: did you want to have this blacklist talk to UITour to see if the page is currently using UITour, or just globally blacklist all the pages that are able to (potentially) access UITour? The latter might be simpler, and since we'd just be deferring the infopanel until the user visits a non-mozilla.org page, having an overly broad blacklist isn't a big deal.",
    "authour" : "dolske@mozilla.com",
    "created" : "2015-02-19T02:25:16Z"
  }, {
    "text" : "Required for Campaign Release",
    "authour" : "mmucci@mozilla.com",
    "created" : "2015-02-20T19:53:46Z"
  }, {
    "text" : "(In reply to Justin Dolske [:Dolske] from comment #1)\n> Matt: did you want to have this blacklist talk to UITour to see if the page\n> is currently using UITour, or just globally blacklist all the pages that are\n> able to (potentially) access UITour? The latter might be simpler, and since\n> we'd just be deferring the infopanel until the user visits a non-mozilla.org\n> page, having an overly broad blacklist isn't a big deal.\n\nThe latter is probably safer, easier and less fragile. I say safer since we only know a page is using UITour once they call one of the APIs and it's possible that both the page and reader view code race on DOMContentLoaded.\n\nThe code that's attempting to show the info panels for the first time can check the permission manager to see if UITour is allowed (and the page is on HTTPS since UITour isn't allowed on non-HTTPS unless browser.uitour.requireSecure is false). If it's allowed to use UITour, don't show the info panel.",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-02-24T00:19:00Z"
  }, {
    "text" : "The most up to date wireframe for the tour will be found in the nonobsolete attachment in bug 1129536.",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-03-11T00:10:56Z"
  }, {
    "text" : "Michael, can you provide the image that should be in the info panel for \"1. Via detected article\" of this spec, https://bug1129536.bugzilla.mozilla.org/attachment.cgi?id=8574210 ?",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-01T01:13:10Z"
  }, {
    "text" : "Created attachment 8586775\nPatch for Reader View infopanel\n\nThis is without the associated graphic, but I guess we could land that in a follow-up if we don't get it sooner.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-01T14:25:15Z"
  }, {
    "text" : "Created attachment 8586906\nPatch\n\nPatch for panels when Reader View button becomes available the first time and when Reading List is opened the first time",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-01T18:35:01Z"
  }, {
    "text" : "Created attachment 8586909\nPatch v1.1",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-01T18:38:19Z"
  }, {
    "text" : "Jared, I believe Holly created that graphic.",
    "authour" : "mmaslaney@mozilla.com",
    "created" : "2015-04-03T23:55:37Z"
  }, {
    "text" : "Holly, can you provide the graphic mentioned in comment #5?",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-04T00:42:34Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #10)\n> Holly, can you provide the graphic mentioned in comment #5?\n\nSure, Jared. What are the dimension requirements for that area? I'm not sure if my mock-ups are to scale with how the door hangers are built.",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-05T23:21:27Z"
  }, {
    "text" : "(In reply to Holly Habstritt Gaal [:Habber] from comment #11)\n> (In reply to Jared Wein [:jaws] (please needinfo? me) from comment #10)\n> > Holly, can you provide the graphic mentioned in comment #5?\n> \n> Sure, Jared. What are the dimension requirements for that area? I'm not sure\n> if my mock-ups are to scale with how the door hangers are built.\n\nCan you provide them in 48x48 and 96x96px?",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-06T18:35:46Z"
  }, {
    "text" : "Created attachment 8588899\nReaderview_doorhanger_FTE@2x (96x96)",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-07T03:38:01Z"
  }, {
    "text" : "Created attachment 8588901\nReaderview_doorhanger_FTE (48x48)",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-07T03:39:12Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #12)\n> (In reply to Holly Habstritt Gaal [:Habber] from comment #11)\n> > (In reply to Jared Wein [:jaws] (please needinfo? me) from comment #10)\n> > > Holly, can you provide the graphic mentioned in comment #5?\n> > \n> > Sure, Jared. What are the dimension requirements for that area? I'm not sure\n> > if my mock-ups are to scale with how the door hangers are built.\n> \n> Can you provide them in 48x48 and 96x96px?\n\nThere you go, Jared. Could I see a screenshot of the doorhanger once the image is implemented to be sure I exported things for you correctly?",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-07T03:42:29Z"
  }, {
    "text" : "Thanks! Here's a screenshot with the 48x48 icon in it, http://screencast.com/t/d9EELFur8FP",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-07T04:06:18Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #16)\n> Thanks! Here's a screenshot with the 48x48 icon in it,\n> http://screencast.com/t/d9EELFur8FP\n\nI've got that in the wrong panel according to https://bug1129536.bugzilla.mozilla.org/attachment.cgi?id=8574210 but the sizing and positioning of it is what it will look like when it is in the correct panel. The spec shows the graphic relatively larger than in my screenshot, but that just appears to be how the UI Tour panels have been implemented. I did file bug 1150163 about tweaking some of the layout of these panels.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-07T04:12:53Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #17)\n> (In reply to Jared Wein [:jaws] (please needinfo? me) from comment #16)\n> > Thanks! Here's a screenshot with the 48x48 icon in it,\n> > http://screencast.com/t/d9EELFur8FP\n> \n> I've got that in the wrong panel according to\n> https://bug1129536.bugzilla.mozilla.org/attachment.cgi?id=8574210 but the\n> sizing and positioning of it is what it will look like when it is in the\n> correct panel. The spec shows the graphic relatively larger than in my\n> screenshot, but that just appears to be how the UI Tour panels have been\n> implemented. I did file bug 1150163 about tweaking some of the layout of\n> these panels.\n\nThanks! Yea, that does look pretty small and like there could be room for a little bit larger image. How possible is it to use a larger image there? Would we not want to because it isn't to spec, and/or because it is a challenge from a dev perspective to have door hangers display different image sizes (ie: you'd need to create a new style or template).\n\nPerhaps mmaslaney has an opinion on this one since he created the original spec.",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-07T05:25:35Z"
  }, {
    "text" : "Comment on attachment 8586909\nPatch v1.1\n\nReview of attachment 8586909:\n-----------------------------------------------------------------\n\nApologies for the delay due to the public holidays here.\n\nThis doesn't look like it deals with the blacklisting described in comment #0. Was there some reason that was omitted?\n\n::: browser/components/readinglist/sidebar.js\n@@ +98,5 @@\n>  \n> +    let browserWindow = window.QueryInterface(Ci.nsIInterfaceRequestor)\n> +                          .getInterface(Ci.nsIWebNavigation)\n> +                          .QueryInterface(Ci.nsIDocShell).chromeEventHandler\n> +                          .ownerDocument.defaultView;\n\nNit: indentation.\n\n::: browser/components/uitour/UITour.jsm\n@@ +189,5 @@\n>      [\"quit\",        {query: \"#PanelUI-quit\"}],\n> +    [\"readerMode-urlBar\", {query: \"#reader-mode-button\"}],\n> +    [\"readingList-header\", {\n> +      query: \"#sidebar-box[sidebarcommand=readingListSidebar] > #sidebar-header > #sidebar-title\",\n> +      infoPanelPosition: \"rightcenter topleft\",\n\nThis won't work with RTL. Can't you use after_end or similar?",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-07T12:58:22Z"
  }, {
    "text" : "Created attachment 8589193\nPatch v1.2\n\n(In reply to :Gijs Kruitbosch from comment #19)\n> Comment on attachment 8586909\n> Patch v1.1\n> \n> Review of attachment 8586909:\n> -----------------------------------------------------------------\n> \n> Apologies for the delay due to the public holidays here.\n> \n> This doesn't look like it deals with the blacklisting described in comment\n> #0. Was there some reason that was omitted?\n\nSorry, I missed that in comment #0. Instead of adding a blacklist for mozilla.org, I added a check to see if an info-panel was already open. As I understand it, we will want these to open up on a mozilla.org page (bug 1134501).\n\n> ::: browser/components/uitour/UITour.jsm\n> @@ +189,5 @@\n> >      [\"quit\",        {query: \"#PanelUI-quit\"}],\n> > +    [\"readerMode-urlBar\", {query: \"#reader-mode-button\"}],\n> > +    [\"readingList-header\", {\n> > +      query: \"#sidebar-box[sidebarcommand=readingListSidebar] > #sidebar-header > #sidebar-title\",\n> > +      infoPanelPosition: \"rightcenter topleft\",\n> \n> This won't work with RTL. Can't you use after_end or similar?\n\nrightcenter and topleft are flipped for RTL by the code at http://mxr.mozilla.org/mozilla-central/source/layout/xul/nsMenuPopupFrame.cpp#966. I didn't add a comment here because there are other places within UITour.jsm that make reference to these positions, such as loop-roomList.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-07T17:22:01Z"
  }, {
    "text" : "Comment on attachment 8589193\nPatch v1.2\n\nReview of attachment 8589193:\n-----------------------------------------------------------------\n\nGonna re-work how the tour is allowed instead of just checking to see if an info panel is open.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-07T19:17:37Z"
  }, {
    "text" : "Created attachment 8591155\nPatch v1.3",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-11T00:05:00Z"
  }, {
    "text" : "Comment on attachment 8591155\nPatch v1.3\n\n(this applies on top of the patch from bug 1134501)",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-11T00:05:21Z"
  }, {
    "text" : "Comment on attachment 8591155\nPatch v1.3\n\nReview of attachment 8591155:\n-----------------------------------------------------------------\n\nOK, but in this case, there doesn't seem to be anything to prevent this thing from popping up when another panel is open (the thing your previous patch did in lieu of a mechanism to check if showing the panel was blocked/allowed)? Also, there doesn't seem to be any code actually ever setting the pref to true...\n\n::: browser/components/readinglist/sidebar.js\n@@ +74,5 @@\n> +                              .QueryInterface(Ci.nsIDocShell).chromeEventHandler\n> +                              .ownerDocument.defaultView;\n> +    let selectedBrowser = browserWindow.gBrowser.selectedBrowser;\n> +    if (!Services.prefs.getBoolPref(\"browser.readinglist.sidebarEverOpened\") &&\n> +        !selectedBrowser.currentURI.asciiHost.endsWith(\"mozilla.org\")) {\n\nI wonder if selectedBrowser.currentURI is ever null...\n\n::: browser/modules/ReaderParent.jsm\n@@ +159,5 @@\n>        command.setAttribute(\"accesskey\", gStringBundle.GetStringFromName(\"readerView.enter.accesskey\"));\n>      }\n> +\n> +    if (browser.isArticle &&\n> +        !Services.prefs.getBoolPref(\"browser.reader.detectedFirstArticle\") &&\n\nI don't see you setting this pref anywhere, either here or in the other bug...\n\n::: browser/themes/linux/jar.mn\n@@ +93,5 @@\n>    skin/classic/browser/welcome-back.svg                     (../shared/incontent-icons/welcome-back.svg)\n>    skin/classic/browser/readerMode.svg                       (../shared/reader/readerMode.svg)\n>    skin/classic/browser/readinglist/icons.svg          (../shared/readinglist/icons.svg)\n>    skin/classic/browser/readinglist/readinglist-icon.svg (../shared/readinglist/readinglist-icon.svg)\n> +  skin/classic/browser/readinglist/readinglist-tour.png     (../shared/readinglist/readinglist-tour.png)\n\nNo hidpi image? :-(",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-11T23:11:01Z"
  }, {
    "text" : "Created attachment 8591996\nPatch v1.4\n\nThanks, setting the pref now. I didn't add a check to see if we're showing a UITour panel already since this won't show them if it is on mozilla.org. The UITour API doesn't allow to specify multiple images (hidpi vs 1x dpi) so I'm only providing the hidpi image and letting it downscale for regular dpi.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-14T00:34:56Z"
  }, {
    "text" : "Comment on attachment 8591996\nPatch v1.4\n\nReview of attachment 8591996:\n-----------------------------------------------------------------\n\nThis would be r+, but:\n\n(In reply to (behind on reviews) Jared Wein [:jaws] (please needinfo? me) from comment #25)\n> Created attachment 8591996\n> Patch v1.4\n> \n> Thanks, setting the pref now. I didn't add a check to see if we're showing a\n> UITour panel already since this won't show them if it is on mozilla.org.\n\nI don't understand what you mean here. In particular, what are \"this\" and \"them\" ? Initially, I thought you might mean that \"this patch\" won't show \"the reading list / reader mode info panels\" on mozilla.org, but the patch seems to *only* show them on mozilla.org, unless I'm misreading it? (always possible!)\n\nCan you clarify and adjust and/or re-request review?\n\n\n> The\n> UITour API doesn't allow to specify multiple images (hidpi vs 1x dpi) so I'm\n> only providing the hidpi image and letting it downscale for regular dpi.\n\nAh, ok, wfm.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-14T09:58:57Z"
  }, {
    "text" : "Created attachment 8593512\nPatch v1.5\n\nFixed issues and rebased on top of bug 1134501.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-16T18:23:09Z"
  }, {
    "text" : "https://treeherder.mozilla.org/#/jobs?repo=try&revision=f078fdd35a47",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-16T18:23:23Z"
  }, {
    "text" : "Comment on attachment 8593512\nPatch v1.5\n\nReview of attachment 8593512:\n-----------------------------------------------------------------\n\nr=me once you re-add the image and all the jar.mn changes from the previous patch.\n\nCAUTION: if/when this is uplifted, PLEASE make sure you fix the windows parts to include the image in the aero part of the jar.mn as well. :-)",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-16T20:20:43Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #29)\n> r=me once you re-add the image and all the jar.mn changes from the previous\n> patch.\n\nThe image and jar.mn changes were landed in bug 1134501.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-16T20:48:37Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #30)\n> (In reply to :Gijs Kruitbosch from comment #29)\n> > r=me once you re-add the image and all the jar.mn changes from the previous\n> > patch.\n> \n> The image and jar.mn changes were landed in bug 1134501.\n\nD'oh. I looked in MXR, it clearly hadn't been updated yet.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-16T21:44:33Z"
  }, {
    "text" : "Created attachment 8594163\nPatch for check-in",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-17T20:37:19Z"
  }, {
    "text" : "Just met with Cory and Holly about UITour -- some of this patch will no longer be needed, because there won't be a reading list sidebar. But we do want to keep the infopanel to point out the reader view button the first time it appears in the url bar.\n\nTwo further changes, though:\n* We want to swap the strings with a later panel, which will be more appropriate to just having Reader View but no Reader List\n* We want to update the image in the panel because there's no Reader List \"+\" button.",
    "authour" : "dolske@mozilla.com",
    "created" : "2015-04-17T23:00:54Z"
  }, {
    "text" : "NI Holly for the updated icon.\n\nMatt said he can finish this patch since he has context, and Jared's picking up the Pocket work.",
    "authour" : "dolske@mozilla.com",
    "created" : "2015-04-17T23:03:34Z"
  }, {
    "text" : "Created attachment 8594261\nPatch v1.7 - Subset of 1.6 with changes to referenced strings (still needs image swap)\n\nWe're switching to using the strings from a later tour step since they don't reference the reading list.\n\nThis still needs the 2 images from Holly swapped to remove the plus icon.",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-04-17T23:39:08Z"
  }, {
    "text" : "Created attachment 8594721\nReader View intro door hanger image 1x",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-20T11:56:19Z"
  }, {
    "text" : "Created attachment 8594722\nReader View intro door hanger image @2x",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-20T11:57:08Z"
  }, {
    "text" : "(In reply to Matthew N. [:MattN] from comment #35)\n> Created attachment 8594261\n> Patch v1.7 - Subset of 1.6 with changes to referenced strings (still needs\n> image swap)\n> \n> We're switching to using the strings from a later tour step since they don't\n> reference the reading list.\n> \n> This still needs the 2 images from Holly swapped to remove the plus icon.\n\nI attached the door hanger images in the requested size. However, per comment 16 and comment 17, is it possible to implement a larger, more readable image in this space? If that it is possible to do so, I can attach new assets.",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-20T12:01:08Z"
  }, {
    "text" : "(In reply to Holly Habstritt Gaal [:Habber] from comment #38)\n> I attached the door hanger images in the requested size. However, per\n> comment 16 and comment 17, is it possible to implement a larger, more\n> readable image in this space? If that it is possible to do so, I can attach\n> new assets.\n\nThey were always 48x48px AFAIK (I believe according to spec) and I'd rather not change that in this bug. The images you uploaded aren't the exact proper dimensions so they would get stretched. Could you attach ones that are 48x48 and 96x96?",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-04-21T18:40:26Z"
  }, {
    "text" : "(In reply to Matthew N. [:MattN] from comment #39)\n> (In reply to Holly Habstritt Gaal [:Habber] from comment #38)\n> > I attached the door hanger images in the requested size. However, per\n> > comment 16 and comment 17, is it possible to implement a larger, more\n> > readable image in this space? If that it is possible to do so, I can attach\n> > new assets.\n> \n> They were always 48x48px AFAIK (I believe according to spec) and I'd rather\n> not change that in this bug. The images you uploaded aren't the exact proper\n> dimensions so they would get stretched. Could you attach ones that are 48x48\n> and 96x96?\n\nI thought that was max size, not exact dimensions. I'll attache new assets.",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-28T22:33:41Z"
  }, {
    "text" : "Created attachment 8598967\nReader view intro door hanger @2x.png",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-28T22:34:40Z"
  }, {
    "text" : "Created attachment 8598968\nReader view intro door hanger.png",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-28T22:35:35Z"
  }, {
    "text" : "Created attachment 8599442\nPatch v1.8 - Subset of 1.6 with changes to referenced strings with image swap\n\nThanks Holly.\n\nIn testing this I realized there is more work to do since it doesn't handle hiding of the info panel when the reader icon disappears (e.g. via back-forward navigation) and this causes the panel to appear at unusual locations. This is another case where bug 1109868 would make this painless.",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-04-29T19:00:43Z"
  }, {
    "text" : "(In reply to Matthew N. [:MattN] from comment #43)\n> Created attachment 8599442\n> Patch v1.8 - Subset of 1.6 with changes to referenced strings with image swap\n> \n> Thanks Holly.\n> \n> In testing this I realized there is more work to do since it doesn't handle\n> hiding of the info panel when the reader icon disappears (e.g. via\n> back-forward navigation) and this causes the panel to appear at unusual\n> locations. This is another case where bug 1109868 would make this painless.\n\nThanks for the update, Matt. Any concerns of this and bug 1109868 landing in 38.1?",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-29T19:15:18Z"
  }, {
    "text" : "(In reply to Holly Habstritt Gaal [:Habber] from comment #44)\n> Thanks for the update, Matt. Any concerns of this and bug 1109868 landing in\n> 38.1?\n\nBug 1109868 is going to be too risky for 38 so we're going to have to implement another workaround for that bug :( It should still be do-able for 38.0.5.",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-04-29T19:16:33Z"
  }, {
    "text" : "Created attachment 8599550\nPatch v2 - Handle the anchor disappearing and add tests\n\nNow with tests!\n\nTry push: https://treeherder.mozilla.org/#/jobs?repo=try&revision=175a4601a0a4",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-04-29T22:00:29Z"
  }, {
    "text" : "Comment on attachment 8599550\nPatch v2 - Handle the anchor disappearing and add tests\n\nReview of attachment 8599550:\n-----------------------------------------------------------------\n\n::: browser/base/content/test/general/browser_readerMode.js\n@@ +31,5 @@\n>    // Set required test prefs.\n>    TEST_PREFS.forEach(([name, value]) => {\n>      Services.prefs.setBoolPref(name, value);\n>    });\n> +  Services.prefs.setBoolPref(\"browser.reader.detectedFirstArticle\", false);\n\nShould we set this pref to `true` for the test suite so that the UI Tour doesn't get triggered if a different test loads a page that is \"readerable\"?\n\n::: browser/modules/ReaderParent.jsm\n@@ +244,5 @@\n>      let targetPromise = UITour.getTarget(win, \"readerMode-urlBar\");\n>      targetPromise.then(target => {\n>        let browserBundle = Services.strings.createBundle(\"chrome://browser/locale/browser.properties\");\n> +      let icon = \"chrome://browser/skin/\";\n> +      if (AppConstants.platform == \"macosx\" && win.devicePixelRatio > 1) {\n\nWindows is migrating to using @2x images also, so I'd like us to leave the platform detection out of this and just check the dppx.\n\n::: browser/themes/osx/jar.mn\n@@ +145,5 @@\n>    skin/classic/browser/session-restore.svg            (../shared/incontent-icons/session-restore.svg)\n>    skin/classic/browser/tab-crashed.svg                (../shared/incontent-icons/tab-crashed.svg)\n>    skin/classic/browser/welcome-back.svg               (../shared/incontent-icons/welcome-back.svg)\n>    skin/classic/browser/reader-tour.png                (../shared/reader/reader-tour.png)\n> +  skin/classic/browser/reader-tour@2x.png             (../shared/reader/reader-tour@2x.png)\n\nCan you add this to linux and windows, as well as the related CSS for the @2x image?",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-30T02:20:14Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/6404e6d64787",
    "authour" : "pulsebot@bots.tld",
    "created" : "2015-04-30T20:59:28Z"
  }, {
    "text" : "Created attachment 8600082\nPatch v2.1 for uplift - Address comments. r=jaws/Gijs\n\nApproval Request Comment\n[Feature/regressing bug #]: Panel to introduce the Reader View feature in 38.0.5\n[User impact if declined]: Users won't be introduce to Reader View\n[Describe test coverage new/current, TreeHerder]: b-c test\n[Risks and why]: Low risk, one-time panel with a pref\n[String/UUID change made/needed]: None. Strings were pre-landed\n\nThis needs to land on 38.0.5 but I'm not sure what the proper branches and stuff are so please correct the flags.",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-04-30T21:24:32Z"
  }, {
    "text" : "For QE: This can land on 38.0.0 but it shouldn't appear since my understanding is that reader.parse-on-load.enabled will be false on that version. We only want to introduce this feature for 38.0.5 and later.\n\nThe panel should appear once and then toggle browser.reader.detectedFirstArticle to true to remember that it shouldn't show the panel again.",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-04-30T21:51:05Z"
  }, {
    "text" : "The 38.0.5 flag is enough for this",
    "authour" : "sledru@mozilla.com",
    "created" : "2015-05-01T10:06:45Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/6404e6d64787",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-05-01T14:36:49Z"
  }, {
    "text" : "Confirmed fixed on Nightly 40.0a1 (2015-05-03), using Windows 7 (x64), Ubuntu 14.04 (x64) and Mac OS X 10.9.5. \n\nTesting was performed with and without e10s, with 4 new bugs found and filed: Bug 1161014, Bug 1161017, Bug 1161018 and Bug 1161022.",
    "authour" : "andrei.vaida@softvision.ro",
    "created" : "2015-05-04T13:06:02Z"
  }, {
    "text" : "Lots of conflicts on Aurora. Note there's a pretty good backlog of 38.0.5 uplifts at the moment due to various conflicts.",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-05-04T15:59:49Z"
  }, {
    "text" : "It still applies cleanly to me with no fuzz on Aurora tip.",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-05-04T20:17:49Z"
  }, {
    "text" : "Probably because Margaret uplifted bug 1154028 in the mean time :)",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-05-04T20:19:21Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-aurora/rev/20bcf9c3e9b7",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-05-05T02:03:23Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-release/rev/f53c601dafa3",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-05-05T02:33:06Z"
  }, {
    "text" : "I verified this bug using the following environment:\n\nFF 38.0.5\nBuild Id:20150511143336\nOS: Win 7 x64, Mac Os X 10.9.5, Ubuntu 14.04 x86",
    "authour" : "catalin.varga@softvision.ro",
    "created" : "2015-05-13T12:50:37Z"
  }, {
    "text" : "Removing qe-verify flag as verification on Firefox 38.0.5 and 40 should suffice.",
    "authour" : "florin.mezei@softvisioninc.eu",
    "created" : "2015-05-13T14:01:49Z"
  } ],
  "status" : "VERIFIED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-31T21:41:36Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-05-01T14:36:49Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-05-04T13:06:02Z",
      "what" : "status",
      "removed" : "RESOLVED",
      "added" : "",
      "type" : "VERIFIED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-05-01T14:36:49Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "dolske@mozilla.com",
      "date" : "2015-02-19T02:25:16Z",
      "what" : "cc",
      "removed" : "",
      "added" : "MattN+bmo@mozilla.com"
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-02-19T02:28:16Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1132951"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-20T19:53:46Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmucci@mozilla.com"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-20T19:53:46Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1132074"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-25T00:23:07Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "5"
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-03-05T00:39:17Z",
      "what" : "priority",
      "removed" : "--",
      "added" : "P1"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-03-12T07:51:43Z",
      "what" : "cc",
      "removed" : "",
      "added" : "andrei.vaida@softvision.ro"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-03-12T07:51:43Z",
      "what" : "qa_contact",
      "removed" : "",
      "added" : "andrei.vaida@softvision.ro"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-31T21:41:36Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-31T21:41:36Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-03-31T21:43:01Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "40.1 - 13 Apr"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-01T01:13:10Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmaslaney@mozilla.com"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-01T14:25:15Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bmcbride@mozilla.com"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-01T18:35:01Z",
      "what" : "attachments.isobsolete:8586775",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-01T18:38:19Z",
      "what" : "attachments.isobsolete:8586906",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-03T18:47:47Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gijskruitbosch+bugs@gmail.com"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-04T00:42:34Z",
      "what" : "cc",
      "removed" : "",
      "added" : "hhabstritt.bugzilla@gmail.com"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-06T20:38:29Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[reader-ui]"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-07T17:22:01Z",
      "what" : "attachments.isobsolete:8586909",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-11T00:05:00Z",
      "what" : "attachments.isobsolete:8589193",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-14T00:34:56Z",
      "what" : "attachments.isobsolete:8591155",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-04-14T12:52:40Z",
      "what" : "cf_fx_iteration",
      "removed" : "40.1 - 13 Apr",
      "added" : "40.2 - 27 Apr"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-16T18:23:09Z",
      "what" : "attachments.isobsolete:8591996",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-17T20:37:19Z",
      "what" : "attachments.isobsolete:8593512",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-17T20:37:29Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-04-17T23:00:54Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-17T23:39:08Z",
      "what" : "attachments.isobsolete:8566349",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-17T23:39:08Z",
      "what" : "attachments.isobsolete:8588899",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-17T23:39:08Z",
      "what" : "attachments.isobsolete:8588901",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-17T23:39:08Z",
      "what" : "attachments.isobsolete:8594163",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-17T23:39:50Z",
      "what" : "summary",
      "removed" : "Implement infopanels to promote Reader View / Reading List when first seen",
      "added" : "Implement infopanel to promote Reader View when first available"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-04-28T14:32:28Z",
      "what" : "cf_fx_iteration",
      "removed" : "40.2 - 27 Apr",
      "added" : "40.3 - 11 May"
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-04-28T22:34:40Z",
      "what" : "attachments.isobsolete:8594722",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-04-28T22:35:35Z",
      "what" : "attachments.isobsolete:8594721",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-29T19:00:43Z",
      "what" : "attachments.isobsolete:8594261",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-29T22:00:29Z",
      "what" : "attachments.isobsolete:8599442",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-29T22:00:29Z",
      "what" : "assigned_to",
      "removed" : "jaws@mozilla.com",
      "added" : "MattN+bmo@mozilla.com"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-30T21:01:19Z",
      "what" : "whiteboard",
      "removed" : "[reader-ui]",
      "added" : "[reader-ui][fixed-in-fx-team]"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-30T21:24:32Z",
      "what" : "attachments.isobsolete:8599550",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-30T21:25:28Z",
      "what" : "cf_status_firefox37",
      "removed" : "---",
      "added" : "unaffected"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-30T21:25:28Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "unaffected"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-30T21:25:28Z",
      "what" : "cf_status_firefox38_0_5",
      "removed" : "---",
      "added" : "affected"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-30T21:25:28Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "affected"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-30T21:25:28Z",
      "what" : "cf_status_firefox40",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-30T21:51:05Z",
      "what" : "cf_status_firefox38",
      "removed" : "unaffected",
      "added" : "affected"
    }, {
      "name" : "sledru@mozilla.com",
      "date" : "2015-05-01T10:06:45Z",
      "what" : "cc",
      "removed" : "",
      "added" : "sledru@mozilla.com"
    }, {
      "name" : "sledru@mozilla.com",
      "date" : "2015-05-01T10:06:45Z",
      "what" : "cf_status_firefox38",
      "removed" : "affected",
      "added" : "unaffected"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-05-01T14:36:49Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 40"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-05-01T14:36:49Z",
      "what" : "whiteboard",
      "removed" : "[reader-ui][fixed-in-fx-team]",
      "added" : "[reader-ui]"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-05-01T14:36:49Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-05-01 07:36:49"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-05-04T12:31:17Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1161014"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-05-04T12:41:19Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1161017"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-05-04T12:48:47Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1161018"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-05-04T13:01:21Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1161022"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-05-04T13:06:02Z",
      "what" : "cf_status_firefox40",
      "removed" : "fixed",
      "added" : "verified"
    }, {
      "name" : "vaibhavmagarwal@gmail.com",
      "date" : "2015-05-04T15:32:07Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1161073"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-05-04T17:08:46Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1160584"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-05-04T20:17:49Z",
      "what" : "cc",
      "removed" : "",
      "added" : "ryanvm@gmail.com"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-05-04T20:19:21Z",
      "what" : "cc",
      "removed" : "ryanvm@gmail.com",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-05-05T02:03:23Z",
      "what" : "cf_status_firefox39",
      "removed" : "affected",
      "added" : "fixed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-05-05T13:15:01Z",
      "what" : "cf_status_firefox38_0_5",
      "removed" : "affected",
      "added" : "fixed"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-05-11T12:07:36Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1163526"
    }, {
      "name" : "catalin.varga@softvision.ro",
      "date" : "2015-05-13T12:50:37Z",
      "what" : "cc",
      "removed" : "",
      "added" : "catalin.varga@softvision.ro"
    }, {
      "name" : "catalin.varga@softvision.ro",
      "date" : "2015-05-13T12:50:37Z",
      "what" : "cf_status_firefox38_0_5",
      "removed" : "fixed",
      "added" : "verified"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-05-13T14:01:49Z",
      "what" : "cc",
      "removed" : "",
      "added" : "florin.mezei@softvisioninc.eu"
    } ],
    "flagEvents" : [ {
      "name" : "dolske@mozilla.com",
      "date" : "2015-02-19T02:25:16Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-20T19:53:46Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "BACKLOG",
        "state" : "GRANTED"
      }, {
        "status" : "QE_VERIFY",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-02-24T00:19:00Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(MattN+bmo@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-03-12T07:51:43Z",
      "what" : "flagtypes.name",
      "removed" : "qe-verify?",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "QE_VERIFY",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-01T01:13:10Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-01T14:25:15Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8586775,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-01T18:35:01Z",
      "what" : "flagtypes.name",
      "removed" : "review?(bmcbride@mozilla.com)",
      "added" : "",
      "attachmentId" : 8586775,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-01T18:35:01Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8586906,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-01T18:38:19Z",
      "what" : "flagtypes.name",
      "removed" : "review?(bmcbride@mozilla.com)",
      "added" : "",
      "attachmentId" : 8586906,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-01T18:38:19Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8586909,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-03T18:47:47Z",
      "what" : "flagtypes.name",
      "removed" : "review?(bmcbride@mozilla.com)",
      "added" : "",
      "attachmentId" : 8586909,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mmaslaney@mozilla.com",
      "date" : "2015-04-03T23:55:37Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(mmaslaney@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-04T00:42:34Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-04-05T23:21:27Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(hhabstritt.bugzilla@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-06T18:35:46Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-04-07T03:38:01Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(hhabstritt.bugzilla@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-04-07T05:25:35Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-07T12:58:22Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : 8586909,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-07T17:17:07Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(mmaslaney@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-07T17:22:01Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8589193,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-07T19:17:37Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : 8589193,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-11T00:05:00Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591155,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-11T23:11:01Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : 8591155,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-14T00:34:56Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591996,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-14T09:58:57Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : 8591996,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-16T18:23:09Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8593512,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-16T20:20:43Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : 8593512,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-04-17T23:03:34Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-17T23:39:08Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8594261,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-18T07:20:24Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : 8594261,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-04-20T11:56:19Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(hhabstritt.bugzilla@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-21T18:40:26Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-04-28T22:33:41Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(hhabstritt.bugzilla@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-29T22:00:29Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8599550,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-30T02:20:14Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : 8599550,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-30T21:01:19Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-30T21:24:32Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8600082,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      }, {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      }, {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      }, {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "sledru@mozilla.com",
      "date" : "2015-05-03T16:21:36Z",
      "what" : "flagtypes.name",
      "removed" : "approval-mozilla-aurora?, approval-mozilla-beta?",
      "added" : "",
      "attachmentId" : 8600082,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      }, {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-05-04T20:17:49Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-05-04T20:19:21Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(ryanvm@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-05-13T14:01:49Z",
      "what" : "flagtypes.name",
      "removed" : "qe-verify+",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134507,
  "cclist" : [ "andrei.vaida@softvision.ro", "blair@theunfocused.net", "catalin.varga@softvision.ro", "florin.mezei@softvisioninc.eu", "gijskruitbosch+bugs@gmail.com", "hhabstritt.bugzilla@gmail.com", "jaws@mozilla.com", "MattN+bmo@mozilla.com", "mmaslaney@mozilla.com", "mmucci@mozilla.com", "sledru@mozilla.com" ]
}, {
  "component" : "Tours",
  "summary" : "Add API's to move page into Reader View, and force show Reader View icon",
  "reporter" : "dolske@mozilla.com",
  "assigned" : "jaws@mozilla.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "P1",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "UITour should have a function to allow a tour page to enable Reader View on itself. This allows having a snippet, shared link, or general product page that can start a simple in-product tour, with info panels pointing out salient features of Reader Mode and Reading List.\n\nTwo additional details:\n\n* This function should ensure that the Reading List sidebar is enabled upon entering Reader View -- it is normally shown anyway upon entering Reader View for the first time, but we want to make sure it's _always_ shown for tour pages, since they'll be pointing out features in the sidebar.\n\n* Upon entering Reader View, the first in-product tour infopanel (from bug 1134497) should be shown.",
  "comments" : [ {
    "text" : "UITour should have a function to allow a tour page to enable Reader View on itself. This allows having a snippet, shared link, or general product page that can start a simple in-product tour, with info panels pointing out salient features of Reader Mode and Reading List.\n\nTwo additional details:\n\n* This function should ensure that the Reading List sidebar is enabled upon entering Reader View -- it is normally shown anyway upon entering Reader View for the first time, but we want to make sure it's _always_ shown for tour pages, since they'll be pointing out features in the sidebar.\n\n* Upon entering Reader View, the first in-product tour infopanel (from bug 1134497) should be shown.",
    "authour" : "dolske@mozilla.com",
    "created" : "2015-02-19T01:49:54Z"
  }, {
    "text" : "Required for Campaign Release",
    "authour" : "mmucci@mozilla.com",
    "created" : "2015-02-20T19:52:51Z"
  }, {
    "text" : "Additional update from today's meeting: we'd like an argument to allow triggering the infopanels (from bug 1134497), even if they've previously seen them. That way opening this page, which is essentially a UITour page, can show these useful panels.",
    "authour" : "dolske@mozilla.com",
    "created" : "2015-02-23T22:35:15Z"
  }, {
    "text" : "Per a discussion with :MattN today, it was decided it would be more efficient for the product to force the page into Reader View rather than create API's to allow UITour to execute.\n\nIn bug1136570comment8 it was confirmed that the FTU URL will be stored in a pref.\n\nA possible approach is that if the current URL = the FTU URL in pref, launch Reader View.\n\nNI :Unfocused to confirm that the plan is still to store the URL in a pref (note: FTU URL settled in bug 1134286)\nNI :dolske to review and bring up any concerns with this approach.",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-03-11T23:00:58Z"
  }, {
    "text" : "(In reply to Cory Price [:ckprice] from comment #3)\n> Per a discussion with :MattN today, it was decided it would be more\n> efficient for the product to force the page into Reader View rather than\n> create API's to allow UITour to execute.\n\nThe reason is that the pre-loaded reading list entry will load in reader view so it won't be able to run JS to trigger reader view via JS.\n\n> A possible approach is that if the current URL = the FTU URL in pref, launch\n> Reader View.\n\nNote that it's not as simple as doing an exact match as the URL will redirect to include a locale and we need to handle all such locales.",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-03-12T01:19:03Z"
  }, {
    "text" : "Comment 3/4 make sense to me.",
    "authour" : "dolske@mozilla.com",
    "created" : "2015-03-17T23:35:29Z"
  }, {
    "text" : "(In reply to Matthew N. [:MattN] from comment #4)\n> > A possible approach is that if the current URL = the FTU URL in pref, launch\n> > Reader View.\n> \n> Note that it's not as simple as doing an exact match as the URL will\n> redirect to include a locale and we need to handle all such locales.\n\nYea, having a similar issue with server-side redirects in bug 1136570.\n\nFor this bug at least, we can have a simpler fix without adding %LOCALE% to the URL, by also including a pattern matching string. I think we probably want that in bug 1136570 too, but that's harder to do for various reasons - here it (should be) much simpler.\n\n\n(In reply to Cory Price [:ckprice] from comment #3)\n> NI :Unfocused to confirm that the plan is still to store the URL in a pref\n\nYes... but for the above reasons, that ends up not being relevant here.\n\nI think what we'll end up doing here is having a pref that stores a list of patterns. If we load a URL that matches a pattern in that list, we auto-open Reader View.",
    "authour" : "blair@theunfocused.net",
    "created" : "2015-03-26T01:41:34Z"
  }, {
    "text" : ":MattN, :Unfocused\n\nWill this override the natural Reader View detection?\n\nWe started development of the page based on the approved design/copy (bug 1132954 comment 9). Some preliminary tests show that the page as it isn't triggering Reader View. \n\n1. When this bug lands, will it automatically triggering Reader View when someone visits regardless of the content?\n2. Is it possible to have this page 'white listed' so that the Reader View icon is always available for it?",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-03-31T15:37:11Z"
  }, {
    "text" : "I'm not really surprised that that page doesn't triggered reader view since it isn't really like an article.\n\nMargaret/Gijs, is there currently a way to force a page into Reader View? Otherwise, is there some markup that will cause the page to be considered appropriate for readability? Can the page hide some article text to trigger reader view?\n\n(In reply to Cory Price [:ckprice] from comment #7)\n> 2. Is it possible to have this page 'white listed' so that the Reader View\n> icon is always available for it?\n\nI think if we have #1 then we will get #2 for free.",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-03-31T18:34:23Z"
  }, {
    "text" : "(In reply to Matthew N. [:MattN] from comment #8)\n> I'm not really surprised that that page doesn't triggered reader view since\n> it isn't really like an article.\n> \n> Margaret/Gijs, is there currently a way to force a page into Reader View?\n> Otherwise, is there some markup that will cause the page to be considered\n> appropriate for readability? Can the page hide some article text to trigger\n> reader view?\n\nRight now we use this `isProbablyReaderable` function to decide whether or not to show the reader view button:\nhttp://mxr.mozilla.org/mozilla-central/source/toolkit/components/reader/ReaderMode.jsm?force=1#70\n\nBut that doesn't actually determine whether or not Readability would succeed or fail. You can attempt to load a page in reader view directly by loading about:reader?url=<foo>. Or if you have the power, you could try calling ReaderParent.toggleReaderMode directly:\nhttp://mxr.mozilla.org/mozilla-central/source/browser/modules/ReaderParent.jsm#162\n\n> (In reply to Cory Price [:ckprice] from comment #7)\n> > 2. Is it possible to have this page 'white listed' so that the Reader View\n> > icon is always available for it?\n> \n> I think if we have #1 then we will get #2 for free.\n\nYes, we could add logic to whitelist this in `isProbablyReaderable`.",
    "authour" : "margaret.leibovic@gmail.com",
    "created" : "2015-03-31T19:07:07Z"
  }, {
    "text" : ":Unfocused - will the FTU page have to pass isProbablyReadable for the functionality described in this bug (forcing into Reader View) to kick in?",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-04-01T22:41:41Z"
  }, {
    "text" : "Created attachment 8587077\nWiP v1\n\nWiP. Needing some time off, so dropping this and attaching WiP for someone else to pick up.",
    "authour" : "blair@theunfocused.net",
    "created" : "2015-04-02T00:07:26Z"
  }, {
    "text" : "Comment on attachment 8587077\nWiP v1\n\n*cough*",
    "authour" : "blair@theunfocused.net",
    "created" : "2015-04-02T00:07:45Z"
  }, {
    "text" : "(In reply to Cory Price [:ckprice] from comment #10)\n> :Unfocused - will the FTU page have to pass isProbablyReadable for the\n> functionality described in this bug (forcing into Reader View) to kick in?\n\nI'll leave this up to whoever ends up picking this up while I'm away (if that happens before I'm back). But my initial thought is that the page won't need to do anything - this will all be handled in Firefox itself. Page just needs to ensure it looks *good* in ReaderView, see comment 9 to force it to test.",
    "authour" : "blair@theunfocused.net",
    "created" : "2015-04-02T00:13:30Z"
  }, {
    "text" : "I'm not sure I have enough context here about how the FTU experience works, but if we're loading a webpage in a tab, the isProbablyReaderable code will automatically kick in, as Blair suggested, as we automatically show the reader view button for any page that we detect as \"probably readerable\" on page load.",
    "authour" : "margaret.leibovic@gmail.com",
    "created" : "2015-04-02T13:29:46Z"
  }, {
    "text" : "(In reply to :Margaret Leibovic from comment #14)\n> I'm not sure I have enough context here about how the FTU experience works,\n> but if we're loading a webpage in a tab, the isProbablyReaderable code will\n> automatically kick in, as Blair suggested, as we automatically show the\n> reader view button for any page that we detect as \"probably readerable\" on\n> page load.\nSee attachment 8574210 for a wireframe of the tour.\n\nBasically, this page will be a background for the tour door hangers. \n\n1. It's not technically an 'article'\n2. Tested and looks okay in Reader View\n3. It probably will not meet the criteria needed for isProbablyReadable\n\nYou can view a demo here: https://www-demo2.allizom.org/en-US/firefox/reading/start/\n\nNote: we had to add lorem copy to trigger the Reader icon for tests.\n\nThe question is will the work being done in this bug bypass the requirement for isProbablyReadable and just move this page into Reader View.\n\nSecondary question is: is it possible to add this page as an exception so the Reader icon will show up regardless of content.",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-04-02T15:59:33Z"
  }, {
    "text" : "(In reply to Cory Price [:ckprice] from comment #15)\n> (In reply to :Margaret Leibovic from comment #14)\n> > I'm not sure I have enough context here about how the FTU experience works,\n> > but if we're loading a webpage in a tab, the isProbablyReaderable code will\n> > automatically kick in, as Blair suggested, as we automatically show the\n> > reader view button for any page that we detect as \"probably readerable\" on\n> > page load.\n> See attachment 8574210 for a wireframe of the tour.\n> \n> Basically, this page will be a background for the tour door hangers. \n> \n> 1. It's not technically an 'article'\n> 2. Tested and looks okay in Reader View\n> 3. It probably will not meet the criteria needed for isProbablyReadable\n> \n> You can view a demo here:\n> https://www-demo2.allizom.org/en-US/firefox/reading/start/\n> \n> Note: we had to add lorem copy to trigger the Reader icon for tests.\n> \n> The question is will the work being done in this bug bypass the requirement\n> for isProbablyReadable and just move this page into Reader View.\n> \n> Secondary question is: is it possible to add this page as an exception so\n> the Reader icon will show up regardless of content.\n\nIt's certainly possible, but I wonder if it isn't easier if you just add 5 sufficiently long paragraphs with a style=\"display: none\" attribute, which IIRC won't be removed by reader mode, so it should stay hidden.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-02T16:02:41Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #16)\n> It's certainly possible, but I wonder if it isn't easier if you just add 5\n> sufficiently long paragraphs with a style=\"display: none\" attribute, which\n> IIRC won't be removed by reader mode, so it should stay hidden.\n\nThanks for the suggestion and something I had not yet tried. I just tested this locally, and while an inline style (style=\"display: none\") does hide the text from a web page, it is still parsed and shown in Reader View.",
    "authour" : "agibson@mozilla.com",
    "created" : "2015-04-02T16:21:34Z"
  }, {
    "text" : "Created attachment 8589263\nPatch\n\nVisiting the page will force Reader Mode on, but clicking the Exit button will cause Reader Mode to get re-entered since the URL still matches. Should we be only forcing entrance on the first visit to this URL?",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-07T20:00:19Z"
  }, {
    "text" : "Thanks Jared - sent you an email, but we can resolve here.\n\n(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #18)\n> the first visit to this URL?\nWhat is the scope here? Tab, session, user, etc?",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-04-08T00:01:02Z"
  }, {
    "text" : "We could do per session (a variable stored in memory) or per profile (a pref in about:config) if we wanted.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-08T14:53:12Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #20)\n> We could do per session (a variable stored in memory) or per profile (a pref\n> in about:config) if we wanted.\nPer session would be preferred. :habber thoughts?",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-04-08T14:59:13Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #20)\n> We could do per session (a variable stored in memory) or per profile (a pref\n> in about:config) if we wanted.\n\nHi Jared. Cory, MattN, Agibson, and I discussed this a bit. Having this be Tab-based would be better than session-based. However, we want to do our best to be sure that when a user clicks on the URL (/reading/start) they receive the intended experience, which is displaying the tour. \n\nGoing with tab-based is better, but results in 2 other cases to solve for. Could we tie this to the action that precedes it? For example, whenever they enter the experience via our URL, the tour always happens. \n- Tab-based wouldn't account for assuring the tour would start again if the user hits their back button, then returns to the page in this same tab (e.g., clicks back button to return to Facebook and clicks the campaign link in their feed). \n- Or toggles the Reader View on and off. \n(:MattN had some ideas for solving for the the first case above.)",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-08T15:55:44Z"
  }, {
    "text" : "The more I think about this, I don't think we should auto-enter Reader Mode. We can have a mozTour API request to put us in to reader mode, and this page can have some text that says \"Click this link to start the tour\" or something like that.\n\nThen clicking on that link will just make the mozTour API call to enter Reader Mode. This seems like the simplest and less-side effect causing route.\n\nThe link will probably still be visible within Reader Mode, but as long as the text is written in such a way it shouldn't be too awkward.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-08T16:24:03Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #23)\n> The more I think about this, I don't think we should auto-enter Reader Mode.\n> We can have a mozTour API request to put us in to reader mode, and this page\n> can have some text that says \"Click this link to start the tour\" or\n> something like that.\nThanks :jaws, we're considering this option. In the meantime, can you answer a few questions:\n\n1. Does the aforementioned mozTour API request already exist? Or will this have to be developed? If it does have to be developed, will it land in RC 38.1?\n\n2. How would this interact with the doorhangers? Would this API also kick off the tour?\n\n3. Will the page have to meet the requirement for isProbablyReaderable to enter Reader View (e.g. x paragraphs with y characters)? Or would the mozTour API bypass this requirement?\n\nThanks",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-04-08T16:42:39Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #23)\n> The more I think about this, I don't think we should auto-enter Reader Mode.\n> We can have a mozTour API request to put us in to reader mode, and this page\n> can have some text that says \"Click this link to start the tour\" or\n> something like that.\n> \n> Then clicking on that link will just make the mozTour API call to enter\n> Reader Mode. This seems like the simplest and less-side effect causing route.\n> \n> The link will probably still be visible within Reader Mode, but as long as\n> the text is written in such a way it shouldn't be too awkward.\n\n(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #23)\n> The more I think about this, I don't think we should auto-enter Reader Mode.\n> We can have a mozTour API request to put us in to reader mode, and this page\n> can have some text that says \"Click this link to start the tour\" or\n> something like that.\n> \n> Then clicking on that link will just make the mozTour API call to enter\n> Reader Mode. This seems like the simplest and less-side effect causing route.\n> \n> The link will probably still be visible within Reader Mode, but as long as\n> the text is written in such a way it shouldn't be too awkward.\n\n\nDoes this solve all of the issues mentioned in commend 22? Just curious since it results in one downside we should consider. In the copy surrounding the promoted link (e.g., on FB or in a snippet), we'll set up the feature and give them the expectation that they can try it by clicking on the link. It presents an extra click for the user to start the tour after landing on the web page. We know with other tours, relying on a user to interact with a CTA in a web page in order to trigger a tour can reduce engagement. However, the technical/scope benefits might outweigh this. \n\nYour suggestion would basically look like this, correct?: \n1. User lands on our web page w/ CTA on page to start tour - http://cl.ly/image/401O3l0h3522 (w/ more padding around the button)\n2. User clicks on CTA which puts page into Reader View and starts tour door hangers.\n\nA positive aspect of your solution allows the user to see the page transition from full stylized web page into Reader View and demonstrate how it works.",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-08T16:51:18Z"
  }, {
    "text" : "(In reply to Cory Price [:ckprice] from comment #24)\n> (In reply to Jared Wein [:jaws] (please needinfo? me) from comment #23)\n> > The more I think about this, I don't think we should auto-enter Reader Mode.\n> > We can have a mozTour API request to put us in to reader mode, and this page\n> > can have some text that says \"Click this link to start the tour\" or\n> > something like that.\n> Thanks :jaws, we're considering this option. In the meantime, can you answer\n> a few questions:\n> \n> 1. Does the aforementioned mozTour API request already exist? Or will this\n> have to be developed? If it does have to be developed, will it land in RC\n> 38.1?\n\nThe mozTour API request is part of the patch that is attached to this bug. It would have to be uplifted to 38.1.\n\n> 2. How would this interact with the doorhangers? Would this API also kick\n> off the tour?\n\nThe API would start up reader mode, which can then in turn kick off the tour based on the other work that is done to start the tour when Reader Mode is entered (via various other bugs).\n\n> 3. Will the page have to meet the requirement for isProbablyReaderable to\n> enter Reader View (e.g. x paragraphs with y characters)? Or would the\n> mozTour API bypass this requirement?\n\nYes, it should still meet this requirement. You may be able to add the \"visually-hidden\" class to the text to trick reader mode in to thinking that the page is readable but not show the text in reader mode, but I'm not sure.\n\n(In reply to Holly Habstritt Gaal [:Habber] from comment #25)\n> Does this solve all of the issues mentioned in commend 22? Just curious\n> since it results in one downside we should consider. In the copy surrounding\n> the promoted link (e.g., on FB or in a snippet), we'll set up the feature\n> and give them the expectation that they can try it by clicking on the link.\n> It presents an extra click for the user to start the tour after landing on\n> the web page. We know with other tours, relying on a user to interact with a\n> CTA in a web page in order to trigger a tour can reduce engagement. However,\n> the technical/scope benefits might outweigh this. \n> \n> Your suggestion would basically look like this, correct?: \n> 1. User lands on our web page w/ CTA on page to start tour -\n> http://cl.ly/image/401O3l0h3522 (w/ more padding around the button)\n> 2. User clicks on CTA which puts page into Reader View and starts tour door\n> hangers.\n\nYeah, that's correct.\n \n> A positive aspect of your solution allows the user to see the page\n> transition from full stylized web page into Reader View and demonstrate how\n> it works.\n\nAnother way to do it might be to draw a huge arrow pointing at the Reader Mode icon in the location bar, after all that is where the user will have to click for every other article on the internet. Using graphics to point to the Reader Mode icon (and text saying to click on the icon) might transition better to the Reader Mode view anyways.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-08T17:06:48Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #23)\n> The more I think about this, I don't think we should auto-enter Reader Mode.\n> We can have a mozTour API request to put us in to reader mode, and this page\n> can have some text that says \"Click this link to start the tour\" or\n> something like that.\n\nThis was the original plan months ago and I agree that it's less complex and magical.\n\n> Then clicking on that link will just make the mozTour API call to enter\n> Reader Mode. This seems like the simplest and less-side effect causing route.\n\nI think the main reason we ended up going with this was because we wanted to handle visiting this page directly in reader view via the reading list entry the same way. As long as we are able to implement what we desire for the tour when clicking a reading list entry which goes directly into reader view (meaning the page can't run JS to call the UITour API then this is fine with me.\n\n\n> The link will probably still be visible within Reader Mode, but as long as\n> the text is written in such a way it shouldn't be too awkward.\n\nDoes reader mode show <button>s? I kinda would hope not so we could look into that too.",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-04-08T17:25:36Z"
  }, {
    "text" : "> Another way to do it might be to draw a huge arrow pointing at the Reader\n> Mode icon in the location bar, after all that is where the user will have to\n> click for every other article on the internet. Using graphics to point to\n> the Reader Mode icon (and text saying to click on the icon) might transition\n> better to the Reader Mode view anyways.\n\nNot a bad idea, but I think we should take this off the table for the following reasons. Positioning of this kind of element is always tricky since the user's viewport is not predictable, so keeping that arrow in the proper position can be a challenge. I'd be much more in favor of the CTA/button triggering the tour. We can also measure the effectiveness/clicks of the button which is an added benefit.",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-08T17:28:45Z"
  }, {
    "text" : "(In reply to Holly Habstritt Gaal [:Habber] from comment #28)\n> Positioning of this kind of element is always tricky\n> since the user's viewport is not predictable\n\nOh, you're definitely right. Thanks for pointing that out!",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-08T18:01:32Z"
  }, {
    "text" : "We could anchor a tour panel there with a button to start the tour.",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-04-08T19:43:16Z"
  }, {
    "text" : "(In reply to Matthew N. [:MattN] from comment #30)\n> We could anchor a tour panel there with a button to start the tour.\n\nThis is a good idea, but it would obscure the page messaging. Let's prioritize having the button embedded in the web page. If that is not possible by 38.1, we'll use a tour panel anchored on the Reader View icon in the location bar as a fallback. \n\nCkprice, is this prioritization ok with you? What do we need resolved to know if the button in the web page is possible? I understand we'd need to figure out strings asap.",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-08T21:06:15Z"
  }, {
    "text" : "RE: button kicking off reader view & ftu via mozTour API\n\n(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #26)\n> The mozTour API request is part of the patch that is attached to this bug.\n> It would have to be uplifted to 38.1.\nI'm a bit concerned with introducing more work to this process. It sounds like _some_ of the functionality for this is complete, but more API work is necessary.\n\n(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #26)\n> Yes, it should still meet this requirement. You may be able to add the\n> \"visually-hidden\" class to the text to trick reader mode in to thinking that\n> the page is readable but not show the text in reader mode, but I'm not sure.\nIt also doesn't help our reader view requirements issue, so we'll have to go back to design/copy regardless for more than just the CTA string.\n\nBasically we're fixing the scope issue, but replacing it with more API work. There's also a possibility that the button CTA/text will show in Reader View as noted by :MattN.\n\nNI jaws - how confident are we that the API work can land for 38.1? Is this significantly more/less work than the original ask in this bug?\nNI margaret - way back in comment 9 you mentioned a whitelist. Could this be an option for 38.1?",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-04-08T21:36:08Z"
  }, {
    "text" : "How about we do it like this:\n1) We add the API for mozTour to request that the page be put in to reader mode. The complexity of this is not too high for us to uplift to 38.1.\n2) The webpage on first-load checks to see if a cookie (or some other mechanism) is present. If not, then it sets the cookie and requests the page be loaded in reader view.\n3) If the user subsequently exits reader view and loads the page, they will not get auto-bounced in to reader view, but some form of button/link on the page can trigger loading reader-view again if the user wishes to restart the tour.\n\nWe will always start the tour if the about:reader?url=special-url is visited.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-09T19:16:07Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #33)\n> How about we do it like this:\nThank you so much for thinking this through!\n\nIf we're building the API and there's no concern with that landing in 38.1 (with some time to test), I think it'd be more appropriate (and simple) to have the user click a button to bring them into Reader View.\n\n1. We will add a button per :habber's suggestion (http://cl.ly/image/401O3l0h3522)\n2. If clicked, we'll use the API to move the user into Reader View \n** Can we hide the <button> copy?\n\nThis would avoid us having to work with cookies and avoid us having to contend with any possible race conditions/odd UX of moving into Reader View on page load.\n\n:agibson - what do you think of this?\n\nI'll close this bug as INVALID once we've decided a direction.\n\n> We will always start the tour if the about:reader?url=special-url is visited.\nNI jaws - Can you elaborate on this comment?",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-04-09T21:40:15Z"
  }, {
    "text" : "(In reply to Cory Price [:ckprice] from comment #34)\n> (In reply to Jared Wein [:jaws] (please needinfo? me) from comment #33)\n> > How about we do it like this:\n> Thank you so much for thinking this through!\n> \n> If we're building the API and there's no concern with that landing in 38.1\n> (with some time to test), I think it'd be more appropriate (and simple) to\n> have the user click a button to bring them into Reader View.\n> \n> 1. We will add a button per :habber's suggestion\n> (http://cl.ly/image/401O3l0h3522)\n> 2. If clicked, we'll use the API to move the user into Reader View \n> ** Can we hide the <button> copy?\n> \n> This would avoid us having to work with cookies and avoid us having to\n> contend with any possible race conditions/odd UX of moving into Reader View\n> on page load.\n> \n> :agibson - what do you think of this?\n> \n> I'll close this bug as INVALID once we've decided a direction.\n> \n> > We will always start the tour if the about:reader?url=special-url is visited.\n> NI jaws - Can you elaborate on this comment?\n\nThis all sounds fine to me. +1 for having the user click a button in the page to enter Reader View. I think this would be a nicer UX overall, as well as being technically simpler.",
    "authour" : "agibson@mozilla.com",
    "created" : "2015-04-10T06:01:37Z"
  }, {
    "text" : "NI jaws\n\nA couple final questions\n\n1. What is required for us to start development on this API? Shall I create a bug and reference this bug?\n2. Can we build the API in such a way that we bypass the isProbablyReaderable requirements? We have the copy passing in en-us (5 paragraphs of 100 characters each), but there are edgecases in other locales that may drop us below the minimum.",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-04-10T16:18:58Z"
  }, {
    "text" : "(In reply to Cory Price [:ckprice] from comment #32)\n\n> NI margaret - way back in comment 9 you mentioned a whitelist. Could this be\n> an option for 38.1?\n\nSorry for the delay here, but it sounds like you and Jared reached a solution that won't require this.\n\n(In reply to Cory Price [:ckprice] from comment #36)\n\n> 2. Can we build the API in such a way that we bypass the\n> isProbablyReaderable requirements? We have the copy passing in en-us (5\n> paragraphs of 100 characters each), but there are edgecases in other locales\n> that may drop us below the minimum.\n\nPerhaps we can support some sort of meta tag that allows developers to specify pages as reader-able? Gijs, what do you think about this?",
    "authour" : "margaret.leibovic@gmail.com",
    "created" : "2015-04-10T18:23:37Z"
  }, {
    "text" : "(In reply to :Margaret Leibovic from comment #37)\n> (In reply to Cory Price [:ckprice] from comment #32)\n> \n> > NI margaret - way back in comment 9 you mentioned a whitelist. Could this be\n> > an option for 38.1?\n> \n> Sorry for the delay here, but it sounds like you and Jared reached a\n> solution that won't require this.\n> \n> (In reply to Cory Price [:ckprice] from comment #36)\n> \n> > 2. Can we build the API in such a way that we bypass the\n> > isProbablyReaderable requirements? We have the copy passing in en-us (5\n> > paragraphs of 100 characters each), but there are edgecases in other locales\n> > that may drop us below the minimum.\n> \n> Perhaps we can support some sort of meta tag that allows developers to\n> specify pages as reader-able? Gijs, what do you think about this?\n\nI mean, it depends what we want to achieve. A meta tag would be universally usable. A UITour API (which is another relatively simple option) would only be available to the websites where we currently want this.\n\n\nOn the one hand, adding non-standard features to the \"web\" part of pages makes me feel a little worried (as well as: do we really want to give sites explicit control over the availability of this part of browser UI?), on the other, adding functionality just for our own web-page that ISTR we have heard interest in from other parties seems wrong, too.\n\ndolske/margaret, thoughts?",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-10T18:40:22Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #38)\n> (In reply to :Margaret Leibovic from comment #37)\n> > (In reply to Cory Price [:ckprice] from comment #32)\n> > \n> > > NI margaret - way back in comment 9 you mentioned a whitelist. Could this be\n> > > an option for 38.1?\n> > \n> > Sorry for the delay here, but it sounds like you and Jared reached a\n> > solution that won't require this.\n> > \n> > (In reply to Cory Price [:ckprice] from comment #36)\n> > \n> > > 2. Can we build the API in such a way that we bypass the\n> > > isProbablyReaderable requirements? We have the copy passing in en-us (5\n> > > paragraphs of 100 characters each), but there are edgecases in other locales\n> > > that may drop us below the minimum.\n> > \n> > Perhaps we can support some sort of meta tag that allows developers to\n> > specify pages as reader-able? Gijs, what do you think about this?\n> \n> I mean, it depends what we want to achieve. A meta tag would be universally\n> usable. A UITour API (which is another relatively simple option) would only\n> be available to the websites where we currently want this.\n> \n> \n> On the one hand, adding non-standard features to the \"web\" part of pages\n> makes me feel a little worried (as well as: do we really want to give sites\n> explicit control over the availability of this part of browser UI?), on the\n> other, adding functionality just for our own web-page that ISTR we have\n> heard interest in from other parties seems wrong, too.\n> \n> dolske/margaret, thoughts?\n\nFor the Fx38 timeframe, a UITour API is probably the safer bet, but I think it would be interesting to explore ways we can let webpages \"support\" reader view.\n\nI'm just not familiar with how the UITour APIs work. Is it possible to create an API to show the button without meddling with our current reader view button logic? I was just thinking that if we do need to change the reader view button logic, it could be worth considering whether we should do something more general, rather than a hack specific to UI tour.",
    "authour" : "margaret.leibovic@gmail.com",
    "created" : "2015-04-10T20:02:28Z"
  }, {
    "text" : "Created attachment 8591072\nPatch v1.1",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-10T21:03:35Z"
  }, {
    "text" : "Created attachment 8591087\nPatch v2",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-10T21:22:44Z"
  }, {
    "text" : "(In reply to :Margaret Leibovic from comment #39)\n> I'm just not familiar with how the UITour APIs work. Is it possible to\n> create an API to show the button without meddling with our current reader\n> view button logic?\n\nI think now that we only send \"yes\" updates and \"no\" updates on pagehide, we can just make the uitour-content bits send a \"yes\" update based on a page telling uitour to do that, or, if this isn't e10s-compatible yet, to set browser.isArticle to true and call updateReaderButtonState or whatever the method is called.\n\nSo yeah, I think we can do this without meddling with the logic.\n\n> I was just thinking that if we do need to change the\n> reader view button logic, it could be worth considering whether we should do\n> something more general, rather than a hack specific to UI tour.\n\nRight. I think the approach I suggested is non-hacky enough to be workable for the issue at hand.\n\n\nThat said, looking at Jared's patch, I think it already does everything required here? The icon might not be visible, but if the page calls the right API / fires the right custom event, the page will go into reader mode. We might, of course, still want to ensure that the icon *is* visible... :ckprice, want to clarify?",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-11T12:13:09Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #42)\n> (In reply to :Margaret Leibovic from comment #39)\n> > I'm just not familiar with how the UITour APIs work. Is it possible to\n> > create an API to show the button without meddling with our current reader\n> > view button logic?\n> \n> I think now that we only send \"yes\" updates and \"no\" updates on pagehide\n\n\nSigh, re-reading, this is confusing. What I meant is:\n\nI think now that we only send \"yes\" updates, and only send \"no\" updates on pagehide (ie when we move from one page to the next), and therefore are guaranteed not to hide the icon again until after the page goes away, ...",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-11T12:14:32Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #42)\n> That said, looking at Jared's patch, I think it already does everything\n> required here? The icon might not be visible, but if the page calls the\n> right API / fires the right custom event, the page will go into reader mode.\n> We might, of course, still want to ensure that the icon *is* visible...\n> :ckprice, want to clarify?\nI think the icon not being visible _may_ be acceptable if we know that the API will still move a user into Reader View even if the page doesn't qualify.\n\nHopefully this will be an edgecase as we've modified copy to meet the requirement of 5 paragraphs of 100 characters or more in en-US (ref bug 1149859 comment 6). The edgecase is ja/zh where we will have 40-50% less characters. All other locales will have more than en-US.\n\n:habber, this sounds okay to me. What do you think?",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-04-13T15:27:09Z"
  }, {
    "text" : "(In reply to Cory Price [:ckprice] from comment #44)\n> (In reply to :Gijs Kruitbosch from comment #42)\n> > That said, looking at Jared's patch, I think it already does everything\n> > required here? The icon might not be visible, but if the page calls the\n> > right API / fires the right custom event, the page will go into reader mode.\n> > We might, of course, still want to ensure that the icon *is* visible...\n> > :ckprice, want to clarify?\n> I think the icon not being visible _may_ be acceptable if we know that the\n> API will still move a user into Reader View even if the page doesn't qualify.\n> \n> Hopefully this will be an edgecase as we've modified copy to meet the\n> requirement of 5 paragraphs of 100 characters or more in en-US (ref bug\n> 1149859 comment 6). The edgecase is ja/zh where we will have 40-50% less\n> characters. All other locales will have more than en-US.\n> \n> :habber, this sounds okay to me. What do you think?\n\nIn the FTE tour we highlight the Reader View icon and extend a doorhanger from it in order to show users where it is. Therefore, the Reader View icon should be visible. (See wireframe mockup http://cl.ly/image/2D2u2K0R2y2E)  \n\nFor the edgecase locales (assuming it's only 3-6 locales that we discussed last week) how would we handle this second door hanger that points to the Reader View icon if the icon is not visible?",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-13T16:15:01Z"
  }, {
    "text" : "Created attachment 8591835\nMozReview Request: bz://1134501/Gijs\n\n/r/7001 - Bug 1134501 - add way for UITour'd page to force-show the reader mode button, r?margaret,jaws\n\nPull down this commit:\n\nhg pull -r 03a24dd7c39af01fe1ad4363404a2f9af7eb2ce0 https://reviewboard-hg.mozilla.org/gecko/",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-13T19:17:42Z"
  }, {
    "text" : "(In reply to Holly Habstritt Gaal [:Habber] from comment #45)\n> For the edgecase locales (assuming it's only 3-6 locales that we discussed\n> last week) how would we handle this second door hanger that points to the\n> Reader View icon if the icon is not visible?\nCould we just remove the highlight? And have the info panel pointing the general area of where the icon would be?",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-04-13T19:21:05Z"
  }, {
    "text" : "^^ :habber",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-04-13T19:21:26Z"
  }, {
    "text" : "(In reply to Cory Price [:ckprice] from comment #48)\n> ^^ :habber\n\nAll of this seemed complicated so I just put up a patch that will let a UITour page trigger the icon.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-13T19:23:36Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #49)\n> (In reply to Cory Price [:ckprice] from comment #48)\n> > ^^ :habber\n> \n> All of this seemed complicated so I just put up a patch that will let a\n> UITour page trigger the icon.\nThanks :gijs\n\nUpdated summary to something more appropriate.",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-04-13T19:28:24Z"
  }, {
    "text" : "Comment on attachment 8591087\nPatch v2\n\nReview of attachment 8591087:\n-----------------------------------------------------------------\n\nI would like to skip using content-UITour for the page load work as it seems this could be handled fully by UITour.jsm which would simplify some of the code.\n\n::: browser/app/profile/firefox.js\n@@ +251,5 @@\n>  pref(\"browser.uitour.requireSecure\", true);\n>  pref(\"browser.uitour.themeOrigin\", \"https://addons.mozilla.org/%LOCALE%/firefox/themes/\");\n>  pref(\"browser.uitour.url\", \"https://www.mozilla.org/%LOCALE%/firefox/%VERSION%/tour/\");\n> +// This is used as a regexp match against the page's URL.\n> +pref(\"browser.uitour.readerViewTrigger\", \"^about:reader?url=https://www.mozilla.org/[^/]+/firefox/reading/start/\");\n\nShouldn't the URL be URL-escaped here or something?\n\n::: browser/components/uitour/UITour-lib.js\n@@ -284,5 @@\n>  })();\n>  \n>  // Make this library Require-able.\n>  if (typeof module !== 'undefined' && module.exports) {\n> -  module.exports = Mozilla.UITour;\n\nWhat changed here?\n\n::: browser/components/uitour/content-UITour.js\n@@ +76,5 @@\n> +    // The ReadingList/ReaderView tour page is expected to run in Reader View,\n> +    // which disables JavaScript on the page. To get around that, we\n> +    // automatically start a pre-defined tour on page load.\n> +    let readerViewPattern = new RegExp(Services.prefs.getCharPref(PREF_READERVIEW_TRIGGER));\n> +    if (readerViewPattern.exec(content.document.documentURI)) {\n\n.test instead of .exec please.\n\nI think this is the wrong place for this code though... why don't we add it in UITour.jsm (parent/chrome-side) and make the browser's own load code trigger a method in UITour.jsm that checks the page URI and then calls the relevant method directly? Cuts out another messaging round-trip, too.\n\n@@ +81,5 @@\n> +      // For simplicity and avoid adding an extra API, just use the existing\n> +      // mozUITour event handling API.\n> +      this.handleAPIEvent({\n> +        detail: {\n> +          action: \"startSubTour\",\n\nI can has tests?",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-13T19:29:53Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #49)\n> (In reply to Cory Price [:ckprice] from comment #48)\n> > ^^ :habber\n> \n> All of this seemed complicated so I just put up a patch that will let a\n> UITour page trigger the icon.\n\nThank you Gijs! It was going to be pretty confusing for some locales to see a doorhanger pointing to an empty space where the icon should be. Since the purpose of this experience is to introduce Reader View and Reading List to users, I think your solution is appropriate.",
    "authour" : "hhabstritt.bugzilla@gmail.com",
    "created" : "2015-04-13T19:40:33Z"
  }, {
    "text" : "Comment on attachment 8591835\nMozReview Request: bz://1134501/Gijs\n\nhttps://reviewboard.mozilla.org/r/6999/#review5819\n\n::: browser/components/uitour/test/browser_UITour_forceReaderMode.js\n(Diff revision 1)\n> +    yield waitForConditionPromise(() => gBrowser.selectedBrowser.isArticle);\n\nMaybe we should add a check to make sure this somehow wasn't already an article before calling forceShowReaderIcon.",
    "authour" : "margaret.leibovic@gmail.com",
    "created" : "2015-04-13T20:19:45Z"
  }, {
    "text" : "Created attachment 8591948\nPatch v2.1\n\nHey, do you see why this is causing the following console message when I run my test?\n\n[JavaScript Error: \"UITour is not defined\" {file: \"chrome://browser/content/browser.js\" line: 14919}]\n\nIf I use the debugger and step through the code that line works. I can only reproduce this error when running the tests, it doesn't show up in the Error Console when running the browser manually.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-13T22:07:09Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #51)\n> ::: browser/components/uitour/UITour-lib.js\n> @@ -284,5 @@\n> >  })();\n> >  \n> >  // Make this library Require-able.\n> >  if (typeof module !== 'undefined' && module.exports) {\n> > -  module.exports = Mozilla.UITour;\n> \n> What changed here?\n\nNothing as far as I can tell. I re-did the same change and that line got changed again. Used BeyondCompare to see if there were any line-ending differences or whitespace differences and couldn't see them either.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-14T00:36:25Z"
  }, {
    "text" : "(In reply to (behind on reviews) Jared Wein [:jaws] (please needinfo? me) from comment #54)\n> Created attachment 8591948\n> Patch v2.1\n> \n> Hey, do you see why this is causing the following console message when I run\n> my test?\n> \n> [JavaScript Error: \"UITour is not defined\" {file:\n> \"chrome://browser/content/browser.js\" line: 14919}]\n> \n> If I use the debugger and step through the code that line works. I can only\n> reproduce this error when running the tests, it doesn't show up in the Error\n> Console when running the browser manually.\n\nI bet that onLocationChange is getting called earlier in the test, or later (while/when the window is being/already torn down) and either the getter is somehow destroyed or the module is unloaded or whatever, and so the UITour object dies.\n\nTo figure out exact specifics, add a !UITour if statement in the onLocationChange handler that dumps a stack, and see where in the log it appears and with what stack.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-14T09:39:40Z"
  }, {
    "text" : "Comment on attachment 8591948\nPatch v2.1\n\nReview of attachment 8591948:\n-----------------------------------------------------------------\n\nNice! This looks pretty good, just some minor suggestions below - that and fixing the error while running the tests and we should be good, I think.\n\n::: browser/app/profile/firefox.js\n@@ +251,5 @@\n>  pref(\"browser.uitour.requireSecure\", true);\n>  pref(\"browser.uitour.themeOrigin\", \"https://addons.mozilla.org/%LOCALE%/firefox/themes/\");\n>  pref(\"browser.uitour.url\", \"https://www.mozilla.org/%LOCALE%/firefox/%VERSION%/tour/\");\n> +// This is used as a regexp match against the page's URL.\n> +pref(\"browser.uitour.readerViewTrigger\", \"^about:reader?url=https%3A%2F%2Fwww.mozilla.org%2F[^/]+%2Ffirefox%2Freading%2Fstart%2F\");\n\nDid you test this? :-)\n\nAlso, because this is a regex, if someone else owns wwwxmozilla.org they could get this to match. :-)\n\nI wonder if it's easier/better/safer to just check for about:reader and then use ReaderMode.getOriginalURL once Margaret finishes off bug 1152121 (she has r+ on the patch, so that should be \"soon\") to get the original URL. Might be more convoluted / more work though. In which case, let me revert to just \"please backslash-escape the '.'s in the domain\" :-)\n\n::: browser/components/uitour/UITour.jsm\n@@ +348,5 @@\n> +  onLocationChange: function(aLocation) {\n> +    // The ReadingList/ReaderView tour page is expected to run in Reader View,\n> +    // which disables JavaScript on the page. To get around that, we\n> +    // automatically start a pre-defined tour on page load.\n> +    let readerViewPattern = new RegExp(Services.prefs.getCharPref(PREF_READERVIEW_TRIGGER));\n\nNit: please cache the regexp version in a lazy getter\nNit: please pass \"i\" as the second param so that the resulting regex is case-insensitive.\n\n::: browser/components/uitour/test/browser.ini\n@@ +32,5 @@\n>  skip-if = e10s # Bug 941428 - UITour.jsm not e10s friendly\n>  [browser_UITour_sync.js]\n>  skip-if = e10s # Bug 941428 - UITour.jsm not e10s friendly\n> +[browser_UITour_toggleReaderMode.js]\n> +skip-if = e10s # Bug 941428 - UITour.jsm not e10s friendly\n\nAfter we're done here we should update all these bug references to bug 1073247 at one point. 941428 is marked fixed, and UITour should work in e10s, but we don't run tests because the tests are busted.\n\n::: browser/components/uitour/test/browser_UITour_toggleReaderMode.js\n@@ +1,1 @@\n> +\"use strict\";\n\nThis file has weird line-ends when I look at the raw diff. Does running dos2unix on this file help?\n\n@@ +14,5 @@\n> +  taskify(function*() {\n> +    ok(!gBrowser.selectedBrowser.currentURI.spec.startsWith(\"about:reader\"), \"Should not be in reader mode at start of test.\");\n> +    gContentAPI.toggleReaderMode();\n> +    yield waitForConditionPromise(() => gBrowser.selectedBrowser.currentURI.spec.startsWith(\"about:reader\"));\n> +    ok(gBrowser.selectedBrowser.currentURI.spec.startsWith(\"about:reader\"), \"Should be in reader mode now.\");\n\nDo we not need to leave reader mode again in order to not mess up subsequent tests?",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-14T09:54:58Z"
  }, {
    "text" : "(In reply to :Margaret Leibovic from comment #53)\n> Comment on attachment 8591835\n> MozReview Request: bz://1134501/Gijs\n> \n> https://reviewboard.mozilla.org/r/6999/#review5819\n> \n> ::: browser/components/uitour/test/browser_UITour_forceReaderMode.js\n> (Diff revision 1)\n> > +    yield waitForConditionPromise(() => gBrowser.selectedBrowser.isArticle);\n> \n> Maybe we should add a check to make sure this somehow wasn't already an\n> article before calling forceShowReaderIcon.\n\nGood call!\n\nremote:   https://hg.mozilla.org/integration/fx-team/rev/9d319ca0f937",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-15T11:02:24Z"
  }, {
    "text" : "https://reviewboard.mozilla.org/r/7001/#review5903\n\nShip It!",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-15T22:30:37Z"
  }, {
    "text" : "Created attachment 8593107\nPatch v2.2\n\nWe don't need to leave Reader View after the test ends because the UITourTest() opens a new tab and then when the test file is done the tab is closed (which implicitly exits reader mode).",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-15T23:14:38Z"
  }, {
    "text" : "Comment on attachment 8593107\nPatch v2.2\n\nGreat, thanks!\n\nr=me assuming you figured out the test issue.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-15T23:19:06Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/9d319ca0f937",
    "authour" : "ananuti@gmail.com",
    "created" : "2015-04-16T02:05:36Z"
  }, {
    "text" : " https://hg.mozilla.org/integration/fx-team/rev/364bc6209cc5",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-04-16T03:47:13Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #63)\n>  https://hg.mozilla.org/integration/fx-team/rev/364bc6209cc5\n\nJetpack says... https://treeherder.mozilla.org/logviewer.html#?job_id=2702229&repo=fx-team\n\nBacked out in https://hg.mozilla.org/integration/fx-team/rev/713fa47e79f4",
    "authour" : "philringnalda@gmail.com",
    "created" : "2015-04-16T05:09:54Z"
  }, {
    "text" : "And also https://treeherder.mozilla.org/logviewer.html#?job_id=2702444&repo=fx-team",
    "authour" : "philringnalda@gmail.com",
    "created" : "2015-04-16T05:11:01Z"
  }, {
    "text" : "And my favorite for the unlikelihood, https://treeherder.mozilla.org/logviewer.html#?job_id=2702788&repo=fx-team (ignore the parsed error about graphserver, that's pretty much always bullshit, it's actually some sort of a tart failure).",
    "authour" : "philringnalda@gmail.com",
    "created" : "2015-04-16T05:15:48Z"
  }, {
    "text" : "Comment on attachment 8593107\nPatch v2.2\n\nReview of attachment 8593107:\n-----------------------------------------------------------------\n\n::: browser/components/uitour/UITour.jsm\n@@ +349,5 @@\n>  \n> +  get _readerViewTriggerRegEx() {\n> +    delete this.readerViewTriggerRegEx;\n> +    let readerViewUITourTrigger = Services.prefs.getCharPref(PREF_READERVIEW_TRIGGER);\n> +    return this._readerViewTriggerRegEx = new RegExp(readerViewUITourTrigger, \"i\");\n\nMissed this, the deleted thing has no _ so I think this then doesn't get set (the logs have \"setting property which only has a getter\" errors).\n\nAnd if calling this getter causes exceptions... I bet it breaks 'stuff'. :-(",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-16T08:44:46Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/f723ff730047",
    "authour" : "pulsebot@bots.tld",
    "created" : "2015-04-16T15:42:36Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/f723ff730047",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-16T20:14:35Z"
  }, {
    "text" : "Comment on attachment 8593107\nPatch v2.2\n\nApproval Request Comment\n[Feature/regressing bug #]: reader mode\n[User impact if declined]: no way for UI tour to force-show reader mode icon\n[Describe test coverage new/current, TreeHerder]: has test!\n[Risks and why]: pretty low, UITour-specific addition\n[String/UUID change made/needed]: nope",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-17T09:15:14Z"
  }, {
    "text" : "Comment on attachment 8591835\nMozReview Request: bz://1134501/Gijs\n\nApproval Request Comment\n[Feature/regressing bug #]: reader mode\n[User impact if declined]: no way to show an info panel in UITour for reader mode\n[Describe test coverage new/current, TreeHerder]: nope\n[Risks and why]: pretty low, UITour only\n[String/UUID change made/needed]: nope\n\n(I seem to have gotten the approval requests the wrong way around for these patches. Sorry.)",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-04-17T09:16:34Z"
  }, {
    "text" : "From talking with Gijs on irc it sounds like uplifting this to aurora won't affect anything directly -- it will just put the code in place for when we want to turn on the UI tour.  On the other hand, I don't think we have any need to uplift these patches if we aren't intending to use them in 38 and 39. \n\nDolske, what do you think?",
    "authour" : "lhenry@mozilla.com",
    "created" : "2015-04-17T20:54:26Z"
  }, {
    "text" : "We won't be shipping Reading List in 38.1, but will be shipping Reading View, which this exposes. What we'll be doing in the tour is a little in flux (bug 1155541), but I think we should go ahead and uplift this so we have it if needed.",
    "authour" : "dolske@mozilla.com",
    "created" : "2015-04-20T03:52:47Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-aurora/rev/cebe7cad65a2",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-20T14:10:45Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-beta/rev/e5d6dc48f6de",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-20T16:05:57Z"
  }, {
    "text" : "I'm a little confused about whether there's something here for manual QA to look at, since the UI tour is going to change, according to Bug 1155541. Setting qe-verify- for now, as this patch is also covered by automated tests - Jared, if you think otherwise, please let me know.",
    "authour" : "andrei.vaida@softvision.ro",
    "created" : "2015-04-29T07:43:22Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #58)\n> (In reply to :Margaret Leibovic from comment #53)\n> > Comment on attachment 8591835\n> > MozReview Request: bz://1134501/Gijs\n> > \n> > https://reviewboard.mozilla.org/r/6999/#review5819\n> > \n> > ::: browser/components/uitour/test/browser_UITour_forceReaderMode.js\n> > (Diff revision 1)\n> > > +    yield waitForConditionPromise(() => gBrowser.selectedBrowser.isArticle);\n> > \n> > Maybe we should add a check to make sure this somehow wasn't already an\n> > article before calling forceShowReaderIcon.\n> \n> Good call!\n> \n> remote:   https://hg.mozilla.org/integration/fx-team/rev/9d319ca0f937\n\nIt looks like this didn't get uplifted. I don't see it in mozilla-release but it is in mozilla-central.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-05-11T21:25:18Z"
  }, {
    "text" : "Just a note that we will not need these API's for 38.0.5 (June 2).\n\nThe UITour has changed a bit for this launch. The required bugs are in bug 1155541.",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-05-11T21:26:57Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #77)\n> (In reply to :Gijs Kruitbosch from comment #58)\n> > (In reply to :Margaret Leibovic from comment #53)\n> > > Comment on attachment 8591835\n> > > MozReview Request: bz://1134501/Gijs\n> > > \n> > > https://reviewboard.mozilla.org/r/6999/#review5819\n> > > \n> > > ::: browser/components/uitour/test/browser_UITour_forceReaderMode.js\n> > > (Diff revision 1)\n> > > > +    yield waitForConditionPromise(() => gBrowser.selectedBrowser.isArticle);\n> > > \n> > > Maybe we should add a check to make sure this somehow wasn't already an\n> > > article before calling forceShowReaderIcon.\n> > \n> > Good call!\n> > \n> > remote:   https://hg.mozilla.org/integration/fx-team/rev/9d319ca0f937\n> \n> It looks like this didn't get uplifted. I don't see it in mozilla-release\n> but it is in mozilla-central.\n\nOK. Per comment #78, do we need to?",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-05-11T21:29:24Z"
  }, {
    "text" : "Comment on attachment 8591835\nMozReview Request: bz://1134501/Gijs\n\nper IRC discussion\n\nApproval Request Comment\n[Feature/regressing bug #]: reader mode and so on\n[User impact if declined]: if we change UITour plans again it won't be on mozilla-release; it makes uplifting other patches more difficult.\n[Describe test coverage new/current, TreeHerder]: has test\n[Risks and why]: low risk because of the test and extended baking\n[String/UUID change made/needed]: no.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-05-11T21:45:32Z"
  }, {
    "text" : "Comment on attachment 8591835\nMozReview Request: bz://1134501/Gijs\n\nAs stated, this fix has been on m-c for a while. We'll take it in 38.0.5.",
    "authour" : "lmandel@mozilla.com",
    "created" : "2015-05-14T17:28:06Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-release/rev/5741ccc7bb74",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-05-14T20:32:33Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-beta/rev/843ba44b7968",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-05-14T20:34:24Z"
  }, {
    "text" : "Comment on attachment 8591835\nMozReview Request: bz://1134501/Gijs",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-06-10T15:35:28Z"
  }, {
    "text" : "Created attachment 8619537\nMozReview Request: Bug 1134501 - add way for UITour'd page to force-show the reader mode button, r?margaret,jaws",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-06-10T15:35:28Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-28T02:55:40Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-04-06T20:52:13Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "NEW"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-07T20:00:19Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-16T20:14:35Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-16T20:14:35Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "dolske@mozilla.com",
      "date" : "2015-02-19T02:28:16Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1132951"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-20T19:52:51Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmucci@mozilla.com"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-20T19:52:51Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1132074"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-25T00:22:30Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "3"
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-03-05T00:36:17Z",
      "what" : "priority",
      "removed" : "--",
      "added" : "P1"
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-03-09T21:51:25Z",
      "what" : "cc",
      "removed" : "",
      "added" : "hhabstritt.bugzilla@gmail.com"
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-03-11T14:33:20Z",
      "what" : "cc",
      "removed" : "",
      "added" : "MattN+bmo@mozilla.com"
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-03-11T23:00:58Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bmcbride@mozilla.com, cprice@mozilla.com, dolske@mozilla.com"
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-03-11T23:00:58Z",
      "what" : "summary",
      "removed" : "UITour: allow a page to enter Reader View",
      "added" : "UITour: force page into Reader View if current URL = FTU URL"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-03-12T07:50:24Z",
      "what" : "cc",
      "removed" : "",
      "added" : "andrei.vaida@softvision.ro"
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-03-12T07:50:24Z",
      "what" : "qa_contact",
      "removed" : "",
      "added" : "andrei.vaida@softvision.ro"
    }, {
      "name" : "blair@theunfocused.net",
      "date" : "2015-03-28T00:44:55Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "39.3 - 30 Mar"
    }, {
      "name" : "blair@theunfocused.net",
      "date" : "2015-03-28T00:44:55Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "bmcbride@mozilla.com"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-03-31T13:19:31Z",
      "what" : "cf_fx_iteration",
      "removed" : "39.3 - 30 Mar",
      "added" : "40.1 - 13 Apr"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-03-31T18:34:23Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gijskruitbosch+bugs@gmail.com, margaret.leibovic@gmail.com"
    }, {
      "name" : "blair@theunfocused.net",
      "date" : "2015-04-02T00:07:45Z",
      "what" : "attachments.description:8587077",
      "removed" : "WuP v1",
      "added" : "WiP v1"
    }, {
      "name" : "agibson@mozilla.com",
      "date" : "2015-04-02T16:21:34Z",
      "what" : "cc",
      "removed" : "",
      "added" : "agibson@mozilla.com"
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-04-03T19:12:50Z",
      "what" : "see_also",
      "removed" : "",
      "added" : "https://bugzilla.mozilla.org/show_bug.cgi?id=1147484"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-06T20:38:13Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-06T20:38:13Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[reader-ui]"
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-04-06T20:46:07Z",
      "what" : "cf_fx_iteration",
      "removed" : "40.1 - 13 Apr",
      "added" : "---"
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-04-06T20:46:07Z",
      "what" : "assigned_to",
      "removed" : "bmcbride@mozilla.com",
      "added" : "nobody@mozilla.org"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-07T20:00:19Z",
      "what" : "attachments.isobsolete:8587077",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-07T20:00:19Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-04-07T20:24:00Z",
      "what" : "cf_fx_iteration",
      "removed" : "---",
      "added" : "40.1 - 13 Apr"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-10T21:03:35Z",
      "what" : "attachments.isobsolete:8589263",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-10T21:22:44Z",
      "what" : "attachments.isobsolete:8591072",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-04-13T19:28:24Z",
      "what" : "summary",
      "removed" : "UITour: force page into Reader View if current URL = FTU URL",
      "added" : "Add API's to move page into Reader View, and force show Reader View icon"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-13T22:07:09Z",
      "what" : "attachments.isobsolete:8591087",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-04-14T12:52:57Z",
      "what" : "cf_fx_iteration",
      "removed" : "40.1 - 13 Apr",
      "added" : "40.2 - 27 Apr"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-15T11:02:24Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "leave-open"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-15T23:14:38Z",
      "what" : "attachments.isobsolete:8591948",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-16T03:47:13Z",
      "what" : "keywords",
      "removed" : "leave-open",
      "added" : ""
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-04-16T05:09:54Z",
      "what" : "cc",
      "removed" : "",
      "added" : "philringnalda@gmail.com"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-16T20:14:35Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 40"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-16T20:14:35Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-04-16 13:14:35"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-16T20:14:35Z",
      "what" : "cf_status_firefox40",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "asqueella@gmail.com",
      "date" : "2015-04-19T20:26:27Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1156114"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-20T14:10:45Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-20T16:05:57Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-23T23:48:03Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1157966"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-30T19:48:09Z",
      "what" : "cf_status_firefox38_0_5",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-05-11T21:28:07Z",
      "what" : "blocks",
      "removed" : "1132074",
      "added" : ""
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-05-11T21:46:08Z",
      "what" : "cf_status_firefox38_0_5",
      "removed" : "fixed",
      "added" : "affected"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-05-14T20:32:33Z",
      "what" : "cf_status_firefox38_0_5",
      "removed" : "affected",
      "added" : "fixed"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-06-10T15:35:28Z",
      "what" : "attachments.isobsolete:8591835",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2017-03-01T05:29:21Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1342462"
    } ],
    "flagEvents" : [ {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-20T19:52:51Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "BACKLOG",
        "state" : "GRANTED"
      }, {
        "status" : "QE_VERIFY",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-03-11T23:00:58Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      }, {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-03-12T07:50:24Z",
      "what" : "flagtypes.name",
      "removed" : "qe-verify?",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "QE_VERIFY",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-03-17T23:35:29Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(dolske@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "blair@theunfocused.net",
      "date" : "2015-03-26T01:41:34Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(bmcbride@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-03-31T15:37:11Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      }, {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-03-31T18:34:23Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(MattN+bmo@mozilla.com), needinfo?(bmcbride@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      }, {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "margaret.leibovic@gmail.com",
      "date" : "2015-03-31T19:07:07Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(margaret.leibovic@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-03-31T19:12:21Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-04-01T22:41:41Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "blair@theunfocused.net",
      "date" : "2015-04-02T00:07:45Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(bmcbride@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-07T20:00:19Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8589263,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-07T21:13:24Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-07T21:13:52Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(cprice@mozilla.com)",
      "added" : "",
      "attachmentId" : 8589263,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-04-08T00:01:02Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(cprice@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-08T14:53:12Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-04-08T14:59:13Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-04-08T15:55:44Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(hhabstritt.bugzilla@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-04-08T15:56:16Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-08T16:24:03Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      }, {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-04-08T16:42:39Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(cprice@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-04-08T16:51:18Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(hhabstritt.bugzilla@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-08T17:06:48Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-08T17:25:36Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(MattN+bmo@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-04-08T21:06:15Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-04-08T21:36:08Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(cprice@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      }, {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-09T19:16:07Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-09T20:10:33Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?",
      "added" : "",
      "attachmentId" : 8589263,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-04-09T21:40:15Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(cprice@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-04-09T21:42:00Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "agibson@mozilla.com",
      "date" : "2015-04-10T06:01:37Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(agibson@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "margaret.leibovic@gmail.com",
      "date" : "2015-04-10T18:23:37Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(margaret.leibovic@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-10T18:40:22Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      }, {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "margaret.leibovic@gmail.com",
      "date" : "2015-04-10T20:02:28Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(margaret.leibovic@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-10T21:03:35Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-10T21:03:35Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591072,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-10T21:09:33Z",
      "what" : "flagtypes.name",
      "removed" : "review?(MattN+bmo@mozilla.com)",
      "added" : "",
      "attachmentId" : 8591072,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-10T21:22:44Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591087,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-11T12:13:09Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-04-13T15:27:09Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(cprice@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "hhabstritt.bugzilla@gmail.com",
      "date" : "2015-04-13T16:15:01Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(hhabstritt.bugzilla@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-13T19:15:06Z",
      "what" : "flagtypes.name",
      "removed" : "review?(MattN+bmo@mozilla.com)",
      "added" : "",
      "attachmentId" : 8591087,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-13T19:17:42Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591835,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-04-13T19:21:26Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-13T19:23:36Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(dolske@mozilla.com), needinfo?(hhabstritt.bugzilla@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-13T19:29:53Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : 8591087,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "margaret.leibovic@gmail.com",
      "date" : "2015-04-13T20:19:45Z",
      "what" : "flagtypes.name",
      "removed" : "review?(margaret.leibovic@gmail.com)",
      "added" : "",
      "attachmentId" : 8591835,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-13T22:07:09Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591948,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-14T09:54:58Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : 8591948,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-04-15T23:14:38Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8593107,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-15T23:19:06Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : 8593107,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-16T08:42:13Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591835,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-16T20:14:35Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-17T09:15:14Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8593107,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      }, {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-04-17T09:16:34Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591835,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      }, {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "lhenry@mozilla.com",
      "date" : "2015-04-17T20:54:26Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-04-20T03:52:47Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(dolske@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-04-20T03:53:06Z",
      "what" : "flagtypes.name",
      "removed" : "approval-mozilla-aurora?, approval-mozilla-beta?",
      "added" : "",
      "attachmentId" : 8591835,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      }, {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-04-20T03:53:16Z",
      "what" : "flagtypes.name",
      "removed" : "approval-mozilla-aurora?, approval-mozilla-beta?",
      "added" : "",
      "attachmentId" : 8593107,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      }, {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "andrei.vaida@softvision.ro",
      "date" : "2015-04-29T07:43:22Z",
      "what" : "flagtypes.name",
      "removed" : "qe-verify+",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "QE_VERIFY",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-05-11T21:25:18Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-05-11T21:29:24Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(gijskruitbosch+bugs@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-05-11T21:45:32Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-05-11T21:45:32Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591835,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "lmandel@mozilla.com",
      "date" : "2015-05-14T17:28:06Z",
      "what" : "flagtypes.name",
      "removed" : "approval-mozilla-release?",
      "added" : "",
      "attachmentId" : 8591835,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-06-10T15:35:28Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8619537,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134501,
  "cclist" : [ "agibson@mozilla.com", "andrei.vaida@softvision.ro", "blair@theunfocused.net", "cbkprice@gmail.com", "dolske@mozilla.com", "gijskruitbosch+bugs@gmail.com", "hhabstritt.bugzilla@gmail.com", "jaws@mozilla.com", "margaret.leibovic@gmail.com", "MattN+bmo@mozilla.com", "mmucci@mozilla.com", "philringnalda@gmail.com" ]
}, {
  "component" : "Developer Tools: Inspector",
  "summary" : "Intermittents browser_animation_toggle_button_updates_playerWidgets.js and browser_animation_ui_updates_when_animation_changes.js | Got pending, expected running",
  "reporter" : "ryanvm@gmail.com",
  "assigned" : "pbrosset@mozilla.com",
  "created" : null,
  "operatingSystem" : "Windows 8.1",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "16:26:12 INFO - 48 INFO TEST-START | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js\n16:26:12 INFO - JavaScript error: resource:///modules/WindowsPreviewPerTab.jsm, line 406: NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsITaskbarTabPreview.invalidate]\n16:26:15 INFO - 1424305573070 Browser.Experiments.Experiments TRACE Experiments #0::enabled=true, true\n16:26:15 INFO - 1424305573071 Browser.Experiments.Experiments TRACE Experiments #0::Registering instance with Addon Manager.\n16:26:15 INFO - 1424305573072 Browser.Experiments.Experiments TRACE Experiments #0::Registering previous experiment add-on provider.\n16:26:15 INFO - 1424305573072 Browser.Experiments.Experiments TRACE PreviousExperimentProvider #0::startup()\n16:26:15 INFO - 1424305573073 Browser.Experiments.Experiments TRACE Experiments #0::_loadFromCache\n16:26:15 INFO - 1424305573078 Browser.Experiments.Experiments TRACE Experiments #0::_loadTask finished ok\n16:26:15 INFO - 1424305573079 Browser.Experiments.Experiments TRACE Experiments #0::_run\n16:26:15 INFO - 1424305573079 Browser.Experiments.Experiments TRACE Experiments #0::_main iteration\n16:26:15 INFO - 1424305573079 Browser.Experiments.Experiments TRACE Experiments #0::_evaluateExperiments\n16:26:15 INFO - 1424305573081 Browser.Experiments.Experiments TRACE Experiments #0::_main finished, scheduling next run\n16:26:17 INFO - 49 INFO checking window state\n16:26:17 INFO - 50 INFO Entering test\n16:26:17 INFO - 51 INFO Adding a new tab with URL: 'http://example.com/browser/browser/devtools/animationinspector/test/doc_simple_animation.html'\n16:26:17 INFO - 52 INFO Loading the helper frame script chrome://mochitests/content/browser/browser/devtools/animationinspector/test/doc_frame_script.js\n16:26:17 INFO - 53 INFO Loading the helper frame script chrome://browser/content/devtools/frame-script-utils.js\n16:26:17 INFO - 54 INFO URL 'http://example.com/browser/browser/devtools/animationinspector/test/doc_simple_animation.html' loading complete\n16:26:17 INFO - 55 INFO Opening the toolbox with the inspector selected\n16:26:17 INFO - 56 INFO Console message: [JavaScript Error: \"NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsITaskbarTabPreview.invalidate]\" {file: \"resource:///modules/WindowsPreviewPerTab.jsm\" line: 406}]\n16:26:17 INFO - 57 INFO Making sure that the toolbox's frame is focused\n16:26:17 INFO - 58 INFO Switching to the animationinspector\n16:26:17 INFO - 59 INFO Waiting for the inspector and sidebar to be ready\n16:26:17 INFO - 60 INFO Waiting for the animation controller and panel to be ready\n16:26:17 INFO - 61 INFO Select an animated node\n16:26:17 INFO - 62 INFO Selecting the node for '.animated'\n16:26:17 INFO - 63 INFO Click the toggle button to pause all animations\n16:26:17 INFO - 64 INFO Console message: 1424305573070 Browser.Experiments.Experiments TRACE Experiments #0::enabled=true, true\n16:26:17 INFO - 65 INFO Console message: 1424305573071 Browser.Experiments.Experiments TRACE Experiments #0::Registering instance with Addon Manager.\n16:26:17 INFO - 66 INFO Console message: 1424305573072 Browser.Experiments.Experiments TRACE Experiments #0::Registering previous experiment add-on provider.\n16:26:17 INFO - 67 INFO Console message: 1424305573072 Browser.Experiments.Experiments TRACE PreviousExperimentProvider #0::startup()\n16:26:17 INFO - 68 INFO Console message: 1424305573073 Browser.Experiments.Experiments TRACE Experiments #0::_loadFromCache\n16:26:17 INFO - 69 INFO Console message: 1424305573078 Browser.Experiments.Experiments TRACE Experiments #0::_loadTask finished ok\n16:26:17 INFO - 70 INFO Console message: 1424305573079 Browser.Experiments.Experiments TRACE Experiments #0::_run\n16:26:17 INFO - 71 INFO Console message: 1424305573079 Browser.Experiments.Experiments TRACE Experiments #0::_main iteration\n16:26:17 INFO - 72 INFO Console message: 1424305573079 Browser.Experiments.Experiments TRACE Experiments #0::_evaluateExperiments\n16:26:17 INFO - 73 INFO Console message: 1424305573081 Browser.Experiments.Experiments TRACE Experiments #0::_main finished, scheduling next run\n16:26:17 INFO - 74 INFO Checking the selected node's animation player widget's state\n16:26:17 INFO - 75 INFO TEST-PASS | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused\n16:26:17 INFO - 76 INFO TEST-PASS | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state\n16:26:17 INFO - 77 INFO Click the toggle button to play all animations\n16:26:17 INFO - 78 INFO Checking the selected node's animation player widget's state again\n16:26:17 INFO - 79 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is running - Got pending, expected running\n16:26:17 INFO - Stack trace:\n16:26:17 INFO - chrome://mochikit/content/browser-test.js:test_is:854\n16:26:17 INFO - chrome://mochitests/content/browser/browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js:null:33\n16:26:17 INFO - self-hosted:InterpretGeneratorResume:702\n16:26:17 INFO - self-hosted:next:610\n16:26:17 INFO - Tester_execTest@chrome://mochikit/content/browser-test.js:670:9\n16:26:17 INFO - Tester.prototype.nextTest</<@chrome://mochikit/content/browser-test.js:595:7\n16:26:17 INFO - SimpleTest.waitForFocus/waitForFocusInner/focusedOrLoaded/<@chrome://mochikit/content/tests/SimpleTest/SimpleTest.js:752:59\n16:26:17 INFO - 80 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in running state -\n16:26:17 INFO - Stack trace:\n16:26:17 INFO - chrome://mochitests/content/browser/browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js:null:34\n16:26:17 INFO - self-hosted:InterpretGeneratorResume:702\n16:26:17 INFO - self-hosted:next:610\n16:26:17 INFO - Tester_execTest@chrome://mochikit/content/browser-test.js:670:9\n16:26:17 INFO - Tester.prototype.nextTest</<@chrome://mochikit/content/browser-test.js:595:7\n16:26:17 INFO - SimpleTest.waitForFocus/waitForFocusInner/focusedOrLoaded/<@chrome://mochikit/content/tests/SimpleTest/SimpleTest.js:752:59\n16:26:17 INFO - 81 INFO Leaving test\n16:26:17 INFO - JavaScript error: resource:///modules/WindowsPreviewPerTab.jsm, line 406: NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsITaskbarTabPreview.invalidate]\n16:26:17 INFO - 82 INFO Console message: [JavaScript Error: \"NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsITaskbarTabPreview.invalidate]\" {file: \"resource:///modules/WindowsPreviewPerTab.jsm\" line: 406}]\n16:26:17 INFO - 83 INFO MEMORY STAT vsize after test: 734273536\n16:26:17 INFO - 84 INFO MEMORY STAT vsizeMaxContiguous after test: 8612065501184\n16:26:17 INFO - 85 INFO MEMORY STAT residentFast after test: 268226560\n16:26:17 INFO - 86 INFO MEMORY STAT heapAllocated after test: 73980992\n16:26:17 INFO - 87 INFO TEST-OK | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | took 5352ms",
  "comments" : [ {
    "text" : "16:26:12 INFO - 48 INFO TEST-START | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js\n16:26:12 INFO - JavaScript error: resource:///modules/WindowsPreviewPerTab.jsm, line 406: NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsITaskbarTabPreview.invalidate]\n16:26:15 INFO - 1424305573070 Browser.Experiments.Experiments TRACE Experiments #0::enabled=true, true\n16:26:15 INFO - 1424305573071 Browser.Experiments.Experiments TRACE Experiments #0::Registering instance with Addon Manager.\n16:26:15 INFO - 1424305573072 Browser.Experiments.Experiments TRACE Experiments #0::Registering previous experiment add-on provider.\n16:26:15 INFO - 1424305573072 Browser.Experiments.Experiments TRACE PreviousExperimentProvider #0::startup()\n16:26:15 INFO - 1424305573073 Browser.Experiments.Experiments TRACE Experiments #0::_loadFromCache\n16:26:15 INFO - 1424305573078 Browser.Experiments.Experiments TRACE Experiments #0::_loadTask finished ok\n16:26:15 INFO - 1424305573079 Browser.Experiments.Experiments TRACE Experiments #0::_run\n16:26:15 INFO - 1424305573079 Browser.Experiments.Experiments TRACE Experiments #0::_main iteration\n16:26:15 INFO - 1424305573079 Browser.Experiments.Experiments TRACE Experiments #0::_evaluateExperiments\n16:26:15 INFO - 1424305573081 Browser.Experiments.Experiments TRACE Experiments #0::_main finished, scheduling next run\n16:26:17 INFO - 49 INFO checking window state\n16:26:17 INFO - 50 INFO Entering test\n16:26:17 INFO - 51 INFO Adding a new tab with URL: 'http://example.com/browser/browser/devtools/animationinspector/test/doc_simple_animation.html'\n16:26:17 INFO - 52 INFO Loading the helper frame script chrome://mochitests/content/browser/browser/devtools/animationinspector/test/doc_frame_script.js\n16:26:17 INFO - 53 INFO Loading the helper frame script chrome://browser/content/devtools/frame-script-utils.js\n16:26:17 INFO - 54 INFO URL 'http://example.com/browser/browser/devtools/animationinspector/test/doc_simple_animation.html' loading complete\n16:26:17 INFO - 55 INFO Opening the toolbox with the inspector selected\n16:26:17 INFO - 56 INFO Console message: [JavaScript Error: \"NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsITaskbarTabPreview.invalidate]\" {file: \"resource:///modules/WindowsPreviewPerTab.jsm\" line: 406}]\n16:26:17 INFO - 57 INFO Making sure that the toolbox's frame is focused\n16:26:17 INFO - 58 INFO Switching to the animationinspector\n16:26:17 INFO - 59 INFO Waiting for the inspector and sidebar to be ready\n16:26:17 INFO - 60 INFO Waiting for the animation controller and panel to be ready\n16:26:17 INFO - 61 INFO Select an animated node\n16:26:17 INFO - 62 INFO Selecting the node for '.animated'\n16:26:17 INFO - 63 INFO Click the toggle button to pause all animations\n16:26:17 INFO - 64 INFO Console message: 1424305573070 Browser.Experiments.Experiments TRACE Experiments #0::enabled=true, true\n16:26:17 INFO - 65 INFO Console message: 1424305573071 Browser.Experiments.Experiments TRACE Experiments #0::Registering instance with Addon Manager.\n16:26:17 INFO - 66 INFO Console message: 1424305573072 Browser.Experiments.Experiments TRACE Experiments #0::Registering previous experiment add-on provider.\n16:26:17 INFO - 67 INFO Console message: 1424305573072 Browser.Experiments.Experiments TRACE PreviousExperimentProvider #0::startup()\n16:26:17 INFO - 68 INFO Console message: 1424305573073 Browser.Experiments.Experiments TRACE Experiments #0::_loadFromCache\n16:26:17 INFO - 69 INFO Console message: 1424305573078 Browser.Experiments.Experiments TRACE Experiments #0::_loadTask finished ok\n16:26:17 INFO - 70 INFO Console message: 1424305573079 Browser.Experiments.Experiments TRACE Experiments #0::_run\n16:26:17 INFO - 71 INFO Console message: 1424305573079 Browser.Experiments.Experiments TRACE Experiments #0::_main iteration\n16:26:17 INFO - 72 INFO Console message: 1424305573079 Browser.Experiments.Experiments TRACE Experiments #0::_evaluateExperiments\n16:26:17 INFO - 73 INFO Console message: 1424305573081 Browser.Experiments.Experiments TRACE Experiments #0::_main finished, scheduling next run\n16:26:17 INFO - 74 INFO Checking the selected node's animation player widget's state\n16:26:17 INFO - 75 INFO TEST-PASS | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused\n16:26:17 INFO - 76 INFO TEST-PASS | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state\n16:26:17 INFO - 77 INFO Click the toggle button to play all animations\n16:26:17 INFO - 78 INFO Checking the selected node's animation player widget's state again\n16:26:17 INFO - 79 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is running - Got pending, expected running\n16:26:17 INFO - Stack trace:\n16:26:17 INFO - chrome://mochikit/content/browser-test.js:test_is:854\n16:26:17 INFO - chrome://mochitests/content/browser/browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js:null:33\n16:26:17 INFO - self-hosted:InterpretGeneratorResume:702\n16:26:17 INFO - self-hosted:next:610\n16:26:17 INFO - Tester_execTest@chrome://mochikit/content/browser-test.js:670:9\n16:26:17 INFO - Tester.prototype.nextTest</<@chrome://mochikit/content/browser-test.js:595:7\n16:26:17 INFO - SimpleTest.waitForFocus/waitForFocusInner/focusedOrLoaded/<@chrome://mochikit/content/tests/SimpleTest/SimpleTest.js:752:59\n16:26:17 INFO - 80 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in running state -\n16:26:17 INFO - Stack trace:\n16:26:17 INFO - chrome://mochitests/content/browser/browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js:null:34\n16:26:17 INFO - self-hosted:InterpretGeneratorResume:702\n16:26:17 INFO - self-hosted:next:610\n16:26:17 INFO - Tester_execTest@chrome://mochikit/content/browser-test.js:670:9\n16:26:17 INFO - Tester.prototype.nextTest</<@chrome://mochikit/content/browser-test.js:595:7\n16:26:17 INFO - SimpleTest.waitForFocus/waitForFocusInner/focusedOrLoaded/<@chrome://mochikit/content/tests/SimpleTest/SimpleTest.js:752:59\n16:26:17 INFO - 81 INFO Leaving test\n16:26:17 INFO - JavaScript error: resource:///modules/WindowsPreviewPerTab.jsm, line 406: NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsITaskbarTabPreview.invalidate]\n16:26:17 INFO - 82 INFO Console message: [JavaScript Error: \"NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsITaskbarTabPreview.invalidate]\" {file: \"resource:///modules/WindowsPreviewPerTab.jsm\" line: 406}]\n16:26:17 INFO - 83 INFO MEMORY STAT vsize after test: 734273536\n16:26:17 INFO - 84 INFO MEMORY STAT vsizeMaxContiguous after test: 8612065501184\n16:26:17 INFO - 85 INFO MEMORY STAT residentFast after test: 268226560\n16:26:17 INFO - 86 INFO MEMORY STAT heapAllocated after test: 73980992\n16:26:17 INFO - 87 INFO TEST-OK | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | took 5352ms",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-19T01:49:35Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2030124\nrepository: fx-team\nstart_time: 2015-02-18T16:22:45\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: t-w864-ix-108\nbuildname: Windows 8 64-bit fx-team opt test mochitest-devtools-chrome\nrevision: d71a3d134bf3\n\n79 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is running - Got pending, expected running\n80 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in running state -\nReturn code: 1",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-02-19T01:49:42Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2328959\nrepository: fx-team\nstart_time: 2015-03-19T16:44:41\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux32-spot-206\nbuildname: Ubuntu VM 12.04 fx-team pgo test mochitest-e10s-devtools-chrome\nrevision: 80ade5ec1d31\n\n75 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got running, expected paused\n76 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -\nTypeError: Argument 1 of Window.getComputedStyle is not an object.: CssLogic.getComputedStyle@resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/styleinspector/css-logic.js:813:10",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-03-20T01:16:20Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2391575\nrepository: fx-team\nstart_time: 2015-03-24T12:39:17\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux32-spot-338\nbuildname: Ubuntu VM 12.04 fx-team opt test mochitest-e10s-devtools-chrome\nrevision: 6e463e53546b\n\n75 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got running, expected paused\n76 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-03-24T20:41:08Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=8064080\nrepository: mozilla-inbound\nstart_time: 2015-03-25T19:03:14\nwho: philringnalda[at]gmail[dot]com\nmachine: t-xp32-ix-054\nbuildname: Windows XP 32-bit mozilla-inbound debug test mochitest-devtools-chrome-1\nrevision: 05dcd4a98b97\n\n64 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is running - Got pending, expected running\n65 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in running state -\nReturn code: 1",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-03-26T02:43:10Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2461799\nrepository: fx-team\nstart_time: 2015-03-28T06:50:26\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux64-spot-1003\nbuildname: Ubuntu VM 12.04 x64 fx-team opt test mochitest-e10s-devtools-chrome\nrevision: b7a9b5a6983b\n\n79 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is running - Got pending, expected running\n80 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in running state -",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-03-28T15:03:01Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=8353176\nrepository: mozilla-inbound\nstart_time: 2015-04-01T07:30:10\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux64-spot-1716\nbuildname: Ubuntu VM 12.04 x64 mozilla-inbound debug test mochitest-devtools-chrome-1\nrevision: b4efb3f1976f\n\n60 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got pending, expected paused\n61 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-01T15:21:25Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2512318\nrepository: fx-team\nstart_time: 2015-04-01T10:48:45\nwho: wkocher[at]mozilla[dot]com\nmachine: t-yosemite-r5-0067\nbuildname: Rev5 MacOSX Yosemite 10.10 fx-team debug test mochitest-devtools-chrome-1\nrevision: e044f4d172e2\n\n60 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got pending, expected paused\n61 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-01T18:45:07Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2514218\nrepository: fx-team\nstart_time: 2015-04-01T12:21:40\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux32-spot-213\nbuildname: Ubuntu VM 12.04 fx-team opt test mochitest-devtools-chrome\nrevision: d2567d89cda3\n\n69 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got pending, expected paused\n70 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-01T20:40:24Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=8368826\nrepository: mozilla-inbound\nstart_time: 2015-04-01T13:15:09\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux64-spot-1118\nbuildname: Ubuntu VM 12.04 x64 mozilla-inbound debug test mochitest-devtools-chrome-1\nrevision: e095b4fde505\n\n60 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got pending, expected paused\n61 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-01T21:05:56Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=8370390\nrepository: mozilla-inbound\nstart_time: 2015-04-01T14:02:09\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux32-spot-599\nbuildname: Ubuntu VM 12.04 mozilla-inbound opt test mochitest-e10s-devtools-chrome\nrevision: a82364a30a51\n\n75 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got running, expected paused\n76 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -\nTypeError: Argument 1 of Window.getComputedStyle is not an object.: CssLogic.getComputedStyle@resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/styleinspector/css-logic.js:813:10",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-01T21:58:27Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-central&job_id=1268893\nrepository: mozilla-central\nstart_time: 2015-04-01T20:31:22\nwho: philringnalda[at]gmail[dot]com\nmachine: t-xp32-ix-030\nbuildname: Windows XP 32-bit mozilla-central debug test mochitest-devtools-chrome-1\nrevision: 7bb3942888eb\n\n60 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got pending, expected paused\n61 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -\nReturn code: 1",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-02T05:15:57Z"
  }, {
    "text" : "Created attachment 8587219\nMozReview Request: bz://1134500/pbrosset\n\n/r/6519 - Bug 1134500 - Intermittent browser_animation_toggle_button_updates_playerWidgets.js; r=grins\n\nPull down this commit:\n\nhg pull -r 592e05f970c1102bd4f59092e79227afd2de9554 https://reviewboard-hg.mozilla.org/gecko/",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-04-02T08:20:00Z"
  }, {
    "text" : "https://treeherder.mozilla.org/#/jobs?repo=try&revision=17c0eee8359e",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-04-02T09:18:00Z"
  }, {
    "text" : "Just pushed bug 1149711, so this one will need rebasing. Doing this now.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-04-02T15:23:47Z"
  }, {
    "text" : "Comment on attachment 8587219\nMozReview Request: bz://1134500/pbrosset\n\n/r/6519 - Bug 1134500 - Intermittent browser_animation_toggle_button_updates_playerWidgets.js; r=grins\n\nPull down this commit:\n\nhg pull -r 39886f50d8d5ed7e0998e5a2502a1982d5f3c500 https://reviewboard-hg.mozilla.org/gecko/",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-04-02T15:24:30Z"
  }, {
    "text" : "Comment on attachment 8587219\nMozReview Request: bz://1134500/pbrosset\n\nhttps://reviewboard.mozilla.org/r/6517/#review5411\n\nShip It!",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-04-02T15:36:36Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/ea9cfb625ac6",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-04-02T15:53:27Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=8412817\nrepository: mozilla-inbound\nstart_time: 2015-04-02T10:28:32\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux64-spot-1769\nbuildname: Ubuntu VM 12.04 x64 mozilla-inbound debug test mochitest-devtools-chrome-1\nrevision: 353ee07ef371\n\n60 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got pending, expected paused\n61 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-02T18:19:02Z"
  }, {
    "text" : "Backing out the other animation inspector changes that landed prior to this made tests angry. Backed out to try to get things green again.\nhttps://hg.mozilla.org/integration/fx-team/rev/f88ae43fbb9c",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-02T20:13:50Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=8428690\nrepository: mozilla-inbound\nstart_time: 2015-04-02T13:37:55\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux32-spot-627\nbuildname: Ubuntu VM 12.04 mozilla-inbound opt test mochitest-e10s-devtools-chrome\nrevision: 05c0b5cfe341\n\n75 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got pending, expected paused\n76 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -\nTypeError: Argument 1 of Window.getComputedStyle is not an object.: CssLogic.getComputedStyle@resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/styleinspector/css-logic.js:813:10",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-02T21:48:50Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-central&job_id=1275550\nrepository: mozilla-central\nstart_time: 2015-04-02T15:12:26\nwho: wkocher[at]mozilla[dot]com\nmachine: t-xp32-ix-108\nbuildname: Windows XP 32-bit mozilla-central debug test mochitest-devtools-chrome-1\nrevision: 513265a4cbc2\n\n60 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got pending, expected paused\n61 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -\nReturn code: 1",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-02T22:52:19Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=8445151\nrepository: mozilla-inbound\nstart_time: 2015-04-02T17:18:22\nwho: wkocher[at]mozilla[dot]com\nmachine: t-yosemite-r5-0081\nbuildname: Rev5 MacOSX Yosemite 10.10 mozilla-inbound debug test mochitest-devtools-chrome-1\nrevision: f25e7176b9d6\n\n60 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got pending, expected paused\n61 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-03T00:55:43Z"
  }, {
    "text" : "*** Bug 1149711 has been marked as a duplicate of this bug. ***",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-04-03T08:26:15Z"
  }, {
    "text" : "Re-landed (along with the fix for bug 1149711, since the 2 bugs were really coupled) in https://hg.mozilla.org/integration/fx-team/rev/b6affaeb902e",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-04-03T08:34:32Z"
  }, {
    "text" : "Following along test results here: https://treeherder.mozilla.org/#/jobs?repo=fx-team&revision=b6affaeb902e\nBut I'm not expecting any problems with this one, it was merely backed-out because related to bug 1120833, which was the root cause for the backout.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-04-03T08:45:35Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=8476149\nrepository: mozilla-inbound\nstart_time: 2015-04-03T14:36:30\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux32-spot-244\nbuildname: Ubuntu VM 12.04 mozilla-inbound opt test mochitest-e10s-devtools-chrome\nrevision: 5e450b2dbade\n\n80 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is running - Got pending, expected running\n81 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in running state -\nTypeError: Argument 1 of Window.getComputedStyle is not an object.: CssLogic.getComputedStyle@resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/styleinspector/css-logic.js:813:10",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-03T22:44:25Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=8479110\nrepository: mozilla-inbound\nstart_time: 2015-04-03T16:39:08\nwho: philringnalda[at]gmail[dot]com\nmachine: t-yosemite-r5-0091\nbuildname: Rev5 MacOSX Yosemite 10.10 mozilla-inbound debug test mochitest-devtools-chrome-1\nrevision: 08f50bc6e3e8\n\n61 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got pending, expected paused\n62 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-04T01:29:51Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=8483498\nrepository: mozilla-inbound\nstart_time: 2015-04-04T02:49:24\nwho: philringnalda[at]gmail[dot]com\nmachine: t-yosemite-r5-0054\nbuildname: Rev5 MacOSX Yosemite 10.10 mozilla-inbound debug test mochitest-devtools-chrome-1\nrevision: 29bf67773de8\n\n61 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is paused - Got pending, expected paused\n62 INFO TEST-UNEXPECTED-FAIL | browser/devtools/animationinspector/test/browser_animation_toggle_button_updates_playerWidgets.js | The widget's UI is in paused state -",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-04T15:03:15Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/b6affaeb902e",
    "authour" : "philringnalda@gmail.com",
    "created" : "2015-04-04T17:57:40Z"
  }, {
    "text" : "Based on the date of filing, it appears that this also affects Aurora39 (and possibly Beta38 also). However, this patch doesn't seem overly backportable. What do you think, Patrick?",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-06T14:56:58Z"
  }, {
    "text" : "The code changes in this patch are pretty simple, so if this doesn't apply cleanly on other channels and we still want a fix for the test, I can provide specific patches quickly, just let me know.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-04-07T12:39:10Z"
  }, {
    "text" : "If it can be cleanly done, it'd be nice given 38 being the next ESR. Thanks!",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-07T12:41:06Z"
  }, {
    "text" : "Created attachment 8589105\nbug1134500-for-aurora.diff\n\nHere's a patch that applies on Aurora cleanly.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-04-07T14:24:21Z"
  }, {
    "text" : "Thanks :)",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-07T14:31:49Z"
  }, {
    "text" : "Created attachment 8589121\nbug1134500-for-beta.diff\n\nThis should be ok for beta.",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-04-07T15:09:46Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-beta/rev/589aafc2bb13",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-07T15:20:11Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-aurora/rev/77b62f4cb202",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-07T21:16:01Z"
  }, {
    "text" : "Comment on attachment 8587219\nMozReview Request: bz://1134500/pbrosset",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-06-10T15:35:27Z"
  }, {
    "text" : "Created attachment 8619536\nMozReview Request: Bug 1134500 - Intermittent browser_animation_toggle_button_updates_playerWidgets.js; r=grins",
    "authour" : "pbrosset@mozilla.com",
    "created" : "2015-06-10T15:35:27Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-04-04T17:57:40Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-04-04T17:57:40Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-19T02:22:18Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "pbrosset@mozilla.com"
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-04-02T08:20:00Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bgrinstead@mozilla.com"
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-04-03T08:29:24Z",
      "what" : "summary",
      "removed" : "Intermittent browser_animation_toggle_button_updates_playerWidgets.js | The player front's state is running - Got pending, expected running | The widget's UI is in running state",
      "added" : "Intermittents browser_animation_toggle_button_updates_playerWidgets.js and browser_animation_ui_updates_when_animation_changes.js | Got pending, expected running"
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-04-04T17:57:40Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 40"
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-04-04T17:57:40Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-04-04 10:57:40"
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2015-04-04T17:57:40Z",
      "what" : "cf_status_firefox40",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-06T14:56:58Z",
      "what" : "cc",
      "removed" : "",
      "added" : "pbrosset@mozilla.com"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-06T14:56:58Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "affected"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-06T14:56:58Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "affected"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-06T14:56:58Z",
      "what" : "cf_status_firefox_esr31",
      "removed" : "---",
      "added" : "unaffected"
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-04-07T14:24:21Z",
      "what" : "cc",
      "removed" : "",
      "added" : "ryanvm@gmail.com"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-07T15:20:11Z",
      "what" : "cf_status_firefox38",
      "removed" : "affected",
      "added" : "fixed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-07T21:16:01Z",
      "what" : "cf_status_firefox39",
      "removed" : "affected",
      "added" : "fixed"
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-06-10T15:35:27Z",
      "what" : "attachments.isobsolete:8587219",
      "removed" : "0",
      "added" : "1"
    } ],
    "flagEvents" : [ {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-04-02T08:20:00Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8587219,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-04-02T15:36:36Z",
      "what" : "flagtypes.name",
      "removed" : "review?(bgrinstead@mozilla.com)",
      "added" : "",
      "attachmentId" : 8587219,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-06T14:56:58Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-04-07T12:39:10Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(pbrosset@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-04-07T14:24:21Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-07T14:31:49Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(ryanvm@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-07T15:20:11Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "pbrosset@mozilla.com",
      "date" : "2015-06-10T15:35:27Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8619536,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134500,
  "cclist" : [ "bgrinstead@mozilla.com", "jordan@jsantell.com", "pbrosset@mozilla.com", "ryanvm@gmail.com", "vporof@mozilla.com" ]
}, {
  "component" : "Menus",
  "summary" : "[e10s] \"Save Image/Audio/Video As...\" in remote browser causes unsafe CPOW usage warning",
  "reporter" : "moz-ian@perix.co.uk",
  "assigned" : "moz-ian@perix.co.uk",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with some images, <audio/>s, <video/>s, or <canvas/>s on it in an e10s window\n2) Right-click on one of the media elements, and choose \"Save Image/Audio/Video As...\"\n\nThis causes some \"unsafe CPOW usage\" warnings in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n  saveHelper: function(linkURL, linkText, dialogTitle, bypassCache, doc) {\n[...]\n    if (channel instanceof Ci.nsIHttpChannel) {\n      channel.referrer = BrowserUtils.makeURIFromCPOW(doc.documentURIObject); <-- Causes CPOW warning [audio, video]\n      if (channel instanceof Ci.nsIHttpChannelInternal)\n        channel.forceAllowThirdPartyCookie = true;\n    }\n\n[...]\n\n  // Save URL of the clicked upon image, video, or audio.\n  saveMedia: function() {\n    var doc =  this.target.ownerDocument; <-- Causes CPOW warning\n    if (this.onCanvas) {\n      // Bypass cache, since it's a data: URL.\n      saveImageURL(this.target.toDataURL(), \"canvas.png\", \"SaveImageTitle\", <-- Causes CPOW warning [canvas]\n                   true, false, BrowserUtils.makeURIFromCPOW(doc.documentURIObject), doc); <-- Causes CPOW warning [canvas]\n    }\n    else if (this.onImage) {\n      urlSecurityCheck(this.mediaURL, this.principal);\n      saveImageURL(this.mediaURL, null, \"SaveImageTitle\", false,\n                   false, BrowserUtils.makeURIFromCPOW(doc.documentURIObject), doc); <-- Causes CPOW warning [image]\n    }\n    else if (this.onVideo || this.onAudio) {\n      urlSecurityCheck(this.mediaURL, this.principal);\n      var dialogTitle = this.onVideo ? \"SaveVideoTitle\" : \"SaveAudioTitle\";\n      this.saveHelper(this.mediaURL, null, dialogTitle, false, doc);\n    }\n  },\n\n\nin toolkit/modules/BrowserUtils.jsm\n\n  makeURIFromCPOW: function(aCPOWURI) {\n    return Services.io.newURI(aCPOWURI.spec, aCPOWURI.originCharset, null); <-- Causes CPOW warning\n  },\n\nwarnings are tagged e.g. [image] if they only occur with certain element types.",
  "comments" : [ {
    "text" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with some images, <audio/>s, <video/>s, or <canvas/>s on it in an e10s window\n2) Right-click on one of the media elements, and choose \"Save Image/Audio/Video As...\"\n\nThis causes some \"unsafe CPOW usage\" warnings in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n  saveHelper: function(linkURL, linkText, dialogTitle, bypassCache, doc) {\n[...]\n    if (channel instanceof Ci.nsIHttpChannel) {\n      channel.referrer = BrowserUtils.makeURIFromCPOW(doc.documentURIObject); <-- Causes CPOW warning [audio, video]\n      if (channel instanceof Ci.nsIHttpChannelInternal)\n        channel.forceAllowThirdPartyCookie = true;\n    }\n\n[...]\n\n  // Save URL of the clicked upon image, video, or audio.\n  saveMedia: function() {\n    var doc =  this.target.ownerDocument; <-- Causes CPOW warning\n    if (this.onCanvas) {\n      // Bypass cache, since it's a data: URL.\n      saveImageURL(this.target.toDataURL(), \"canvas.png\", \"SaveImageTitle\", <-- Causes CPOW warning [canvas]\n                   true, false, BrowserUtils.makeURIFromCPOW(doc.documentURIObject), doc); <-- Causes CPOW warning [canvas]\n    }\n    else if (this.onImage) {\n      urlSecurityCheck(this.mediaURL, this.principal);\n      saveImageURL(this.mediaURL, null, \"SaveImageTitle\", false,\n                   false, BrowserUtils.makeURIFromCPOW(doc.documentURIObject), doc); <-- Causes CPOW warning [image]\n    }\n    else if (this.onVideo || this.onAudio) {\n      urlSecurityCheck(this.mediaURL, this.principal);\n      var dialogTitle = this.onVideo ? \"SaveVideoTitle\" : \"SaveAudioTitle\";\n      this.saveHelper(this.mediaURL, null, dialogTitle, false, doc);\n    }\n  },\n\n\nin toolkit/modules/BrowserUtils.jsm\n\n  makeURIFromCPOW: function(aCPOWURI) {\n    return Services.io.newURI(aCPOWURI.spec, aCPOWURI.originCharset, null); <-- Causes CPOW warning\n  },\n\nwarnings are tagged e.g. [image] if they only occur with certain element types.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-18T22:45:08Z"
  }, {
    "text" : "Created attachment 8596041\nMozReview Request: bz://1134424/Kwan\n\n/r/6985 - Bug 1134424 - Use message to safely get the dataURL of the canvas for saving\n/r/7359 - Bug 1134424 - Use the existing reference to the document in nsContextMenu.saveMedia() rather than unsafely creating a new one\n\nPull down these commits:\n\nhg pull -r 7ca6efe0e6d13e86e885dab531ccae97624e079c https://reviewboard-hg.mozilla.org/gecko/",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-04-22T16:42:25Z"
  }, {
    "text" : "Comment on attachment 8596041\nMozReview Request: bz://1134424/Kwan\n\nhttps://reviewboard.mozilla.org/r/6983/#review6251\n\nShip It!",
    "authour" : "gkrizsanits@mozilla.com",
    "created" : "2015-04-23T09:21:24Z"
  }, {
    "text" : "Green try:\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=be1f9ab374bf",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-04-23T12:30:31Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/9c5fc44bda0b\nhttps://hg.mozilla.org/integration/fx-team/rev/5863c2d9f9ae",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-04-23T22:16:25Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/9c5fc44bda0b\nhttps://hg.mozilla.org/mozilla-central/rev/5863c2d9f9ae",
    "authour" : "cbook@mozilla.com",
    "created" : "2015-04-24T12:42:38Z"
  }, {
    "text" : "Comment on attachment 8596041\nMozReview Request: bz://1134424/Kwan",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-06-10T15:35:23Z"
  }, {
    "text" : "Created attachment 8619518\nMozReview Request: Bug 1134424 - Use message to safely get the dataURL of the canvas for saving",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-06-10T15:35:23Z"
  }, {
    "text" : "Created attachment 8619519\nMozReview Request: Bug 1134424 - Use the existing reference to the document in nsContextMenu.saveMedia() rather than unsafely creating a new one",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-06-10T15:35:23Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-08T15:33:10Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-24T12:42:38Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-24T12:42:38Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-19T17:39:24Z",
      "what" : "cf_tracking_e10s",
      "removed" : "?",
      "added" : "m8+"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-08T15:33:10Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "moz-ian@perix.co.uk"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-08T16:50:29Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1140859"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-08T16:52:15Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1134391"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-22T16:42:25Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gkrizsanits@mozilla.com"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-23T12:30:31Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-23T22:16:25Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-04-23T22:16:25Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-24T12:42:38Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 40"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-24T12:42:38Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-24T12:42:38Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-04-24 05:42:38"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-24T12:42:38Z",
      "what" : "cf_status_firefox40",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-06-10T15:35:23Z",
      "what" : "attachments.isobsolete:8596041",
      "removed" : "0",
      "added" : "1"
    } ],
    "flagEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-22T16:42:25Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8596041,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gkrizsanits@mozilla.com",
      "date" : "2015-04-23T09:21:24Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gkrizsanits@mozilla.com)",
      "added" : "",
      "attachmentId" : 8596041,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-06-10T15:35:23Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8619518,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-06-10T15:35:23Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8619519,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134424,
  "cclist" : [ "blassey.bugs@lassey.us", "gkrizsanits@mozilla.com", "mconley@mozilla.com" ]
}, {
  "component" : "Theme",
  "summary" : "Don't preprocess browser/themes/windows/content-contextmenu.svg on Windows Aero",
  "reporter" : "ntim.bugs@gmail.com",
  "assigned" : "a.ahmed1026@gmail.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Bug 1109826 seem to have forgotten Windows Aero.\n\nTo fix this bug :\n- Remove the star (*) at the beginning of this line :\nhttp://mxr.mozilla.org/mozilla-central/source/browser/themes/windows/jar.mn#493",
  "comments" : [ {
    "text" : "Bug 1109826 seem to have forgotten Windows Aero.\n\nTo fix this bug :\n- Remove the star (*) at the beginning of this line :\nhttp://mxr.mozilla.org/mozilla-central/source/browser/themes/windows/jar.mn#493",
    "authour" : "ntim.bugs@gmail.com",
    "created" : "2015-02-18T22:32:55Z"
  }, {
    "text" : "Created attachment 8567385\nrev 1 - Don't preprocess content-contextmenu.svg",
    "authour" : "a.ahmed1026@gmail.com",
    "created" : "2015-02-21T00:36:26Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/951a9f999db4",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-22T19:17:42Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/951a9f999db4",
    "authour" : "cbook@mozilla.com",
    "created" : "2015-02-23T12:29:34Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "a.ahmed1026@gmail.com",
      "date" : "2015-02-21T00:36:26Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-23T12:29:34Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-23T12:29:34Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "a.ahmed1026@gmail.com",
      "date" : "2015-02-21T00:36:26Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "a.ahmed1026@gmail.com",
      "date" : "2015-02-21T00:36:26Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "a.ahmed1026@gmail.com"
    }, {
      "name" : "ntim.bugs@gmail.com",
      "date" : "2015-02-22T00:21:54Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-22T19:17:42Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-22T19:17:42Z",
      "what" : "whiteboard",
      "removed" : "[good first bug][lang=manifest]",
      "added" : "[good first bug][lang=manifest][fixed-in-fx-team]"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-23T12:29:34Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 38"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-23T12:29:34Z",
      "what" : "whiteboard",
      "removed" : "[good first bug][lang=manifest][fixed-in-fx-team]",
      "added" : "[good first bug][lang=manifest]"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-23T12:29:34Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-23 04:29:34"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-02-23T12:29:34Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "a.ahmed1026@gmail.com",
      "date" : "2015-02-21T00:36:26Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567385,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-21T21:40:44Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : 8567385,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134417,
  "cclist" : [ "jaws@mozilla.com" ]
}, {
  "component" : "Menus",
  "summary" : "[e10s] \"Full Screen\" in remote browser causes unsafe CPOW usage warning",
  "reporter" : "moz-ian@perix.co.uk",
  "assigned" : "moz-ian@perix.co.uk",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with some <video/>s on it in an e10s window\n2) Right-click on a <video/>, and choose \"Full Screen\"\n\nThis causes an \"unsafe CPOW usage\" warning in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n  fullScreenVideo: function () {\n    let video = this.target;\n    if (document.mozFullScreenEnabled)\n      video.mozRequestFullScreen(); <-- Causes CPOW warning\n  },",
  "comments" : [ {
    "text" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with some <video/>s on it in an e10s window\n2) Right-click on a <video/>, and choose \"Full Screen\"\n\nThis causes an \"unsafe CPOW usage\" warning in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n  fullScreenVideo: function () {\n    let video = this.target;\n    if (document.mozFullScreenEnabled)\n      video.mozRequestFullScreen(); <-- Causes CPOW warning\n  },",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-18T22:22:31Z"
  }, {
    "text" : "Created attachment 8566437\nMake \"Full Screen\" context-menu command e10s safe\n\nApplies on top of patch for bug 1134399",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-19T09:39:08Z"
  }, {
    "text" : "Comment on attachment 8566437\nMake \"Full Screen\" context-menu command e10s safe\n\nReview of attachment 8566437:\n-----------------------------------------------------------------\n\nLooks good, and works as advertised! Thanks Ian!",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-02-21T01:06:35Z"
  }, {
    "text" : "remote:   https://hg.mozilla.org/integration/fx-team/rev/63da271edfa5",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-02-21T02:45:26Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/63da271edfa5",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-21T21:42:09Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-19T09:39:08Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:42:09Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:42:09Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-19T09:39:08Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gavin.sharp@gmail.com"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-19T09:39:08Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "moz-ian@perix.co.uk"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-19T09:39:46Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1134399"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-19T17:38:09Z",
      "what" : "cf_tracking_e10s",
      "removed" : "?",
      "added" : "m8+"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-21T02:45:26Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:42:09Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 38"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:42:09Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:42:09Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-21 13:42:09"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:42:09Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-04-17T13:51:20Z",
      "what" : "url",
      "removed" : "",
      "added" : "http://techslides.com/demos/sample-videos/small.webm"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-04-17T13:51:20Z",
      "what" : "cf_qa_whiteboard",
      "removed" : "",
      "added" : "[good first verify]["
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-04-17T13:51:20Z",
      "what" : "cc",
      "removed" : "",
      "added" : "florin.mezei@softvisioninc.eu"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-04-17T13:53:09Z",
      "what" : "cf_qa_whiteboard",
      "removed" : "[good first verify][",
      "added" : "[good first verify][verify in Nightly only]"
    } ],
    "flagEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-19T09:39:08Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8566437,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-19T16:27:49Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gavin.sharp@gmail.com)",
      "added" : "",
      "attachmentId" : 8566437,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-21T01:06:35Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8566437,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134409,
  "cclist" : [ "blassey.bugs@lassey.us", "florin.mezei@softvisioninc.eu", "gavin.sharp@gmail.com", "mconley@mozilla.com" ]
}, {
  "component" : "General",
  "summary" : "Mine test logs for \"unsafe CPOW usage\" messages",
  "reporter" : "mconley@mozilla.com",
  "assigned" : "nobody@mozilla.org",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "The add-on I wrote in bug 1109713 is a good start on finding all of our unsafe CPOW usage, but we've got an even better tool:\n\nWe've got a mountain of mochitest logs that exercise a bunch of the browser, and according to RyanVM, they're chock FULL of of \"unsafe CPOW usage\" warnings.\n\nWe should mine the logs for more places where we use unsafe CPOWs.",
  "comments" : [ {
    "text" : "The add-on I wrote in bug 1109713 is a good start on finding all of our unsafe CPOW usage, but we've got an even better tool:\n\nWe've got a mountain of mochitest logs that exercise a bunch of the browser, and according to RyanVM, they're chock FULL of of \"unsafe CPOW usage\" warnings.\n\nWe should mine the logs for more places where we use unsafe CPOWs.",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-02-18T22:10:37Z"
  }, {
    "text" : "Holly could be interesting to look at as well, since it's running all tests on all platforms with e10s enabled.",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-18T22:51:06Z"
  }, {
    "text" : "This was done, and a whole slew of bugs were filed which are all marked blocking bug 1109869.",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-06-27T00:12:07Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "mconley@mozilla.com",
      "date" : "2015-06-27T00:12:07Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "mconley@mozilla.com",
      "date" : "2015-06-27T00:12:07Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "nfroyd@mozilla.com",
      "date" : "2015-02-18T22:47:38Z",
      "what" : "cc",
      "removed" : "",
      "added" : "nfroyd@mozilla.com, ryanvm@gmail.com"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-19T17:38:04Z",
      "what" : "cf_tracking_e10s",
      "removed" : "?",
      "added" : "m8+"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-06-26T17:03:34Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[unsafe-cpow-usage]"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-06-26T17:03:34Z",
      "what" : "cf_tracking_e10s",
      "removed" : "m8+",
      "added" : "---"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-06-27T00:12:07Z",
      "what" : "version",
      "removed" : "Trunk",
      "added" : "unspecified"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-06-27T00:12:07Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-06-26 17:12:07"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-06-27T00:12:07Z",
      "what" : "cf_status_firefox41",
      "removed" : "---",
      "added" : "unaffected"
    } ],
    "flagEvents" : [ ]
  },
  "resolution" : "FIXED",
  "id" : 1134400,
  "cclist" : [ "nfroyd@mozilla.com", "ryanvm@gmail.com" ]
}, {
  "component" : "Menus",
  "summary" : "[e10s] Using context-menu media controls in remote browser causes unsafe CPOW usage warning",
  "reporter" : "moz-ian@perix.co.uk",
  "assigned" : "moz-ian@perix.co.uk",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with a <video/> or <audio/> on it in an e10s window\n2) Right-click on the media, and choose one of the media control commands [Play, Pause, Mute, Unmute, Play Speed, Hide Controls, Show Controls, Hide Statistics, Show Statistics]\n\nThis causes an \"unsafe CPOW usage\" warning in the Browser Console (or three for the statistics commands).\n\nIn browser/base/content/nsContextMenu.js:\n\n  mediaCommand : function CM_mediaCommand(command, data) {\n    var media = this.target;\n\n    switch (command) {\n      case \"play\":\n        media.play(); <-- Causes CPOW warning\n        break;\n      case \"pause\":\n        media.pause(); <-- Causes CPOW warning\n        break;\n      case \"mute\":\n        media.muted = true; <-- Causes CPOW warning\n        break;\n      case \"unmute\":\n        media.muted = false; <-- Causes CPOW warning\n        break;\n      case \"playbackRate\":\n        media.playbackRate = data; <-- Causes CPOW warning\n        break;\n      case \"hidecontrols\":\n        media.removeAttribute(\"controls\"); <-- Causes CPOW warning\n        break;\n      case \"showcontrols\":\n        media.setAttribute(\"controls\", \"true\"); <-- Causes CPOW warning\n        break;\n      case \"hidestats\":\n      case \"showstats\":\n        var event = media.ownerDocument.createEvent(\"CustomEvent\"); <-- Causes CPOW warning\n        event.initCustomEvent(\"media-showStatistics\", false, true, command == \"showstats\"); <-- Causes CPOW warning\n        media.dispatchEvent(event); <-- Causes CPOW warning\n        break;\n    }\n  },",
  "comments" : [ {
    "text" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with a <video/> or <audio/> on it in an e10s window\n2) Right-click on the media, and choose one of the media control commands [Play, Pause, Mute, Unmute, Play Speed, Hide Controls, Show Controls, Hide Statistics, Show Statistics]\n\nThis causes an \"unsafe CPOW usage\" warning in the Browser Console (or three for the statistics commands).\n\nIn browser/base/content/nsContextMenu.js:\n\n  mediaCommand : function CM_mediaCommand(command, data) {\n    var media = this.target;\n\n    switch (command) {\n      case \"play\":\n        media.play(); <-- Causes CPOW warning\n        break;\n      case \"pause\":\n        media.pause(); <-- Causes CPOW warning\n        break;\n      case \"mute\":\n        media.muted = true; <-- Causes CPOW warning\n        break;\n      case \"unmute\":\n        media.muted = false; <-- Causes CPOW warning\n        break;\n      case \"playbackRate\":\n        media.playbackRate = data; <-- Causes CPOW warning\n        break;\n      case \"hidecontrols\":\n        media.removeAttribute(\"controls\"); <-- Causes CPOW warning\n        break;\n      case \"showcontrols\":\n        media.setAttribute(\"controls\", \"true\"); <-- Causes CPOW warning\n        break;\n      case \"hidestats\":\n      case \"showstats\":\n        var event = media.ownerDocument.createEvent(\"CustomEvent\"); <-- Causes CPOW warning\n        event.initCustomEvent(\"media-showStatistics\", false, true, command == \"showstats\"); <-- Causes CPOW warning\n        media.dispatchEvent(event); <-- Causes CPOW warning\n        break;\n    }\n  },",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-18T22:09:47Z"
  }, {
    "text" : "Created attachment 8566436\nMake context-menu media commands e10s safe\n\nI'm not sure which tests to select for a try run.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-19T09:37:33Z"
  }, {
    "text" : "Comment on attachment 8566436\nMake context-menu media commands e10s safe\n\nReview of attachment 8566436:\n-----------------------------------------------------------------\n\nThis looks really good - going to test it before I r+. Just one nit.\n\n::: browser/base/content/content.js\n@@ +1066,5 @@\n>  });\n> +\n> +addMessageListener(\"ContextMenu:MediaCommand\", (message) => {\n> +  let media = message.objects.element;\n> +  switch (message.data.command) {\n\nNit, let's put a newline before this switch",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-02-19T21:38:49Z"
  }, {
    "text" : "Beyond the nit, this looks good. Local testing is solid with e10s and not, and I definitely don't see any unsafe CPOW usage warnings when I use the controls. Nice job!\n\n\nTry push: https://treeherder.mozilla.org/#/jobs?repo=try&revision=d339d79519b9",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-02-20T01:25:48Z"
  }, {
    "text" : "Created attachment 8567108\nMake context-menu media commands use messages to avoid unsafe CPOW usage warnings",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-02-20T15:29:58Z"
  }, {
    "text" : "Comment on attachment 8567108\nMake context-menu media commands use messages to avoid unsafe CPOW usage warnings\n\nTry looks good - I've updated the commit message and added the newline.\n\nThanks Ian!",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-02-20T15:30:45Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/2febda909f2d",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-20T16:07:52Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/2febda909f2d",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-02-21T02:14:19Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-19T09:37:33Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-21T02:14:19Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-21T02:14:19Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-19T09:37:33Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gavin.sharp@gmail.com"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-19T09:37:33Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "moz-ian@perix.co.uk"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-19T09:39:46Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1134409"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-19T17:37:57Z",
      "what" : "cf_tracking_e10s",
      "removed" : "?",
      "added" : "m8+"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-20T15:30:18Z",
      "what" : "attachments.isobsolete:8566436",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-20T15:31:01Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-20T16:07:52Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-20T16:07:52Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-21T02:14:19Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 38"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-21T02:14:19Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-21T02:14:19Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-20 18:14:19"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-21T02:14:19Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-04-17T13:53:20Z",
      "what" : "url",
      "removed" : "",
      "added" : "http://techslides.com/demos/sample-videos/small.webm"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-04-17T13:53:20Z",
      "what" : "cf_qa_whiteboard",
      "removed" : "",
      "added" : "[good first verify][verify in Nightly only]"
    }, {
      "name" : "florin.mezei@softvisioninc.eu",
      "date" : "2015-04-17T13:53:20Z",
      "what" : "cc",
      "removed" : "",
      "added" : "florin.mezei@softvisioninc.eu"
    } ],
    "flagEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-19T09:37:33Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8566436,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-19T16:26:14Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gavin.sharp@gmail.com)",
      "added" : "",
      "attachmentId" : 8566436,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-20T15:30:18Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8566436,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-20T15:30:45Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567108,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134399,
  "cclist" : [ "blassey.bugs@lassey.us", "florin.mezei@softvisioninc.eu", "gavin.sharp@gmail.com", "mconley@mozilla.com" ]
}, {
  "component" : "Menus",
  "summary" : "[e10s] \"View Image/Video\" in remote browser causes unsafe CPOW usage warning",
  "reporter" : "moz-ian@perix.co.uk",
  "assigned" : "moz-ian@perix.co.uk",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with images, <canvas/>, or <video/>s on it in an e10s window\n2) Right-click on an image, <canvas/> or <video/>, and choose \"View Image/Video\"\n\nThis causes some \"unsafe CPOW usage\" warnings in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n  // Change current window to the URL of the image, video, or audio.\n  viewMedia: function(e) {\n    var viewURL;\n\n    if (this.onCanvas)\n      viewURL = this.target.toDataURL(); <-- Causes CPOW warning [canvas]\n    else {\n      viewURL = this.mediaURL;\n      urlSecurityCheck(viewURL,\n                       this.browser.contentPrincipal,\n                       Ci.nsIScriptSecurityManager.DISALLOW_SCRIPT);\n    }\n\n    var doc = this.target.ownerDocument; <-- Causes CPOW warning\n    openUILink(viewURL, e, { disallowInheritPrincipal: true,\n                             referrerURI: doc.documentURIObject }); <-- Causes CPOW warning\n  },\n\n\nin toolkit/modules/RemoteWebNavigation.jsm\n\n  loadURI: function(aURI, aLoadFlags, aReferrer, aPostData, aHeaders) {\n    if (aPostData || aHeaders)\n      throw Components.Exception(\"RemoteWebNavigation doesn't accept postdata or headers.\", Cr.NS_ERROR_INVALID_ARGS);\n\n    this._browser._contentTitle = \"\";\n    this._sendMessage(\"WebNavigation:LoadURI\", {\n      uri: aURI,\n      flags: aLoadFlags,\n      referrer: aReferrer ? aReferrer.spec : null <-- Causes CPOW warning\n    });\n  },\n\n\nwarning tagged [canvas] only occurs on a <canvas/>",
  "comments" : [ {
    "text" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with images, <canvas/>, or <video/>s on it in an e10s window\n2) Right-click on an image, <canvas/> or <video/>, and choose \"View Image/Video\"\n\nThis causes some \"unsafe CPOW usage\" warnings in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n  // Change current window to the URL of the image, video, or audio.\n  viewMedia: function(e) {\n    var viewURL;\n\n    if (this.onCanvas)\n      viewURL = this.target.toDataURL(); <-- Causes CPOW warning [canvas]\n    else {\n      viewURL = this.mediaURL;\n      urlSecurityCheck(viewURL,\n                       this.browser.contentPrincipal,\n                       Ci.nsIScriptSecurityManager.DISALLOW_SCRIPT);\n    }\n\n    var doc = this.target.ownerDocument; <-- Causes CPOW warning\n    openUILink(viewURL, e, { disallowInheritPrincipal: true,\n                             referrerURI: doc.documentURIObject }); <-- Causes CPOW warning\n  },\n\n\nin toolkit/modules/RemoteWebNavigation.jsm\n\n  loadURI: function(aURI, aLoadFlags, aReferrer, aPostData, aHeaders) {\n    if (aPostData || aHeaders)\n      throw Components.Exception(\"RemoteWebNavigation doesn't accept postdata or headers.\", Cr.NS_ERROR_INVALID_ARGS);\n\n    this._browser._contentTitle = \"\";\n    this._sendMessage(\"WebNavigation:LoadURI\", {\n      uri: aURI,\n      flags: aLoadFlags,\n      referrer: aReferrer ? aReferrer.spec : null <-- Causes CPOW warning\n    });\n  },\n\n\nwarning tagged [canvas] only occurs on a <canvas/>",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-18T21:54:19Z"
  }, {
    "text" : "Created attachment 8568054\nMake \"View Image/Media\" command use messages to avoid unsafe CPOW warnings\n\nRelies on the gContextMenuContentData.documentURI addition in bug 1133577.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-23T18:57:30Z"
  }, {
    "text" : "Created attachment 8571677\nMake \"View Image/Media\" command use messages to avoid unsafe CPOW warnings\n\nUpdated for latest bug 1133577 patch",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-03-03T00:48:18Z"
  }, {
    "text" : "Created attachment 8573592\nMake \"View Image/Media\" command use messages to avoid unsafe CPOW warnings\n\nWell this is the next one in my queue, so this can go first.\n\ntoDataURL is a separate function so it can be reused for \"Save Image As...\"ing a canvas later.\nIs Cu.reportError the right thing to put for the promise rejection?",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-03-05T23:49:37Z"
  }, {
    "text" : "Comment on attachment 8573592\nMake \"View Image/Media\" command use messages to avoid unsafe CPOW warnings\n\nReview of attachment 8573592:\n-----------------------------------------------------------------\n\n::: browser/base/content/nsContextMenu.js\n@@ +1026,5 @@\n>    },\n>  \n> +  toDataURL: function(aTarget) {\n> +    let mm = this.browser.messageManager;\n> +    return new Promise(function(resolve, reject) {\n\nYou never use reject, so you can probably drop it.\n\n@@ +1027,5 @@\n>  \n> +  toDataURL: function(aTarget) {\n> +    let mm = this.browser.messageManager;\n> +    return new Promise(function(resolve, reject) {\n> +      mm.sendAsyncMessage(\"ContextMenu:ToDataURL\", {}, { aTarget });\n\nA DataURL can represent many things. Let's call this message:\n\nContextMenu:Canvas:ToDataURL\n\nand the function:\n\ncanvasToDataURL",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-03-06T19:54:14Z"
  }, {
    "text" : "Created attachment 8574192\nMake \"View Image/Video\" command use messages to avoid unsafe CPOW warnings\n\n(In reply to Mike Conley (:mconley) - Needinfo me! from comment #4)\n> > +    return new Promise(function(resolve, reject) {\n> \n> You never use reject, so you can probably drop it.\nCool, done.\n\n> @@ +1027,5 @@\n> >  \n> > +  toDataURL: function(aTarget) {\n> > +    let mm = this.browser.messageManager;\n> > +    return new Promise(function(resolve, reject) {\n> > +      mm.sendAsyncMessage(\"ContextMenu:ToDataURL\", {}, { aTarget });\n> \n> A DataURL can represent many things. Let's call this message:\n> \n> ContextMenu:Canvas:ToDataURL\nDone.\n\n> and the function:\n> \n> canvasToDataURL\nDone, plus the _ prefixing as discussed on IRC.\n\nAnd reverted the argument name back to \"target\", so the patch actually works again, tested manually.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-03-06T23:22:53Z"
  }, {
    "text" : "Comment on attachment 8574192\nMake \"View Image/Video\" command use messages to avoid unsafe CPOW warnings\n\nReview of attachment 8574192:\n-----------------------------------------------------------------\n\nLooks great! Thanks Ian!",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-03-17T14:38:03Z"
  }, {
    "text" : "Try run at https://treeherder.mozilla.org/#/jobs?repo=try&revision=094396e39ebf\norange caused by the other patch for bug 1141186 and fixed in https://treeherder.mozilla.org/#/jobs?repo=try&revision=d06d6f239f24",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-03-18T09:57:07Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/839427d11a62",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-03-18T15:27:19Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/839427d11a62",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-03-18T22:40:17Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-23T18:57:30Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-18T22:40:17Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-18T22:40:17Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "mconley@mozilla.com",
      "date" : "2015-02-19T17:37:36Z",
      "what" : "cf_tracking_e10s",
      "removed" : "?",
      "added" : "m8+"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-23T18:57:30Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "moz-ian@perix.co.uk"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-03T00:48:18Z",
      "what" : "attachments.isobsolete:8568054",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-03T00:49:20Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1133577"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-05T23:49:37Z",
      "what" : "attachments.isobsolete:8571677",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-06T23:22:53Z",
      "what" : "attachments.isobsolete:8573592",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-08T16:52:15Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1134424"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-18T09:57:07Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-18T15:27:19Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-18T15:27:19Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-18T22:40:17Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-18T22:40:17Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-18T22:40:17Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-18 15:40:17"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-18T22:40:17Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-23T18:57:30Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8568054,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-03T00:48:18Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8568054,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-05T23:49:37Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8573592,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-03-06T19:54:14Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8573592,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-06T23:22:53Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8574192,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-03-17T14:38:03Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8574192,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134391,
  "cclist" : [ "blassey.bugs@lassey.us", "mconley@mozilla.com" ]
}, {
  "component" : "SocialAPI",
  "summary" : "directory activation uses directory origin in panel",
  "reporter" : "mixedpuppy@gmail.com",
  "assigned" : "mixedpuppy@gmail.com",
  "created" : null,
  "operatingSystem" : "Mac OS X",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "When activating from the activations directory, the panel says \"would you like to activate services from activations.cdn.mozilla.net\".  If you're activating (for example) pocket, it should say \"would you like to activate services from getpocket.com\".",
  "comments" : [ {
    "text" : "When activating from the activations directory, the panel says \"would you like to activate services from activations.cdn.mozilla.net\".  If you're activating (for example) pocket, it should say \"would you like to activate services from getpocket.com\".",
    "authour" : "mixedpuppy@gmail.com",
    "created" : "2015-02-18T19:06:18Z"
  }, {
    "text" : "Created attachment 8566138\n1134315",
    "authour" : "mixedpuppy@gmail.com",
    "created" : "2015-02-18T19:08:02Z"
  }, {
    "text" : "So what happens to \"internal\" then?",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-02-18T19:45:37Z"
  }, {
    "text" : "Comment on attachment 8566138\n1134315\n\nReview of attachment 8566138:\n-----------------------------------------------------------------\n\nWhat are the possibilities for data.installType? If it is just \"internal\" or \"foreign\" then this is no behavior change.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-02-18T19:46:35Z"
  }, {
    "text" : "There are 3 possible results, directory, internal and foreign.  directory and internal should use the origin in the manifest, foreign should always use origin of the activation.",
    "authour" : "mixedpuppy@gmail.com",
    "created" : "2015-02-18T20:13:13Z"
  }, {
    "text" : "Comment on attachment 8566138\n1134315\n\nReview of attachment 8566138:\n-----------------------------------------------------------------\n\n::: toolkit/components/social/SocialService.jsm\n@@ +550,5 @@\n>      let browserBundle = Services.strings.createBundle(\"chrome://browser/locale/browser.properties\");\n>  \n> +    // foreign activation uses the activation url for origin, otherwise use the manifest origin\n> +    let requestingURI =  Services.io.newURI(data.installType == \"foreign\" ?\n> +                                            data.url : data.manifest.origin, null, null);\n\nCan you please refactor this to be more clear (at the cost of being extra verbose)?\n\nlet url = data.installType == \"foreign\" ?\n            data.url :\n            data.installType == \"directory\" ||\n            data.installType == \"internal\" ?\n              data.manifest.origin;\nlet requestingURI = Services.io.newURI(url, null, null);\n\nAlso, it would be nice if you updated the code at line 163 and 165 to use double-quotes instead of single-quotes.",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-02-18T20:20:10Z"
  }, {
    "text" : "Created attachment 8566211\n1134315.txt\n\ncarry forward r+\n\nhttps://hg.mozilla.org/integration/fx-team/rev/1fc897448cad",
    "authour" : "mixedpuppy@gmail.com",
    "created" : "2015-02-18T21:22:19Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/1fc897448cad",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-19T01:17:13Z"
  }, {
    "text" : "(In reply to Jared Wein [:jaws] (please needinfo? me) from comment #5)\n> let url = data.installType == \"foreign\" ?\n>             data.url :\n>             data.installType == \"directory\" ||\n>             data.installType == \"internal\" ?\n>               data.manifest.origin;\n\nI didn't realize until Gavin mentioned this change that the second case of the second ternary operator was missing from my recommendation. I see that the code that landed added in an `undefined` result for this case, which probably isn't something that we want passed to newURI.\n\nShane, would you be OK with changing this to an if/else-if/else and in the else calling Cu.reportError() or some other type of logging and throwing?",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-02-19T17:23:29Z"
  }, {
    "text" : "Created attachment 8566642\n1134315",
    "authour" : "mixedpuppy@gmail.com",
    "created" : "2015-02-19T18:55:11Z"
  }, {
    "text" : "Comment on attachment 8566642\n1134315\n\nReview of attachment 8566642:\n-----------------------------------------------------------------\n\nThis is better. Thanks!",
    "authour" : "jaws@mozilla.com",
    "created" : "2015-02-19T19:26:13Z"
  }, {
    "text" : "backout  :   https://hg.mozilla.org/integration/fx-team/rev/3b28be32ebc7\nnew patch:   https://hg.mozilla.org/integration/fx-team/rev/cee52e6c3662",
    "authour" : "mixedpuppy@gmail.com",
    "created" : "2015-02-19T19:29:47Z"
  }, {
    "text" : "AFAICT this landed on MC\nhttps://hg.mozilla.org/mozilla-central/rev/3b28be32ebc7\nhttps://hg.mozilla.org/mozilla-central/rev/cee52e6c3662",
    "authour" : "guijoselito@gmail.com",
    "created" : "2015-02-20T19:14:17Z"
  }, {
    "text" : "Mistakenly filed against Firefox 38 and should be instead 38 Branch. Sorry for the spam. dkl",
    "authour" : "dkl@mozilla.com",
    "created" : "2015-04-13T22:46:46Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-19T01:17:13Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-02-19T18:55:30Z",
      "what" : "status",
      "removed" : "RESOLVED",
      "added" : "",
      "type" : "REOPENED"
    }, {
      "name" : "guijoselito@gmail.com",
      "date" : "2015-02-20T19:14:17Z",
      "what" : "status",
      "removed" : "REOPENED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-19T01:17:13Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-02-19T18:55:30Z",
      "what" : "resolution",
      "removed" : "FIXED",
      "added" : "",
      "type" : "UNKNOWN"
    }, {
      "name" : "guijoselito@gmail.com",
      "date" : "2015-02-20T19:14:17Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-02-18T19:08:02Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-02-18T19:08:02Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "mixedpuppy@gmail.com"
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-18T19:45:37Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mixedpuppy@gmail.com"
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-02-18T21:22:19Z",
      "what" : "attachments.isobsolete:8566138",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-19T01:17:13Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 38"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-19T01:17:13Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-18 17:17:13"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-19T01:17:13Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "guijoselito@gmail.com",
      "date" : "2015-02-20T19:14:17Z",
      "what" : "cc",
      "removed" : "",
      "added" : "guijoselito@gmail.com"
    }, {
      "name" : "guijoselito@gmail.com",
      "date" : "2015-02-20T19:14:17Z",
      "what" : "cf_last_resolved",
      "removed" : "2015-02-18 17:17:13",
      "added" : "2015-02-20 11:14:17"
    }, {
      "name" : "dkl@mozilla.com",
      "date" : "2015-04-13T22:46:46Z",
      "what" : "version",
      "removed" : "Firefox 38",
      "added" : "38 Branch"
    } ],
    "flagEvents" : [ {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-02-18T19:08:02Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8566138,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-18T19:45:37Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-02-18T20:13:13Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(mixedpuppy@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-18T20:20:10Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : 8566138,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-02-18T21:22:19Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8566211,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-19T17:23:29Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-02-19T18:55:11Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(mixedpuppy@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "mixedpuppy@gmail.com",
      "date" : "2015-02-19T18:55:11Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8566642,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2015-02-19T19:26:13Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : 8566642,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134315,
  "cclist" : [ "guijoselito@gmail.com", "jaws@mozilla.com", "mixedpuppy@gmail.com" ]
}, {
  "component" : "General",
  "summary" : "Intermittent browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0",
  "reporter" : "ryanvm@gmail.com",
  "assigned" : "kevchan85@yahoo.com",
  "created" : null,
  "operatingSystem" : "Unspecified",
  "hardware" : "Unspecified",
  "priority" : "P5",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "The dead CPOW error doesn't look good.\n\n09:21:13 INFO - 66 INFO TEST-START | dom/html/test/browser_bug592641.js\n09:21:15 INFO - JavaScript error: , line 0: Error: operation not possible on dead CPOW\n09:21:15 INFO - 67 INFO checking window state\n09:21:15 INFO - 68 INFO Console message: [JavaScript Warning: \"unsafe CPOW usage\" {file: \"resource:///modules/sessionstore/TabState.jsm\" line: 96}]\n09:21:15 INFO - 69 INFO Console message: [JavaScript Warning: \"unsafe CPOW usage\" {file: \"resource:///modules/sessionstore/TabState.jsm\" line: 96}]\n09:21:15 INFO - 70 INFO TEST-PASS | dom/html/test/browser_bug592641.js | Title should be correct on load #1\n09:21:15 INFO - 71 INFO Console message: [JavaScript Warning: \"unsafe CPOW usage\" {file: \"chrome://mochitests/content/browser/dom/html/test/browser_bug592641.js\" line: 33}]\n09:21:15 INFO - 72 INFO Console message: [JavaScript Warning: \"unsafe CPOW usage\" {file: \"chrome://mochitests/content/browser/dom/html/test/browser_bug592641.js\" line: 33}]\n09:21:15 INFO - 73 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n09:21:15 INFO - Stack trace:\n09:21:15 INFO - chrome://mochikit/content/tests/SimpleTest/SimpleTest.js:simpletestOnerror:1476\n09:21:15 INFO - null:null:0\n09:21:15 INFO - JavaScript error: , line 0: uncaught exception: undefined\n09:21:15 INFO - 74 INFO Console message: [JavaScript Warning: \"unsafe CPOW usage\" {file: \"chrome://mochitests/content/browser/dom/html/test/browser_bug592641.js\" line: 52}]\n09:21:15 INFO - 75 INFO Console message: [JavaScript Error: \"uncaught exception: undefined\"]\n09:21:15 INFO - 76 INFO Console message: [JavaScript Error: \"Error: operation not possible on dead CPOW\"]\n09:21:54 INFO - 77 INFO Console message: 1424280114489 Toolkit.GMP WARN GMPInstallManager.parseResponseXML got node name: html, expected: updates\n09:21:54 INFO - 78 INFO Console message: [JavaScript Error: \"1424280114491 Toolkit.GMP ERROR GMPInstallManager.simpleCheckAndInstall Could not check for addons: {\"target\":{},\"message\":\"got node name: html, expected: updates\"}\" {file: \"resource://gre/modules/Log.jsm\" line: 749}]\n09:21:54 INFO - 79 INFO Console message: 1424280114711 Services.HealthReport.HealthReporter WARN Saved state file does not exist.\n09:22:43 INFO - Xlib: extension \"RANDR\" missing on display \":0\".\n09:22:44 INFO - TEST-INFO | screentopng: exit 0\n09:22:44 INFO - 80 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n09:22:44 INFO - 81 INFO MEMORY STAT vsize after test: 21991423696896\n09:22:44 INFO - 82 INFO MEMORY STAT residentFast after test: 494071808\n09:22:44 INFO - 83 INFO TEST-OK | dom/html/test/browser_bug592641.js | took 90129ms\n09:22:44 INFO - 84 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n09:22:44 INFO - 85 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
  "comments" : [ {
    "text" : "The dead CPOW error doesn't look good.\n\n09:21:13 INFO - 66 INFO TEST-START | dom/html/test/browser_bug592641.js\n09:21:15 INFO - JavaScript error: , line 0: Error: operation not possible on dead CPOW\n09:21:15 INFO - 67 INFO checking window state\n09:21:15 INFO - 68 INFO Console message: [JavaScript Warning: \"unsafe CPOW usage\" {file: \"resource:///modules/sessionstore/TabState.jsm\" line: 96}]\n09:21:15 INFO - 69 INFO Console message: [JavaScript Warning: \"unsafe CPOW usage\" {file: \"resource:///modules/sessionstore/TabState.jsm\" line: 96}]\n09:21:15 INFO - 70 INFO TEST-PASS | dom/html/test/browser_bug592641.js | Title should be correct on load #1\n09:21:15 INFO - 71 INFO Console message: [JavaScript Warning: \"unsafe CPOW usage\" {file: \"chrome://mochitests/content/browser/dom/html/test/browser_bug592641.js\" line: 33}]\n09:21:15 INFO - 72 INFO Console message: [JavaScript Warning: \"unsafe CPOW usage\" {file: \"chrome://mochitests/content/browser/dom/html/test/browser_bug592641.js\" line: 33}]\n09:21:15 INFO - 73 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n09:21:15 INFO - Stack trace:\n09:21:15 INFO - chrome://mochikit/content/tests/SimpleTest/SimpleTest.js:simpletestOnerror:1476\n09:21:15 INFO - null:null:0\n09:21:15 INFO - JavaScript error: , line 0: uncaught exception: undefined\n09:21:15 INFO - 74 INFO Console message: [JavaScript Warning: \"unsafe CPOW usage\" {file: \"chrome://mochitests/content/browser/dom/html/test/browser_bug592641.js\" line: 52}]\n09:21:15 INFO - 75 INFO Console message: [JavaScript Error: \"uncaught exception: undefined\"]\n09:21:15 INFO - 76 INFO Console message: [JavaScript Error: \"Error: operation not possible on dead CPOW\"]\n09:21:54 INFO - 77 INFO Console message: 1424280114489 Toolkit.GMP WARN GMPInstallManager.parseResponseXML got node name: html, expected: updates\n09:21:54 INFO - 78 INFO Console message: [JavaScript Error: \"1424280114491 Toolkit.GMP ERROR GMPInstallManager.simpleCheckAndInstall Could not check for addons: {\"target\":{},\"message\":\"got node name: html, expected: updates\"}\" {file: \"resource://gre/modules/Log.jsm\" line: 749}]\n09:21:54 INFO - 79 INFO Console message: 1424280114711 Services.HealthReport.HealthReporter WARN Saved state file does not exist.\n09:22:43 INFO - Xlib: extension \"RANDR\" missing on display \":0\".\n09:22:44 INFO - TEST-INFO | screentopng: exit 0\n09:22:44 INFO - 80 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n09:22:44 INFO - 81 INFO MEMORY STAT vsize after test: 21991423696896\n09:22:44 INFO - 82 INFO MEMORY STAT residentFast after test: 494071808\n09:22:44 INFO - 83 INFO TEST-OK | dom/html/test/browser_bug592641.js | took 90129ms\n09:22:44 INFO - 84 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n09:22:44 INFO - 85 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-18T18:50:43Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=6727100\nrepository: mozilla-inbound\nstart_time: 2015-02-18T09:10:44\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux64-spot-072\nbuildname: Ubuntu ASAN VM 12.04 x64 mozilla-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: 4c5c681a6104\n\n73 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n80 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n84 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n85 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-02-18T18:50:50Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2022331\nrepository: fx-team\nstart_time: 2015-02-18T09:04:39\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux64-spot-219\nbuildname: Ubuntu ASAN VM 12.04 x64 fx-team opt test mochitest-e10s-browser-chrome-2\nrevision: 73f1285748cf\n\n73 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n80 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n84 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n85 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\nSUMMARY: AddressSanitizer: SEGV /builds/slave/fx-team-l64-asan-0000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/fx-team-l64-asan-0000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/fx-team-l64-asan-0000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-02-18T19:11:52Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=6758235\nrepository: mozilla-inbound\nstart_time: 2015-02-18T18:50:19\nwho: philringnalda[at]gmail[dot]com\nmachine: tst-linux64-spot-343\nbuildname: Ubuntu ASAN VM 12.04 x64 mozilla-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: 8940026f4214\n\n73 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n80 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n84 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n85 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-02-19T03:46:11Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=6793826\nrepository: mozilla-inbound\nstart_time: 2015-02-19T18:45:47\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux64-spot-053\nbuildname: Ubuntu ASAN VM 12.04 x64 mozilla-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: fb653123d555\n\n73 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n80 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n84 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n85 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-02-20T03:09:58Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=7054301\nrepository: mozilla-inbound\nstart_time: 2015-02-27T04:02:39\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux64-spot-013\nbuildname: Ubuntu ASAN VM 12.04 x64 mozilla-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: 138f4bb6fbde\n\n99 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n106 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n110 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n111 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-02-27T15:06:29Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2149639\nrepository: fx-team\nstart_time: 2015-03-04T01:41:02\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux64-spot-1652\nbuildname: Ubuntu ASAN VM 12.04 x64 fx-team opt test mochitest-e10s-browser-chrome-2\nrevision: 774a588a07f4\n\n99 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n106 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n110 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n111 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\nSUMMARY: AddressSanitizer: SEGV /builds/slave/fx-team-l64-asan-0000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/fx-team-l64-asan-0000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/fx-team-l64-asan-0000000000000/build/src/js/src/ctypes/CTypes.cpp:2149 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-03-04T10:27:02Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=7233126\nrepository: mozilla-inbound\nstart_time: 2015-03-04T20:53:58\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux32-spot-1046\nbuildname: Ubuntu VM 12.04 mozilla-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: 322a307d48ce\n\n99 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n116 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n121 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n122 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-03-05T08:45:44Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2193163\nrepository: fx-team\nstart_time: 2015-03-09T06:30:25\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux32-spot-709\nbuildname: Ubuntu VM 12.04 fx-team opt test mochitest-e10s-browser-chrome-2\nrevision: c5fc760d1401\n\n101 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n118 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n123 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n124 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-03-09T14:00:47Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=7485136\nrepository: mozilla-inbound\nstart_time: 2015-03-11T11:16:12\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux64-spot-1084\nbuildname: Ubuntu ASAN VM 12.04 x64 mozilla-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: 14d19980f27d\n\n99 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n106 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n110 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n111 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2150 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2150 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2150 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-03-11T18:45:08Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-central&job_id=1168231\nrepository: mozilla-central\nstart_time: 2015-03-14T03:53:35\nwho: philringnalda[at]gmail[dot]com\nmachine: tst-linux64-spot-222\nbuildname: Ubuntu ASAN VM 12.04 x64 mozilla-central opt test mochitest-e10s-browser-chrome-2\nrevision: 38154607d807\n\n117 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n124 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n128 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n129 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-cen-l64-asan-ntly-0000000000/build/src/js/src/ctypes/CTypes.cpp:2150 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-cen-l64-asan-ntly-0000000000/build/src/js/src/ctypes/CTypes.cpp:2150 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-cen-l64-asan-ntly-0000000000/build/src/js/src/ctypes/CTypes.cpp:2150 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-03-14T14:43:02Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=7731849\nrepository: mozilla-inbound\nstart_time: 2015-03-17T20:56:35\nwho: philringnalda[at]gmail[dot]com\nmachine: tst-linux32-spot-721\nbuildname: Ubuntu VM 12.04 mozilla-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: ca19388684ac\n\n127 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0\n144 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n149 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n150 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-03-18T04:13:18Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2721456\nrepository: fx-team\nstart_time: 2015-04-17T02:20:18\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux32-spot-295\nbuildname: Ubuntu VM 12.04 fx-team pgo test mochitest-e10s-browser-chrome-2\nrevision: 75502e233121\n\n100 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n112 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n114 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n115 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-17T11:26:15Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=9084733\nrepository: mozilla-inbound\nstart_time: 2015-04-20T13:41:21\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux64-spot-322\nbuildname: Ubuntu VM 12.04 x64 mozilla-inbound debug test mochitest-e10s-browser-chrome-2\nrevision: a87103b43f91\n\n100 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n115 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n117 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n118 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-20T21:11:17Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=try&job_id=6897427\nrepository: try\nstart_time: 2015-04-23T17:31:26\nwho: ehsan[at]mozilla[dot]com\nmachine: tst-linux32-spot-040\nbuildname: Ubuntu VM 12.04 try opt test mochitest-e10s-browser-chrome-2\nrevision: d9ba16656a73\n\n102 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n114 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n116 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n117 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-24T14:38:16Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=9321417\nrepository: mozilla-inbound\nstart_time: 2015-04-27T05:01:29\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux32-spot-753\nbuildname: Ubuntu VM 12.04 mozilla-inbound pgo test mochitest-e10s-browser-chrome-2\nrevision: b371db089894\n\n102 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n114 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n116 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-27T12:42:26Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-central&job_id=1403061\nrepository: mozilla-central\nstart_time: 2015-04-28T07:10:36\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux32-spot-134\nbuildname: Ubuntu VM 12.04 mozilla-central debug test mochitest-e10s-browser-chrome-2\nrevision: e0299ad29b85\n\n102 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n117 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n119 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n120 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-28T15:11:57Z"
  }, {
    "text" : "Not really sure as to the best component for this, but Core::IPC probably isn't.",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-28T15:13:19Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-central&job_id=1404097\nrepository: mozilla-central\nstart_time: 2015-04-28T13:21:19\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux32-spot-050\nbuildname: Ubuntu VM 12.04 mozilla-central debug test mochitest-e10s-browser-chrome-2\nrevision: 1ad65cbeb2f4\n\n102 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n117 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n119 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n120 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-28T20:48:15Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=try&job_id=7124547\nrepository: try\nstart_time: 2015-04-30T11:53:27\nwho: bkelly[at]mozilla[dot]com\nmachine: tst-linux32-spot-164\nbuildname: Ubuntu VM 12.04 try debug test mochitest-e10s-browser-chrome-2\nrevision: bc753f37d96f\n\n102 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n117 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n119 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n120 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-04-30T20:03:26Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-central&job_id=1417317\nrepository: mozilla-central\nstart_time: 2015-05-01T09:02:24\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux32-spot-079\nbuildname: Ubuntu VM 12.04 mozilla-central debug test mochitest-e10s-browser-chrome-2\nrevision: 60b269fed8cf\n\n102 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n117 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n119 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n120 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-01T16:43:56Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=try&job_id=7215468\nrepository: try\nstart_time: 2015-05-04T15:17:13\nwho: mrbkap[at]mozilla[dot]com\nmachine: tst-linux32-spot-199\nbuildname: Ubuntu VM 12.04 try debug test mochitest-e10s-browser-chrome-2\nrevision: 2085810a65e1\n\n122 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n137 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n139 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n140 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-04T23:35:18Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=1849808\nrepository: b2g-inbound\nstart_time: 2015-05-05T05:14:13\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux32-spot-292\nbuildname: Ubuntu VM 12.04 b2g-inbound debug test mochitest-e10s-browser-chrome-2\nrevision: cca08f3dc531\n\n121 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n136 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n138 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n139 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-05T13:23:22Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=1869610\nrepository: b2g-inbound\nstart_time: 2015-05-07T09:00:43\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux32-spot-780\nbuildname: Ubuntu VM 12.04 b2g-inbound debug test mochitest-e10s-browser-chrome-2\nrevision: e9f75be97c2d\n\n121 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n136 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n138 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n139 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-07T17:05:18Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-central&job_id=1453250\nrepository: mozilla-central\nstart_time: 2015-05-07T16:14:34\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux32-spot-458\nbuildname: Ubuntu VM 12.04 mozilla-central debug test mochitest-e10s-browser-chrome-2\nrevision: 70a21ed63d18\n\n122 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n137 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n139 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n140 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-07T23:48:21Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2986281\nrepository: fx-team\nstart_time: 2015-05-07T20:27:39\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux32-spot-633\nbuildname: Ubuntu VM 12.04 fx-team debug test mochitest-e10s-browser-chrome-2\nrevision: 1bae19c2d494\n\n123 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n138 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n140 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n141 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-08T06:44:24Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2993292\nrepository: fx-team\nstart_time: 2015-05-08T06:59:57\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux32-spot-1062\nbuildname: Ubuntu VM 12.04 fx-team debug test mochitest-e10s-browser-chrome-2\nrevision: c3665d7869ba\n\n122 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n137 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n139 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-08T14:33:28Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-central&job_id=1459507\nrepository: mozilla-central\nstart_time: 2015-05-08T12:01:12\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux32-spot-223\nbuildname: Ubuntu VM 12.04 mozilla-central debug test mochitest-e10s-browser-chrome-2\nrevision: cef2b76b082d\n\n123 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n138 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n140 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n141 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-08T19:35:58Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=3048797\nrepository: fx-team\nstart_time: 2015-05-12T00:33:30\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux64-spot-1424\nbuildname: Ubuntu ASAN VM 12.04 x64 fx-team opt test mochitest-e10s-browser-chrome-2\nrevision: 9068caa791d1\n\n120 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n125 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n127 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\nSUMMARY: AddressSanitizer: SEGV /builds/slave/fx-team-l64-asan-0000000000000/build/src/js/src/ctypes/CTypes.cpp:2728 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/fx-team-l64-asan-0000000000000/build/src/js/src/ctypes/CTypes.cpp:2728 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/fx-team-l64-asan-0000000000000/build/src/js/src/ctypes/CTypes.cpp:2728 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-12T08:17:25Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=1946701\nrepository: b2g-inbound\nstart_time: 2015-05-18T03:21:38\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux64-spot-179\nbuildname: Ubuntu VM 12.04 x64 b2g-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: 976e19eac8b5\n\n111 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n113 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n115 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n116 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-18T11:49:34Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=9933632\nrepository: mozilla-inbound\nstart_time: 2015-05-18T04:13:07\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux64-spot-798\nbuildname: Ubuntu ASAN VM 12.04 x64 mozilla-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: 6800629ce1b1\n\n\"comments\": \"Bug 1164658 - disable test_web_channel.js for thunderbird, as it requires weave which thunderbird doesn't have. r=markh\\n\\nTEST-UNEXPECTED-FAIL | services/fxaccounts/tests/xpcshell/test_web_channel.js | xpcshell return code: 0\\nTypeError: Cc['@mozilla.org/weave/service;1'] is undefined at resource://gre/modules/FxAccountsWebChannel.jsm:227\",\n110 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n115 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n117 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2728 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2728 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/m-in-l64-asan-0000000000000000/build/src/js/src/ctypes/CTypes.cpp:2728 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-18T12:50:41Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=1950616\nrepository: b2g-inbound\nstart_time: 2015-05-18T07:15:59\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux64-spot-450\nbuildname: Ubuntu ASAN VM 12.04 x64 b2g-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: 4e0dd9b21f43\n\n112 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n117 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n119 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n120 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\nSUMMARY: AddressSanitizer: SEGV /builds/slave/b2g-in-l64-asan-00000000000000/build/src/js/src/ctypes/CTypes.cpp:2728 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/b2g-in-l64-asan-00000000000000/build/src/js/src/ctypes/CTypes.cpp:2728 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/b2g-in-l64-asan-00000000000000/build/src/js/src/ctypes/CTypes.cpp:2728 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-18T15:06:02Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=1969055\nrepository: b2g-inbound\nstart_time: 2015-05-20T02:14:38\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux64-spot-1991\nbuildname: Ubuntu ASAN VM 12.04 x64 b2g-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: 97ccb9e0cefb\n\n111 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n116 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n118 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n119 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n205 INFO TEST-UNEXPECTED-FAIL | layout/xul/test/browser_bug706743.js | Test timed out - expected PASS\n207 INFO TEST-UNEXPECTED-FAIL | layout/xul/test/browser_bug706743.js | Found a tab after previous test timed out: data:text/html,<html><head></head><body><a%20id=\"target\"%20href=\"about:blank\"%20title=\"This%20is%20tooltip%20text\"%20style=\"display:block;height:20px;margin:10px;\"%20onclick=\"return%20false;\">here%20is%20an%20anchor%20element</a></body></html> - expected PASS\nSUMMARY: AddressSanitizer: SEGV /builds/slave/b2g-in-l64-asan-00000000000000/build/src/js/src/ctypes/CTypes.cpp:2728 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/b2g-in-l64-asan-00000000000000/build/src/js/src/ctypes/CTypes.cpp:2728 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)\nSUMMARY: AddressSanitizer: SEGV /builds/slave/b2g-in-l64-asan-00000000000000/build/src/js/src/ctypes/CTypes.cpp:2728 js::ctypes::ConvertToJS(JSContext*, JS::Handle<JSObject*>, JS::Handle<JSObject*>, void*, bool, bool, JS::MutableHandle<JS::Value>)",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-20T09:46:43Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=1978588\nrepository: b2g-inbound\nstart_time: 2015-05-20T21:20:17\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux32-spot-1049\nbuildname: Ubuntu VM 12.04 b2g-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: e12a736d2d52\n\n112 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n117 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n119 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-21T07:27:06Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=try&job_id=7771148\nrepository: try\nstart_time: 2015-05-21T16:03:25\nwho: dholbert[at]mozilla[dot]com\nmachine: tst-linux32-spot-689\nbuildname: Ubuntu VM 12.04 try opt test mochitest-e10s-browser-chrome-2\nrevision: 57efa5897499\n\n113 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n115 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n117 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n118 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-22T01:19:18Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=1996408\nrepository: b2g-inbound\nstart_time: 2015-05-22T08:15:49\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux32-spot-253\nbuildname: Ubuntu VM 12.04 b2g-inbound debug test mochitest-e10s-browser-chrome-2\nrevision: 04cb8c5a3270\n\n112 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n117 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n119 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-22T15:48:56Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=10182613\nrepository: mozilla-inbound\nstart_time: 2015-05-26T20:45:04\nwho: philringnalda[at]gmail[dot]com\nmachine: tst-linux32-spot-306\nbuildname: Ubuntu VM 12.04 mozilla-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: 420bc7afeb18\n\n113 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n118 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n120 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n121 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-05-27T04:06:47Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=3569214\nrepository: fx-team\nstart_time: 2015-06-25T16:57:24\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux64-spot-1429\nbuildname: Ubuntu VM 12.04 x64 fx-team debug test mochitest-e10s-browser-chrome-3\nrevision: b57706580b6a\n\n367 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n372 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n374 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-06-26T00:50:41Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=11592566\nrepository: mozilla-inbound\nstart_time: 2015-07-10T21:21:46\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux64-spot-1378\nbuildname: Ubuntu VM 12.04 x64 mozilla-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: 836d79194ff1\n\n744 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n746 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n748 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-07-11T13:07:41Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=3838998\nrepository: fx-team\nstart_time: 2015-07-20T09:51:46\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux64-spot-1518\nbuildname: Ubuntu VM 12.04 x64 fx-team opt test mochitest-e10s-browser-chrome-2\nrevision: 1009c4ac8efb\n\n321 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n326 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n328 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n329 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-07-20T17:20:01Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-central&job_id=1874093\nrepository: mozilla-central\nstart_time: 2015-07-24T06:49:02\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux64-spot-1264\nbuildname: Ubuntu VM 12.04 x64 mozilla-central pgo test mochitest-e10s-browser-chrome-2\nrevision: 9bca608ab65a\n\n714 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n719 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n721 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n722 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-07-24T14:39:41Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=3930450\nrepository: fx-team\nstart_time: 2015-07-26T17:00:52\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux32-spot-1028\nbuildname: Ubuntu VM 12.04 fx-team pgo test mochitest-e10s-browser-chrome-1\nrevision: c6a3767c30fc\n\n325 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n331 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n333 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n334 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-07-27T08:22:41Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=12755219\nrepository: mozilla-inbound\nstart_time: 2015-08-11T13:33:16\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux64-spot-1152\nbuildname: Ubuntu VM 12.04 x64 mozilla-inbound opt test mochitest-e10s-browser-chrome-3\nrevision: 162488161353\n\n432 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n439 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n441 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-08-11T21:45:45Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=2522062\nrepository: b2g-inbound\nstart_time: 2015-08-12T15:17:13\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux32-spot-1027\nbuildname: Ubuntu VM 12.04 b2g-inbound opt test mochitest-e10s-browser-chrome-3\nrevision: 03d70e0295d4\n\n523 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n530 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n532 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-08-12T23:20:16Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-central&job_id=2040248\nrepository: mozilla-central\nstart_time: 2015-08-18T16:33:13\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux64-spot-1318\nbuildname: Ubuntu VM 12.04 x64 mozilla-central opt test mochitest-e10s-browser-chrome-2\nrevision: db4616cd0721\n\n796 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n803 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n805 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n806 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-08-19T00:17:12Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=try&job_id=10796866\nrepository: try\nstart_time: 2015-08-27T00:31:21\nwho: bballo[at]mozilla[dot]com\nmachine: tst-linux64-spot-660\nbuildname: Ubuntu VM 12.04 x64 try debug test mochitest-e10s-browser-chrome-3\nrevision: 93ccae52414c\n\n423 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n432 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n434 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-08-27T18:19:37Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=13539598\nrepository: mozilla-inbound\nstart_time: 2015-08-31T18:06:16\nwho: xquan[at]mozilla[dot]com\nmachine: tst-linux64-spot-1739\nbuildname: Ubuntu VM 12.04 x64 mozilla-inbound opt test mochitest-e10s-browser-chrome-2\nrevision: f4ba4b6e7c95\n\n450 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n459 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n461 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n462 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-09-01T01:34:51Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=13522165\nrepository: mozilla-inbound\nstart_time: 2015-08-31T17:16:17\nwho: rvandermeulen[at]mozilla[dot]com\nmachine: tst-linux64-spot-691\nbuildname: Ubuntu VM 12.04 x64 mozilla-inbound debug test mochitest-e10s-browser-chrome-1\nrevision: bb4e82854ae7\n\n326 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n335 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n337 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-09-01T02:09:32Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=13840701\nrepository: mozilla-inbound\nstart_time: 2015-09-09T10:51:47\nwho: philringnalda[at]gmail[dot]com\nmachine: tst-linux32-spot-1090\nbuildname: Ubuntu VM 12.04 mozilla-inbound pgo test mochitest-e10s-browser-chrome-2\nrevision: 8480dd03b9c1\n\n404 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n412 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n414 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-09-09T18:52:34Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=2721441\nrepository: b2g-inbound\nstart_time: 2015-09-10T03:05:36\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux64-spot-1406\nbuildname: Ubuntu VM 12.04 x64 b2g-inbound opt test mochitest-e10s-browser-chrome-1\nrevision: ac0a29169cc9\n\n57 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n65 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n67 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-09-10T14:44:47Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=4628693\nrepository: fx-team\nstart_time: 2015-09-11T00:20:58\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux64-spot-229\nbuildname: Ubuntu VM 12.04 x64 fx-team pgo test mochitest-e10s-browser-chrome-4\nrevision: ac8bf0e46b5a\n\n176 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n184 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n186 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n187 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-09-11T10:42:35Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=14204214\nrepository: mozilla-inbound\nstart_time: 2015-09-16T05:54:22\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux64-spot-840\nbuildname: Ubuntu VM 12.04 x64 mozilla-inbound opt test mochitest-e10s-browser-chrome-3\nrevision: 5d135736c0a1\n\n175 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n183 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n185 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n186 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-09-16T13:50:14Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=try&job_id=11574396\nrepository: try\nstart_time: 2015-09-16T22:34:56\nwho: englehardt[at]gmail[dot]com\nmachine: tst-linux64-spot-752\nbuildname: Ubuntu VM 12.04 x64 try debug test mochitest-e10s-browser-chrome-5\nrevision: 2253fd8e7241\n\n122 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n130 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n132 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n133 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-09-17T18:19:30Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=14328995\nrepository: mozilla-inbound\nstart_time: 2015-09-18T06:23:02\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux64-spot-269\nbuildname: Ubuntu VM 12.04 x64 mozilla-inbound opt test mochitest-e10s-browser-chrome-3\nrevision: b6db43f49b67\n\n177 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n185 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n187 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n188 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-09-18T13:43:34Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=14391008\nrepository: mozilla-inbound\nstart_time: 2015-09-19T14:38:33\nwho: philringnalda[at]gmail[dot]com\nmachine: tst-linux64-spot-090\nbuildname: Ubuntu VM 12.04 x64 mozilla-inbound opt test mochitest-e10s-browser-chrome-3\nrevision: a9705e55f06d\n\n175 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n182 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n184 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS\n185 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-09-19T21:57:33Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=4788398\nrepository: fx-team\nstart_time: 2015-09-22T15:59:55\nwho: wkocher[at]mozilla[dot]com\nmachine: tst-linux64-spot-380\nbuildname: Ubuntu VM 12.04 x64 fx-team debug test mochitest-e10s-browser-chrome-4\nrevision: 81cb24e420d1\n\n155 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n161 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n163 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-09-22T23:28:43Z"
  }, {
    "text" : "log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=4864489\nrepository: fx-team\nstart_time: 2015-09-26T15:54:16\nwho: tomcat[at]mozilla[dot]com\nmachine: tst-linux32-spot-617\nbuildname: Ubuntu VM 12.04 fx-team pgo test mochitest-e10s-browser-chrome-1\nrevision: c2c326eff429\n\n78 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0\n83 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Test timed out - expected PASS\n85 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | Found a tab after previous test timed out: http://mochi.test:8888/browser/dom/html/test/bug592641_img.jpg - expected PASS",
    "authour" : "tbplbot@gmail.com",
    "created" : "2015-09-28T06:29:36Z"
  }, {
    "text" : "7 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* try: 5\n* mozilla-inbound: 1\n* mozilla-aurora: 1\n\nPlatform breakdown:\n* osx-10-6: 5\n* linux32: 2\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-02-29&endday=2016-03-06&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-03-07T01:00:12Z"
  }, {
    "text" : "5 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 4\n* fx-team: 1\n\nPlatform breakdown:\n* linux64: 4\n* linux32: 1\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-04-04&endday=2016-04-10&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-04-11T01:00:13Z"
  }, {
    "text" : "13 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 7\n* fx-team: 5\n* try: 1\n\nPlatform breakdown:\n* linux64: 11\n* linux32: 2\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-04-11&endday=2016-04-17&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-04-18T01:00:18Z"
  }, {
    "text" : "16 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 12\n* try: 1\n* mozilla-central: 1\n* fx-team: 1\n* ash: 1\n\nPlatform breakdown:\n* linux32: 10\n* linux64: 6\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-04-18&endday=2016-04-24&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-04-25T01:00:16Z"
  }, {
    "text" : "12 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-central: 4\n* mozilla-inbound: 3\n* fx-team: 3\n* try: 1\n* mozilla-aurora: 1\n\nPlatform breakdown:\n* linux64: 6\n* linux32: 5\n* windows7-32: 1\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-04-25&endday=2016-05-01&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-05-02T01:00:08Z"
  }, {
    "text" : "16 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 7\n* fx-team: 5\n* mozilla-central: 2\n* try: 1\n* mozilla-aurora: 1\n\nPlatform breakdown:\n* linux64: 12\n* linux32: 4\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-05-10&endday=2016-05-16&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-05-17T09:41:47Z"
  }, {
    "text" : "30 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 19\n* fx-team: 6\n* mozilla-central: 3\n* try: 1\n* ash: 1\n\nPlatform breakdown:\n* linux64: 19\n* linux32: 11\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-05-16&endday=2016-05-22&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-05-23T01:00:22Z"
  }, {
    "text" : "26 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 14\n* fx-team: 11\n* mozilla-central: 1\n\nPlatform breakdown:\n* linux64: 21\n* linux32: 5\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-05-23&endday=2016-05-29&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-05-30T01:00:21Z"
  }, {
    "text" : "20 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 13\n* fx-team: 4\n* mozilla-central: 2\n* mozilla-aurora: 1\n\nPlatform breakdown:\n* linux64: 14\n* linux32: 6\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-05-30&endday=2016-06-05&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-06-06T01:00:21Z"
  }, {
    "text" : "29 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 21\n* fx-team: 4\n* mozilla-central: 2\n* try: 1\n* mozilla-aurora: 1\n\nPlatform breakdown:\n* linux64: 19\n* linux32: 9\n* windows7-32: 1\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-06-06&endday=2016-06-12&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-06-13T01:00:17Z"
  }, {
    "text" : "5 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 2\n* fx-team: 2\n* try: 1\n\nPlatform breakdown:\n* linux64: 3\n* linux32: 2\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-06-13&endday=2016-06-19&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-06-20T01:00:09Z"
  }, {
    "text" : "26 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 17\n* mozilla-central: 3\n* mozilla-aurora: 3\n* fx-team: 2\n* autoland: 1\n\nPlatform breakdown:\n* linux64: 18\n* linux32: 6\n* windows7-32: 2\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-06-20&endday=2016-06-26&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-06-27T01:00:15Z"
  }, {
    "text" : "29 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 13\n* fx-team: 9\n* mozilla-beta: 2\n* mozilla-aurora: 2\n* autoland: 2\n* mozilla-central: 1\n\nPlatform breakdown:\n* linux64: 18\n* linux32: 10\n* windows7-32: 1\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-06-27&endday=2016-07-03&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-07-04T01:08:12Z"
  }, {
    "text" : "Intermittent e10s test failure",
    "authour" : "cpeterson@mozilla.com",
    "created" : "2016-07-05T23:51:44Z"
  }, {
    "text" : "40 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 13\n* autoland: 12\n* fx-team: 6\n* try: 3\n* mozilla-beta: 3\n* mozilla-central: 2\n* mozilla-aurora: 1\n\nPlatform breakdown:\n* linux64: 20\n* linux32: 14\n* windows7-32: 4\n* windows8-64: 2\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-07-04&endday=2016-07-10&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-07-11T01:09:37Z"
  }, {
    "text" : "25 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* autoland: 8\n* mozilla-inbound: 7\n* fx-team: 3\n* mozilla-central: 2\n* mozilla-aurora: 2\n* try: 1\n* mozilla-beta: 1\n* ash: 1\n\nPlatform breakdown:\n* linux64: 12\n* linux32: 8\n* windows7-32: 5\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-07-11&endday=2016-07-17&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-07-18T01:00:18Z"
  }, {
    "text" : "15 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* autoland: 5\n* mozilla-inbound: 4\n* mozilla-aurora: 2\n* fx-team: 2\n* try: 1\n* ash: 1\n\nPlatform breakdown:\n* linux64: 15\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-07-18&endday=2016-07-24&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-07-25T01:00:25Z"
  }, {
    "text" : "20 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 9\n* autoland: 4\n* fx-team: 3\n* mozilla-central: 2\n* try: 1\n* ash: 1\n\nPlatform breakdown:\n* linux64: 11\n* linux32: 8\n* osx-10-10: 1\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-07-25&endday=2016-07-31&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-08-01T01:07:28Z"
  }, {
    "text" : "24 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 13\n* fx-team: 5\n* autoland: 3\n* try: 1\n* mozilla-central: 1\n* mozilla-beta: 1\n\nPlatform breakdown:\n* linux64: 16\n* linux32: 6\n* osx-10-10: 2\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-08-01&endday=2016-08-07&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-08-08T01:09:33Z"
  }, {
    "text" : "17 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 6\n* autoland: 5\n* mozilla-central: 2\n* fx-team: 2\n* mozilla-beta: 1\n* mozilla-aurora: 1\n\nPlatform breakdown:\n* linux64: 12\n* linux32: 5\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-08-08&endday=2016-08-14&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-08-15T01:08:36Z"
  }, {
    "text" : "31 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* mozilla-inbound: 12\n* autoland: 11\n* fx-team: 5\n* mozilla-aurora: 2\n* mozilla-beta: 1\n\nPlatform breakdown:\n* linux64: 16\n* linux32: 11\n* osx-10-10: 4\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-08-15&endday=2016-08-21&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-08-22T01:09:17Z"
  }, {
    "text" : "Hey kevin!\n\nSo the good news is that we get stack information for dead CPOW exceptions, which really helps to narrow down where the problem is. (This is true as of about ~20 days ago since bug 1249698 landed).\n\nClicking on the \"brasstacks\" link from one of the OrangeFactor comments, I was able to find the test log, which has this in it:\n\n01:45:14     INFO -  255 INFO TEST-UNEXPECTED-FAIL | dom/html/test/browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at load2Done@chrome://mochitests/content/browser/dom/html/test/browser_bug592641.js:52:7\n01:45:14     INFO -  testScope/test_executeSoon/<.run@chrome://mochikit/content/browser-test.js:993:9\n01:45:14     INFO -  Stack trace:\n01:45:14     INFO -  chrome://mochikit/content/tests/SimpleTest/SimpleTest.js:simpletestOnerror:1609\n01:45:14     INFO -  JavaScript error: chrome://mochitests/content/browser/dom/html/test/browser_bug592641.js, line 52: Error: operation not possible on dead CPOW\n01:45:14     INFO -  256 INFO Console message: [JavaScript Error: \"Error: operation not possible on dead CPOW\" {file: \"chrome://mochitests/content/browser/dom/html/test/browser_bug592641.js\" line: 52}]\n01:45:14     INFO -  load2Done@chrome://mochitests/content/browser/dom/html/test/browser_bug592641.js:52:7\n01:45:14     INFO -  testScope/test_executeSoon/<.run@chrome://mochikit/content/browser-test.js:993:9\n\nSo the problem appears to be in dom/html/test/browser_bug592641.js on line 52:\n\nhttp://searchfox.org/mozilla-central/rev/f80822840bc5f3d2d3cae3ece621ddbce72e7f54/dom/html/test/browser_bug592641.js#52\n\nAnd what we've got here is a test attempting to access the title of a loaded page by way of the contentWindow CPOW. It should instead ask the tab2Browser object directly, via\n\nctx.tab2Browser.contentTitle\n\nCan you make that change and make sure the test passes? If so, we can push this one to try. After that, if you're starting to get the hang of it, maybe you can go on a spree and start taking care of some of the rest of the (many) dead CPOW exceptions[1]: I know our tree sheriffs would be pretty happy about that!\n\n[1]: https://bugzilla.mozilla.org/buglist.cgi?quicksearch=dead%20CPOW&list_id=13186804",
    "authour" : "mconley@mozilla.com",
    "created" : "2016-08-26T14:55:37Z"
  }, {
    "text" : "(In reply to Mike Conley (:mconley) - (Needinfo me!) from comment #78)\n> And what we've got here is a test attempting to access the title of a loaded\n> page by way of the contentWindow CPOW. It should instead ask the tab2Browser\n> object directly, via\n> \n> ctx.tab2Browser.contentTitle\n\nCan't help but wonder if this pattern is frequent enough that a mass find & replace would be in order. And yes, ++ to fixing dead CPOW failures!",
    "authour" : "ryanvm@gmail.com",
    "created" : "2016-08-26T14:57:10Z"
  }, {
    "text" : "Not too many hits:\n\nhttps://dxr.mozilla.org/mozilla-central/search?q=contentWindow.document.title&=mozilla-central\n\nBut this did point out that there's a _2nd_ usage within this file that should probably be updated as well.",
    "authour" : "mconley@mozilla.com",
    "created" : "2016-08-26T14:58:46Z"
  }, {
    "text" : "Created attachment 8785358\nbug1134307_Dead_CPOW.diff\n\nI finished this one. I have the other line in another file.",
    "authour" : "kevchan85@yahoo.com",
    "created" : "2016-08-26T16:16:24Z"
  }, {
    "text" : "Mike, I have the other bug ready to upload Should I create a new bug and post it there? I cannot find anything referencing this file from a quick search beside this thread.",
    "authour" : "kevchan85@yahoo.com",
    "created" : "2016-08-26T16:21:50Z"
  }, {
    "text" : "Created attachment 8785375\nbug1134307_Dead_CPOW_tab_1_and_2.diff\n\nThis patch has changes to lines referencing contentTitle for tabs 1 and two.",
    "authour" : "kevchan85@yahoo.com",
    "created" : "2016-08-26T16:36:32Z"
  }, {
    "text" : "Created attachment 8785376\nbug1134307_Dead_CPOW_1.diff\n\nThis file has a change to line 33",
    "authour" : "kevchan85@yahoo.com",
    "created" : "2016-08-26T16:37:41Z"
  }, {
    "text" : "I think fixing both of these CPOW uses in browser_bug592641.js in this bug makes sense. However, I think we can probably safely have the changes occur in the same file. Can you please combine your patches?",
    "authour" : "mconley@mozilla.com",
    "created" : "2016-08-26T16:43:00Z"
  }, {
    "text" : "Created attachment 8785381\nbug1134307_Dead_CPOW.diff\n\nHere the file with both patches. I will start looking at other CPOW stuff as you suggested.",
    "authour" : "kevchan85@yahoo.com",
    "created" : "2016-08-26T16:51:32Z"
  }, {
    "text" : "Thank you for removing the other patches I was trying to figure out how to do it on this thread.",
    "authour" : "kevchan85@yahoo.com",
    "created" : "2016-08-26T16:56:27Z"
  }, {
    "text" : "Created attachment 8785384\nbug1134307_Dead_CPOW.diff",
    "authour" : "kevchan85@yahoo.com",
    "created" : "2016-08-26T16:59:25Z"
  }, {
    "text" : "Comment on attachment 8785384\nbug1134307_Dead_CPOW.diff\n\nReview of attachment 8785384:\n-----------------------------------------------------------------\n\nThis looks great to me! I'm going to push this to try.\n\nIn the meantime, take a look at the list of bugs and feel free to needinfo? me on any that you want. I'll assign you and help you where you need.\n\nThanks for your work!",
    "authour" : "mconley@mozilla.com",
    "created" : "2016-08-26T17:13:46Z"
  }, {
    "text" : "https://treeherder.mozilla.org/#/jobs?repo=try&revision=f9f560bdd919",
    "authour" : "mconley@mozilla.com",
    "created" : "2016-08-26T17:17:50Z"
  }, {
    "text" : "Mike what are the flags for? I was watching the testing it says its done. Is there anything else I can do?",
    "authour" : "kevchan85@yahoo.com",
    "created" : "2016-08-26T18:33:36Z"
  }, {
    "text" : "Hrm, not sure why the more recent push wasn't put in the bug. The one in comment 90 was obsolete (I forgot to request retriggers).\n\nSo here's the right one: https://treeherder.mozilla.org/#/jobs?repo=try&revision=cc09e297fff69d67caa4853909b9aa91bfc09d73\n\nWhat I've done is pushed a request to our automation to run all of the tests under dom/html/test (including the one you've fixed). I've requested 20 retriggers each to see if the intermittent failure shows up in any of them.\n\nEach of our test \"types\" is represented by a symbol in that link, and there's even further categorization after that. For example, \"1\" and \"bc1\" are part of the M suite. In this case, M stands for mochitest, which is the name of the testing framework that we're using. 1 and bc1 are flavours of mochitest, and each flavour has different capabilities and powers. Your test is a \"browser\" mochitest, so it's running in the ones that start with \"bc\".\n\nChecking the test log of one of the Linux 64 bc1s here: https://archive.mozilla.org/pub/firefox/try-builds/mconley@mozilla.com-cc09e297fff69d67caa4853909b9aa91bfc09d73/try-linux64/try_ubuntu64_vm_test-mochitest-browser-chrome-1-bm51-tests1-linux64-build473.txt.gz\n\nIf I do a Find in Page on that log, I can find browser_bug592641.js, so the test you patched is running in that suite, and it appears to be passing.\n\nGreen means pass. Orange means one or more tests failed. In this case, I'm seeing failures on OS X 10.10 debug for \"1\" (Also called \"Mochitest 1\"). Clicking on that orange will show a readout of the failure in the bottom pane. Each one is reporting this failure:\n\nTEST-UNEXPECTED-FAIL | leakcheck | default process: 10216 bytes leaked (BasicContainerLayer, BasicImplData, BasicLayerManager, BasicPaintedLayer, CompositableClient, ...)\n\nWhich is a pre-existing very frequent orange, and is almost certainly unrelated to your patch, so we can ignore it. The red \"1\" in the M-e10s group means that the test resulted in the browser crashing, but this one says that this is an intermittent assertion failure for the dom/html/test/test_fullscreen-api.html test, so again, unrelated.\n\nSo so far, we're looking okay here. The intermittents that we just saw in the try push are annoying because they're not related, but we have to check on them anyway to see if we've broken anything. That's precisely why your work here is so useful - the more intermittents we get rid of, the more we can trust our test results the first time! :)\n\nI've left the needinfo on myself to check the try build once all of the tests are done (likely on the weekend or on Monday), after which, if we're all green, we should be good to land.\n\nIn the meantime, let me know if you want any suggestions on another bug like this you can fix.",
    "authour" : "mconley@mozilla.com",
    "created" : "2016-08-26T18:46:53Z"
  }, {
    "text" : "This looks good to me on try, despite the other (unrelated) oranges.",
    "authour" : "mconley@mozilla.com",
    "created" : "2016-08-27T03:16:40Z"
  }, {
    "text" : "Author: kevin <kevchan85@yahoo.com>\nBug number: 1134307\nCommit message: Bug 1134307 - Remove a CPOW from browser_bug592641.js to avoid a dead CPOW intermittent. r=mconley",
    "authour" : "mconley@mozilla.com",
    "created" : "2016-08-27T03:17:36Z"
  }, {
    "text" : "36 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* autoland: 18\n* fx-team: 7\n* mozilla-inbound: 6\n* try: 2\n* mozilla-central: 2\n* mozilla-aurora: 1\n\nPlatform breakdown:\n* linux64: 24\n* linux32: 10\n* windows7-32-vm: 1\n* osx-10-10: 1\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-08-22&endday=2016-08-28&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-08-29T01:09:13Z"
  }, {
    "text" : "I tweaked the commit message to be a bit more descriptive.",
    "authour" : "ryanvm@gmail.com",
    "created" : "2016-08-29T18:55:33Z"
  }, {
    "text" : "Pushed by ryanvm@gmail.com:\nhttps://hg.mozilla.org/integration/fx-team/rev/89ea6ea53888\nAccess the title of the loaded page by using ctx.tab2Browser.contentTitle in browser_bug592641.js to avoid CPOW usage. r=mconley",
    "authour" : "pulsebot@bots.tld",
    "created" : "2016-08-29T18:58:52Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/89ea6ea53888",
    "authour" : "wkocher@mozilla.com",
    "created" : "2016-08-30T00:54:09Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-aurora/rev/da952731c13a",
    "authour" : "ryanvm@gmail.com",
    "created" : "2016-08-30T21:54:45Z"
  }, {
    "text" : "https://hg.mozilla.org/releases/mozilla-beta/rev/009ea36672be",
    "authour" : "ryanvm@gmail.com",
    "created" : "2016-08-30T22:09:03Z"
  }, {
    "text" : "Pushed by ryanvm@gmail.com:\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/cea23a652dcf\nRemove some CPOWs from browser_windowName.js to avoid a dead CPOW intermittent. r=mconley",
    "authour" : "pulsebot@bots.tld",
    "created" : "2016-09-01T17:04:33Z"
  }, {
    "text" : "11 automation job failures were associated with this bug in the last 7 days.\n\nRepository breakdown:\n* autoland: 4\n* mozilla-beta: 2\n* try: 1\n* mozilla-inbound: 1\n* mozilla-central: 1\n* mozilla-aurora: 1\n* ash: 1\n\nPlatform breakdown:\n* linux64: 7\n* linux32: 3\n* windowsxp: 1\n\nFor more details, see:\nhttps://brasstacks.mozilla.com/orangefactor/?display=Bug&bugid=1134307&startday=2016-08-29&endday=2016-09-04&tree=all",
    "authour" : "orangefactor@bots.tld",
    "created" : "2016-09-05T01:10:21Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2016-08-30T00:54:09Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2016-08-30T00:54:09Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-28T15:13:19Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mconley@mozilla.com"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-28T15:13:19Z",
      "what" : "component",
      "removed" : "IPC",
      "added" : "General"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-28T15:13:19Z",
      "what" : "product",
      "removed" : "Core",
      "added" : "Firefox"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-28T15:13:19Z",
      "what" : "cf_tracking_e10s",
      "removed" : "---",
      "added" : "?"
    }, {
      "name" : "twalker@mozilla.com",
      "date" : "2015-04-28T16:48:38Z",
      "what" : "cc",
      "removed" : "",
      "added" : "twalker@mozilla.com"
    }, {
      "name" : "twalker@mozilla.com",
      "date" : "2015-04-28T16:48:38Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "984139"
    }, {
      "name" : "twalker@mozilla.com",
      "date" : "2015-04-28T16:48:38Z",
      "what" : "cf_tracking_e10s",
      "removed" : "?",
      "added" : "+"
    }, {
      "name" : "twalker@mozilla.com",
      "date" : "2015-06-03T21:32:17Z",
      "what" : "cc",
      "removed" : "twalker@mozilla.com",
      "added" : ""
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2016-01-04T19:45:36Z",
      "what" : "cc",
      "removed" : "",
      "added" : "philringnalda@gmail.com"
    }, {
      "name" : "philringnalda@gmail.com",
      "date" : "2016-01-04T19:45:36Z",
      "what" : "summary",
      "removed" : "Intermittent browser_bug592641.js | uncaught exception - uncaught exception: undefined at :0",
      "added" : "Intermittent browser_bug592641.js | uncaught exception - Error: operation not possible on dead CPOW at :0"
    }, {
      "name" : "cpeterson@mozilla.com",
      "date" : "2016-07-05T23:51:44Z",
      "what" : "priority",
      "removed" : "--",
      "added" : "P5"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2016-07-30T01:26:19Z",
      "what" : "cf_status_firefox47",
      "removed" : "---",
      "added" : "wontfix"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2016-07-30T01:26:19Z",
      "what" : "cf_status_firefox48",
      "removed" : "---",
      "added" : "wontfix"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2016-07-30T01:26:19Z",
      "what" : "cf_status_firefox49",
      "removed" : "---",
      "added" : "affected"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2016-07-30T01:26:19Z",
      "what" : "cf_status_firefox50",
      "removed" : "---",
      "added" : "affected"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-26T14:55:37Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "kevchan85@yahoo.com"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-26T14:55:37Z",
      "what" : "bug_mentor",
      "removed" : "",
      "added" : "mconley@mozilla.com"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-26T16:43:15Z",
      "what" : "cc",
      "removed" : "",
      "added" : "kevchan85@yahoo.com"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-26T16:54:23Z",
      "what" : "attachments.isobsolete:8785358",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-26T16:54:55Z",
      "what" : "attachments.isobsolete:8785375",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "kevchan85@yahoo.com",
      "date" : "2016-08-26T16:59:25Z",
      "what" : "attachments.isobsolete:8785376",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "kevchan85@yahoo.com",
      "date" : "2016-08-26T16:59:25Z",
      "what" : "attachments.isobsolete:8785381",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-27T03:17:36Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-27T03:17:36Z",
      "what" : "platform",
      "removed" : "x86_64",
      "added" : "Unspecified"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-27T03:17:36Z",
      "what" : "op_sys",
      "removed" : "Linux",
      "added" : "Unspecified"
    }, {
      "name" : "pulsebot@bots.tld",
      "date" : "2016-08-29T18:58:52Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2016-08-30T00:54:09Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 51"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2016-08-30T00:54:09Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2016-08-30 00:54:09"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2016-08-30T00:54:09Z",
      "what" : "cf_status_firefox51",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2016-08-30T21:54:45Z",
      "what" : "cf_status_firefox50",
      "removed" : "affected",
      "added" : "fixed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2016-08-30T22:09:03Z",
      "what" : "cf_status_firefox49",
      "removed" : "affected",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "kevchan85@yahoo.com",
      "date" : "2016-08-26T16:16:24Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8785358,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "kevchan85@yahoo.com",
      "date" : "2016-08-26T16:21:50Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "kevchan85@yahoo.com",
      "date" : "2016-08-26T16:36:32Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8785375,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-26T16:43:15Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-26T16:54:23Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8785358,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-26T16:54:55Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8785375,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "kevchan85@yahoo.com",
      "date" : "2016-08-26T16:59:25Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8785384,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-26T17:13:46Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8785384,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-26T17:24:06Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-26T18:46:53Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(kevchan85@yahoo.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2016-08-27T03:16:40Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2016-08-30T21:54:45Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134307,
  "cclist" : [ "kevchan85@yahoo.com", "mconley@mozilla.com", "philringnalda@gmail.com", "wmccloskey@mozilla.com" ]
}, {
  "component" : "Tours",
  "summary" : "Insert Reading List FTU page by default into all user's Reading Lists",
  "reporter" : "cbkprice@gmail.com",
  "assigned" : "nobody@mozilla.org",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "For FF38 we'll be deploying a Reading List First Time Use Tour (FTU).\n\nThe current wireframes (bug 1129536) detail entries into the first time use tour which include a Reading List entry.\n\nThis bug is requesting the insertion of a URL into the Reading List that will be included with all instances of FF38.",
  "comments" : [ {
    "text" : "For FF38 we'll be deploying a Reading List First Time Use Tour (FTU).\n\nThe current wireframes (bug 1129536) detail entries into the first time use tour which include a Reading List entry.\n\nThis bug is requesting the insertion of a URL into the Reading List that will be included with all instances of FF38.",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-02-18T18:04:08Z"
  }, {
    "text" : ":clarkbw -\n\nNote the locale redirection on bedrock goes: m.o/example (301) m.o/en-US/example\n\nQuestions:\n\n# Do you need anything other than a URL (without locale) to get this done?\n# Will the translated <title> tag be displayed in the user's sidebar?\n# When will we have to give you the URL?\n\nThanks",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-02-18T21:47:42Z"
  }, {
    "text" : "(In reply to Cory Price [:ckprice] from comment #1)\n> :clarkbw -\n> \n> Note the locale redirection on bedrock goes: m.o/example (301)\n> m.o/en-US/example\n> \n> Questions:\n> \n> # Do you need anything other than a URL (without locale) to get this done?\n\nJust the URL should work.\n\n> # Will the translated <title> tag be displayed in the user's sidebar?\n\nNI: Dolske to help answer these.\n\nMy assumption is that Fx will reach out to grab meta data about the page and during that time should get the correct page through the redirect.  Dolske, am I too hopeful?\n\n> # When will we have to give you the URL?\n\nThe sooner the better.  Perhaps we can use an allizom link during the Nightly->Aurora cycles and we could uplift the real links later on.\n\nDolske, what do you think?\n\nbug 1132988 is tracking the SUMO articles that will also be default entries; it might be good to keep an eye on that too.",
    "authour" : "clarkbw@mozilla.com",
    "created" : "2015-02-19T18:00:24Z"
  }, {
    "text" : "(In reply to Bryan Clark (Firefox PM) [:clarkbw] from comment #2)\n\n> > # Will the translated <title> tag be displayed in the user's sidebar?\n> \n> NI: Dolske to help answer these.\n> \n> My assumption is that Fx will reach out to grab meta data about the page and\n> during that time should get the correct page through the redirect.  Dolske,\n> am I too hopeful?\n\nI presume we'll tell Firefox to a URL like https://mozilla.org/%LOCALE/whatever.html, which we'll format with the user's actual locale before actually adding it to the reading list. So when the usual metadata collection kicks in, it would fetch the translated version.\n\n\n> > # When will we have to give you the URL?\n> \n> The sooner the better.  Perhaps we can use an allizom link during the\n> Nightly->Aurora cycles and we could uplift the real links later on.\n> \n> Dolske, what do you think?\n\nWould probably be good to at least have a placeholder URL in the short term. The actual content shouldn't be critical.",
    "authour" : "dolske@mozilla.com",
    "created" : "2015-02-21T02:53:39Z"
  }, {
    "text" : "We've decided on the URL for the reading list.\n\nIt will be:\n\nhttps://www.mozilla.org/%LOCALE/firefox/reading/start/?utm_source=firefox-browser&utm_medium=firefox-browser\n\n:garethc - will you please review the parameters here? Ref UX bug 1129536",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-02-27T17:45:15Z"
  }, {
    "text" : "Looks good to me.",
    "authour" : "garethcull.bugs@gmail.com",
    "created" : "2015-02-27T17:47:41Z"
  }, {
    "text" : "URL defined. Closing this bug.",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-02-27T17:52:32Z"
  }, {
    "text" : "Created attachment 8570590\nFinal URL",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-02-27T17:53:32Z"
  }, {
    "text" : "(In reply to Cory Price [:ckprice] from comment #7)\n> Created attachment 8570590\n> Final URL\n\nNote there's a missing `%` here after `%LOCALE`. Should be `%LOCALE%`",
    "authour" : "agibson@mozilla.com",
    "created" : "2015-02-27T18:30:14Z"
  }, {
    "text" : "Created attachment 8570608\nFinal URL\n\nThanks Alex - updated the attachment",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-02-27T18:34:49Z"
  }, {
    "text" : "I suggest to drop the %LOCALE% from the URL and to rely on server-side language negotiation.",
    "authour" : "l10n@mozilla.com",
    "created" : "2015-03-09T14:40:57Z"
  }, {
    "text" : "(In reply to Axel Hecht [:Pike] from comment #10)\n> I suggest to drop the %LOCALE% from the URL and to rely on server-side\n> language negotiation.\nWe can work with either.\n\nOn bedrock\n\nhttps://www.mozilla.org/firefox/reading/start/\n\nredirects to\n\nhttps://www.mozilla.org/en-US/firefox/reading/start/\n\nComment 3 suggested including the %LOCALE% in the URL.",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-03-09T23:07:18Z"
  }, {
    "text" : "dolske, does it matter to you if we drop the %LOCALE% from the url?",
    "authour" : "clarkbw@mozilla.com",
    "created" : "2015-03-10T16:00:49Z"
  }, {
    "text" : "Nope, I'm happy to do whatever L10N prefers.\n\nI'm a little confused as to which is the \"right\" way -- seems like we're using a mix.\n\nLooks like 1136570 hasn't yet added the URLs to the default list, but we can add it sans-%LOCALE% when it does.",
    "authour" : "dolske@mozilla.com",
    "created" : "2015-03-11T21:56:35Z"
  }, {
    "text" : "Created attachment 8576282\nFinal URL - Mar 11\n\nUpdating URL per Alex's request and Dolske's confirmation",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-03-11T22:09:55Z"
  }, {
    "text" : "Created attachment 8576283\nFinal URL - Mar 11",
    "authour" : "cbkprice@gmail.com",
    "created" : "2015-03-11T22:10:22Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-02-27T17:52:32Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-02-27T17:52:32Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-02-18T21:47:42Z",
      "what" : "cc",
      "removed" : "",
      "added" : "clarkbw@mozilla.com"
    }, {
      "name" : "clarkbw@mozilla.com",
      "date" : "2015-02-19T18:00:24Z",
      "what" : "cc",
      "removed" : "",
      "added" : "dolske@mozilla.com"
    }, {
      "name" : "garethcull.bugs@gmail.com",
      "date" : "2015-02-27T17:47:41Z",
      "what" : "cc",
      "removed" : "",
      "added" : "garethcull.bugs@gmail.com"
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-02-27T17:52:32Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1136570"
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-02-27T17:52:32Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-27 09:52:32"
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-02-27T17:57:58Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1137805"
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-02-27T18:34:49Z",
      "what" : "attachments.isobsolete:8570590",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "l10n@mozilla.com",
      "date" : "2015-03-09T14:40:57Z",
      "what" : "cc",
      "removed" : "",
      "added" : "l10n@mozilla.com"
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-03-11T22:10:22Z",
      "what" : "attachments.isobsolete:8570608",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-03-11T22:10:22Z",
      "what" : "attachments.isobsolete:8576282",
      "removed" : "0",
      "added" : "1"
    } ],
    "flagEvents" : [ {
      "name" : "cbkprice@gmail.com",
      "date" : "2015-02-18T21:47:42Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "clarkbw@mozilla.com",
      "date" : "2015-02-19T18:00:24Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(clarkbw@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-02-21T02:53:39Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(dolske@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "clarkbw@mozilla.com",
      "date" : "2015-03-10T16:00:49Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "dolske@mozilla.com",
      "date" : "2015-03-11T21:56:35Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(dolske@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134286,
  "cclist" : [ "agibson@mozilla.com", "clarkbw@mozilla.com", "dolske@mozilla.com", "garethcull.bugs@gmail.com", "hhabstritt.bugzilla@gmail.com", "l10n@mozilla.com" ]
}, {
  "component" : "Developer Tools: Framework",
  "summary" : "Provide a simple key-value store for persisting values in devtools",
  "reporter" : "bgrinstead@mozilla.com",
  "assigned" : "bgrinstead@mozilla.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "We need a way to store simple values in our tools.  See Bug 943306 Comment 14 and 15.",
  "comments" : [ {
    "text" : "We need a way to store simple values in our tools.  See Bug 943306 Comment 14 and 15.",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-18T17:36:46Z"
  }, {
    "text" : "Created attachment 8566325\nasync-storage.patch\n\nRyan, what do you think about this?  I've converted it to use promises instead of callbacks.",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-19T01:12:09Z"
  }, {
    "text" : "Comment on attachment 8566325\nasync-storage.patch\n\nReview of attachment 8566325:\n-----------------------------------------------------------------\n\n::: toolkit/devtools/Loader.jsm\n@@ +82,5 @@\n>          \"devtools\": \"resource:///modules/devtools\",\n>          \"devtools/toolkit\": \"resource://gre/modules/devtools\",\n>          \"devtools/server\": \"resource://gre/modules/devtools/server\",\n>          \"devtools/toolkit/webconsole\": \"resource://gre/modules/devtools/toolkit/webconsole\",\n> +        \"devtools/toolkit/shared\": \"resource://gre/modules/devtools/toolkit/shared\",\n\nAlso, I've just set up a directory for stuff like this so we don't need to modify the loader every time we want to add a new module",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-19T01:12:46Z"
  }, {
    "text" : "Comment on attachment 8566325\nasync-storage.patch\n\nReview of attachment 8566325:\n-----------------------------------------------------------------\n\nIs there any reason not to put this in toolkit/modules as a JSM?\n\n::: toolkit/devtools/shared/async-storage.js\n@@ +29,5 @@\n> + * write asyncStorage.key; you have to explicitly call setItem() or getItem().\n> + *\n> + * removeItem(), clear(), length(), and key() are like the same-named methods of\n> + * localStorage, but, like getItem() and setItem() they take a callback\n> + * argument.\n\nThis comment is out-of-date\n\n@@ +42,5 @@\n> + */\n> +\n> +const {Cc, Ci, Cu, Cr} = require(\"chrome\");\n> +Cu.importGlobalProperties([\"indexedDB\"]);\n> +const {Promise} = Cu.import(\"resource://gre/modules/Promise.jsm\", {});\n\nMaybe I'm wrong but can't you just use native Promises now?\n\n@@ +47,5 @@\n> +\n> +module.exports = (function() {\n> +  'use strict';\n> +\n> +  var DBNAME = 'asyncStorage';\n\nThere are a lot of single-quotes used in this file, is this just leftover from the gaia version?\n\nI suspect it would be better to have the DBNAME as an argument to withDatabase so all the data doesn't need to be in one DB. If you do end up keeping this in a devtools directory, I think the DBNAME should mention devtools somewhere.\n\n@@ +82,5 @@\n> +      callback(transaction.objectStore(STORENAME));\n> +    });\n> +  }\n> +\n> +  function getItem(key, callback) {\n\nMany of the functions still have callback arguments that are now unused.",
    "authour" : "MattN+bmo@mozilla.com",
    "created" : "2015-02-19T03:20:29Z"
  }, {
    "text" : "(In reply to Matthew N. [:MattN] from comment #3)\n> Is there any reason not to put this in toolkit/modules as a JSM?\n\nNo reason - I can update the patch with it in this location.",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-19T05:00:38Z"
  }, {
    "text" : "Hey guys, keep in mind that with this API currently there's no way to do multiple operations within a single transaction (i.e. you'll have the same races as with localStorage). This has caused headaches for our gaia team in the past.",
    "authour" : "bent.mozilla@gmail.com",
    "created" : "2015-02-19T05:21:55Z"
  }, {
    "text" : "(In reply to ben turner [:bent] (use the needinfo? flag!) from comment #5)\n> Hey guys, keep in mind that with this API currently there's no way to do\n> multiple operations within a single transaction (i.e. you'll have the same\n> races as with localStorage). This has caused headaches for our gaia team in\n> the past.\n\nWhat specifically has caused them headaches?  I don't see what the race issue is for a simple key-value store like this (it seems like you can just nest individual calls to the API in success callbacks).  Does the API just need to support setting multiple values within the same transaction, or something more advanced like being able to run any of the available methods within the same transaction?",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-19T15:05:32Z"
  }, {
    "text" : "Comment on attachment 8566325\nasync-storage.patch\n\nReview of attachment 8566325:\n-----------------------------------------------------------------\n\nLooking good overall, but I'd like to see what happens with the loading decision before r+.\n\n::: toolkit/devtools/Loader.jsm\n@@ +82,5 @@\n>          \"devtools\": \"resource:///modules/devtools\",\n>          \"devtools/toolkit\": \"resource://gre/modules/devtools\",\n>          \"devtools/server\": \"resource://gre/modules/devtools/server\",\n>          \"devtools/toolkit/webconsole\": \"resource://gre/modules/devtools/toolkit/webconsole\",\n> +        \"devtools/toolkit/shared\": \"resource://gre/modules/devtools/toolkit/shared\",\n\nWell, this may not matter if you moving to a JSM... but anyway, this line is not necessary.  You only need the \"devtools/toolkit\" line above.\n\nThen, in the moz.build, send the file to \"EXTRA_JS_MODULES.devtools.shared\".  This gives you the same require path without a new line.\n\nMany of these lines could be collapsed like this...  I filed bug 1134628 to do this.\n\n::: toolkit/devtools/shared/async-storage.js\n@@ +41,5 @@\n> + *\n> + */\n> +\n> +const {Cc, Ci, Cu, Cr} = require(\"chrome\");\n> +Cu.importGlobalProperties([\"indexedDB\"]);\n\nIf you keep this a DevTools module, you should use the SDK module \"sdk/indexed-db\".  See app-projects as an example[1].\n\nThis will keep the database scoped to DevTools because it uses a special origin based on our SDK loader id \"fx-devtools\".\n\n[1]: https://dxr.mozilla.org/mozilla-central/source/browser/devtools/app-manager/app-projects.js#8\n\n@@ +42,5 @@\n> + */\n> +\n> +const {Cc, Ci, Cu, Cr} = require(\"chrome\");\n> +Cu.importGlobalProperties([\"indexedDB\"]);\n> +const {Promise} = Cu.import(\"resource://gre/modules/Promise.jsm\", {});\n\nDevTools team prefers Promise.jsm for the enhanced debugging features over native for the moment.  Eventually, those features will exist for native too.\n\n@@ +47,5 @@\n> +\n> +module.exports = (function() {\n> +  'use strict';\n> +\n> +  var DBNAME = 'asyncStorage';\n\nYes, let's move to double quotes.\n\nIf you keep this as a DevTools require-loaded module and use the SDK module, the DB is already scoped to DevTools by origin.\n\nFor the planned DevTools use cases, a fixed DBNAME like seems okay to me, as we can just use unique key names as we would with prefs.  Part of the point of this wrapper around IndexedDB is that you avoid having an explicit schema in the DB, as it's just keys and values, so you don't really care about separate DBs for schema purposes.\n\nThe general browser team may want more isolation to separate features though, I wouldn't know for sure.  I am not against making DBNAME configurable, but perhaps we should understand why we want multiple DBs first.  For DevTools only, the fixed name seems fine.\n\nIf the browser code and DevTools used separate SDK loaders, they'd get separate DB because they get separate origins.  However, browser code doesn't seem to use SDK loaders at all today, so I guess it needs to be a JSM to be accessible there?  Not sure.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-02-19T16:43:32Z"
  }, {
    "text" : "The big topic I remember was https://groups.google.com/d/msg/mozilla.dev.gaia/g5_eOE7YHWw/s8dH40HC8lsJ",
    "authour" : "bent.mozilla@gmail.com",
    "created" : "2015-02-19T18:03:26Z"
  }, {
    "text" : "> Then, in the moz.build, send the file to \"EXTRA_JS_MODULES.devtools.shared\".  This gives you the same require path without a new line.\n\nI'm not sure which moz.build file exactly you are suggesting this line be added in (toolkit/devtools/moz.build or toolkit/devtools/shared/moz.build).  Oddly enough it seems to work without adding that line to moz.build (and only adding 'shared' folder to 'DIRS' on toolkit/devtools/moz.build).  I'm wondering if that is only working locally from an m-c checkout but fail when running as a package.",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-20T17:05:29Z"
  }, {
    "text" : "Comment on attachment 8566325\nasync-storage.patch\n\nReview of attachment 8566325:\n-----------------------------------------------------------------\n\n::: toolkit/devtools/shared/moz.build\n@@ +5,5 @@\n> +# file, You can obtain one at http://mozilla.org/MPL/2.0/.\n> +\n> +BROWSER_CHROME_MANIFESTS += ['tests/browser/browser.ini']\n> +\n> +EXTRA_JS_MODULES.devtools.toolkit.shared += [\n\n(In reply to Brian Grinstead [:bgrins] from comment #9)\n> > Then, in the moz.build, send the file to \"EXTRA_JS_MODULES.devtools.shared\".  This gives you the same require path without a new line.\n> \n> I'm not sure which moz.build file exactly you are suggesting this line be\n> added in (toolkit/devtools/moz.build or toolkit/devtools/shared/moz.build). \n> Oddly enough it seems to work without adding that line to moz.build (and\n> only adding 'shared' folder to 'DIRS' on toolkit/devtools/moz.build).  I'm\n> wondering if that is only working locally from an m-c checkout but fail when\n> running as a package.\n\nI am referring to this line in toolkit/devtools/shared/moz.build.\n\nTo eliminate your Loader.jsm line nicely, you'll want to change from \"EXTRA_JS_MODULES.devtools.toolkit.shared\" to \"EXTRA_JS_MODULES.devtools.shared\" (no \"toolkit\").\n\nOtherwise, if you only remove your Loader.jsm line without this as well, you'd need to do |require(\"devtools/toolkit/toolkit/shared/async-storage\")|.  This is because the \"devtools/toolkit\" path in the loader maps to things packaged into \"devtools\" by moz.build.  If you package into \"devtools.toolkit.X\", now there are 2 levels of toolkit.\n\nI think if you are seeing something different locally, you may need a full build or clobber first to be sure.  It's probably the case that building your previous version has left a stray symlink in place that's out of sync with reality.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-02-20T19:59:58Z"
  }, {
    "text" : "Created attachment 8567317\nasync-storage.patch\n\nThanks for the feedback, I've updated this based on Comment 3 and Comment 7.  \n\nI've simplified the error handling by removing the withDatabase function and just making withStore also open up the connection so it can notify callers if there is an error while opening the db.  So, all of the methods will reject if there is an error opening the db or an error making the request.\n\nI'm proposing we move forward with this API despite not having fine control over transactions.  This is a problem with all of the async localStorage APIs I've seen, and there are ways to work around it in the calling code.  We can use this functionality in devtools only for now and extend the API if/when we need finer control over transactions.\n\nHere's a try push: https://treeherder.mozilla.org/#/jobs?repo=try&revision=bbcac83b3265.",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-20T21:58:22Z"
  }, {
    "text" : "Comment on attachment 8567317\nasync-storage.patch\n\nReview of attachment 8567317:\n-----------------------------------------------------------------\n\nThanks for working on this!\n\n::: toolkit/devtools/shared/async-storage.js\n@@ +39,5 @@\n> + * DOM elements, but they may include things like Blobs and typed arrays.\n> + *\n> + */\n> +const {Cc, Ci, Cu, Cr} = require(\"chrome\");\n> +const { indexedDB } = require(\"sdk/indexed-db\");\n\nNit: Use spaces between {} consistently (your choice which way!)",
    "authour" : "jryans@gmail.com",
    "created" : "2015-02-20T22:05:10Z"
  }, {
    "text" : "Created attachment 8567378\nasync-storage-r=jryans.patch\n\nUpdated whitespace",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-20T23:57:57Z"
  }, {
    "text" : "(In reply to Brian Grinstead [:bgrins] from comment #11)\n> This is a problem with all of the async localStorage\n> APIs I've seen, and there are ways to work around it in the calling code. \n\nLike what?\n\nThe simplest example I can think of is this: How do you write reliable code that just wants to increment a number:\n\n  asyncStorage.setItem('foo', 1);\n\n  // ... some time passes\n\n  asyncStorage.getItem('foo').then(previous => {\n    asyncStorage.setItem('foo', previous + 1);\n  });\n\nIf another asyncStorage consumer (like, another window?) sets 'foo' to something else at the wrong moment then the value that will eventually get written into the database is indeterminate.\n\nLike we've said above this is no worse than localStorage, but I hate to perpetuate this pattern...",
    "authour" : "bent.mozilla@gmail.com",
    "created" : "2015-02-21T07:29:43Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/aae9d2200d62",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-21T16:44:54Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/aae9d2200d62",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-21T21:41:40Z"
  }, {
    "text" : "(In reply to ben turner [:bent] (use the needinfo? flag!) from comment #14)\n> (In reply to Brian Grinstead [:bgrins] from comment #11)\n> > This is a problem with all of the async localStorage\n> > APIs I've seen, and there are ways to work around it in the calling code. \n> \n> Like what?\n> \n> The simplest example I can think of is this: How do you write reliable code\n> that just wants to increment a number:\n> \n>   asyncStorage.setItem('foo', 1);\n> \n>   // ... some time passes\n> \n>   asyncStorage.getItem('foo').then(previous => {\n>     asyncStorage.setItem('foo', previous + 1);\n>   });\n> \n> If another asyncStorage consumer (like, another window?) sets 'foo' to\n> something else at the wrong moment then the value that will eventually get\n> written into the database is indeterminate.\n> \n> Like we've said above this is no worse than localStorage, but I hate to\n> perpetuate this pattern...\n\nMaybe we could extend the API to support this use case, while still having the current methods available if you don't need to worry about it.  Do you have an API proposal for how to handle transactions?",
    "authour" : "bgrinstead@mozilla.com",
    "created" : "2015-02-23T18:26:20Z"
  }, {
    "text" : "No, a lot of people have been working on trying to figure out how to adapt IndexedDB to use Promises, and no one has come to consensus yet. But it's not possible with the current Promises implementation.",
    "authour" : "bent.mozilla@gmail.com",
    "created" : "2015-02-24T03:54:56Z"
  }, {
    "text" : "Er, so what I mean is, there's no way to do this currently if you want a Promises-based API. You can do it with callbacks or just using normal IDBRequests.",
    "authour" : "bent.mozilla@gmail.com",
    "created" : "2015-02-24T03:59:25Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-19T01:12:09Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:40Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:40Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-19T01:12:09Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jryans@gmail.com"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-19T01:12:09Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "bgrinstead@mozilla.com"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-02-19T03:20:45Z",
      "what" : "cc",
      "removed" : "",
      "added" : "MattN+bmo@mozilla.com"
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-02-19T03:23:09Z",
      "what" : "see_also",
      "removed" : "",
      "added" : "https://bugzilla.mozilla.org/show_bug.cgi?id=866238"
    }, {
      "name" : "bent.mozilla@gmail.com",
      "date" : "2015-02-19T05:21:55Z",
      "what" : "cc",
      "removed" : "",
      "added" : "bent.mozilla@gmail.com"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-20T21:06:02Z",
      "what" : "see_also",
      "removed" : "",
      "added" : "https://bugzilla.mozilla.org/show_bug.cgi?id=1134628"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-20T21:58:22Z",
      "what" : "attachments.isobsolete:8566325",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-20T22:07:26Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1032128"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-20T23:57:57Z",
      "what" : "attachments.isobsolete:8567317",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-20T23:58:08Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T16:44:54Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T16:44:54Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:40Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 38"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:40Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:40Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-21 13:41:40"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:40Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-19T01:12:09Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8566325,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "MattN+bmo@mozilla.com",
      "date" : "2015-02-19T03:20:29Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8566325,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-19T15:05:32Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-19T16:43:32Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8566325,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "bent.mozilla@gmail.com",
      "date" : "2015-02-19T18:03:26Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(bent.mozilla@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-20T17:05:29Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-20T20:00:07Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-20T21:58:22Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567317,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-20T22:05:10Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8567317,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-20T23:57:57Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567378,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T16:44:54Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "bgrinstead@mozilla.com",
      "date" : "2015-02-23T18:26:20Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "bent.mozilla@gmail.com",
      "date" : "2015-02-24T03:54:56Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(bent.mozilla@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134265,
  "cclist" : [ "bent.mozilla@gmail.com", "jryans@gmail.com", "MattN+bmo@mozilla.com" ]
}, {
  "component" : "Menus",
  "summary" : "[e10s] \"Open Link in New Window\" in remote browser causes unsafe CPOW usage warning",
  "reporter" : "moz-ian@perix.co.uk",
  "assigned" : "moz-ian@perix.co.uk",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Created attachment 8566015\nunknownCPOWs.png\n\n+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with some links on it in an e10s window\n2) Right-click on a link, and choose \"Open Link in New Window\"\n\nThis causes some \"unsafe CPOW usage\" warnings in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n  // Open linked-to URL in a new window.\n  openLink : function () {\n    var doc = this.target.ownerDocument; <-- Causes CPOW warning\n    urlSecurityCheck(this.linkURL, this.principal);\n    openLinkIn(this.linkURL, \"window\", this._openLinkInParameters(doc));\n  },\n\n[...]\n\n  _openLinkInParameters : function (doc, extra) {\n    let params = { charset: doc.characterSet, <-- Causes CPOW warning\n                   referrerURI: doc.documentURIObject, <-- Causes CPOW warning\n                   noReferrer: BrowserUtils.linkHasNoReferrer(this.link) };\n    for (let p in extra)\n      params[p] = extra[p];\n    return params;\n  },\n\n\nin toolkit/modules/BrowserUtils.jsm:\n\n  /**\n   * Return true if linkNode has a rel=\"noreferrer\" attribute.\n   *\n   * @param linkNode The <a> element, or null.\n   * @return a boolean indicating if linkNode has a rel=\"noreferrer\" attribute.\n   */\n  linkHasNoReferrer: function (linkNode) {\n    if (!linkNode)\n      return false;\n\n    let rel = linkNode.getAttribute(\"rel\"); <-- Causes CPOW warning\n    if (!rel)\n      return false;\n\n    // The HTML spec says that rel should be split on spaces before looking\n    // for particular rel values.\n    let values = rel.split(/[ \\t\\r\\n\\f]/);\n    return values.indexOf('noreferrer') != -1;\n  },\n\n\nin browser/base/content/utilityOverlay.js:\n\nfunction openLinkIn(url, where, params) {\n[...]\n    sa.AppendElement(wuri);\n    sa.AppendElement(charset);\n    sa.AppendElement(aReferrerURI); <-- Causes CPOW warning\n    sa.AppendElement(aPostData);\n    sa.AppendElement(allowThirdPartyFixupSupports);\n\n\nin browser/base/content/browser.js\n\nfunction _loadURIWithFlags(browser, uri, flags, referrer, charset, postdata) {\n[...]\n      LoadInOtherProcess(browser, {\n        uri: uri,\n        flags: flags,\n        referrer: referrer ? referrer.spec : null, <-- Causes CPOW warning\n      });\n\n...and a delightful amount of CPOW warnings and NS_NOINTERFACE errors attributed to <unknown>, as can be seen in the attached image\n\nNote that two of the warnings are the same locations as in bug 1133577",
  "comments" : [ {
    "text" : "Created attachment 8566015\nunknownCPOWs.png\n\n+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with some links on it in an e10s window\n2) Right-click on a link, and choose \"Open Link in New Window\"\n\nThis causes some \"unsafe CPOW usage\" warnings in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n  // Open linked-to URL in a new window.\n  openLink : function () {\n    var doc = this.target.ownerDocument; <-- Causes CPOW warning\n    urlSecurityCheck(this.linkURL, this.principal);\n    openLinkIn(this.linkURL, \"window\", this._openLinkInParameters(doc));\n  },\n\n[...]\n\n  _openLinkInParameters : function (doc, extra) {\n    let params = { charset: doc.characterSet, <-- Causes CPOW warning\n                   referrerURI: doc.documentURIObject, <-- Causes CPOW warning\n                   noReferrer: BrowserUtils.linkHasNoReferrer(this.link) };\n    for (let p in extra)\n      params[p] = extra[p];\n    return params;\n  },\n\n\nin toolkit/modules/BrowserUtils.jsm:\n\n  /**\n   * Return true if linkNode has a rel=\"noreferrer\" attribute.\n   *\n   * @param linkNode The <a> element, or null.\n   * @return a boolean indicating if linkNode has a rel=\"noreferrer\" attribute.\n   */\n  linkHasNoReferrer: function (linkNode) {\n    if (!linkNode)\n      return false;\n\n    let rel = linkNode.getAttribute(\"rel\"); <-- Causes CPOW warning\n    if (!rel)\n      return false;\n\n    // The HTML spec says that rel should be split on spaces before looking\n    // for particular rel values.\n    let values = rel.split(/[ \\t\\r\\n\\f]/);\n    return values.indexOf('noreferrer') != -1;\n  },\n\n\nin browser/base/content/utilityOverlay.js:\n\nfunction openLinkIn(url, where, params) {\n[...]\n    sa.AppendElement(wuri);\n    sa.AppendElement(charset);\n    sa.AppendElement(aReferrerURI); <-- Causes CPOW warning\n    sa.AppendElement(aPostData);\n    sa.AppendElement(allowThirdPartyFixupSupports);\n\n\nin browser/base/content/browser.js\n\nfunction _loadURIWithFlags(browser, uri, flags, referrer, charset, postdata) {\n[...]\n      LoadInOtherProcess(browser, {\n        uri: uri,\n        flags: flags,\n        referrer: referrer ? referrer.spec : null, <-- Causes CPOW warning\n      });\n\n...and a delightful amount of CPOW warnings and NS_NOINTERFACE errors attributed to <unknown>, as can be seen in the attached image\n\nNote that two of the warnings are the same locations as in bug 1133577",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-18T16:08:11Z"
  }, {
    "text" : "Fixed in Bug 1133577.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-03-06T21:56:45Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-03T00:48:45Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-06T21:56:45Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-06T21:56:45Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "blassey.bugs@lassey.us",
      "date" : "2015-02-19T17:33:46Z",
      "what" : "cf_tracking_e10s",
      "removed" : "?",
      "added" : "m8+"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-20T17:05:24Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1133577"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-20T17:05:24Z",
      "what" : "see_also",
      "removed" : "https://bugzilla.mozilla.org/show_bug.cgi?id=1133577",
      "added" : ""
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-03T00:48:45Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "moz-ian@perix.co.uk"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-06T21:56:45Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-06 13:56:45"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-13T20:27:16Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-13T20:27:16Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ ]
  },
  "resolution" : "FIXED",
  "id" : 1134227,
  "cclist" : [ "blassey.bugs@lassey.us", "mconley@mozilla.com" ]
}, {
  "component" : "Menus",
  "summary" : "[e10s] \"Save Link As...\"/\"Bookmark This Link\" in remote browser causes unsafe CPOW usage warning",
  "reporter" : "moz-ian@perix.co.uk",
  "assigned" : "moz-ian@perix.co.uk",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with some links on it in an e10s window\n2) Right-click on a link, and choose \"Save Link As...\"\n\nThis causes some \"unsafe CPOW usage\" warnings in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n  // Save URL of clicked-on link.\n  saveLink: function() {\n    var doc =  this.target.ownerDocument; <-- Causes CPOW warning\n    var linkText;\n    // If selected text is found to match valid URL pattern.\n    if (this.onPlainTextLink)\n      linkText = this.focusedWindow.getSelection().toString().trim();\n    else\n      linkText = this.linkText();\n    urlSecurityCheck(this.linkURL, this.principal);\n\n    this.saveHelper(this.linkURL, linkText, null, true, doc);\n  },\n\n\nin browser/base/content/utilityOverlay.js:\n\n// Gather all descendent text under given document node.\nfunction gatherTextUnder ( root ) \n{\n  var text = \"\";\n  var node = root.firstChild; <-- Causes CPOW warning\n  var depth = 1;\n  while ( node && depth > 0 ) {\n    // See if this node is text.\n    if ( node.nodeType == Node.TEXT_NODE ) { <-- Causes CPOW warning\n      // Add this text to our collection.\n      text += \" \" + node.data; <-- Causes CPOW warning\n    } else if ( node instanceof HTMLImageElement) { <-- Causes CPOW warning [complex, image]\n      // If it has an \"alt\" attribute, add that.\n      var altText = node.getAttribute( \"alt\" ); <-- Causes CPOW warning [image]\n      if ( altText && altText != \"\" ) {\n        text += \" \" + altText;\n      }\n    }\n    // Find next node to test.\n    // First, see if this node has children.\n    if ( node.hasChildNodes() ) { <-- Causes CPOW warning\n      // Go to first child.\n      node = node.firstChild; <-- Causes CPOW warning [complex]\n      depth++;\n    } else {\n      // No children, try next sibling (or parent next sibling).\n      while ( depth > 0 && !node.nextSibling ) { <-- Causes CPOW warning\n        node = node.parentNode; <-- Causes CPOW warning\n        depth--;\n      }\n      if ( node.nextSibling ) { <-- Causes CPOW warning\n        node = node.nextSibling; <-- Causes CPOW warning [complex]\n      }\n    }\n  }\n  // Strip leading and tailing whitespace.\n  text = text.trim();\n  // Compress remaining whitespace.\n  text = text.replace( /\\s+/g, \" \" );\n  return text;\n}\n\nnote that the amount of warnings depends on the structure of the link, and I've marked up accordingly\nuntagged warnings are just caused by <a>text</a>\n[complex] tagged warnings are caused by e.g. <a><em>text</em> text</a>\n[image] tagged warnings are caused by e.g. <a><img/></a>\n\n\nNote I might make this situation even worse in bug 850378",
  "comments" : [ {
    "text" : "+++ This bug was initially created as a clone of Bug #1133577 +++\n\nSTR:\n\n1) Visit a site with some links on it in an e10s window\n2) Right-click on a link, and choose \"Save Link As...\"\n\nThis causes some \"unsafe CPOW usage\" warnings in the Browser Console.\n\nIn browser/base/content/nsContextMenu.js:\n\n  // Save URL of clicked-on link.\n  saveLink: function() {\n    var doc =  this.target.ownerDocument; <-- Causes CPOW warning\n    var linkText;\n    // If selected text is found to match valid URL pattern.\n    if (this.onPlainTextLink)\n      linkText = this.focusedWindow.getSelection().toString().trim();\n    else\n      linkText = this.linkText();\n    urlSecurityCheck(this.linkURL, this.principal);\n\n    this.saveHelper(this.linkURL, linkText, null, true, doc);\n  },\n\n\nin browser/base/content/utilityOverlay.js:\n\n// Gather all descendent text under given document node.\nfunction gatherTextUnder ( root ) \n{\n  var text = \"\";\n  var node = root.firstChild; <-- Causes CPOW warning\n  var depth = 1;\n  while ( node && depth > 0 ) {\n    // See if this node is text.\n    if ( node.nodeType == Node.TEXT_NODE ) { <-- Causes CPOW warning\n      // Add this text to our collection.\n      text += \" \" + node.data; <-- Causes CPOW warning\n    } else if ( node instanceof HTMLImageElement) { <-- Causes CPOW warning [complex, image]\n      // If it has an \"alt\" attribute, add that.\n      var altText = node.getAttribute( \"alt\" ); <-- Causes CPOW warning [image]\n      if ( altText && altText != \"\" ) {\n        text += \" \" + altText;\n      }\n    }\n    // Find next node to test.\n    // First, see if this node has children.\n    if ( node.hasChildNodes() ) { <-- Causes CPOW warning\n      // Go to first child.\n      node = node.firstChild; <-- Causes CPOW warning [complex]\n      depth++;\n    } else {\n      // No children, try next sibling (or parent next sibling).\n      while ( depth > 0 && !node.nextSibling ) { <-- Causes CPOW warning\n        node = node.parentNode; <-- Causes CPOW warning\n        depth--;\n      }\n      if ( node.nextSibling ) { <-- Causes CPOW warning\n        node = node.nextSibling; <-- Causes CPOW warning [complex]\n      }\n    }\n  }\n  // Strip leading and tailing whitespace.\n  text = text.trim();\n  // Compress remaining whitespace.\n  text = text.replace( /\\s+/g, \" \" );\n  return text;\n}\n\nnote that the amount of warnings depends on the structure of the link, and I've marked up accordingly\nuntagged warnings are just caused by <a>text</a>\n[complex] tagged warnings are caused by e.g. <a><em>text</em> text</a>\n[image] tagged warnings are caused by e.g. <a><img/></a>\n\n\nNote I might make this situation even worse in bug 850378",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-18T15:36:42Z"
  }, {
    "text" : "Changing summary to include \"Bookmark This Link\" since it is a strict subset of this report, hitting all the same CPOWs in utilityOverlay's gatherTextUnder()",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-02-23T18:15:33Z"
  }, {
    "text" : "CPOW's I missed due to not testing with the right markup:\n\nin browser/base/content/nsContextMenu.js:\n\n  // Get text of link.\n  linkText: function() {\n    var text = gatherTextUnder(this.link);\n    if (!text || !text.match(/\\S/)) {\n      text = this.link.getAttribute(\"title\"); <- Causes CPOW warning\n      if (!text || !text.match(/\\S/)) {\n        text = this.link.getAttribute(\"alt\"); <- Causes CPOW warning\n        if (!text || !text.match(/\\S/))\n          text = this.linkURL;\n      }\n    }\n\n    return text;\n  },",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-03-07T12:00:07Z"
  }, {
    "text" : "Created attachment 8574417\nStore the value of linkText that is calculated during nsContextMenu init and reuse it later, rather than recalculating it\n\nSo it turns out the linkText is already being calculated when initing the menu.  In the plaintext case because it needs the text to even work out if it's a link, and in the actual link case, formatSearchContextItem() does it.\n(I thought doing all the tree walking in gatherTextUnder() during init, instead of using messages when needed, would have been too expensive for fixing this, but since it is already being done anyway may as well keep it).\n\nThis won't fix all the warnings in the save link case, bug 1140859 is for the rest.\n\nNote to self: whichever of this and bug 850378 lands second will need to be rebased on top of the other.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-03-08T17:37:41Z"
  }, {
    "text" : "Comment on attachment 8574417\nStore the value of linkText that is calculated during nsContextMenu init and reuse it later, rather than recalculating it\n\nReview of attachment 8574417:\n-----------------------------------------------------------------\n\nThis makes sense to me. Glad to see even more unsafe CPOW usage warning reductions! You're on a roll, Ian!\n\nThank so much.",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-03-18T17:48:18Z"
  }, {
    "text" : "Green linux64 try run https://treeherder.mozilla.org/#/jobs?repo=try&revision=bc36d24e29ae",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-03-20T13:14:02Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/1fe96992c3b5",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-03-20T14:45:27Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/1fe96992c3b5",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-03-21T00:49:17Z"
  }, {
    "text" : "Created attachment 8591205\nMozReview Request: bz://1134222/Kwan\n\n/r/6981 - Bug 1134222 - Save a reference to the ownerDocument during the sync contextmenu message, and use it for saveLink()\n\nPull down this commit:\n\nhg pull -r 50793a51ef72d275171383c01fc0117f7f455567 https://reviewboard-hg.mozilla.org/gecko/",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-04-11T10:12:45Z"
  }, {
    "text" : "Comment on attachment 8591205\nMozReview Request: bz://1134222/Kwan\n\nhttps://reviewboard.mozilla.org/r/6979/#review5787\n\nThanks, this looks good to me.",
    "authour" : "gkrizsanits@mozilla.com",
    "created" : "2015-04-13T10:37:20Z"
  }, {
    "text" : "Cool, with this patch all the remaining work to get Save Link safe is covered by bug 1140859, which I have a patch for.\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=67fcd4cdbffb\n1 intermittent (bug 961215)",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-04-13T13:54:20Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/cdc56a9e357c",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-13T21:01:45Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/cdc56a9e357c",
    "authour" : "cbook@mozilla.com",
    "created" : "2015-04-14T12:31:09Z"
  }, {
    "text" : "Bug 1140859 has fixed the remainder.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-04-22T16:45:01Z"
  }, {
    "text" : "This patch did a very bad thing which is change something that was a function to a string.\n\nAny add-on that used linkText now needs:\n\n+    // linkText changed from a function to a string\n+    // in Firefox 39. Check for both.\n+    if (\"getLinkText\" in gContextMenu) {\n+      title = gContextMenu.linkText;\n+    } else {\n+      title = gContextMenu.linkText();\n+    }\n\nThe string should have had a new variable name, not reused the preexisting function name.",
    "authour" : "mozilla@kaply.com",
    "created" : "2015-04-27T18:34:20Z"
  }, {
    "text" : "(In reply to Mike Kaply [:mkaply] from comment #14)\n> This patch did a very bad thing which is change something that was a\n> function to a string.\n> \n> Any add-on that used linkText now needs:\n> \n> +    // linkText changed from a function to a string\n> +    // in Firefox 39. Check for both.\n> +    if (\"getLinkText\" in gContextMenu) {\n> +      title = gContextMenu.linkText;\n> +    } else {\n> +      title = gContextMenu.linkText();\n> +    }\n> \n> The string should have had a new variable name, not reused the preexisting\n> function name.\nOh damn it, sorry, I wasn't even thinking of addon compat.  As 39's only in Aurora is it worth changing the variable name, or would that just cause even more problems?",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-04-29T22:18:17Z"
  }, {
    "text" : "Jorge:\n\nCan you do a quick search and see if any add-ons use linkText?",
    "authour" : "mozilla@kaply.com",
    "created" : "2015-04-29T22:49:17Z"
  }, {
    "text" : "I see about 100 add-ons on MXR using this function, so it's definitely a compatibility issue. I think the variable name should be changed, as Mike suggested, and I would like some clarification as to whether this change is being introduced in 39 or 40.",
    "authour" : "jorge@mozilla.com",
    "created" : "2015-04-30T14:54:47Z"
  }, {
    "text" : "We definitely would want to back to using the function and changing the new variable name then. We'll fix our code.",
    "authour" : "mozilla@kaply.com",
    "created" : "2015-04-30T14:56:28Z"
  }, {
    "text" : "Hey Ian,\n\nFeel like filing a new bug to switch the variable name?",
    "authour" : "mconley@mozilla.com",
    "created" : "2015-04-30T14:59:21Z"
  }, {
    "text" : "Thanks, guys, for keeping addon compat here!",
    "authour" : "ben.bucksch@beonex.com",
    "created" : "2015-04-30T15:31:59Z"
  }, {
    "text" : "(In reply to Jorge Villalobos [:jorgev] from comment #17)\n> I see about 100 add-ons on MXR using this function, so it's definitely a\n> compatibility issue. I think the variable name should be changed, as Mike\n> suggested, and I would like some clarification as to whether this change is\n> being introduced in 39 or 40.\nThe issue is introduced in 39 from this landing:\n(In reply to Wes Kocher (:KWierso) from comment #7)\n> https://hg.mozilla.org/mozilla-central/rev/1fe96992c3b5\n\n\n(In reply to Mike Conley (:mconley) - Needinfo me! from comment #19)\n> Hey Ian,\n> \n> Feel like filing a new bug to switch the variable name?\nDone, bug 1160339, and given you the r?.",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-04-30T22:18:38Z"
  }, {
    "text" : "Comment on attachment 8591205\nMozReview Request: bz://1134222/Kwan",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-06-10T15:35:19Z"
  }, {
    "text" : "Created attachment 8619510\nMozReview Request: Bug 1134222 - Save a reference to the ownerDocument during the sync contextmenu message, and use it for saveLink()",
    "authour" : "moz-ian@perix.co.uk",
    "created" : "2015-06-10T15:35:19Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-08T15:33:00Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-22T16:45:01Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-22T16:45:01Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "blassey.bugs@lassey.us",
      "date" : "2015-02-19T17:33:29Z",
      "what" : "cf_tracking_e10s",
      "removed" : "?",
      "added" : "m8+"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-02-23T18:15:33Z",
      "what" : "summary",
      "removed" : "[e10s] \"Save Link As...\" in remote browser causes unsafe CPOW usage warning",
      "added" : "[e10s] \"Save Link As...\"/\"Bookmark This Link\" in remote browser causes unsafe CPOW usage warning"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-08T15:33:00Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "moz-ian@perix.co.uk"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-08T16:50:29Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1140859"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-20T13:14:02Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed, leave-open"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-20T14:45:27Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-20T14:45:27Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-21T00:49:17Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-11T10:12:45Z",
      "what" : "cc",
      "removed" : "",
      "added" : "gkrizsanits@mozilla.com"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-13T13:54:20Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-13T21:01:45Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-13T21:01:45Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-04-14T12:31:09Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-22T16:45:01Z",
      "what" : "keywords",
      "removed" : "leave-open",
      "added" : ""
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-22T16:45:01Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 40"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-22T16:45:01Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-04-22 09:45:01"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-22T16:45:01Z",
      "what" : "cf_status_firefox40",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "mozilla@kaply.com",
      "date" : "2015-04-27T18:34:20Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mozilla@kaply.com"
    }, {
      "name" : "mozilla@kaply.com",
      "date" : "2015-04-29T22:49:17Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jorge@mozilla.com"
    }, {
      "name" : "jorge@mozilla.com",
      "date" : "2015-04-30T14:54:47Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "addon-compat"
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-04-30T14:59:21Z",
      "what" : "cc",
      "removed" : "",
      "added" : "moz-ian@perix.co.uk"
    }, {
      "name" : "ben.bucksch@beonex.com",
      "date" : "2015-04-30T15:31:59Z",
      "what" : "cc",
      "removed" : "",
      "added" : "ben.bucksch@beonex.com"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-30T22:12:36Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1160339"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-30T22:18:38Z",
      "what" : "depends_on",
      "removed" : "1160339",
      "added" : ""
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-05-01T15:30:17Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1160339"
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-06-10T15:35:19Z",
      "what" : "attachments.isobsolete:8591205",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "arni2033@yandex.ru",
      "date" : "2015-08-27T14:31:24Z",
      "what" : "see_also",
      "removed" : "",
      "added" : "https://bugzilla.mozilla.org/show_bug.cgi?id=1199239"
    } ],
    "flagEvents" : [ {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-03-08T17:37:41Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8574417,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-03-18T17:48:18Z",
      "what" : "flagtypes.name",
      "removed" : "review?(mconley@mozilla.com)",
      "added" : "",
      "attachmentId" : 8574417,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-11T10:12:45Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8591205,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gkrizsanits@mozilla.com",
      "date" : "2015-04-13T10:37:20Z",
      "what" : "flagtypes.name",
      "removed" : "review?(gkrizsanits@mozilla.com)",
      "added" : "",
      "attachmentId" : 8591205,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "mconley@mozilla.com",
      "date" : "2015-04-30T14:59:21Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-04-30T22:18:38Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(moz-ian@perix.co.uk)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "moz-ian@perix.co.uk",
      "date" : "2015-06-10T15:35:19Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8619510,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134222,
  "cclist" : [ "ben.bucksch@beonex.com", "blassey.bugs@lassey.us", "gkrizsanits@mozilla.com", "johnp@gmx.de", "jorge@mozilla.com", "mconley@mozilla.com", "moz-ian@perix.co.uk", "mozilla@kaply.com" ]
}, {
  "component" : "Developer Tools: Framework",
  "summary" : "Prevent calling connectToChild for all tabs when opening a single toolbox",
  "reporter" : "poirot.alex@gmail.com",
  "assigned" : "poirot.alex@gmail.com",
  "created" : null,
  "operatingSystem" : "Windows 7",
  "hardware" : "x86_64",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "The following code is expensive:\n  http://mxr.mozilla.org/mozilla-central/source/browser/devtools/framework/target.js#409\n\nThe call to listTabs forces the creation of TabActor instances for all tabs. It is somewhat ok to do such thing for tabs running in parent process as the creation of new TabActor instance shouldn't be expensive. But it is definitely not something we want to do for tabs running OOP. As it forces calling DebuggerServer.connectToChild and instanciate a lot of stuff dedicated to e10s support (a frame script, various message manager listener on both sides, ChildDebuggerTransport and NetworkMonitorManager).\n\nIt is especially unfortunate when this typical codepath only cares about just one tab, and knows about which tab it is interested in even before calling listTabs (has a reference to the <tab> element).",
  "comments" : [ {
    "text" : "The following code is expensive:\n  http://mxr.mozilla.org/mozilla-central/source/browser/devtools/framework/target.js#409\n\nThe call to listTabs forces the creation of TabActor instances for all tabs. It is somewhat ok to do such thing for tabs running in parent process as the creation of new TabActor instance shouldn't be expensive. But it is definitely not something we want to do for tabs running OOP. As it forces calling DebuggerServer.connectToChild and instanciate a lot of stuff dedicated to e10s support (a frame script, various message manager listener on both sides, ChildDebuggerTransport and NetworkMonitorManager).\n\nIt is especially unfortunate when this typical codepath only cares about just one tab, and knows about which tab it is interested in even before calling listTabs (has a reference to the <tab> element).",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-02-18T14:07:31Z"
  }, {
    "text" : "Created attachment 8565947\npatch v1\n\nHere is one way to address this.\nThat is focused on fixing target.js. It won't solve the overall issue of listTabs when connecting remotely from WebIDE.\nBut we could also fix the remote usecase by modifying listTabs or introducing a new request similar to listTabs\nbut that would expose TabActor grip/form and instead only return some metadata and tab ids.",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-02-18T14:14:03Z"
  }, {
    "text" : "https://treeherder.mozilla.org/#/jobs?repo=try&revision=44316177f4d9",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-02-18T14:18:10Z"
  }, {
    "text" : "(In reply to Alexandre Poirot [:ochameau] from comment #1)\n> Created attachment 8565947\n> patch v1\n> \n> Here is one way to address this.\n> That is focused on fixing target.js. It won't solve the overall issue of\n> listTabs when connecting remotely from WebIDE.\n> But we could also fix the remote usecase by modifying listTabs or\n> introducing a new request similar to listTabs\n> but that would expose TabActor grip/form and instead only return some\n> metadata and tab ids.\n\nI think my personal preference would be this alternative approach: just return basic metadata at first, instead of creating all the actors at the beginning.\n\nThis would make the API parallel listProcesses.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-02-18T15:24:42Z"
  }, {
    "text" : "Comment on attachment 8565947\npatch v1\n\nReview of attachment 8565947:\n-----------------------------------------------------------------\n\nApart from my confusion about the need for the tabId parameter, I'm not opposed to this approach.\n\nYou say that the expensive bit is the call to actor.connect() for each actor, but the only reason we do it so early is to get the tab's form. I assume you tried the idea we discussed on IRC (which I think Ryan is also alluding to) about returning a fake form (grip) from the RemoteBrowserTabActor in the parent when creating the listTabs response and couldn't make it work. I bet that the tab title isn't available in the parent, but even just the URL should probably do for matching purposes.\n\nI still think that the only existing use cases for getTab() (Toolbox and Scratchpad) is to fetch the current tab, and a getCurrentTab() would simplify the API and target.js accordingly. Did you find any other cases where we want a specific tab, but not the current one?\n\n::: browser/devtools/framework/target.js\n@@ +428,5 @@\n> +          filter.outerWindowID = windowUtils.outerWindowID;\n> +        } else if (this._tab.linkedBrowser &&\n> +                   this._tab.linkedBrowser.frameLoader.tabParent) {\n> +          // Tabs in child process\n> +          filter.tabId = this._tab.linkedBrowser.frameLoader.tabParent.tabId;\n\nWhat is this new conditional branch about? I don't see it being used anywhere yet and we weren't checking for it before.\n\n::: toolkit/devtools/server/actors/webbrowser.js\n@@ +348,3 @@\n>    }\n>  \n> +  if (this._testing && initialMapSize !== this._foundCount)\n\nIt seems that this._foundCount is never updated, so the sanity check is no longer performed.",
    "authour" : "past@mozilla.com",
    "created" : "2015-02-18T18:03:05Z"
  }, {
    "text" : "Comment on attachment 8565947\npatch v1\n\nReview of attachment 8565947:\n-----------------------------------------------------------------\n\nAlex's patch brings up two points:\n\n* Before his patch, we were forced to create remote actors (and servers) for every tab as part of the |listTabs| call\n  * Here, it is solved for some cases by skipping |listTabs| and providing the server enough to find the right tab\n* Before his patch, for the local tab case, we never really matched the local window to the server at all before, we only indirectly assumed that the tab we wanted was |response.selected|\n  * Now, we explicitly select the correct tab based on information the target has: the window / tab ID, which seems better than making an assumption\n\nThese seem like useful improvements on their own.\n\nI think a future patch could go further and make it possible for |listTabs| to work without starting full servers in every tab as I mentioned in the comments (and I think Panos does as well), and I don't think it would be in conflict with the work done here.\n\nSo, I think it's reasonable to proceed with this approach.\n\n::: toolkit/devtools/server/actors/root.js\n@@ +410,5 @@\n>  };\n>  \n>  RootActor.prototype.requestTypes = {\n>    \"listTabs\": RootActor.prototype.onListTabs,\n> +  \"getTab\": RootActor.prototype.onGetTab,\n\nWhat about |attachTab| to parallel |attachProcess| below?\n\nOr is too confusing because there is a separate |attach| method on the actual tab actor?\n\nI just like things to appear logical and similar when grouped together...  Maybe |attachProcess| should have been |getProcess|...  It's too bad you can't rename existing methods!  :)\n\nAnyway, just think about the name and do what seems best.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-09T22:42:13Z"
  }, {
    "text" : "Created attachment 8578589\npatch v2\n\nFactorized some code from target.js to dbg-client.jsm.\nAnd added a test.\n\nPanos, I'm requesting TabActor/DebuggerServer/Target reviews to you\nas you are the elder of this code to my eyes ;)\nBut feel free to ask me to throw reviews to jryans who seems\nto have a good understanding of this code.\n\n\n(In reply to Panos Astithas [:past] from comment #4)\n> Comment on attachment 8565947\n> You say that the expensive bit is the call to actor.connect() for each\n> actor, but the only reason we do it so early is to get the tab's form. I\n> assume you tried the idea we discussed on IRC (which I think Ryan is also\n> alluding to) about returning a fake form (grip) from the\n> RemoteBrowserTabActor in the parent when creating the listTabs response and\n> couldn't make it work. I bet that the tab title isn't available in the\n> parent, but even just the URL should probably do for matching purposes.\n\nI think we can get title, url and such things.\nI haven't tried, because I know we can't reasonably compute tab actors ids from the parent.\nThey are added to the TabActor grip from here, from the child process:\n  http://mxr.mozilla.org/mozilla-central/source/toolkit/devtools/server/actors/webbrowser.js#800\n\n> I still think that the only existing use cases for getTab() (Toolbox and\n> Scratchpad) is to fetch the current tab, and a getCurrentTab() would\n> simplify the API and target.js accordingly. Did you find any other cases\n> where we want a specific tab, but not the current one?\n\nYes I found one! The code I'm modifying in target.js expects to connect to a very specific tab!!\nhttp://mxr.mozilla.org/mozilla-central/source/browser/devtools/framework/target.js#432\nExcept that this code doesn't work on e10s as the `window` attribute on target is null (it may introduce some randomness on e10s..).\nBut really, we expect the target to connect to a very specific tab, not just the currently selected one.\nAnd this code is the main production codepath used by toolboxes, so that it ends up being the main usecase.\n\n> \n> ::: browser/devtools/framework/target.js\n> @@ +428,5 @@\n> > +          filter.outerWindowID = windowUtils.outerWindowID;\n> > +        } else if (this._tab.linkedBrowser &&\n> > +                   this._tab.linkedBrowser.frameLoader.tabParent) {\n> > +          // Tabs in child process\n> > +          filter.tabId = this._tab.linkedBrowser.frameLoader.tabParent.tabId;\n> \n> What is this new conditional branch about? I don't see it being used\n> anywhere yet and we weren't checking for it before.\n\nI added this branch in order to correctly support e10s and have correct tab actor filtering like what is being done for non-e10s builds.\n\n> \n> ::: toolkit/devtools/server/actors/webbrowser.js\n> @@ +348,3 @@\n> >    }\n> >  \n> > +  if (this._testing && initialMapSize !== this._foundCount)\n> \n> It seems that this._foundCount is never updated, so the sanity check is no\n> longer performed.\n\nOoops, I added it again. Having said that, I found that really weird to have such tests in code :o\n\n(In reply to J. Ryan Stinnett [:jryans] from comment #5)\n> Comment on attachment 8565947 \n> >  RootActor.prototype.requestTypes = {\n> >    \"listTabs\": RootActor.prototype.onListTabs,\n> > +  \"getTab\": RootActor.prototype.onGetTab,\n> \n> What about |attachTab| to parallel |attachProcess| below?\n> \n> Or is too confusing because there is a separate |attach| method on the\n> actual tab actor?\n\nYes it sounds confusing as we do not attach, we have to attach the tabactor after that...\n\n> \n> I just like things to appear logical and similar when grouped together... \n> Maybe |attachProcess| should have been |getProcess|...  It's too bad you\n> can't rename existing methods!  :)\n\nYes, it sounds more like attachProcess should be getProcess, like getTab and getAppActor.\nAll the threee are the same pattern.\n\nattachProcess has been introduced in bug 1060093, for Firefox 36.\nSo we can't uplift to rename it, but AFAIK, this request is only used locally,\nthere is no remote usage of it (desktop -> device).\nI'm not sure anyone started using this feature remotely?\nIf that's only used for the browser content toolbox, locally, we can reasonably rename it.\n\nWould you both agree on keeping getTab and renaming attachProcess to getProcess in followup?\n\nGreen try (with additional inspector test refactoring depending on getTab):\n  https://treeherder.mozilla.org/#/jobs?repo=try&revision=a8ceb3b345fd",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-03-17T11:27:51Z"
  }, {
    "text" : "It looks like I broke browser/devtools/debugger/test/browser_dbg_multiple-windows.js\nand something around listTabs's response selected attribute.\nI'll look into that tomorrow.",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-03-17T17:40:40Z"
  }, {
    "text" : "(In reply to Alexandre Poirot [:ochameau] from comment #6)\n> > I just like things to appear logical and similar when grouped together... \n> > Maybe |attachProcess| should have been |getProcess|...  It's too bad you\n> > can't rename existing methods!  :)\n> \n> Yes, it sounds more like attachProcess should be getProcess, like getTab and\n> getAppActor.\n> All the threee are the same pattern.\n> \n> attachProcess has been introduced in bug 1060093, for Firefox 36.\n> So we can't uplift to rename it, but AFAIK, this request is only used\n> locally,\n> there is no remote usage of it (desktop -> device).\n> I'm not sure anyone started using this feature remotely?\n> If that's only used for the browser content toolbox, locally, we can\n> reasonably rename it.\n> \n> Would you both agree on keeping getTab and renaming attachProcess to\n> getProcess in followup?\n\nAh, I think you are right.  We *did* start using |attachProcess| remotely for b2g main process after your more recent bug 1059308 though.  I think it's okay to do the rename assuming it lands this cycle (before 2015-03-30), or else is uplifted into Gecko 39.\n\nRelated to this, in bug 1059308, you landed several comments like \"Fx >= 37 uses |attachProcess|\", but it's really 39, not 37, since it took a while to land.  Please fix the comments in the follow up too!",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-17T17:50:27Z"
  }, {
    "text" : "Created attachment 8578946\ninterdiff\n\nFix the test... some unexpected scope issue with let not working as expected.",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-03-17T21:44:02Z"
  }, {
    "text" : "Created attachment 8578949\npatch v3\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=2c725fdbb202",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-03-17T21:47:30Z"
  }, {
    "text" : "Comment on attachment 8578949\npatch v3\n\nReview of attachment 8578949:\n-----------------------------------------------------------------\n\nJust some error handling issues and I also think it would be best to change some other existing tests to use getTab() with the other possible filter values to increase coverage.\n\n::: toolkit/devtools/server/actors/root.js\n@@ +281,5 @@\n> +      this._tabActorPool = new ActorPool(this.conn);\n> +      this.conn.addActorPool(this._tabActorPool);\n> +    }\n> +    return tabList.getTab(options)\n> +                  .then(tabActor => {\n\nNo error checking in case the tab couldn't be found?\n\n::: toolkit/devtools/server/actors/webbrowser.js\n@@ +390,5 @@\n> +        }\n> +      }\n> +    }\n> +    return { error: \"noTab\",\n> +             message: \"Unable to find tab with outerWindowID '\" + outerWindowID + \"'\" };\n\ngetTab() returns a promise on success, so it should return a rejected one in case of an error, so that the root actor can catch() it.",
    "authour" : "past@mozilla.com",
    "created" : "2015-03-19T09:36:24Z"
  }, {
    "text" : "(In reply to Alexandre Poirot [:ochameau] from comment #6)\n> Yes I found one! The code I'm modifying in target.js expects to connect to a\n> very specific tab!!\n> http://mxr.mozilla.org/mozilla-central/source/browser/devtools/framework/\n> target.js#432\n> Except that this code doesn't work on e10s as the `window` attribute on\n> target is null (it may introduce some randomness on e10s..).\n> But really, we expect the target to connect to a very specific tab, not just\n> the currently selected one.\n> And this code is the main production codepath used by toolboxes, so that it\n> ends up being the main usecase.\n\nI don't remember the details of that particular codepath, but I think it is for the browser toolbox that also needs to connect to the current window. Anyway, perfect is the enemy of good, so I'm not going to argue any more about it.\n\n> > It seems that this._foundCount is never updated, so the sanity check is no\n> > longer performed.\n> \n> Ooops, I added it again. Having said that, I found that really weird to have\n> such tests in code :o\n\nThat's how you can tell jimb is the author, he is accustomed to sprinkling ASSERTs throughout his C++ :)\n\n> Would you both agree on keeping getTab and renaming attachProcess to\n> getProcess in followup?\n\nSure, fine by me.",
    "authour" : "past@mozilla.com",
    "created" : "2015-03-19T09:50:40Z"
  }, {
    "text" : "(In reply to Panos Astithas [:past] from comment #12)\n> (In reply to Alexandre Poirot [:ochameau] from comment #6)\n> > Would you both agree on keeping getTab and renaming attachProcess to\n> > getProcess in followup?\n> \n> Sure, fine by me.\n\nI have filed bug 1147042 for this.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-24T17:51:12Z"
  }, {
    "text" : "Created attachment 8583149\npatch v4\n\nAddressed review comments:\n- now rejects from BrowserTabList.getTab\n- now that BrowserTabList.getTab rejects, convert promise rejection into a RDP message with {error, message} fields.\n\nI also fixed a leak reported in last try,\nI missed some calls to _checkListening in RootActor.getTab codepath.\n(to cleanup _actorByBrowser Map)\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=ad160a2b3cf5",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-03-25T16:30:43Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/d058933e812e",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-03-26T20:59:30Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/d058933e812e",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-03-27T00:26:17Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-27T00:26:17Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-27T00:26:17Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-02-18T14:14:03Z",
      "what" : "cc",
      "removed" : "",
      "added" : "past@mozilla.com"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-18T14:46:24Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jryans@gmail.com"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-18T14:46:24Z",
      "what" : "summary",
      "removed" : "Prevent calling connecToChild for all tabs when opening a single toolbox",
      "added" : "Prevent calling connectToChild for all tabs when opening a single toolbox"
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-17T11:27:51Z",
      "what" : "attachments.isobsolete:8565947",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-17T12:15:43Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "poirot.alex@gmail.com"
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-17T21:47:30Z",
      "what" : "attachments.isobsolete:8578589",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-25T16:30:43Z",
      "what" : "attachments.isobsolete:8578946",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-25T16:30:43Z",
      "what" : "attachments.isobsolete:8578949",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-25T20:15:24Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-26T20:59:30Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-26T20:59:30Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-27T00:26:17Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-27T00:26:17Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-27T00:26:17Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-26 17:26:17"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-27T00:26:17Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "continuation@gmail.com",
      "date" : "2015-07-09T20:56:43Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1181122"
    } ],
    "flagEvents" : [ {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-02-18T14:14:03Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8565947,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "past@mozilla.com",
      "date" : "2015-02-18T18:03:05Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(past@mozilla.com)",
      "added" : "",
      "attachmentId" : 8565947,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-19T16:12:28Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8565947,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-09T22:42:13Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(jryans@gmail.com)",
      "added" : "",
      "attachmentId" : 8565947,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-17T11:28:40Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8578589,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-17T21:47:30Z",
      "what" : "flagtypes.name",
      "removed" : "review?(past@mozilla.com)",
      "added" : "",
      "attachmentId" : 8578589,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-17T21:48:01Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8578949,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "past@mozilla.com",
      "date" : "2015-03-19T09:36:24Z",
      "what" : "flagtypes.name",
      "removed" : "review?(past@mozilla.com)",
      "added" : "",
      "attachmentId" : 8578949,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-25T20:14:24Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8583149,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-03-26T20:59:30Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134180,
  "cclist" : [ "jryans@gmail.com", "past@mozilla.com" ]
}, {
  "component" : "Developer Tools: Framework",
  "summary" : "Update toolkit/devtools/server/tests/unit/test_memory_footprint.js to lower threshold",
  "reporter" : "poirot.alex@gmail.com",
  "assigned" : "poirot.alex@gmail.com",
  "created" : null,
  "operatingSystem" : "Linux",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "Now that bug 1012988 landed, the memory usage of DebuggerServer is now significantly lower.\nWe should update toolkit/devtools/server/tests/unit/test_memory_footprint.js in order to ensure not regressing it again!",
  "comments" : [ {
    "text" : "Now that bug 1012988 landed, the memory usage of DebuggerServer is now significantly lower.\nWe should update toolkit/devtools/server/tests/unit/test_memory_footprint.js in order to ensure not regressing it again!",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-02-18T13:56:48Z"
  }, {
    "text" : "Arf... the test has been disabled via bug 795917 without any reason :s",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-02-23T09:20:01Z"
  }, {
    "text" : "Created attachment 8567843\npatch v1\n\nRe-enable the test and lower the thresholds.\n\nI'm using an assertion between 2 and 3 times the typical memory consumption locally,\nlet's see if that replicated on try:\n  https://treeherder.mozilla.org/#/jobs?repo=try&revision=282624176357",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-02-23T10:24:50Z"
  }, {
    "text" : "Comment on attachment 8567843\npatch v1\n\nReview of attachment 8567843:\n-----------------------------------------------------------------\n\n\\o/ you beat me to it.\n\nAlso with \"-b o -p linux64 -u xpcshell\" you push to try like a sniper :)\n\n::: toolkit/devtools/server/tests/unit/test_memory_footprint.js\n@@ +30,5 @@\n>  }\n>  \n>  function add_browser_actors() {\n>    DebuggerServer.addBrowserActors();\n> +  check_footprint(\"DebuggerServer.addBrowserActors()\", 1000);\n\nWow, that's a very low threshold. If it works I'm amazed, looks like I missed the moment when you more than 10xed memory performance!\n\n@@ +36,5 @@\n>  \n>  function connect_client() {\n>    gClient = new DebuggerClient(DebuggerServer.connectPipe());\n>    gClient.connect(function onConnect() {\n> +    check_footprint(\"DebuggerClient.connect()\", 1000);\n\nNo smallish bump expected after connecting?",
    "authour" : "janx@linux.com",
    "created" : "2015-02-23T11:29:09Z"
  }, {
    "text" : "(In reply to Jan Keromnes [:janx] from comment #3)\n> Comment on attachment 8567843\n> patch v1\n> \n> Review of attachment 8567843:\n> -----------------------------------------------------------------\n> \n> \\o/ you beat me to it.\n> \n> Also with \"-b o -p linux64 -u xpcshell\" you push to try like a sniper :)\n> \n> ::: toolkit/devtools/server/tests/unit/test_memory_footprint.js\n> @@ +30,5 @@\n> >  }\n> >  \n> >  function add_browser_actors() {\n> >    DebuggerServer.addBrowserActors();\n> > +  check_footprint(\"DebuggerServer.addBrowserActors()\", 1000);\n> \n> Wow, that's a very low threshold. If it works I'm amazed, looks like I\n> missed the moment when you more than 10xed memory performance!\n> \n> @@ +36,5 @@\n> >  \n> >  function connect_client() {\n> >    gClient = new DebuggerClient(DebuggerServer.connectPipe());\n> >    gClient.connect(function onConnect() {\n> > +    check_footprint(\"DebuggerClient.connect()\", 1000);\n> \n> No smallish bump expected after connecting?\n\nI don't care that much about each step consumption as soon as the final memory used when connecting and doing listTabs is under 1MB.\nWe could tweak that even furthur, here is the actual numbers for a local run:\nFootprint after DebuggerServer.init() is 36 kB (should be less than 500 kB).\nFootprint after DebuggerServer.addBrowserActors() is 228 kB (should be less than 1000 kB).\nFootprint after DebuggerClient.connect() is 316 kB (should be less than 1000 kB).\nFootprint after DebuggerClient.listTabs() is 504 kB (should be less than 1500 kB).\n\nThere is two significative bumps: addBrowserActors and listTabs.\nI've been quite conservative to avoid triggering the threshold by any small increase due to low level platform changes. We could be more aggresive if we add some more messages when the assertion fails in order to suggest bumping the thresholds if we hit it when working on something that has nothing to do with devtools.",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-02-23T12:43:48Z"
  }, {
    "text" : "Comment on attachment 8567843\npatch v1\n\nReview of attachment 8567843:\n-----------------------------------------------------------------\n\nLGTM, successfully re-triggered several times on try.\n\n::: toolkit/devtools/server/tests/unit/test_memory_footprint.js\n@@ +30,5 @@\n>  }\n>  \n>  function add_browser_actors() {\n>    DebuggerServer.addBrowserActors();\n> +  check_footprint(\"DebuggerServer.addBrowserActors()\", 1000);\n\nNit: Looking at your results and adding some wiggle room, I suggest we make the thresholds 500 < 800 < 1000 < 1300. If that works for you, please change this one to 800.\n\n@@ +42,5 @@\n>  }\n>  \n>  function list_tabs() {\n>    gClient.listTabs(function onListTabs(aResponse) {\n> +    check_footprint(\"DebuggerClient.listTabs()\", 1500);\n\nNit: (see above) Maybe change this to 1300.",
    "authour" : "janx@linux.com",
    "created" : "2015-02-23T16:43:11Z"
  }, {
    "text" : "Bonus nit: In your patch description, s/them/thresholds/.",
    "authour" : "janx@linux.com",
    "created" : "2015-02-23T16:45:50Z"
  }, {
    "text" : "Nit on my nit: Suggested patch description \"Bug 1134174 - Reenable devtools memory footprint assertion with lower thresholds. r=janx\"",
    "authour" : "janx@linux.com",
    "created" : "2015-02-23T16:50:23Z"
  }, {
    "text" : "Created attachment 8568569\npatch v2\n\nOk, so I lowered the thresholds to 2x the local value I'm seeing here.\nGiven that it is more aggresive, I've added a message to help figuring out these assertions.\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=d7153dfce907",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-02-24T15:48:15Z"
  }, {
    "text" : "It looks like results on try are more than 2 times bigger than what I get locally...\nMay be because of some other win introduces in my local patch queue.\nCould you give it a try to see if you get my numbers or try ones?",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-02-25T08:38:31Z"
  }, {
    "text" : "Comment on attachment 8568569\npatch v2\n\nReview of attachment 8568569:\n-----------------------------------------------------------------\n\nWell, these thresholds are too low. While it's tempting to go as low as possible, this test should only be a safeguard against massive regressions. For the future we might be interested in adding a talos test to actually track memory usage and catch regressions the smart way.\n\nAlso (I think I had the same issues) your `do_print` messages don't seem to appear in the try logs. Can you find another way to show these messages?\n\n::: toolkit/devtools/server/tests/unit/test_memory_footprint.js\n@@ +21,5 @@\n>  function check_footprint(step, max) {\n>    var footprint = (gMgr.residentUnique - gRefMemory) / 1024;\n>    ok(footprint < max, \"Footprint after \" + step + \" is \" + footprint + \" kB (should be less than \" + max + \" kB).\");\n> +  if (footprint >= max) {\n> +    do_print(\"!!! Memory usage of devtool server significantly increased, or very slowly increased over time.\");\n\nNit: \"The devtools server's memory usage increased either significantly, or slowly over time.\"\n\n@@ +22,5 @@\n>    var footprint = (gMgr.residentUnique - gRefMemory) / 1024;\n>    ok(footprint < max, \"Footprint after \" + step + \" is \" + footprint + \" kB (should be less than \" + max + \" kB).\");\n> +  if (footprint >= max) {\n> +    do_print(\"!!! Memory usage of devtool server significantly increased, or very slowly increased over time.\");\n> +    do_print(\"!!! Please very the increase with/without your patch and do not hesitate to bump the thresholds if needed.\");\n\nNit: \"If your patch doesn't cause a big increase, feel free to raise the thresholds for this test if needed.\"",
    "authour" : "janx@linux.com",
    "created" : "2015-02-25T12:35:46Z"
  }, {
    "text" : "Created attachment 8572063\npatch v3\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=831cb26a3d66\n\nTweaked the threshold to match master values and not my local queue.",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-03-03T17:37:10Z"
  }, {
    "text" : "Comment on attachment 8572063\npatch v3\n\nReview of attachment 8572063:\n-----------------------------------------------------------------\n\nr+ assuming green try, with still my two nits from comment 10 (maybe s/if needed/as needed/).",
    "authour" : "janx@linux.com",
    "created" : "2015-03-03T18:46:56Z"
  }, {
    "text" : "Created attachment 8574735\npatch v4\n\nAddressed the nits, new try:\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=70c2c16b4359",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-03-09T17:11:56Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/9a7651d3fd3c",
    "authour" : "cbook@mozilla.com",
    "created" : "2015-03-10T11:04:46Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/9a7651d3fd3c",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-03-10T22:35:58Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-10T22:35:58Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-10T22:35:58Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-02-18T13:57:02Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1012988"
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-02-18T13:57:09Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "poirot.alex@gmail.com"
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-02-23T09:20:01Z",
      "what" : "cc",
      "removed" : "",
      "added" : "janx@linux.com"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-23T16:44:35Z",
      "what" : "platform",
      "removed" : "x86_64",
      "added" : "All"
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-23T16:44:35Z",
      "what" : "op_sys",
      "removed" : "Windows 7",
      "added" : "Linux"
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-02-24T15:48:15Z",
      "what" : "attachments.isobsolete:8567843",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-03T17:37:10Z",
      "what" : "attachments.isobsolete:8568569",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-09T17:11:56Z",
      "what" : "attachments.isobsolete:8572063",
      "removed" : "0",
      "added" : "1"
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-03-09T17:12:37Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-03-10T11:04:46Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2015-03-10T11:04:46Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-10T22:35:58Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-10T22:35:58Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-10T22:35:58Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-10 15:35:58"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-03-10T22:35:58Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "janx@linux.com",
      "date" : "2015-02-23T16:43:11Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8567843,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-02-25T08:38:58Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8568569,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-02-25T12:35:46Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(janx@linux.com)",
      "added" : "",
      "attachmentId" : 8568569,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "janx@linux.com",
      "date" : "2015-03-03T18:46:56Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8572063,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134174,
  "cclist" : [ "janx@linux.com" ]
}, {
  "component" : "Developer Tools: WebIDE",
  "summary" : "WebIDE does not remember its previous size",
  "reporter" : "felash@gmail.com",
  "assigned" : "paul@mozilla.com",
  "created" : null,
  "operatingSystem" : "Linux",
  "hardware" : "x86_64",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "STR:\n1. Open WebIDE from Firefox\n2. set it fullscreen\n3. close WebIDE\n4. Open WebIDE from Firefox\n\n=> it's not full screen and even rather small.",
  "comments" : [ {
    "text" : "STR:\n1. Open WebIDE from Firefox\n2. set it fullscreen\n3. close WebIDE\n4. Open WebIDE from Firefox\n\n=> it's not full screen and even rather small.",
    "authour" : "felash@gmail.com",
    "created" : "2015-02-18T13:49:47Z"
  }, {
    "text" : "Hmm, interesting.  The size is remembered (at least here) if you don't maximize / fullscreen.  But if you do maximize, that is not retained for next time.\n\nI believe we currently just leave this up to XUL window sizing code.\n\nWe are leaning towards pushing WebIDE back into a browser tab (bug 1110216), so at that point we'd give up control of these things.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-02-18T15:19:53Z"
  }, {
    "text" : "Created attachment 8565988\nsizemode\n\nDidn't try, but that should do it.",
    "authour" : "paul@mozilla.com",
    "created" : "2015-02-18T15:25:12Z"
  }, {
    "text" : "Comment on attachment 8565988\nsizemode\n\nReview of attachment 8565988:\n-----------------------------------------------------------------\n\nIndeed it does!  Want to land it?",
    "authour" : "jryans@gmail.com",
    "created" : "2015-02-18T15:28:23Z"
  }, {
    "text" : "ok.",
    "authour" : "paul@mozilla.com",
    "created" : "2015-02-18T15:32:37Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/7fa78c76bc46",
    "authour" : "paul@mozilla.com",
    "created" : "2015-02-18T15:36:03Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/7fa78c76bc46",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-19T01:18:00Z"
  }, {
    "text" : " Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:40.0) Gecko/20100101 Firefox/40.0 It does remembers the window size now",
    "authour" : "roxrockers@gmail.com",
    "created" : "2015-05-27T09:24:48Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-19T01:18:00Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-19T01:18:00Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-18T15:19:53Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "893669"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-18T15:19:53Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jryans@gmail.com"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-18T15:20:02Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1110216"
    }, {
      "name" : "paul@mozilla.com",
      "date" : "2015-02-18T15:32:37Z",
      "what" : "cc",
      "removed" : "",
      "added" : "paul@mozilla.com"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-19T01:18:00Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "paul@mozilla.com"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-19T01:18:00Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 38"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-19T01:18:00Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-18 17:18:00"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-19T01:18:00Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "roxrockers@gmail.com",
      "date" : "2015-05-27T09:24:48Z",
      "what" : "cc",
      "removed" : "",
      "added" : "roxrockers@gmail.com"
    } ],
    "flagEvents" : [ {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-18T15:28:23Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8565988,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134172,
  "cclist" : [ "jryans@gmail.com", "paul@mozilla.com", "poirot.alex@gmail.com", "roxrockers@gmail.com" ]
}, {
  "component" : "Developer Tools: WebIDE",
  "summary" : "The Inspector is useless after killing the application",
  "reporter" : "felash@gmail.com",
  "assigned" : "jryans@gmail.com",
  "created" : null,
  "operatingSystem" : "Linux",
  "hardware" : "x86_64",
  "priority" : "P3",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "STR:\n\n1. Open WebIDE\n2. Plug in your Flame and open it from the top right menu\n3. Open the Messages app from the top left menu (you need the \"debug certified apps\" pref)\n4. Kill the Messages app from command line:\n\n  adb shell kill `adb shell b2g-ps Messages | awk '!/APPLICATION/ { print $4 }'`\n\n=> Notice that the \"play\" icon is now displayed in WebIDE, instead of the \"reload\" icon. That means the WebIDE is correctly notified that the application has stopped.\n=> You can still use the Tools. This is OK.\n\n5. Start the application again (either from WebIDE or from the device)\n\n=> Notice the Tools are displayed but interacting with them does nothing on the device.\n\nYou need to close/reopen them.",
  "comments" : [ {
    "text" : "STR:\n\n1. Open WebIDE\n2. Plug in your Flame and open it from the top right menu\n3. Open the Messages app from the top left menu (you need the \"debug certified apps\" pref)\n4. Kill the Messages app from command line:\n\n  adb shell kill `adb shell b2g-ps Messages | awk '!/APPLICATION/ { print $4 }'`\n\n=> Notice that the \"play\" icon is now displayed in WebIDE, instead of the \"reload\" icon. That means the WebIDE is correctly notified that the application has stopped.\n=> You can still use the Tools. This is OK.\n\n5. Start the application again (either from WebIDE or from the device)\n\n=> Notice the Tools are displayed but interacting with them does nothing on the device.\n\nYou need to close/reopen them.",
    "authour" : "felash@gmail.com",
    "created" : "2015-02-18T13:33:59Z"
  }, {
    "text" : "I *think* this is another toolbox shutdown bug which is fixed by",
    "authour" : "jryans@gmail.com",
    "created" : "2015-02-18T21:14:35Z"
  }, {
    "text" : "... bug 1128027.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-02-18T21:14:52Z"
  }, {
    "text" : "Okay, bug 1128027 changed some error messages here, but the issue itself still exists.\n\nJulien, after step 4 (killing the app), you say \"You can still use the Tools. This is OK.\", but for me the toolbox seems pretty dead.  After all, we just killed the app, so how can the toolbox work anymore?\n\nTo me, the logical fix is for WebIDE's toolbox to close when the app is killed.  Does this seem right to you?",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-10T18:24:19Z"
  }, {
    "text" : "> \"You can still use the Tools. This is OK.\"\n\nMmm I think I meant that this was not necessarily bad. For example, we might want to still see the console messages or the profiler information.\n\nI don't have a strong opinion, but if we can keep the state as it is, and \"just\" reconnect the existing toolbox to any application we want to debug, while retaining all existing data, it would be the best behavior IMO.\n\nIf this is too difficult then do as you think :)",
    "authour" : "felash@gmail.com",
    "created" : "2015-03-16T14:56:33Z"
  }, {
    "text" : "Actually, now that I use it once again, I exactly know how I'd like it to behave.\n\nThe fact is that I push the application using the Gaia build system, not using WebIDE (mainly because it's a shell command I can bind it in vim). So it kills the running application, and then I start it again, either from WebIDE or from the phone. And then I'd like WebIDE to automatically connect to the newly running application, but only when I start it (and I know WebIDE is aware of this because the top icons are changing).\n\nHope this makes sense.",
    "authour" : "felash@gmail.com",
    "created" : "2015-03-16T16:47:44Z"
  }, {
    "text" : "(In reply to Julien Wajsberg [:julienw] (PTO April 6th) from comment #5)\n> Actually, now that I use it once again, I exactly know how I'd like it to\n> behave.\n> \n> The fact is that I push the application using the Gaia build system, not\n> using WebIDE (mainly because it's a shell command I can bind it in vim). So\n> it kills the running application, and then I start it again, either from\n> WebIDE or from the phone. And then I'd like WebIDE to automatically connect\n> to the newly running application, but only when I start it (and I know\n> WebIDE is aware of this because the top icons are changing).\n> \n> Hope this makes sense.\n\nRight, that makes sense!  If an app starts, and it's the currently selected app in WebIDE, we should auto-open the toolbox.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-06T15:29:26Z"
  }, {
    "text" : "While working on this issue, I noticed troubles with reopen the toolbox for the same app.  The patches in bug 1145049 resolve this, hopefully they will land soon.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-06T20:53:09Z"
  }, {
    "text" : "Created attachment 8588858\n0001-Bug-1134166-Restart-toolbox-if-selected-app-re-opens.patch",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-07T02:15:54Z"
  }, {
    "text" : "Created attachment 8588859\n0002-Bug-1134166-Close-toolbox-if-selected-app-dies.-r-oc.patch",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-07T02:16:12Z"
  }, {
    "text" : "Try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=c5aa2aa5c4fc",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-07T02:17:37Z"
  }, {
    "text" : "For this to work as smoothly as possible, you should also have the patches from bug 1145049 applied.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-07T02:18:24Z"
  }, {
    "text" : "Comment on attachment 8588858\n0001-Bug-1134166-Restart-toolbox-if-selected-app-re-opens.patch\n\nReview of attachment 8588858:\n-----------------------------------------------------------------\n\nLooks good,",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-04-07T11:43:39Z"
  }, {
    "text" : "Comment on attachment 8588859\n0002-Bug-1134166-Close-toolbox-if-selected-app-dies.-r-oc.patch\n\nReview of attachment 8588859:\n-----------------------------------------------------------------\n\nthanks!",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-04-07T11:44:14Z"
  }, {
    "text" : "Note that I'm seeing the following exception, not sure it is related to your patch or one of mine:\n\nFull message: TypeError: AppManager.selectedProject is null\nFull stack: UI.updateToolboxFullscreenState@chrome://webide/content/webide.js:1058:1\nUI._closeToolboxUI@chrome://webide/content/webide.js:1082:5\nUI.destroyToolbox/<@chrome://webide/content/webide.js:1012:21\n\nSTR is to open simulator, connect to clock, open toolbox and shutdown the simulator.",
    "authour" : "poirot.alex@gmail.com",
    "created" : "2015-04-07T11:46:44Z"
  }, {
    "text" : "(In reply to Alexandre Poirot [:ochameau] from comment #14)\n> Note that I'm seeing the following exception, not sure it is related to your\n> patch or one of mine:\n> \n> Full message: TypeError: AppManager.selectedProject is null\n> Full stack:\n> UI.updateToolboxFullscreenState@chrome://webide/content/webide.js:1058:1\n> UI._closeToolboxUI@chrome://webide/content/webide.js:1082:5\n> UI.destroyToolbox/<@chrome://webide/content/webide.js:1012:21\n> \n> STR is to open simulator, connect to clock, open toolbox and shutdown the\n> simulator.\n\nIt happens on fx-team, but I'll throw in an extra check here to fix it.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-08T08:42:19Z"
  }, {
    "text" : "remote:   https://hg.mozilla.org/integration/fx-team/rev/c8066e57077e\nremote:   https://hg.mozilla.org/integration/fx-team/rev/665b9fb029e1\nremote:   https://hg.mozilla.org/integration/fx-team/rev/698da9956e20",
    "authour" : "jryans@gmail.com",
    "created" : "2015-04-08T09:10:30Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/c8066e57077e\nhttps://hg.mozilla.org/mozilla-central/rev/665b9fb029e1\nhttps://hg.mozilla.org/mozilla-central/rev/698da9956e20",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-04-08T16:43:12Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-07T02:12:42Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-08T16:43:12Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-08T16:43:12Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-18T21:14:35Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jryans@gmail.com"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-18T21:14:35Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1128027"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-10T18:24:19Z",
      "what" : "cc",
      "removed" : "",
      "added" : "felash@gmail.com"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-10T18:24:19Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "893669"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-06T15:29:44Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[devedition-40]"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-06T20:53:09Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1145049"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-07T02:12:42Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "jryans@gmail.com"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-08T16:02:51Z",
      "what" : "whiteboard",
      "removed" : "[devedition-40]",
      "added" : "[devedition-40][difficulty=easy]"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-08T16:43:12Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 40"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-08T16:43:12Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-04-08 09:43:12"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-04-08T16:43:12Z",
      "what" : "cf_status_firefox40",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "jgriffiths@mozilla.com",
      "date" : "2015-04-17T00:49:58Z",
      "what" : "priority",
      "removed" : "--",
      "added" : "P3"
    }, {
      "name" : "jgriffiths@mozilla.com",
      "date" : "2015-04-17T00:49:58Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jgriffiths@mozilla.com"
    }, {
      "name" : "jgriffiths@mozilla.com",
      "date" : "2015-07-25T05:38:27Z",
      "what" : "whiteboard",
      "removed" : "[devedition-40][difficulty=easy]",
      "added" : "[polish-backlog][difficulty=easy]"
    } ],
    "flagEvents" : [ {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-10T18:24:19Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "felash@gmail.com",
      "date" : "2015-03-16T14:56:33Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(felash@gmail.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-07T02:15:54Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8588858,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-04-07T02:16:12Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8588859,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-04-07T11:43:39Z",
      "what" : "flagtypes.name",
      "removed" : "review?(poirot.alex@gmail.com)",
      "added" : "",
      "attachmentId" : 8588858,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "poirot.alex@gmail.com",
      "date" : "2015-04-07T11:44:14Z",
      "what" : "flagtypes.name",
      "removed" : "review?(poirot.alex@gmail.com)",
      "added" : "",
      "attachmentId" : 8588859,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134166,
  "cclist" : [ "felash@gmail.com", "jgriffiths@mozilla.com", "jryans@gmail.com", "poirot.alex@gmail.com" ]
}, {
  "component" : "Developer Tools: WebIDE",
  "summary" : "The tools stay visible and inactive when the phone is disconnected",
  "reporter" : "felash@gmail.com",
  "assigned" : "jryans@gmail.com",
  "created" : null,
  "operatingSystem" : "Linux",
  "hardware" : "x86_64",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "STR:\n1. Open WebIDE\n2. plug in your Flame\n3. connect your Flame from WebIDE\n4. Open an application from the top left menu\n5. unplug the Flame\n\n=> Notice the tools are still displayed\n\n6. plug the Flame\n7. select it again from the top right menu\n\n=> the application is run automatically and a new tools panel is opened, but the previous one is still displayed, is inactive, and takes a huge part of the window.\n\nNote that in earlier versions, a new tools windows was not opened and we ended up being stuck.",
  "comments" : [ {
    "text" : "STR:\n1. Open WebIDE\n2. plug in your Flame\n3. connect your Flame from WebIDE\n4. Open an application from the top left menu\n5. unplug the Flame\n\n=> Notice the tools are still displayed\n\n6. plug the Flame\n7. select it again from the top right menu\n\n=> the application is run automatically and a new tools panel is opened, but the previous one is still displayed, is inactive, and takes a huge part of the window.\n\nNote that in earlier versions, a new tools windows was not opened and we ended up being stuck.",
    "authour" : "felash@gmail.com",
    "created" : "2015-02-18T13:22:05Z"
  }, {
    "text" : "Happens to me too. Toolboxes stack up and are never destroyed.",
    "authour" : "paul@mozilla.com",
    "created" : "2015-02-18T13:31:51Z"
  }, {
    "text" : "Yep, sorry for this.\n\nThe root cause is the toolbox doesn't finish destroying, which I hope to fix in bug 1128027.\n\nWe could potentially make a more targeted fix here for WebIDE to remove the toolbox from view right away, instead of waiting for full toolbox destruction.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-02-18T21:10:19Z"
  }, {
    "text" : "This was fixed by bug 1128027, which landed recently.",
    "authour" : "jryans@gmail.com",
    "created" : "2015-03-10T17:59:59Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-10T17:59:59Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-10T17:59:59Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "paul@mozilla.com",
      "date" : "2015-02-18T13:31:51Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jryans@gmail.com, paul@mozilla.com"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-02-18T21:10:19Z",
      "what" : "depends_on",
      "removed" : "",
      "added" : "1128027"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-10T17:59:16Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "893669"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-10T17:59:59Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "jryans@gmail.com"
    }, {
      "name" : "jryans@gmail.com",
      "date" : "2015-03-10T17:59:59Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-03-10 10:59:59"
    } ],
    "flagEvents" : [ ]
  },
  "resolution" : "FIXED",
  "id" : 1134162,
  "cclist" : [ "jryans@gmail.com", "paul@mozilla.com", "poirot.alex@gmail.com" ]
}, {
  "component" : "General",
  "summary" : "Various accessibility issues on about:home page",
  "reporter" : "mzehe@mozilla.com",
  "assigned" : "gijskruitbosch+bugs@gmail.com",
  "created" : null,
  "operatingSystem" : "All",
  "hardware" : "All",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "1. Search engine button icon has no alt text.\n2. Activating that causes keyboard focus to get lost.\n3. Link at bottom of page has no label, looks like an image without alt text. I believe it's something about Mozilla.",
  "comments" : [ {
    "text" : "1. Search engine button icon has no alt text.\n2. Activating that causes keyboard focus to get lost.\n3. Link at bottom of page has no label, looks like an image without alt text. I believe it's something about Mozilla.",
    "authour" : "mzehe@mozilla.com",
    "created" : "2015-02-18T08:26:12Z"
  }, {
    "text" : "(In reply to Marco Zehe (:MarcoZ) from comment #0)\n> 3. Link at bottom of page has no label, looks like an image without alt\n> text. I believe it's something about Mozilla.\n\nI realize this is a difficult question to be asking, but what is this and/or where is it and/or what element ID does it have? In particular, I'm assuming you don't mean the Downloads/Bookmarks/History/Add-ons/Sync/Prefereces (potentially also Marketplace might be in there somewhere) buttons at the bottom, but the thing before that (?). In which case it's the snippet, and we'd need to talk to the snippet folks, I expect. :-(\n\n1 & 2 are definitely something for fx-team to be fixing. I'll get this nom'd for fixing in the next iteration.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-19T09:00:40Z"
  }, {
    "text" : "It's this beauty from the bottom of the page:\n\n<a id=\"aboutMozilla\" href=\"https://www.mozilla.org/about/?utm_source=about-home&amp;utm_medium=Referral\"/>",
    "authour" : "mzehe@mozilla.com",
    "created" : "2015-02-19T10:30:25Z"
  }, {
    "text" : "(In reply to Marco Zehe (:MarcoZ) from comment #2)\n> It's this beauty from the bottom of the page:\n> \n> <a id=\"aboutMozilla\"\n> href=\"https://www.mozilla.org/about/?utm_source=about-home&amp;\n> utm_medium=Referral\"/>\n\nAh. This is absolutely positioned and visually at the top-right, which is why I was confused. Thanks for clarifying! :-)",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-19T10:45:20Z"
  }, {
    "text" : "Hm, then perhaps while fixing this, it would also be a good idea to move it to a more logical position in the DOM, since screen readers don't care for the positioning of the element via CSS, but rather its position in the HTML.",
    "authour" : "mzehe@mozilla.com",
    "created" : "2015-02-19T10:50:14Z"
  }, {
    "text" : "(In reply to Marco Zehe (:MarcoZ) from comment #4)\n> Hm, then perhaps while fixing this, it would also be a good idea to move it\n> to a more logical position in the DOM, since screen readers don't care for\n> the positioning of the element via CSS, but rather its position in the HTML.\n\nIt's visually tucked away as not being important, \"just\" a brandmark. And actually now that I'm looking at it, it has too little contrast on the non-hover state. :-(\n\nI'll file a separate bug for that because it probably needs UX fixes, while all 3 issues here can be adjusted without UX feedback.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-19T10:54:38Z"
  }, {
    "text" : "(In reply to :Gijs Kruitbosch from comment #5)\n> (In reply to Marco Zehe (:MarcoZ) from comment #4)\n> > Hm, then perhaps while fixing this, it would also be a good idea to move it\n> > to a more logical position in the DOM, since screen readers don't care for\n> > the positioning of the element via CSS, but rather its position in the HTML.\n> \n> It's visually tucked away as not being important, \"just\" a brandmark. And\n> actually now that I'm looking at it, it has too little contrast on the\n> non-hover state. :-(\n\nPoint being, it probably makes sense to have it at the bottom in the \"importance\" / \"logical document order\" sense... I barely noticed it on the page! :-)",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2015-02-19T10:55:28Z"
  }, {
    "text" : "OK fine, too, if it's not important visually. But the contrast thing should definitely be fixed. ;)",
    "authour" : "mzehe@mozilla.com",
    "created" : "2015-02-19T11:01:25Z"
  }, {
    "text" : "Marco, how are we doing here now? about:home has been changed a few times since this got filed and I *think* 1 and 2 are now fixed, but I'm not sure.",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2016-01-26T10:37:37Z"
  }, {
    "text" : "Yes, issues 1 and 2 are solved, issue 3 is still present.",
    "authour" : "mzehe@mozilla.com",
    "created" : "2016-01-26T14:09:13Z"
  }, {
    "text" : "Created attachment 8712147\nadd 'alt text' for the empty link using aria-label,\n\nUsing aria-label rather than a title because I think a tooltip isn't necessary/helpful here. Hardcoding the text because the link destination is also hardcoded, so making this be vendorShortName from the branding doesn't seem like it'd make sense (as e.g. 'Debian' for a debian build of iceweasel or whatever wouldn't be the correct label for this link). I don't think it makes sense to introduce a localized string for this, either, but maybe I'm wrong?",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2016-01-26T14:36:51Z"
  }, {
    "text" : "Comment on attachment 8712147\nadd 'alt text' for the empty link using aria-label,\n\nYes, an aria-label is definitely more appropriate than the title attribute here. I'll let you fight out the correct contents of this string, since it specifically links to the \"About\" page. I would have called it \"About Mozilla\", which would add the requirement to make it localizable.",
    "authour" : "mzehe@mozilla.com",
    "created" : "2016-01-26T14:49:35Z"
  }, {
    "text" : "Comment on attachment 8712147\nadd 'alt text' for the empty link using aria-label,\n\nReview of attachment 8712147:\n-----------------------------------------------------------------\n\n::: browser/base/content/abouthome/aboutHome.xhtml\n@@ +73,5 @@\n>        <div id=\"restorePreviousSessionSeparator\"/>\n>        <button class=\"launchButton\" id=\"restorePreviousSession\">&historyRestoreLastSession.label;</button>\n>      </div>\n>  \n> +    <a id=\"aboutMozilla\" href=\"https://www.mozilla.org/about/?utm_source=about-home&amp;utm_medium=Referral\" aria-label=\"Mozilla\"/>\n\nYeah, I think something more communicative of what the user will get when they click on the link would be better. Let's do \"About Mozilla\" and make the string localizable.\n\nThe About dialog had the same problem, but there they used vendorShortName, which I agree with you is wrong as the link may not change and a new vendor may accidentally have a link that says their name but links to mozilla.org. http://mxr.mozilla.org/mozilla-central/source/browser/locales/en-US/chrome/browser/aboutDialog.dtd#27",
    "authour" : "jaws@mozilla.com",
    "created" : "2016-01-26T19:24:38Z"
  }, {
    "text" : "Created attachment 8713155\nMozReview Request: Bug 1134126 - add 'alt text' for the empty link using aria-label, r?jaws\n\nReview commit: https://reviewboard.mozilla.org/r/32755/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/32755/",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2016-01-28T13:00:33Z"
  }, {
    "text" : "Comment on attachment 8713155\nMozReview Request: Bug 1134126 - add 'alt text' for the empty link using aria-label, r?jaws\n\nhttps://reviewboard.mozilla.org/r/32755/#review29679",
    "authour" : "jaws@mozilla.com",
    "created" : "2016-01-29T19:04:32Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/6ec6a204d6f5",
    "authour" : "pulsebot@bots.tld",
    "created" : "2016-02-01T22:21:26Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/6ec6a204d6f5",
    "authour" : "cbook@mozilla.com",
    "created" : "2016-02-02T10:57:40Z"
  }, {
    "text" : "I have reproduced this bug on Nightly 38.0a1 (2015-02-18) on ubuntu 14.04 LTS, 32 bit!\n\nThe bug's fix is now verified on Latest Nightly 47.0a1!\n\nBuild ID: 20160211030242\nUser Agent: Mozilla/5.0 (X11; Linux i686; rv:47.0) Gecko/20100101 Firefox/47.0",
    "authour" : "khalid.z547@gmail.com",
    "created" : "2016-02-12T14:06:33Z"
  }, {
    "text" : "(In reply to Khalid Syfullah Zaman [:khalid32] from comment #17)\n> The bug's fix is now verified on Latest Nightly 47.0a1!\n\nThanks!",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2016-02-12T15:07:40Z"
  }, {
    "text" : "*** Bug 890018 has been marked as a duplicate of this bug. ***",
    "authour" : "gijskruitbosch+bugs@gmail.com",
    "created" : "2016-02-15T08:08:31Z"
  } ],
  "status" : "VERIFIED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2016-01-26T14:36:55Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2016-02-02T10:57:40Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2016-02-12T15:07:40Z",
      "what" : "status",
      "removed" : "RESOLVED",
      "added" : "",
      "type" : "VERIFIED"
    } ],
    "resolutionEvents" : [ {
      "name" : "cbook@mozilla.com",
      "date" : "2016-02-02T10:57:40Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-19T09:00:40Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mzehe@mozilla.com"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-19T09:00:40Z",
      "what" : "cf_fx_points",
      "removed" : "---",
      "added" : "3"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-02-19T15:20:10Z",
      "what" : "cc",
      "removed" : "",
      "added" : "mmucci@mozilla.com"
    }, {
      "name" : "mmucci@mozilla.com",
      "date" : "2015-11-07T14:52:43Z",
      "what" : "cc",
      "removed" : "mmucci@mozilla.com",
      "added" : ""
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2016-01-26T14:36:51Z",
      "what" : "cc",
      "removed" : "",
      "added" : "jaws@mozilla.com"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2016-01-26T14:36:55Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "gijskruitbosch+bugs@gmail.com"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2016-02-02T10:57:40Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 47"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2016-02-02T10:57:40Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2016-02-02 02:57:40"
    }, {
      "name" : "cbook@mozilla.com",
      "date" : "2016-02-02T10:57:40Z",
      "what" : "cf_status_firefox47",
      "removed" : "---",
      "added" : "fixed"
    }, {
      "name" : "khalid.z547@gmail.com",
      "date" : "2016-02-12T14:06:33Z",
      "what" : "cf_qa_whiteboard",
      "removed" : "",
      "added" : "[bugday-20160210]"
    }, {
      "name" : "khalid.z547@gmail.com",
      "date" : "2016-02-12T14:06:33Z",
      "what" : "cc",
      "removed" : "",
      "added" : "khalid.z547@gmail.com"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2016-02-12T15:07:40Z",
      "what" : "cf_status_firefox47",
      "removed" : "fixed",
      "added" : "verified"
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2016-02-15T08:08:31Z",
      "what" : "cc",
      "removed" : "",
      "added" : "redux@splintered.co.uk"
    } ],
    "flagEvents" : [ {
      "name" : "mzehe@mozilla.com",
      "date" : "2015-02-18T08:26:12Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "BACKLOG",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2015-02-19T09:00:40Z",
      "what" : "flagtypes.name",
      "removed" : "firefox-backlog?",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      }, {
        "status" : "BACKLOG",
        "state" : "GRANTED"
      }, {
        "status" : "QE_VERIFY",
        "state" : "DENIED"
      } ]
    }, {
      "name" : "mzehe@mozilla.com",
      "date" : "2015-02-19T10:30:25Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(mzehe@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2016-01-26T10:37:37Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "NEEDINFO",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mzehe@mozilla.com",
      "date" : "2016-01-26T14:09:13Z",
      "what" : "flagtypes.name",
      "removed" : "needinfo?(mzehe@mozilla.com)",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "UNKNOWN"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2016-01-26T14:36:51Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8712147,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2016-01-26T14:37:23Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8712147,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "mzehe@mozilla.com",
      "date" : "2016-01-26T14:49:35Z",
      "what" : "flagtypes.name",
      "removed" : "feedback?(mzehe@mozilla.com)",
      "added" : "",
      "attachmentId" : 8712147,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2016-01-26T19:24:38Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : 8712147,
      "flags" : [ {
        "status" : "UNKNOWN",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "gijskruitbosch+bugs@gmail.com",
      "date" : "2016-01-28T13:00:33Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8713155,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "jaws@mozilla.com",
      "date" : "2016-01-29T19:04:32Z",
      "what" : "flagtypes.name",
      "removed" : "review?(jaws@mozilla.com)",
      "added" : "",
      "attachmentId" : 8713155,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134126,
  "cclist" : [ "dbolter@mozilla.com", "gijskruitbosch+bugs@gmail.com", "jaws@mozilla.com", "khalid.z547@gmail.com", "mzehe@mozilla.com", "redux@splintered.co.uk" ]
}, {
  "component" : "Developer Tools: WebGL Shader Editor",
  "summary" : "Error: Shader Editor is still waiting for a WebGL context to be created.",
  "reporter" : "jordan@jsantell.com",
  "assigned" : "jordan@jsantell.com",
  "created" : null,
  "operatingSystem" : "Mac OS X",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "When visiting the below page, the shader editor waits for a context to be created, and this error occurs.\nhttp://www.ambiera.com/coppercube/demo.php?demo=fpsdemo&mode=webgl\n\nA promise chain failed to handle a rejection. Did you forget to '.catch', or did you forget to 'return'?\nSee https://developer.mozilla.org/Mozilla/JavaScript_code_modules/Promise.jsm/Promise\n\nDate: Tue Feb 17 2015 19:02:37 GMT-0800 (PST)\nFull Message: Error: Shader Editor is still waiting for a WebGL context to be created.\nFull Stack: ShadersEditorsView._getEditor@chrome://browser/content/devtools/shadereditor.js:418:29\nShadersEditorsView._toggleListeners/<@chrome://browser/content/devtools/shadereditor.js:452:14\nShadersEditorsView._toggleListeners@chrome://browser/content/devtools/shadereditor.js:451:24\nShadersEditorsView.setText/<@chrome://browser/content/devtools/shadereditor.js:398:13\nTaskImpl_run@resource://gre/modules/Task.jsm:314:40\nTaskImpl@resource://gre/modules/Task.jsm:275:3\ncreateAsyncFunction/asyncFunction@resource://gre/modules/Task.jsm:249:14\nTask_spawn@resource://gre/modules/Task.jsm:164:12\nShadersEditorsView.setText@chrome://browser/content/devtools/shadereditor.js:397:12\nEventsHandler._onTabNavigated/<@chrome://browser/content/devtools/shadereditor.js:143:17\nTaskImpl_run@resource://gre/modules/Task.jsm:314:40\nTaskImpl@resource://gre/modules/Task.jsm:275:3\ncreateAsyncFunction/asyncFunction@resource://gre/modules/Task.jsm:249:14\nTask_spawn@resource://gre/modules/Task.jsm:164:12\nEventsHandler._onTabNavigated@chrome://browser/content/devtools/shadereditor.js:126:9\nEventEmitter_emit@resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/event-emitter.js:137:11\nTabTarget__setupRemoteListeners/this._onTabNavigated@resource://gre/modules/commonjs/toolkit/loader.js -> resource:///modules/devtools/framework/target.js:492:9\neventSource/aProto.emit@resource://gre/modules/devtools/dbg-client.jsm:193:9\nDebuggerClient.prototype.onPacket@resource://gre/modules/devtools/dbg-client.jsm:992:7\nLocalDebuggerTransport.prototype.send/<@resource://gre/modules/devtools/dbg-client.jsm -> resource://gre/modules/devtools/transport/transport.js:545:11\nmakeInfallible/<@resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/DevToolsUtils.js:82:14\nmakeInfallible/<@resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/DevToolsUtils.js:82:14",
  "comments" : [ {
    "text" : "When visiting the below page, the shader editor waits for a context to be created, and this error occurs.\nhttp://www.ambiera.com/coppercube/demo.php?demo=fpsdemo&mode=webgl\n\nA promise chain failed to handle a rejection. Did you forget to '.catch', or did you forget to 'return'?\nSee https://developer.mozilla.org/Mozilla/JavaScript_code_modules/Promise.jsm/Promise\n\nDate: Tue Feb 17 2015 19:02:37 GMT-0800 (PST)\nFull Message: Error: Shader Editor is still waiting for a WebGL context to be created.\nFull Stack: ShadersEditorsView._getEditor@chrome://browser/content/devtools/shadereditor.js:418:29\nShadersEditorsView._toggleListeners/<@chrome://browser/content/devtools/shadereditor.js:452:14\nShadersEditorsView._toggleListeners@chrome://browser/content/devtools/shadereditor.js:451:24\nShadersEditorsView.setText/<@chrome://browser/content/devtools/shadereditor.js:398:13\nTaskImpl_run@resource://gre/modules/Task.jsm:314:40\nTaskImpl@resource://gre/modules/Task.jsm:275:3\ncreateAsyncFunction/asyncFunction@resource://gre/modules/Task.jsm:249:14\nTask_spawn@resource://gre/modules/Task.jsm:164:12\nShadersEditorsView.setText@chrome://browser/content/devtools/shadereditor.js:397:12\nEventsHandler._onTabNavigated/<@chrome://browser/content/devtools/shadereditor.js:143:17\nTaskImpl_run@resource://gre/modules/Task.jsm:314:40\nTaskImpl@resource://gre/modules/Task.jsm:275:3\ncreateAsyncFunction/asyncFunction@resource://gre/modules/Task.jsm:249:14\nTask_spawn@resource://gre/modules/Task.jsm:164:12\nEventsHandler._onTabNavigated@chrome://browser/content/devtools/shadereditor.js:126:9\nEventEmitter_emit@resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/event-emitter.js:137:11\nTabTarget__setupRemoteListeners/this._onTabNavigated@resource://gre/modules/commonjs/toolkit/loader.js -> resource:///modules/devtools/framework/target.js:492:9\neventSource/aProto.emit@resource://gre/modules/devtools/dbg-client.jsm:193:9\nDebuggerClient.prototype.onPacket@resource://gre/modules/devtools/dbg-client.jsm:992:7\nLocalDebuggerTransport.prototype.send/<@resource://gre/modules/devtools/dbg-client.jsm -> resource://gre/modules/devtools/transport/transport.js:545:11\nmakeInfallible/<@resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/DevToolsUtils.js:82:14\nmakeInfallible/<@resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/DevToolsUtils.js:82:14",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-18T03:04:19Z"
  }, {
    "text" : "Seeing this in quite a few demos",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-18T03:09:00Z"
  }, {
    "text" : "Politely suggest bumping the prio for this being investigated as GDC is coming up.\n\nI think this is a larger problem - I can't use the shader editor or canvas debugger with this demo all the way back to Firefox 35 ( current release )",
    "authour" : "jgriffiths@mozilla.com",
    "created" : "2015-02-18T17:25:46Z"
  }, {
    "text" : "Created attachment 8566099\ndoc_blended-geometry.html\n\nOn page load, we lazily load the editors to set their text to empty. If no programs are linked at this point, there's an error that throws since we try to set text on the editors, and the #content is not yet visible.\n\nTook a doc from the shader editor tests, and added a 5s delay after pageload before doing shader stuff, to recreate the error. Think I know how to fix this.",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-18T18:23:07Z"
  }, {
    "text" : "Created attachment 8566279\n1134082-shader-uncaught.patch\n\nWe attempt to lazily load editors, but this has a byproduct of throwing an error if content is not yet shown, but we still attempt to access the editors on cleanup, clearing out the text, and many other functions inside here. I don't think this is the ideal solution, but it fixes all the tests that were ignoring uncaught promise exceptions, as well as window leaks.\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=0ee041f4be7d",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-18T23:25:03Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/923580a290d1",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-21T19:36:53Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/923580a290d1",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-21T21:41:34Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-18T19:55:57Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:34Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:34Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jgriffiths@mozilla.com",
      "date" : "2015-02-18T17:25:46Z",
      "what" : "cc",
      "removed" : "",
      "added" : "dcamp@mozilla.com, jgriffiths@mozilla.com, vporof@mozilla.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-18T19:55:57Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "jsantell@mozilla.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-21T17:58:01Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T19:36:53Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T19:36:53Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:34Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 38"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:34Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:34Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-21 13:41:34"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T21:41:34Z",
      "what" : "cf_status_firefox38",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-18T23:25:03Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8566279,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "vporof@mozilla.com",
      "date" : "2015-02-21T13:42:03Z",
      "what" : "flagtypes.name",
      "removed" : "review?(vporof@mozilla.com)",
      "added" : "",
      "attachmentId" : 8566279,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-21T19:36:53Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : -1,
      "flags" : [ {
        "status" : "TEST_SUITE",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134082,
  "cclist" : [ "dcamp@mozilla.com", "jgriffiths@mozilla.com", "vporof@mozilla.com" ]
}, {
  "component" : "Developer Tools: Web Audio Editor",
  "summary" : "If `getDefinition` method does not exist on server, use one from the client",
  "reporter" : "jordan@jsantell.com",
  "assigned" : "jordan@jsantell.com",
  "created" : null,
  "operatingSystem" : "Mac OS X",
  "hardware" : "x86",
  "priority" : "--",
  "duplicateOf" : null,
  "severity" : "normal",
  "description" : "This will be duplicated code on the client since this was just added to Fx38, which isn't great. But not sure of other solutions to support < Fx38 targets (b2g 2.0-2.2)",
  "comments" : [ {
    "text" : "This will be duplicated code on the client since this was just added to Fx38, which isn't great. But not sure of other solutions to support < Fx38 targets (b2g 2.0-2.2)",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-18T02:57:17Z"
  }, {
    "text" : "Created attachment 8568121\n1134079-audionode-definitions.patch\n\nIdeally, this would be pushed up to Fx38, but I think this is a small case of someone debugging old FxOS on not-Nightly on desktop.\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=753bb6d82c77",
    "authour" : "jordan@jsantell.com",
    "created" : "2015-02-23T20:47:20Z"
  }, {
    "text" : "https://hg.mozilla.org/integration/fx-team/rev/51c90c0c2c70",
    "authour" : "ryanvm@gmail.com",
    "created" : "2015-02-24T15:31:59Z"
  }, {
    "text" : "https://hg.mozilla.org/mozilla-central/rev/51c90c0c2c70",
    "authour" : "wkocher@mozilla.com",
    "created" : "2015-02-24T23:44:06Z"
  } ],
  "status" : "RESOLVED",
  "activity" : {
    "statusEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-23T20:45:01Z",
      "what" : "status",
      "removed" : "NEW",
      "added" : "",
      "type" : "ASSIGNED"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-24T23:44:06Z",
      "what" : "status",
      "removed" : "ASSIGNED",
      "added" : "",
      "type" : "RESOLVED"
    } ],
    "resolutionEvents" : [ {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-24T23:44:06Z",
      "what" : "resolution",
      "removed" : "",
      "added" : "",
      "type" : "FIXED"
    } ],
    "assignmentEvents" : [ ],
    "otherEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-23T20:45:01Z",
      "what" : "assigned_to",
      "removed" : "nobody@mozilla.org",
      "added" : "jsantell@mozilla.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-23T20:47:20Z",
      "what" : "cc",
      "removed" : "",
      "added" : "vporof@mozilla.com"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-23T20:47:38Z",
      "what" : "blocks",
      "removed" : "",
      "added" : "1134046"
    }, {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-24T01:16:44Z",
      "what" : "keywords",
      "removed" : "",
      "added" : "checkin-needed"
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-24T15:31:59Z",
      "what" : "keywords",
      "removed" : "checkin-needed",
      "added" : ""
    }, {
      "name" : "ryanvm@gmail.com",
      "date" : "2015-02-24T15:31:59Z",
      "what" : "whiteboard",
      "removed" : "",
      "added" : "[fixed-in-fx-team]"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-24T23:44:06Z",
      "what" : "target_milestone",
      "removed" : "---",
      "added" : "Firefox 39"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-24T23:44:06Z",
      "what" : "whiteboard",
      "removed" : "[fixed-in-fx-team]",
      "added" : ""
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-24T23:44:06Z",
      "what" : "cf_last_resolved",
      "removed" : "",
      "added" : "2015-02-24 15:44:06"
    }, {
      "name" : "wkocher@mozilla.com",
      "date" : "2015-02-24T23:44:06Z",
      "what" : "cf_status_firefox39",
      "removed" : "---",
      "added" : "fixed"
    } ],
    "flagEvents" : [ {
      "name" : "jordan@jsantell.com",
      "date" : "2015-02-23T20:47:20Z",
      "what" : "flagtypes.name",
      "removed" : "",
      "added" : "",
      "attachmentId" : 8568121,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "REQUESTED"
      } ]
    }, {
      "name" : "vporof@mozilla.com",
      "date" : "2015-02-23T21:16:50Z",
      "what" : "flagtypes.name",
      "removed" : "review?(vporof@mozilla.com)",
      "added" : "",
      "attachmentId" : 8568121,
      "flags" : [ {
        "status" : "REVIEW",
        "state" : "GRANTED"
      } ]
    } ]
  },
  "resolution" : "FIXED",
  "id" : 1134079,
  "cclist" : [ "vporof@mozilla.com" ]
} ]